var _excluded = ["items"],
  _excluded2 = ["children", "className", "dark", "hasIcons", "items", "linkComponent", "listClassName", "navClassName"];
function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }
function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }
import React from "react";
import classNames from "classnames";
import SideNavigationItem from "./SideNavigationItem";
import { isReactNode } from "../../utils";
var generateItem = (item, index, linkComponent, dark) => {
  if (isReactNode(item)) {
    return /*#__PURE__*/React.createElement(SideNavigationItem, {
      key: index
    }, item);
  }
  if ("nonInteractive" in item) {
    var _item$dark;
    return /*#__PURE__*/React.createElement(SideNavigationItem, _extends({}, item, {
      dark: (_item$dark = item.dark) !== null && _item$dark !== void 0 ? _item$dark : dark,
      key: index
    }));
  }
  if ("children" in item) {
    return /*#__PURE__*/React.createElement(SideNavigationItem, _extends({
      key: index
    }, item));
  }
  if ("label" in item) {
    var _item$component, _item$dark2;
    return /*#__PURE__*/React.createElement(SideNavigationItem, _extends({
      component: (_item$component = item.component) !== null && _item$component !== void 0 ? _item$component : linkComponent,
      dark: (_item$dark2 = item.dark) !== null && _item$dark2 !== void 0 ? _item$dark2 : dark
    }, item, {
      key: index
    }));
  }
  return null;
};
var generateItems = (groups, listClassName, linkComponent, dark) => {
  return groups === null || groups === void 0 ? void 0 : groups.filter(Boolean).map((group, g) => {
    var items;
    var props = {};
    if (typeof group === "object" && "items" in group) {
      var _group = group;
      ({
        items
      } = _group);
      props = _objectWithoutProperties(_group, _excluded);
      _group;
    } else {
      items = group;
    }
    return /*#__PURE__*/React.createElement("ul", _extends({}, props, {
      className: classNames("p-side-navigation__list", listClassName, "className" in group ? group.className : null),
      key: g
    }), items.filter(Boolean).map((item, i) => generateItem(item, i, linkComponent, dark)));
  });
};
var getHasIcons = groups => groups === null || groups === void 0 ? void 0 : groups.some(group => {
  var _ref;
  return group && ((_ref = "items" in group ? group.items : group) === null || _ref === void 0 ? void 0 : _ref.some(item => isReactNode(item) ? false : item && "icon" in item && !!item.icon));
});

/**
 * This is a [React](https://reactjs.org/) component for side navigation, used
 * in the [Vanilla](https://vanillaframework.io/docs/) layouts.
 */
var SideNavigation = _ref2 => {
  var {
      children,
      className,
      dark,
      hasIcons,
      items,
      linkComponent,
      listClassName,
      navClassName
    } = _ref2,
    props = _objectWithoutProperties(_ref2, _excluded2);
  return /*#__PURE__*/React.createElement("div", _extends({
    className: classNames(className, {
      "p-side-navigation--icons": hasIcons || getHasIcons(items),
      "is-dark": dark
    })
  }, props), /*#__PURE__*/React.createElement("nav", {
    className: navClassName
  }, children !== null && children !== void 0 ? children : generateItems(items, listClassName, linkComponent, dark)));
};
export default SideNavigation;