import { createContext, useContext } from "react";
import React from "react";
export function createEventQueue() {
  var EventQueueContext = /*#__PURE__*/createContext(undefined);
  var eventQueue = new Map();
  var EventQueueProvider = _ref => {
    var {
      children
    } = _ref;
    return /*#__PURE__*/React.createElement(EventQueueContext.Provider, {
      value: {
        get: operationId => eventQueue.get(operationId),
        set: (operationId, onSuccess, onFailure, onFinish) => eventQueue.set(operationId, {
          onSuccess,
          onFailure,
          onFinish
        }),
        remove: operationId => eventQueue.delete(operationId)
      }
    }, children);
  };
  var useEventQueue = () => {
    var context = useContext(EventQueueContext);
    if (!context) {
      throw new Error("useEventQueue must be used within an EventQueueProvider");
    }
    return context;
  };
  return {
    EventQueueProvider,
    useEventQueue,
    EventQueueContext
  };
}