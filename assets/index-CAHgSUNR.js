import{W as p,b as x,X as m,a as _,r as j,Y as A,j as e,Z as E,L as f}from"./index-DHd_VY7f.js";const P="_container_1uszo_1",S={container:P},N=()=>{const[a]=p(),{redirectToExternalUrl:s,setAuthLoading:u,setUser:l}=x(),{getAuthStateWithOidcQuery:d}=m(),g=_(),n=a.get("code")??"",r=a.get("state")??"",{data:t,isLoading:h}=d({code:n,state:r},{enabled:!!n&&!!r});return j.useEffect(()=>{var i,o;if(!(!t||!("current_account"in t.data)))if((i=t.data.return_to)!=null&&i.external&&t.data.return_to.url)s(t.data.return_to.url,{replace:!0});else{u(!0),l(t.data);const c=new URL(((o=t.data.return_to)==null?void 0:o.url)??A,location.origin);g(c.toString().replace(c.origin,""),{replace:!0})}},[t,s]),e.jsx("div",{className:S.container,children:h?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:E}),e.jsx(f,{to:"/login",className:"p-button",children:"Back to login"})]})})};export{N as default};
