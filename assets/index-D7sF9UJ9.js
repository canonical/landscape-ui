import{V as d,I as S}from"./ScriptsTabs-DzUM9HiD.js";import{c as M,a as H,d as O,S as U,u as $,b as J}from"./ScriptsTabs-DzUM9HiD.js";import{B as f,C as x,o as b,F as g,j as i,d as r,G as a}from"./index-D0u57Pxb.js";import{S as h}from"./SidePanelFormButtons-D9Nkhm2q.js";import{u as y,D as F}from"./DeliveryBlock-BEK0D-s_.js";import"./index-uCGqKt_o.js";import{S as j}from"./ScriptDropdown-vq_X8F9b.js";import{default as Q}from"./index-8-Cei2P7.js";import"./useRoles-HG8FT5w2.js";import"./HeaderWithSearch-BzhfaGcz.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./useExpandableRow-DzAp8CLA.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";import"./downshift.esm-Dw-Q35CA.js";import"./CodeEditor-DoF3qJ-I.js";import"./ScriptFormAttachments-HNIOW0Iv.js";import"./AttachmentFile-BOHwI5PH.js";const L=({parentAccessGroup:o,query:n})=>{const u=f(),{notify:m}=x(),{closeSidePanel:p}=b(),{runScript:c}=y(),e=g({initialValues:S,validationSchema:d,onSubmit:async t=>{try{await c({deliver_after:t.deliverImmediately?void 0:t.deliver_after,query:n,script_id:t.script_id,username:t.username}),p(),m.success({message:`"${t.script?.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(s){u(s)}}}),l=async t=>{if(await e.setFieldValue("script_id",t?.id??0),!e.values.username){const s=t?.username??"";await e.setFieldValue("username",s)}};return i.jsxs(r.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[i.jsx(j,{script:e.values.script,setScript:async t=>{await e.setFieldValue("script",t),await l(t)},errorMessage:a(e,"script_id"),parentAccessGroup:o}),i.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...e.getFieldProps("username"),error:a(e,"username")})}),i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...e.getFieldProps("time_limit"),error:a(e,"time_limit")})})]}),i.jsx(F,{formik:e}),i.jsx(h,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Run script"})]})};export{Q as CreateScriptForm,L as RunInstanceScriptForm,j as ScriptDropdown,M as ScriptList,H as ScriptsContainer,O as ScriptsEmptyState,U as ScriptsTabs,$ as useGetScripts,J as useGetSingleScript};
