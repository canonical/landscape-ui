import{j as e,h as i,n as N,r as m,L as I,E as _,a as S,g as T,o as g}from"./index-P3tcVer_.js";import{E as k,e as v}from"./EmployeeGroupIdentityIssuerList-CmrEs8Tq.js";import{N as P}from"./NoData-DfvYDVkG.js";import{u as w,T as A}from"./TablePagination-9PvQlVgk.js";import{u as G}from"./usePageParams-CZXld3eS.js";import{u as L,E as M}from"./index-BPZPLC8O.js";import{u as F}from"./useGetEmployeeGroups-Q-iNezBO.js";import"./TableFilter-DTXx6h3i.js";import"./TableFilterChips-HMcdOmXT.js";import"./HeaderWithSearch-DCz7Mge8.js";import"./index-BbHeewcZ.js";import"./TruncatedCell-D_3fzDwd.js";import"./TablePaginationBase-DrquMGK2.js";const H="_container_86anj_1",O="_position_86anj_7",D="_chip_86anj_11",y={container:H,position:O,chip:D},Y=({fileName:o,isDefault:t,version:n})=>!o||!n?e.jsx(P,{}):e.jsxs("div",{className:y.container,children:[e.jsxs("span",{children:[o,", v",n]}),t&&e.jsx(i.Tooltip,{position:"top-center",positionElementClassName:y.position,message:"This group will inherit default Autoinstall file since none has been assigned.",children:e.jsx("span",{className:N("p-chip is-dense u-no-margin--bottom",y.chip),children:e.jsx("span",{className:"p-chip__value",children:"default"})})})]}),R="_actions_y6bfd_1",$="_link_y6bfd_9",f={actions:R,link:$},B=()=>({column:o})=>{const t={};return o.id==="name"?t.role="rowheader":o.id==="employees"?t["aria-label"]="Checkbox":o.id==="employee_count"?t["aria-label"]="Associated employees":o.id==="autoinstall_file.filename"?t["aria-label"]="Autoinstall file":o.id==="priority"?t["aria-label"]="Priority":o.id==="actions"&&(t["aria-label"]="Actions"),t},U=({onSelectedEmployeeGroupsChange:o,selectedEmployeeGroups:t,employeeGroups:n})=>{const a=m.useMemo(()=>n,[n]),r=s=>{o(t.includes(s)?t.filter(l=>l!==s):[...t,s])};w("employeeGroups",n.map(({id:s})=>s.toString()));const c=m.useMemo(()=>[{accessor:"employees",className:"checkbox-column",Header:()=>e.jsx(i.CheckboxInput,{inline:!0,label:e.jsx("span",{className:"u-off-screen",children:"Toggle all employee groups"}),disabled:a.length===0,indeterminate:t.length>0&&t.length<n.length,checked:t.length>0&&t.length===n.length,onChange:()=>{o(t.length>0?[]:n.map(({id:s})=>s))}}),Cell:({row:{original:s}})=>e.jsx(i.CheckboxInput,{labelClassName:"u-no-margin--bottom u-no-padding--top",label:e.jsx("span",{className:"u-off-screen",children:`Toggle ${s.name}`}),name:"employee-group-checkbox",checked:t.includes(s.id),onChange:()=>{r(s.id)}})},{accessor:"name",Header:"name",Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:s.name})},{accessor:"employee_count",Header:"employees",Cell:({row:{original:s}})=>s.employee_count?e.jsx(I,{to:`/settings/employees?tab=employees&employeeGroups=${s.id}`,className:f.link,children:s.employee_count}):e.jsx(e.Fragment,{children:"0"})},{accessor:"autoinstall_file.filename",Header:"assigned autoinstall file",Cell:({row:{original:s}})=>{var l,p,u;return e.jsx(Y,{fileName:(l=s.autoinstall_file)==null?void 0:l.filename,isDefault:(p=s.autoinstall_file)==null?void 0:p.is_default,version:(u=s.autoinstall_file)==null?void 0:u.version})}},{accessor:"priority",Header:"priority",Cell:({row:s})=>e.jsx(e.Fragment,{children:s.original.priority||"N/A"})},{accessor:"actions",className:f.actions,Header:"actions",Cell:({row:{original:s}})=>e.jsx(k,{employeeGroup:s})}],[a,t]);return e.jsx(i.ModularTable,{columns:c,data:a,getCellProps:B(),emptyMsg:"No employee groups found"})},x={title:"You don't have any Employee groups imported yet",body:"Import Employee groups to assign Autoinstall files and streamline employees' instance  setup process. Employee information will be fetched from your organization's Identity providers."},j={title:"You need to set up a supported identity provider to import Employees groups",body:"To import Employee Groups, you must set up a supported Identity Provider with a service account that authenticates using short-lived credentials or a signed JWT for access tokens."},z=({handleImportEmployeeGroups:o})=>e.jsx(_,{title:x.title,body:x.body,cta:[e.jsxs(i.Button,{appearance:"positive",className:"p-segmented-control__button",hasIcon:!0,onClick:o,children:[e.jsx(i.Icon,{name:i.ICONS.plus,light:!0}),e.jsx("span",{children:"Import employee groups"})]},"import-employee-groups")]}),J=()=>{const o=S();return e.jsx(_,{title:j.title,body:j.body,cta:[e.jsxs(i.Button,{appearance:"positive",className:"p-segmented-control__button",hasIcon:!0,onClick:async()=>o("/settings/identity-providers"),children:[e.jsx(i.Icon,{name:i.ICONS.plus,light:!0}),e.jsx("span",{children:"Add identity provider"})]},"import-employee-groups")]})},ae=()=>{const{search:o,autoinstallFiles:t}=G(),[n,a]=m.useState([]),{employeeGroups:r,employeeGroupsCount:c,isEmployeeGroupsLoading:s}=F({with_autoinstall_file:!0,with_employee_count:!0}),{oidcDirectoryIssuers:l,isOidcIssuersLoading:p}=L(),{setSidePanelContent:u}=T(),b=()=>{u("Choose an identity issuer",e.jsx(m.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(M,{})}))},d=s||p,C=!d&&l.length===0,E=!d&&c===0&&!o&&!t.length;return d&&!o&&!t.length?e.jsx(g,{}):C?e.jsx(J,{}):E?e.jsx(z,{handleImportEmployeeGroups:b}):e.jsxs(e.Fragment,{children:[e.jsx(v,{selectedEmployeeGroups:n,employeeGroups:r,setSelectedEmployeeGroups:h=>{a(h)}}),s?e.jsx(g,{}):e.jsxs(e.Fragment,{children:[e.jsx(U,{employeeGroups:r,onSelectedEmployeeGroupsChange:h=>{a(h)},selectedEmployeeGroups:n}),e.jsx(A,{totalItems:c,currentItemCount:r.length})]})]})};export{ae as default};
