const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C4UzQG3D.js","assets/index-C_124pJU.js","assets/index-tBQFzVrl.css","assets/AssociationBlock-B2Y9-Ews.js","assets/MultiSelectField-L3cyb9za.js","assets/MultiSelectField-GyNA33om.css","assets/useInstances-CVi06Npj.js","assets/AssociationBlock-DQBJa-xL.css","assets/SidePanelFormButtons-DT43jWWI.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/constants-dW6629jA.js","assets/useRoles-0dpndk5R.js","assets/index-js_8cldS.css","assets/index-BHeKE-N9.js","assets/PageMain-Bw-26RLl.js","assets/PageMain--v5xNZ5p.css","assets/HeaderWithSearch-Da2YdPIG.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/index-_v2C-3Y0.css"])))=>i.map(i=>d[i]);
import{f as b,e as v,g as x,h as C,y as S,z as E,l as f,ag as F,j as e,al as A,a2 as L,r as o,o as p,_ as m,c as T,ac as O,m as g,N as R,E as k,ak as w}from"./index-C_124pJU.js";import{P as M,a as Q,b as D}from"./PageMain-Bw-26RLl.js";import{u as N}from"./useRoles-0dpndk5R.js";import{H}from"./HeaderWithSearch-Da2YdPIG.js";function y(){const t=b(),a=v(),n=x({mutationFn:async r=>a.get("CreateUpgradeProfile",{params:r}),onSuccess:async()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})}),u=x({mutationFn:async r=>a.get("EditUpgradeProfile",{params:r}),onSuccess:async()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})}),i=x({mutationFn:async r=>a.get("RemoveUpgradeProfile",{params:r}),onSuccess:async()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})});return{createUpgradeProfileQuery:n,editUpgradeProfileQuery:u,removeUpgradeProfileQuery:i,getUpgradeProfilesQuery:(r={},d={})=>C({queryKey:["upgradeProfiles",r],queryFn:async()=>a.get("GetUpgradeProfiles",{params:r}),...d})}}const $=o.lazy(async()=>m(()=>import("./index-C4UzQG3D.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),B=({profile:t})=>{const a=S(),{notify:n}=E(),{setSidePanelContent:u}=f(),{removeUpgradeProfileQuery:i}=y(),{value:l,setTrue:r,setFalse:d}=F(),{mutateAsync:P,isPending:s}=i,c=async()=>{try{await P({name:t.name}),d(),n.success({message:`Upgrade profile "${t.title}" removed successfully`,title:"Upgrade profile removed"})}catch(U){a(U)}},h=()=>{u(`Edit "${t.title}" profile`,e.jsx(o.Suspense,{fallback:e.jsx(p,{}),children:e.jsx($,{action:"edit",profile:t})}))},j=[{icon:"edit",label:"Edit","aria-label":`Edit "${t.title}" profile`,onClick:h}],_=[{icon:"delete",label:"Remove","aria-label":`Remove "${t.title}" upgrade profile`,onClick:r}];return e.jsxs(e.Fragment,{children:[e.jsx(A,{toggleAriaLabel:`${t.title} profile actions`,actions:j,destructiveActions:_}),e.jsx(L,{isOpen:l,confirmationText:`remove ${t.name}`,title:"Remove upgrade profile",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:s,confirmButtonLoading:s,onConfirm:c,close:d,children:e.jsxs("p",{children:['This will remove "',t.title,'" profile. This action is'," ",e.jsx("b",{children:"irreversible"}),"."]})})]})},q="_truncated_1799b_1",z={truncated:q},I=o.lazy(async()=>m(()=>import("./index-BHeKE-N9.js"),__vite__mapDeps([14,1,2,11,15,16,12,17,18,19]))),K=({profiles:t})=>{const{search:a}=T(),{setSidePanelContent:n}=f(),{getAccessGroupQuery:u}=N(),{data:i}=u(),l=(i==null?void 0:i.data.map(({name:s,title:c})=>({label:c,value:s})))??[],r=o.useMemo(()=>a?t.filter(s=>s.title.toLowerCase().includes(a.toLowerCase())):t,[t,a]),d=s=>{n(s.title,e.jsx(o.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(I,{accessGroupOptions:l,profile:s})}))},P=o.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:s}})=>e.jsx(g.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>{d(s)},children:s.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:s}})=>{var c;return e.jsx(e.Fragment,{children:((c=l.find(({value:h})=>h===s.access_group))==null?void 0:c.label)??s.access_group})}},{accessor:"tags",className:z.truncated,Header:"Tags",Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:s.tags.length>0?s.tags.join(", "):e.jsx(R,{})})},{accessor:"associated",Header:"Associated"},{...O,Cell:({row:{original:s}})=>e.jsx(B,{profile:s})}],[r,l.length]);return e.jsx(g.ModularTable,{columns:P,data:r,emptyMsg:`No upgrade profiles found with the search: "${a}"`})},V=o.lazy(()=>m(()=>import("./index-C4UzQG3D.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),G=()=>{const{setSidePanelContent:t}=f(),a=()=>{t("Add upgrade profile",e.jsx(o.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(V,{action:"add"})}))};return e.jsx(k,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(g.Button,{appearance:"positive",onClick:a,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],title:"No upgrade profiles found"})},W=()=>e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(w,{filtersToDisplay:["search"]})]}),Y=()=>{const{getUpgradeProfilesQuery:t}=y(),{data:a,isLoading:n}=t();return e.jsxs(e.Fragment,{children:[n&&e.jsx(p,{}),!n&&(!a||!a.data.length)&&e.jsx(G,{}),!n&&a&&a.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(K,{profiles:a.data})]})]})},J=o.lazy(()=>m(()=>import("./index-C4UzQG3D.js").then(t=>t.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(t=>({default:t.SingleUpgradeProfileForm}))),X=()=>{const{setSidePanelContent:t}=f(),a=()=>{t("Add upgrade profile",e.jsx(o.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(J,{action:"add"})}))};return e.jsxs(M,{children:[e.jsx(Q,{title:"Upgrade profiles",actions:[e.jsx(g.Button,{type:"button",appearance:"positive",onClick:a,children:"Add upgrade profile"},"add")]}),e.jsx(D,{children:e.jsx(Y,{})})]})},se=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{K as U,G as a,W as b,se as i,y as u};
