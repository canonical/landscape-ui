import{j as e,g as h,r as g,m as L,L as Z,D as q,b as W,c as $,d as Y,p as M,q as Q,s as J,h as X,k as ee,U as se,n as G,a1 as te}from"./index-BRihK9aF.js";import{P as ne,a as ae,b as re}from"./PageMain-BoWGNkz2.js";import{u as N,T as oe}from"./TablePagination-5Vy8vn_p.js";import{N as w}from"./NoData-UXVxwgLt.js";import{u as _,h as F}from"./usePageParams-iyOWMaH2.js";import{d as ie,h as ce,a as le}from"./helpers-CW7le698.js";import{S as f,F as k,P as de,I as ue}from"./InstancesPageActions-YF2GfOgJ.js";import{T as B}from"./TableFilter-BXUu-Qwz.js";import{G as he}from"./GroupFilter-dAV9ees-.js";import{S as pe}from"./StatusFilter-BGKMvabJ.js";import{T as me}from"./TableFilterChips-BIIQiaEm.js";import{S as ge}from"./index-ClUtLbQ0.js";import{u as xe}from"./useFetchOld-CpP6IFJx.js";import{u as V}from"./useInstances-Dxj3odhP.js";import{u as fe}from"./useRoles-BaBAheRf.js";import"./TablePaginationBase-BoGPMhhk.js";const je="_rowHeader_spblf_5",be="_nested_spblf_8",Se="_statusListItem_spblf_20",_e="_statusContainer_spblf_24",T={rowHeader:je,nested:be,statusListItem:Se,statusContainer:_e},ve=t=>t.map(({accessor:s,canBeHidden:n,optionLabel:a})=>({canBeHidden:n,label:a,value:s})),E=({groupBy:t,instance:s,selectedInstances:n})=>{const a=n.map(({id:r})=>r);return t==="parent"&&!s.is_wsl_instance&&s.children.length>0?s.children.every(({id:r})=>a.includes(r))?"checked":s.children.some(({id:r})=>a.includes(r))?"indeterminate":"unchecked":a.includes(s.id)?"checked":"unchecked"},ye=({groupBy:t,instance:s,selectedInstances:n,setSelectedInstances:a})=>{if(t==="parent"&&s.children.length>0){const r=s.children.map(({id:i})=>i);n.some(({id:i})=>r.includes(i))?a(n.filter(({id:i})=>!r.includes(i))):a([...n,...s.children.map(i=>({...i,parent:s,children:[]}))])}else n.some(({id:r})=>r===s.id)?a(n.filter(({id:r})=>r!==s.id)):a([...n,s])},U=t=>{const s=((t==null?void 0:t.alerts)??[]).filter(({type:n})=>!["PackageUpgradesAlert","SecurityUpgradesAlert"].includes(n));return s.length===0?{icon:`${f.Online.icon.color}`,label:f.Online.alternateLabel??f.Online.label}:s.length===1?{icon:`${f[s[0].type].icon.color??f.Unknown.icon.color}`,label:e.jsx(e.Fragment,{children:s[0].summary})}:{label:e.jsx("span",{className:T.statusContainer,children:s.map(({type:n,summary:a})=>{var r;return e.jsx("span",{className:T.statusListItem,children:e.jsx(h.Tooltip,{message:a,children:e.jsx(h.Icon,{className:"u-no-margin--left",name:`${((r=f[n])==null?void 0:r.icon.color)??f.Unknown.icon.color}`})})},n)})})}},Ce=t=>({regular:le(t)?{icon:f.PackageUpgradesAlert.icon.color??"",label:f.PackageUpgradesAlert.label}:!1,security:ce(t)?{icon:f.SecurityUpgradesAlert.icon.color??"",label:f.SecurityUpgradesAlert.label}:!1}),D=t=>{if(!ie("ubuntu",t))return{icon:"",label:e.jsx(w,{})};const{regular:s,security:n}=Ce(t.alerts);return s&&n?{icon:n.icon,label:`${s.label}, ${n.label.toLowerCase()}`}:s?{icon:s.icon,label:s.label}:n?{icon:n.icon,label:n.label}:{icon:f.UpToDate.icon.color,label:f.UpToDate.label}},Ie=({id:t})=>{const s={};return t==="title"&&(s["aria-labelledby"]="column-1-label"),s},we=({instances:t,selectedInstances:s,setColumnFilterOptions:n,setSelectedInstances:a})=>{const{disabledColumns:r,groupBy:i,...c}=_(),d=Object.values(c).some(o=>{if(typeof o=="string")return o.length>0;if(Array.isArray(o))return o.length>0}),p=()=>{a(s.length!==0?[]:t)},l=g.useMemo(()=>i==="parent"?t.map(o=>({...o,subRows:o.children.map(u=>({...u,parent:o,children:[]}))})):t,[t,i]),x=g.useMemo(()=>[{accessor:"title",canBeHidden:!1,optionLabel:"Instance name",Header:e.jsxs(e.Fragment,{children:[e.jsx(h.CheckboxInput,{label:e.jsx("span",{className:"u-off-screen",children:"Toggle all instances"}),inline:!0,onChange:p,disabled:t.length===0,checked:s.length===t.length&&t.length!==0,indeterminate:s.length!==0&&s.length<t.length}),e.jsx("span",{id:"column-1-label",children:"Name"})]}),Cell:({row:o})=>e.jsxs("div",{className:L(T.rowHeader,{[T.nested]:o.depth>0}),children:[e.jsx(h.CheckboxInput,{label:e.jsx("span",{className:"u-off-screen",children:o.original.title}),labelClassName:"u-no-margin--bottom u-no-padding--top",checked:E({groupBy:i,instance:o.original,selectedInstances:s})==="checked",indeterminate:E({groupBy:i,instance:o.original,selectedInstances:s})==="indeterminate",onChange:()=>{ye({groupBy:i,instance:o.original,selectedInstances:s,setSelectedInstances:a})}}),e.jsx(Z,{to:o.original.parent?`/instances/${o.original.parent.id}/${o.original.id}`:`/instances/${o.original.id}`,children:o.original.title})]})},{accessor:"status",canBeHidden:!0,optionLabel:"Status",Header:"Status",Cell:({row:{original:o}})=>{const{label:u}=U(o);return u},getCellIcon:({row:{original:o}})=>{const{icon:u}=U(o);return u}},{accessor:"upgrades",canBeHidden:!0,optionLabel:"Upgrades",Header:"Upgrades",Cell:({row:{original:o}})=>{const{label:u}=D(o);return u},getCellIcon:({row:{original:o}})=>{const{icon:u}=D(o);return u}},{accessor:"os",canBeHidden:!0,optionLabel:"OS",Header:"OS",Cell:({row:{original:o}})=>{var u;return e.jsx(e.Fragment,{children:((u=o.distribution_info)==null?void 0:u.description)??e.jsx(w,{})})}},{accessor:"availability_zone",canBeHidden:!0,optionLabel:"Availability zone",Header:"Availability zone",Cell:({row:{original:o}})=>{var u;return e.jsx(e.Fragment,{children:((u=o.cloud_init)==null?void 0:u.availability_zone)??e.jsx(w,{})})}},{accessor:"ubuntu_pro",canBeHidden:!0,optionLabel:"Ubuntu pro",Header:"Ubuntu pro",Cell:({row:o})=>e.jsx(e.Fragment,{children:o.original.ubuntu_pro_info&&F(o.original.ubuntu_pro_info.expires).isValid()?`Exp. ${F(o.original.ubuntu_pro_info.expires).format(q)}`:e.jsx(w,{})})},{accessor:"last_ping",canBeHidden:!0,optionLabel:"Last ping",Header:"Last ping time",Cell:({row:o})=>e.jsx(e.Fragment,{children:F(o.original.last_ping_time).isValid()?F(o.original.last_ping_time).format(q):e.jsx(w,{})})}],[s.length,t,i]);g.useEffect(()=>{n(ve(x))},[]);const m=g.useMemo(()=>x.filter(({accessor:o})=>typeof o=="string"&&!r.includes(o)),[r.length,x]);return e.jsx(h.ModularTable,{emptyMsg:d?"No instances found according to your search parameters.":"No instances found",columns:m,data:l,getHeaderProps:Ie})},ke="_label_1i8qt_1",Ne={label:ke},Be=({options:t})=>{const{disabledColumns:s,setPageParams:n}=_(),a=r=>t.filter(({value:i})=>!r.includes(i)).map(({value:i})=>i);return N("disabledColumns",t.filter(r=>r.canBeHidden).map(r=>r.value)),e.jsx(B,{multiple:!0,showSelectedItemCount:!0,label:e.jsxs(e.Fragment,{children:[e.jsx(h.Icon,{name:"settings"}),e.jsx("span",{className:Ne.label,children:"Columns"})]}),onItemsSelect:r=>n({disabledColumns:a(r)}),options:t,disabledOptions:t.filter(({canBeHidden:r})=>!r),selectedItems:a(s)})},H=()=>{const t=xe(),s=W(),n=(c={},d={})=>Y({queryKey:["savedSearches",c],queryFn:()=>t.get("GetSavedSearches",{params:c}),...d}),a=$({mutationFn:c=>t.get("CreateSavedSearch",{params:c}),onSuccess:()=>s.invalidateQueries({queryKey:["savedSearches"]})}),r=$({mutationFn:c=>t.get("EditSavedSearch",{params:c}),onSuccess:()=>s.invalidateQueries({queryKey:["savedSearches"]})}),i=$({mutationFn:c=>t.get("RemoveSavedSearch",{params:c}),onSuccess:()=>s.invalidateQueries({queryKey:["savedSearches"]})});return{getSavedSearchesQuery:n,createSavedSearchQuery:a,editSavedSearchQuery:r,removeSavedSearchQuery:i}},Fe="_container_5hvuq_1",Pe="_list_5hvuq_6",Le="_listItem_5hvuq_11",Te="_search_5hvuq_17",$e="_row_5hvuq_25",Ae="_truncated_5hvuq_33",v={container:Fe,list:Pe,listItem:Le,search:Te,row:$e,truncated:Ae},Oe=({onSavedSearchClick:t,onSavedSearchRemove:s,savedSearches:n})=>{if(!n.length)return null;const a=M(),{notify:r}=Q(),{removeSavedSearchQuery:i}=H(),{mutateAsync:c,isPending:d}=i,p=async l=>{try{await c({name:l}),s(),r.success({message:`Saved search ${l} successfully removed`,title:"Saved search removed"})}catch(x){a(x)}};return e.jsxs("div",{className:v.container,children:[e.jsx("p",{className:"p-text--small-caps u-text--muted p-text--small",children:"Saved searches"}),e.jsx("ul",{className:L("p-list--divided u-no-margin--bottom",v.list),children:n.map(l=>e.jsx("li",{children:e.jsxs("div",{className:v.listItem,children:[e.jsx(h.Button,{type:"button",appearance:"base",className:v.search,onClick:()=>t(l),children:e.jsxs(h.Row,{className:v.row,children:[e.jsx(h.Col,{size:4,children:e.jsx(h.Tooltip,{message:l.name,positionElementClassName:v.truncated,children:e.jsx("span",{children:l.name})})}),e.jsx(h.Col,{size:8,children:e.jsx(h.Tooltip,{message:l.search,positionElementClassName:v.truncated,children:e.jsx("span",{children:l.search})})})]})}),e.jsx(h.ConfirmationButton,{className:"has-icon u-no-margin--bottom u-no-padding--bottom u-no-padding--top",type:"button",appearance:"base",confirmationModalProps:{title:"Remove saved search",children:e.jsxs("p",{children:['This will remove the saved search "',l.name,'".']}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:d,confirmButtonLoading:d,onConfirm:()=>p(l.name)},children:e.jsx(h.Icon,{name:"delete"})})]})},l.name))})]})},He="_infoContainer_zti77_1",qe="_helpButtonContainer_zti77_9",Ee="_helpButton_zti77_9",A={infoContainer:He,helpButtonContainer:qe,helpButton:Ee},Ue=({onHelpButtonClick:t})=>e.jsx("div",{className:A.infoContainer,children:e.jsx("div",{className:A.helpButtonContainer,children:e.jsx(h.Button,{type:"button",appearance:"base",hasIcon:!0,className:A.helpButton,onClick:s=>{s.stopPropagation(),t()},children:e.jsx(h.Icon,{name:h.ICONS.help})})})}),De=({onClose:t,onSearchSave:s,search:n})=>{const a=M(),{notify:r}=Q(),{createSavedSearchQuery:i}=H(),{mutateAsync:c}=i,p=J({initialValues:{name:""},onSubmit:async({name:l})=>{try{await c({search:n,name:l,title:l}),r.success({message:`Saved search ${l} successfully added`,title:"Saved search added"}),s(),t()}catch(x){a(x)}},validationSchema:X({name:ee().required("This field is required").test({message:"Name must consist of only lowercase alphanumeric characters and hyphens",test:l=>/^[a-z0-9][-a-z0-9]*$/.test(l)})})});return e.jsxs(h.Form,{onSubmit:p.handleSubmit,noValidate:!0,children:[e.jsx(h.Input,{type:"text",autoComplete:"off",autoFocus:!0,label:"Search name",...p.getFieldProps("name"),error:p.touched.name&&p.errors.name?p.errors.name:void 0}),e.jsxs("div",{className:"form-buttons",children:[e.jsx(h.Button,{type:"button",disabled:p.isSubmitting,onClick:t,children:"Cancel"}),e.jsx(h.Button,{type:"submit",disabled:p.isSubmitting,appearance:"positive","aria-label":`Saved search as ${p.values.name}`,children:"Save search"})]})]})},Re="_container_fqj7b_1",ze="_prompt_fqj7b_10",Me="_saveButton_fqj7b_17",O={container:Re,prompt:ze,saveButton:Me},Qe=({onSearchSave:t,search:s})=>{const[n,a]=g.useState(!1);return e.jsxs(e.Fragment,{children:[s&&n&&e.jsx(De,{onClose:()=>a(!1),onSearchSave:t,search:s}),s&&!n&&e.jsxs("div",{className:O.container,children:[e.jsxs("span",{className:O.prompt,children:[e.jsx("span",{children:"Search for "}),e.jsx("span",{className:"p-search-and-filter__search-query",children:s}),e.jsx("span",{children:"..."})]}),e.jsx(h.Button,{type:"button",appearance:"link",onClick:()=>a(!0),className:O.saveButton,children:"Save search"})]})]})},Ge="_searchContainer_t00ki_1",Ve="_form_t00ki_8",Ke="_searchBoxContainer_t00ki_13",Ze="_input_t00ki_17",P={searchContainer:Ge,form:Ve,searchBoxContainer:Ke,input:Ze},R=({inputText:t,savedSearches:s,search:n})=>{if(!s)return[];let a=s;if(n){const r=n.split(",").filter(Boolean);a=a.filter(({name:i})=>r.every(c=>c!==`search:${i}`))}return t&&(a=a.filter(({name:r,search:i})=>r.toLowerCase()!==t.trim().toLowerCase()&&i.toLowerCase()!==t.trim().toLowerCase())),a},We=({onHelpButtonClick:t})=>{const{query:s,setPageParams:n}=_(),[a,r]=g.useState(""),[i,c]=g.useState(!1),{getSavedSearchesQuery:d}=H(),p=g.useRef(null),l=g.useRef(null);se(p,j=>{const S=document.querySelector(".p-modal");S&&S.contains(j.target)||c(!1)});const{data:m,isLoading:o}=d(),u=g.useMemo(()=>R({inputText:a,savedSearches:m==null?void 0:m.data,search:s}),[m,a,s]),y=()=>{if(!a)return;const S=R({inputText:"",savedSearches:m==null?void 0:m.data,search:s}).some(({name:K})=>K.toLowerCase()===a.trim().toLowerCase())?"search:":"";n({query:s?`${s},${S}${a}`:`${S}${a}`}),r("")},b=j=>{n({query:s?`${s},search:${j.name}`:`search:${j.name}`})},C=j=>{const{key:S}=j;i?(S==="Escape"&&c(!1),S==="Enter"&&y()):S==="Enter"&&c(!0)};return e.jsxs("div",{className:"p-search-and-filter",ref:p,children:[e.jsxs("div",{className:L("p-search-and-filter__search-container",P.searchContainer),"aria-expanded":i,ref:l,onClick:()=>c(!0),children:[e.jsx(h.Form,{onSubmit:j=>{j.preventDefault(),y()},className:L("p-search-and-filter__box",P.form),children:e.jsx("div",{className:P.searchBoxContainer,children:e.jsx(h.SearchBox,{externallyControlled:!0,shouldRefocusAfterReset:!0,autocomplete:"off",className:P.input,value:a,onChange:j=>r(j),onClear:()=>r(""),onSearch:y,onClick:()=>c(!0),onKeyUp:C})})}),e.jsx(Ue,{onHelpButtonClick:t})]}),i&&o&&e.jsx(G,{}),i&&!o&&e.jsxs("div",{className:"p-search-and-filter__panel",children:[e.jsx(Qe,{onSearchSave:()=>r(""),search:a.trim()}),e.jsx(Oe,{onSavedSearchClick:b,onSavedSearchRemove:()=>c(!0),savedSearches:u})]})]})},Ye=({options:t})=>{const{accessGroups:s,setPageParams:n}=_();return N("accessGroups",t.map(a=>a.value)),e.jsx(B,{multiple:!0,label:"Access group",hasToggleIcon:!0,hasBadge:!0,options:t,onItemsSelect:a=>n({accessGroups:a}),selectedItems:s})},Je=({options:t})=>{const[s,n]=g.useState(""),{availabilityZones:a,setPageParams:r}=_(),i=t.length>9&&s?t.filter(({value:d})=>d!=="none"&&d.includes(s)):t;N("availabilityZones",i.map(d=>d.value));const c=d=>{d[d.length-1]==="none"?r({availabilityZones:["none"]}):r({availabilityZones:d[0]!=="none"?d:d.filter(p=>p!=="none")})};return e.jsx(B,{multiple:!0,label:"Availability zone",hasToggleIcon:!0,hasBadge:!0,onSearch:t.length>9?d=>n(d):void 0,options:i,onItemsSelect:c,selectedItems:a})},Xe=({options:t})=>{const{os:s,setPageParams:n}=_();return N("os",t.map(a=>a.value)),e.jsx(B,{multiple:!1,hasBadge:!0,label:"OS",hasToggleIcon:!0,options:t,onItemSelect:a=>n({os:a}),selectedItem:s})},es=({options:t})=>{const[s,n]=g.useState(""),{tags:a,setPageParams:r}=_(),i=t.filter(({value:c})=>c.includes(s));return N("tags",i.map(c=>c.value)),e.jsx(B,{multiple:!0,label:"Tag",hasToggleIcon:!0,hasBadge:!0,options:i,onItemsSelect:c=>r({tags:c}),onSearch:c=>n(c),selectedItems:a})},ss=[{term:"<keyword>",description:e.jsxs("span",{children:["Instances with the title or hostname ",e.jsx("code",{children:"<keyword>"})]})},{term:"distribution:<keyword>",description:e.jsxs("span",{children:["Instances with the installed distribution named"," ",e.jsx("code",{children:"<keyword>"})]})},{term:"needs:reboot",description:"Instances needing a reboot"},{term:"alert:<type>",description:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Instances with outstanding alerts of the specified"," ",e.jsx("code",{children:"<type>"})]}),e.jsx("br",{}),e.jsxs("span",{children:[e.jsx("code",{children:"<type>"})," can be ",e.jsx("code",{children:"package-upgrades"}),","," ",e.jsx("code",{children:"security-upgrades"}),",",e.jsx("code",{children:"package-profiles"}),","," ",e.jsx("code",{children:"package-reporter"}),", ",e.jsx("code",{children:"esm-disabled"}),","," ",e.jsx("code",{children:"computer-offline"}),",",e.jsx("code",{children:"computer-reboot"}),","," ",e.jsx("code",{children:"computer-duplicates"}),", ",e.jsx("code",{children:"unapproved-activities"}),"."]})]})},{term:"ip:<address>",description:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Instances with IP addresses like ",e.jsx("code",{children:"<address>"})]}),e.jsx("br",{}),e.jsxs("span",{children:[e.jsx("code",{children:"<address>"})," can be a fragment or partial IP address representing a subnet such as 91.185.94 to match any instances in the subnet."]})]})},{term:"mac:<address>",description:e.jsxs("span",{children:["Instances with the MAC address ",e.jsx("code",{children:"<address>"})]})},{term:"id:<instance_id>",description:e.jsxs("span",{children:["Instance with the id ",e.jsx("code",{children:"<instance_id>"})]})},{term:"access-group:<name>",description:e.jsxs("span",{children:["Instances associated with the ",e.jsx("code",{children:"<name>"})," access group"]})},{term:"search:<name>",description:e.jsxs("span",{children:["Instances meeting the terms of the ",e.jsx("code",{children:"<name>"})," saved search"]})},{term:"upgrade-profile:<name>",description:e.jsxs("span",{children:["Instances associated with the ",e.jsx("code",{children:"<name>"})," upgrade profile"]})},{term:"removal-profile:<name>",description:e.jsxs("span",{children:["Instances associated with the ",e.jsx("code",{children:"<name>"})," removal profile"]})},{term:"tag:<keyword>",description:e.jsxs("span",{children:["Instances associated with the ",e.jsx("code",{children:"<keyword>"})," tag"]})},{term:"hostname:<keyword>",description:e.jsxs("span",{children:["Instance with the hostname ",e.jsx("code",{children:"<keyword>"})]})},{term:"title:<keyword>",description:e.jsxs("span",{children:["Instance with the title ",e.jsx("code",{children:"<keyword>"})]})},{term:"license-id:<license_id>",description:e.jsxs("span",{children:["Search for instances licensed to the specified"," ",e.jsx("code",{children:"<license_id>"})]})},{term:"needs:license OR license-id:none",description:"Search for instances that do not have a Landscape license, and, as a result, are not managed"},{term:"annotation:<key>",description:e.jsxs("span",{children:["Search for instances which define the specified annotation key. Optionally specify ",e.jsx("code",{children:"annotation:<key>:<string>"})," ","which will only return instances whose key matches and value also contains the ",e.jsx("code",{children:"<string>"})," specified"]})}],ts="_top_unlra_1",ns="_searchContainer_unlra_13",as="_filters_unlra_17",rs="_divider_unlra_22",I={top:ts,searchContainer:ns,filters:as,divider:rs},os=({columnFilterOptions:t})=>{const[s,n]=g.useState(!1),{getAccessGroupQuery:a}=fe(),{getAllInstanceTagsQuery:r,getAvailabilityZonesQuery:i}=V(),{data:c}=r(),d=(c==null?void 0:c.data.results.map(b=>({label:b,value:b})))??[],{data:p}=i(),l=((p==null?void 0:p.data.values)??[]).reduce((b,C)=>(b.push({label:C,value:C}),b),[{label:"Without zones",value:"none",group:"1"}]),{data:x}=a(),m=(x==null?void 0:x.data.map(({name:b,title:C})=>({value:b,label:C})))??[],o=k.groupBy.options,u=k.status.options,y=k.os.options;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.top,children:[e.jsx("div",{className:I.searchContainer,children:e.jsx(We,{onHelpButtonClick:()=>n(!0)})}),e.jsxs("div",{className:I.filters,children:[e.jsx(he,{options:o}),e.jsx("span",{className:I.divider}),e.jsx(pe,{options:u}),e.jsx(Xe,{options:y}),e.jsx(Je,{options:l}),e.jsx(Ye,{options:m}),e.jsx(es,{options:d}),e.jsx("span",{className:I.divider}),e.jsx(Be,{options:t})]})]}),e.jsx(me,{filtersToDisplay:["accessGroups","os","availabilityZones","status","tags","query"],accessGroupOptions:m,availabilityZonesOptions:l,osOptions:y,statusOptions:u,tagOptions:d}),e.jsx(ge,{open:s,data:ss,onClose:()=>n(!1)}),e.jsx(de,{})]})},z=(t,s)=>{var n;return t.type==="select"?((n=t.options.find(a=>a.value===s))==null?void 0:n.query)??"":""},is=({accessGroups:t,availabilityZones:s,os:n,query:a,status:r,tags:i})=>{const c=[];return n&&c.push(z(k.os,n)),r&&c.push(z(k.status,r)),a&&c.push(...a.split(",")),i.length&&c.push(`tag:${i.join(" OR tag:")}`),t.length&&c.push(`access-group:${t.join(" OR access-group:")}`),s.length&&c.push(s.includes("none")?"availability-zone:null":`availability-zone:${s.join(" OR availability-zone:")}`),c.join(" ")},cs=({selectedInstances:t,setSelectedInstances:s})=>{const[n,a]=g.useState([]),{currentPage:r,pageSize:i,groupBy:c,...d}=_(),{getInstancesQuery:p}=V(),{data:l,isLoading:x}=p({query:is(d),root_only:c==="parent",with_alerts:!0,with_upgrades:te,limit:i,offset:(r-1)*i}),m=(l==null?void 0:l.data.results)??[],o=()=>{s([])};return e.jsxs(e.Fragment,{children:[e.jsx(os,{columnFilterOptions:n}),x?e.jsx(G,{}):e.jsx(we,{instances:m,selectedInstances:t,setColumnFilterOptions:u=>a(u),setSelectedInstances:u=>s(u)}),e.jsx(oe,{totalItems:l==null?void 0:l.data.count,handleClearSelection:o,currentItemCount:m.length})]})},ls="_header_116wp_1",ds={header:ls},ks=()=>{const[t,s]=g.useState([]);return e.jsxs(ne,{children:[e.jsx(ae,{title:"Instances",className:ds.header,actions:[e.jsx(ue,{selected:t},"actions")]}),e.jsx(re,{children:e.jsx(cs,{selectedInstances:t,setSelectedInstances:n=>{s(n)}})})]})};export{ks as default};
