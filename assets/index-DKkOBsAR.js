import{f as l,v as g,w as u,o as n,ag as c,B as d,j as r}from"./index-DYykpNVa.js";import{S as a}from"./SidePanel-DVyPWXM9.js";import{u as f}from"./useGetPageScriptProfile-D70GXDp6.js";import{S}from"./ScriptProfileForm-BM85OXMW.js";import"./AssociationBlock-Bs5is6Zl.js";import"./MultiSelectField-85mhFA5_.js";import"./useGetTags-BbkSXw8M.js";import"./index-CqeMv2OD.js";import"./TableFilterChips-DLH4XQ-H.js";import"./TablePagination-CIA4CRba.js";import"./ScriptsTabs-BrOiXEKJ.js";import"./helpers-DblkVUdf.js";import"./constants-CXofZZ4i.js";import"./NoData-CT6SeJUX.js";import"./ResponsiveTable-C-8YbfBJ.js";import"./StaticLink-BX9qJBBO.js";import"./TruncatedCell-DQQZxgbr.js";import"./Truncated-DtD6hAHP.js";import"./useExpandableRow-CGDZ27WS.js";import"./useRoles-CK1OAvut.js";import"./useFetchOld-BGD2hIpr.js";import"./TextConfirmationModal-DuGXYB1S.js";import"./PageParamFilter-LH49uHXA.js";import"./TableFilter-C7yTBfOe.js";import"./HeaderWithSearch-DH3OfcZg.js";import"./SingleInstanceTabs.module-DvhuGYYD.js";import"./index-Cbj0Sz5k.js";import"./ProfileAssociatedInstancesLink-CRAimTVK.js";import"./SidePanelFormButtons-Aj5ThB2m.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useGetInstances-CQaSwVqm.js";import"./InstancesPageActions-nbDXpXLr.js";import"./index-C2TKYmcI.js";import"./formikErrors-Bw8iTXYS.js";import"./ListTitle-anvzyHx6.js";import"./InfoGrid-CVtcW3Y8.js";import"./InfoItem-DMBAN7ig.js";import"./ScriptDropdown-C9m_9P8C.js";import"./useInfiniteQuery-uvFBsnEF.js";import"./downshift.esm-CVSNbv_O.js";const h=()=>{const t=l(),e=g(),{isPending:o,mutateAsync:s}=u({mutationFn:async({id:m,...p})=>t.patch(`script-profiles/${m}`,p),onSuccess:async()=>e.invalidateQueries({queryKey:["scriptProfiles"]})});return{isEditingScriptProfile:o,editScriptProfile:s}},y=t=>({...t,interval:"",...t.trigger,start_after:t.trigger.trigger_type=="recurring"?n(t.trigger.start_after).utc().format(c):"",timestamp:t.trigger.trigger_type=="one_time"?n(t.trigger.timestamp).utc().format(c):""}),st=()=>{const{notify:t}=d(),{scriptProfile:e,isGettingScriptProfile:o}=f(),{editScriptProfile:s,isEditingScriptProfile:m}=h();if(o)return r.jsx(a.LoadingState,{});const p=async i=>{await s({id:e.id,all_computers:i.all_computers,tags:i.tags,time_limit:i.time_limit,title:i.title,trigger:i.trigger,username:i.username})};return r.jsxs(r.Fragment,{children:[r.jsxs(a.Header,{children:["Edit ",e.title]}),r.jsx(a.Content,{children:r.jsx(S,{disabledFields:{script_id:!0,trigger_type:!0},initialValues:y(e),onSubmit:p,onSuccess:i=>{t.success({title:`You have successfully saved changes for ${i.title}`,message:"The changes will be applied to this profile."})},submitButtonText:"Save changes",submitting:m})})]})};export{st as default};
