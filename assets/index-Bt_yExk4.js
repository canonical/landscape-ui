import{r as s,_ as m,b as I,c as u,j as e,d as n,t as r}from"./index-CQs3wXys.js";import{P as R,a as A,b as $}from"./PageMain-BTzMuvvj.js";import{u as L}from"./useSavedSearches-dHWyeXn-.js";import{T as M}from"./TablePagination-DIiSuGph.js";import{u as T}from"./useConfirm-9PPCxKmU.js";import"./useFetchOld-D-5JyUuM.js";import"./useMutation-D9dT1mhA.js";import"./useQuery-DrwXjJzc.js";const z="_title_msu3i_1",B="_name_msu3i_5",D="_actions_msu3i_9",d={title:z,name:B,actions:D},H=s.lazy(()=>m(()=>import("./SingleSavedSearch-BXVkmVDY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),O=()=>{const[i,h]=s.useState(1),[c,p]=s.useState(20),g=I(),{confirmModal:S,closeConfirmModal:v}=T(),{setSidePanelContent:x}=u(),{getSavedSearchesQuery:_,removeSavedSearchQuery:j}=L(),{data:o,isLoading:b}=_({limit:c,offset:(i-1)*c}),{mutateAsync:f,isLoading:P}=j,C=a=>{x(`Edit "${a.name}" search`,e.jsx(s.Suspense,{fallback:e.jsx(r,{}),children:e.jsx(H,{savedSearch:a})}))},N=async a=>{try{await f({name:a})}catch(t){g(t)}finally{v()}},y=a=>{S({body:"Are you sure?",title:`Removing "${a.title}" search`,buttons:[e.jsxs(n.Button,{appearance:"negative",hasIcon:!0,onClick:()=>N(a.name),"aria-label":`Remove ${a.title} search`,children:[P&&e.jsx(r,{}),"Remove"]},`remove-search-${a.title}`)]})},l=s.useMemo(()=>(o==null?void 0:o.data)??[],[o]),E=s.useMemo(()=>[{accessor:"title",className:d.title,Header:"Title"},{accessor:"name",className:d.name,Header:"Name"},{accessor:"search",Header:"Search"},{accessor:"id",className:d.actions,Cell:({row:a})=>e.jsxs("div",{className:"divided-blocks",children:[e.jsx("div",{className:"divided-blocks__item",children:e.jsxs(n.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left p-tooltip--btm-center","aria-label":`Edit ${a.original.title} search`,onClick:()=>C(a.original),children:[e.jsx("span",{className:"p-tooltip__message",children:"Edit"}),e.jsx("i",{className:"p-icon--edit u-no-margin--left"})]})}),e.jsx("div",{className:"divided-blocks__item",children:e.jsxs(n.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left p-tooltip--btm-center","aria-label":`Remove ${a.original.title} search`,onClick:()=>y(a.original),children:[e.jsx("span",{className:"p-tooltip__message",children:"Remove"}),e.jsx(n.Icon,{name:n.ICONS.delete,className:"u-no-margin--left"})]})})]})}],[o]),k=({column:{id:a}})=>{const t={};return a==="title"?t.role="rowheader":a==="name"?t["aria-label"]="Name":a==="search"?t["aria-label"]="Search":a==="id"&&(t["aria-label"]="Actions"),t};return e.jsxs(e.Fragment,{children:[b?e.jsx(r,{}):e.jsx(n.ModularTable,{columns:E,data:l,emptyMsg:"You have no saved searches yet.",getCellProps:k}),e.jsx(M,{currentPage:i,totalItems:l.length,paginate:a=>{h(a)},pageSize:c,setPageSize:a=>{p(a)},currentItemCount:l.length})]})},Q=s.lazy(()=>m(()=>import("./SingleSavedSearch-BXVkmVDY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),V=()=>{const{setSidePanelContent:i}=u();return e.jsxs(R,{children:[e.jsx(A,{title:"Saved searches",sticky:!0,actions:[e.jsx(n.Button,{appearance:"positive",onClick:()=>{i("Add search",e.jsx(s.Suspense,{fallback:e.jsx(r,{}),children:e.jsx(Q,{})}))},"aria-label":"Add search",children:e.jsx("span",{children:"Add search"})},"add-search")]}),e.jsx($,{children:e.jsx(O,{})})]})},X=V;export{X as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SingleSavedSearch-BXVkmVDY.js","assets/index-CQs3wXys.js","assets/index-C_8s_0a6.css","assets/useSavedSearches-dHWyeXn-.js","assets/useFetchOld-D-5JyUuM.js","assets/useMutation-D9dT1mhA.js","assets/useQuery-DrwXjJzc.js","assets/index.esm-85kEx3I1.js","assets/formik.esm-C_3GEhhV.js","assets/SidePanelFormButtons-CTKwSU1t.js","assets/SidePanelFormButtons.module-CoxOjuX8.js","assets/SidePanelFormButtons-CR46v8uL.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
