const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B6Yus_Y_.js","assets/index-BMhnQnvO.js","assets/index-BPqj2aAr.css","assets/formik.esm-CIbWtvkk.js","assets/AssociationBlock-BW5vwt-w.js","assets/MultiSelectField-DwiNKGgx.js","assets/MultiSelectField-B2rqRhX9.css","assets/useInstances-CmnK8qSQ.js","assets/useFetchOld-Cff5y19B.js","assets/useMutation-Diy-BhWO.js","assets/useQuery-Dxk6aJEc.js","assets/AssociationBlock-Cb2Mr2ww.css","assets/SidePanelFormButtons-Sm5GAIF2.js","assets/SidePanelFormButtons.module-D1MffuBu.js","assets/SidePanelFormButtons-5RbWRdTr.css","assets/constants-dW6629jA.js","assets/useRoles-CVnIP7R8.js","assets/index.esm-Cg6cKhK8.js","assets/index--9En4-ZN.css","assets/index-3D9-sa9w.js","assets/InfoItem-B9r-ZevM.js","assets/InfoItem-BbayMzTk.css","assets/NoData-D_FYardG.js","assets/useConfirm-DBWWlNvT.js","assets/moment-C5S46NFB.js","assets/PageMain-Do4tk6tv.js","assets/PageMain-DyI__TtH.css","assets/usePageParams-C2gko9oh.js","assets/EmptyState-ClMN1u86.js","assets/EmptyState-BNXajmMK.css","assets/HeaderWithSearch-CYHrik7-.js","assets/HeaderWithSearch-CCRO5bRP.css","assets/index-YvXtz6mj.css"])))=>i.map(i=>d[i]);
import{c as k,r as n,_ as p,e as w,m as L,f as j,j as e,g as r,h as P,k as d}from"./index-BMhnQnvO.js";import{P as Q,a as N,b as $}from"./PageMain-Do4tk6tv.js";import{u as H}from"./useFetchOld-Cff5y19B.js";import{u as x}from"./useMutation-Diy-BhWO.js";import{u as M}from"./useQuery-Dxk6aJEc.js";import"./index.esm-Cg6cKhK8.js";import{u as O}from"./useConfirm-DBWWlNvT.js";import{u as I}from"./useRoles-CVnIP7R8.js";import{u as y}from"./usePageParams-C2gko9oh.js";import{E as D}from"./EmptyState-ClMN1u86.js";import{H as T}from"./HeaderWithSearch-CYHrik7-.js";function U(){const a=k(),o=H(),i=x({mutationFn:s=>o.get("CreateUpgradeProfile",{params:s}),onSuccess:()=>a.invalidateQueries(["upgradeProfiles"])}),g=x({mutationFn:s=>o.get("EditUpgradeProfile",{params:s}),onSuccess:()=>a.invalidateQueries(["upgradeProfiles"])}),u=x({mutationFn:s=>o.get("RemoveUpgradeProfile",{params:s}),onSuccess:()=>a.invalidateQueries(["upgradeProfiles"])});return{createUpgradeProfileQuery:i,editUpgradeProfileQuery:g,removeUpgradeProfileQuery:u,getUpgradeProfilesQuery:(s={},m={})=>M({queryKey:["upgradeProfiles",s],queryFn:()=>o.get("GetUpgradeProfiles",{params:s}),...m})}}const z="_truncated_1dm0b_1",V="_actions_1dm0b_7",q="_toggleButton_1dm0b_11",G="_actionButton_1dm0b_16",c={truncated:z,actions:V,toggleButton:q,actionButton:G},K=n.lazy(()=>p(()=>import("./index-B6Yus_Y_.js").then(a=>a.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),W=n.lazy(()=>p(()=>import("./index-3D9-sa9w.js"),__vite__mapDeps([19,1,2,20,21,22,23,24,15,25,26,8,9,10,17,16,27,28,29,30,31,32]))),Y=({profiles:a})=>{const{search:o}=y(),i=w(),{notify:g}=L(),{setSidePanelContent:u}=j(),{confirmModal:_,closeConfirmModal:s}=O(),{removeUpgradeProfileQuery:m}=U(),{getAccessGroupQuery:v}=I(),{data:f}=v(),h=(f==null?void 0:f.data.map(({name:t,title:l})=>({label:l,value:t})))??[],b=n.useMemo(()=>o?a.filter(t=>t.title.toLowerCase().includes(o.toLowerCase())):a,[a,o]),{mutateAsync:C}=m,S=async t=>{try{await C({name:t}),g.success({message:`Upgrade profile "${t}" removed successfully`,title:"Upgrade profile removed"})}catch(l){i(l)}finally{s()}},E=t=>{_({title:"Remove upgrade profile",body:`This will remove "${t}" profile.`,buttons:[e.jsx(r.Button,{type:"button",appearance:"negative",onClick:()=>S(t),"aria-label":`Remove ${t} profile`,children:"Remove"},"remove")]})},B=t=>{u(t.title,e.jsx(n.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(W,{accessGroupOptions:h,profile:t})}))},F=t=>{u(`Edit "${t.title}" profile`,e.jsx(n.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(K,{action:"edit",profile:t})}))},A=n.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:t}})=>e.jsx(r.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>B(t),children:t.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:t}})=>{var l;return e.jsx(e.Fragment,{children:((l=h.find(({value:R})=>R===t.access_group))==null?void 0:l.label)??t.access_group})}},{accessor:"tags",className:c.truncated,Header:"Tags",Cell:({row:{original:t}})=>e.jsx(e.Fragment,{children:t.tags.join(", ")})},{accessor:"associated",Header:"Associated"},{accessor:"actions",className:P("u-align-text--right",c.actions),Header:"Actions",Cell:({row:{original:t}})=>e.jsxs(r.ContextualMenu,{position:"left",toggleClassName:c.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(r.Icon,{name:"contextual-menu","aria-hidden":!0}),toggleProps:{"aria-label":`${t.name} profile actions`},children:[e.jsxs(r.Button,{type:"button",appearance:"base",hasIcon:!0,className:P("u-no-margin--bottom u-no-margin--right",c.actionButton),onClick:()=>F(t),"aria-label":`Edit ${t.name} profile`,children:[e.jsx(r.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(r.Button,{type:"button",appearance:"base",hasIcon:!0,className:P("u-no-margin--bottom u-no-margin--right",c.actionButton),onClick:()=>E(t.name),"aria-label":`Remove ${t.name} profile`,children:[e.jsx(r.Icon,{name:"delete"}),e.jsx("span",{children:"Remove"})]})]})}],[b,h.length]);return e.jsx(r.ModularTable,{columns:A,data:b,emptyMsg:`No profiles found with the search: "${o}"`})},J=n.lazy(()=>p(()=>import("./index-B6Yus_Y_.js").then(a=>a.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),X=()=>{const{setSidePanelContent:a}=j(),o=()=>{a("Add upgrade profile",e.jsx(n.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(J,{action:"add"})}))};return e.jsx(D,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(r.Button,{appearance:"positive",onClick:o,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],icon:"change-version",title:"Upgrade profiles not found"})},Z=()=>{const{setPageParams:a}=y(),o=i=>{a({search:i})};return e.jsx(T,{onSearch:o})},ee=()=>{const{getUpgradeProfilesQuery:a}=U(),{data:o,isLoading:i}=a();return e.jsxs(e.Fragment,{children:[i&&e.jsx(d,{}),!i&&(!o||!o.data.length)&&e.jsx(X,{}),!i&&o&&o.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsx(Y,{profiles:o.data})]})]})},te=n.lazy(()=>p(()=>import("./index-B6Yus_Y_.js").then(a=>a.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])).then(a=>({default:a.SingleUpgradeProfileForm}))),ae=()=>{const{setSidePanelContent:a}=j(),o=()=>{a("Add upgrade profile",e.jsx(n.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(te,{action:"add"})}))};return e.jsxs(Q,{children:[e.jsx(N,{title:"Upgrade profiles",actions:[e.jsx(r.Button,{type:"button",appearance:"positive",onClick:o,children:"Add upgrade profile"},"add")]}),e.jsx($,{children:e.jsx(ee,{})})]})},oe=ae,fe=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{Y as U,X as a,Z as b,fe as i,U as u};
