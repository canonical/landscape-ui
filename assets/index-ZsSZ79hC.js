const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BiL0BYo5.js","assets/index-ClpWheCJ.js","assets/index-4hNTic4S.css","assets/useInstances-DvLeTpj5.js","assets/useRoles-1klFmoud.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{k as x,j as t,n as o,x as h,L as j,o as I,r as p,p as g,a0 as P,i as f,h as b,a as k,E as L}from"./index-ClpWheCJ.js";import{P as S,a as v,b as A}from"./PageMain-CVU8VjvV.js";import{S as m}from"./InstancesPageActions-CbQ7WUQ1.js";import{u as E}from"./useInstances-DvLeTpj5.js";import"./ResponsiveButtons-Og1fsUVd.js";const N="_listItem_upezw_1",C="_listItem__link_upezw_9",d={listItem:N,listItem__link:C},w=p.lazy(()=>P(()=>import("./index-BiL0BYo5.js"),__vite__mapDeps([0,1,2,3,4,5]))),z=({alerts:i,pendingInstances:a})=>{const{setSidePanelContent:r}=x(),s=()=>{r("Review Pending Instances",t.jsx(p.Suspense,{fallback:t.jsx(g,{}),children:t.jsx(w,{instances:a})}),"large")},l=i.map((n,c)=>{const e=m[n.alert_type]||m.Unknown;return t.jsxs("div",{className:d.listItem,children:[t.jsx(o.Icon,{name:`${e.icon.color??e.icon.gray}`}),e.alertType==="PendingComputersAlert"?t.jsxs(o.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:s,children:[`${a.length} pending `,h(a.length,"computer needs","computers need")," ","authorization"]}):t.jsx(j,{to:`/instances?status=${e.filterValue}`,className:I("u-no-margin u-no-padding",d.listItem__link),children:n.summary})]},e.alertType||c)});return t.jsx(o.List,{items:l})};function T(){const i=f();return{getAlertsSummaryQuery:()=>b({queryKey:["alert","summary"],queryFn:async()=>i.get("alerts/summary")})}}const G=()=>{const i=k(),{getAlertsSummaryQuery:a}=T(),{getPendingInstancesQuery:r}=E(),{data:s,isLoading:l}=a(),{data:n,isLoading:c}=r(void 0,{enabled:!!(s!=null&&s.data.alerts_summary.find(_=>_.alert_type==="PendingComputersAlert"))}),e=(s==null?void 0:s.data.alerts_summary)||[],y=(n==null?void 0:n.data)||[],u=l||c;return t.jsxs(S,{children:[t.jsx(v,{title:"Alerts"}),t.jsxs(A,{children:[u&&t.jsx(g,{}),!u&&e.length===0&&t.jsx(L,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(o.Button,{appearance:"positive",onClick:async()=>i("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!u&&e.length>0&&t.jsx(z,{alerts:e,pendingInstances:y})]})]})};export{G as default};
