import{G as N}from"./index-CaTNmEoC.js";import{y,z as G,C as b,p as g,i as o,j as r,d as a}from"./index-Dfc97QGW.js";import{u as x}from"./useGPGKeys-B-3j3Nj8.js";import{t as m}from"./tests-DFnZqbNV.js";import{S as P}from"./SidePanelFormButtons-BdOP5SSP.js";import{g as n}from"./formikErrors-Bw8iTXYS.js";import"./PageMain-LS0GxKmV.js";import"./constants-BTpoIHxf.js";import"./ResponsiveTable-ViIMTRR6.js";import"./useFetchOld-BgGVMMmJ.js";import"./SidePanelFormButtons.module-CcPyiogC.js";const f={name:"",material:""},A=()=>{const{closeSidePanel:u}=y(),p=G(),{importGPGKeyQuery:l,getGPGKeysQuery:d}=x(),{mutateAsync:c}=l,{data:i}=d(),e=b({initialValues:f,validationSchema:g().shape({name:o().required("This field is required").test({test:m.test,message:m.message}).test({params:{getGPGKeysResponse:i},test:t=>!(i?.data??[]).map(({name:s})=>s).includes(t),message:"It must be unique within the account."}),material:o().required("This field is required").transform(t=>encodeURIComponent(t))}),onSubmit:async t=>{try{await c(t),u()}catch(s){p(s)}}});return r.jsxs(a.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(a.Input,{type:"text",label:"Name",required:!0,error:n(e,"name"),...e.getFieldProps("name")}),r.jsx(a.Textarea,{label:"Material",required:!0,rows:10,error:n(e,"material"),...e.getFieldProps("material")}),r.jsx(P,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Import key"})]})};export{N as GPGKeysList,A as NewGPGKeyForm,x as useGPGKeys};
