import{c,S as u,u as d,a as p,b as S}from"./index-CqnBBfNl.js";import{r as o,j as e,p as n,g as m,_ as x,f as j}from"./index-Wf16gVie.js";import{P as f,a as P,b as _}from"./PageMain-D6uzwJCK.js";import"./TablePagination.module-DLVph1Z1.js";import{T as h}from"./TablePagination-DzEfFEEI.js";import{u as C}from"./usePageParams-SRqZWliD.js";import"./useConfirm-wp7RgHXG.js";import"./EmptyState-DFxj1N3o.js";import"./formik.esm-N0UfY0_B.js";import"./index.esm-DpPOvp4P.js";import"./useFetchOld-B5P01kwg.js";import"./useMutation-DhQdCJ2X.js";import"./useQuery-CfvGuDxZ.js";import"./useRoles-D8fEPyYH.js";import"./SidePanelFormButtons-ClEUhOrz.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";const l={access_group:"",attachments:[],creator:{email:"",id:0,name:""},id:0,interpreter:"",time_limit:0,title:"loading",username:""},b=({column:t,row:{original:r}})=>{const s={};return r.title==="loading"?t.id==="title"?s.colSpan=4:(s.hidden=!0,s["aria-hidden"]=!0):t.id==="title"?s.role="rowheader":t.id==="access_group"?s["aria-label"]="Access group":t.id==="creator.name"?s["aria-label"]="Creator":t.id==="id"&&(s["aria-label"]="Actions"),s},g=({isScriptsLoading:t,scripts:r})=>{const s=o.useMemo(()=>t?[l]:r,[t,r]),a=o.useMemo(()=>[{Header:"Title",accessor:"title",Cell:({row:i})=>i.original.title===l.title?e.jsx(n,{}):i.original.title},{Header:"Access group",accessor:"access_group",className:c.accessGroup},{Header:"Creator",accessor:"creator.name",className:c.creator},{accessor:"id",className:c.actions,Cell:({row:i})=>e.jsx(u,{script:i.original})}],[s]);return e.jsx(m.ModularTable,{columns:a,data:s,getCellProps:b})},A=Object.freeze(Object.defineProperty({__proto__:null,ScriptList:g,ScriptsEmptyState:p,SingleScript:S,useScripts:d},Symbol.toStringTag,{value:"Module"})),L=()=>{const{currentPage:t,pageSize:r}=C(),{getScriptsQuery:s}=d(),{data:a,isLoading:i}=s({limit:r,offset:(t-1)*r});return e.jsxs(e.Fragment,{children:[t===1&&r===20&&i&&e.jsx(n,{}),t===1&&r===20&&!i&&(!a||a.data.results.length===0)&&e.jsx(p,{}),t!==1||r!==20||!i&&a&&a.data.results.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(g,{isScriptsLoading:i,scripts:(a==null?void 0:a.data.results)??[]}),e.jsx(h,{totalItems:a==null?void 0:a.data.count,currentItemCount:a.data.results.length})]})]})},T=o.lazy(()=>x(()=>Promise.resolve().then(()=>A),void 0).then(t=>({default:t.SingleScript}))),E=()=>{const{setSidePanelContent:t}=j(),r=()=>{t("Add script",e.jsx(o.Suspense,{fallback:e.jsx(n,{}),children:e.jsx(T,{action:"add"})}))};return e.jsxs(f,{children:[e.jsx(P,{title:"Scripts",actions:[e.jsx(m.Button,{appearance:"positive",onClick:r,children:"Add script"},"add-script")]}),e.jsx(_,{children:e.jsx(L,{})})]})},q=E;export{q as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
