const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DO0kQWLc.js","assets/index--oDUzHMd.js","assets/index-DEuNBe7s.css","assets/useInstances-oyExlbj4.js","assets/useFetchOld-DPqkXure.js","assets/useRoles-BSvOsgHk.js","assets/NoData-DCDodkUD.js","assets/moment-0FGm-X6W.js","assets/index-CoQBeqtS.css"])))=>i.map(i=>d[i]);
import{r as u,_ as P,i as h,j as t,h as i,L as I,R as g,g as y,o as _,a as f,E as b}from"./index--oDUzHMd.js";import{P as L,a as k,b as v}from"./PageMain-D9F6nigr.js";import{S as m}from"./PendingInstancesNotification-NNETR9VI.js";import{u as A}from"./useAlerts-DA7T-F8J.js";import{u as E}from"./useInstances-oyExlbj4.js";import"./useFetchOld-DPqkXure.js";const N="_listItem_upezw_1",S="_listItem__link_upezw_9",p={listItem:N,listItem__link:S},T=u.lazy(()=>P(()=>import("./index-DO0kQWLc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),C=({alerts:o,pendingInstances:n})=>{const{setSidePanelContent:r}=h(),e=()=>{r("Review Pending Instances",t.jsx(u.Suspense,{fallback:t.jsx(_,{}),children:t.jsx(T,{instances:n})}),"large")},l=o.map((a,c)=>{const s=m[a.alert_type]||m.Unknown;return t.jsxs("div",{className:p.listItem,children:[t.jsx(i.Icon,{name:`${s.icon.color??s.icon.gray}`}),s.alertType==="PendingComputersAlert"?t.jsxs(i.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:e,children:[`${n.length} pending `,n.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(I,{to:`${g}instances?status=${s.filterValue}`,className:y("u-no-margin u-no-padding",p.listItem__link),children:a.summary})]},s.alertType||c)});return t.jsx(i.List,{items:l})},H=()=>{const o=f(),{getAlertsSummaryQuery:n}=A(),{getPendingInstancesQuery:r}=E(),{data:e,isLoading:l}=n(),{data:a,isLoading:c}=r(void 0,{enabled:!!(e!=null&&e.data.alerts_summary.find(j=>j.alert_type==="PendingComputersAlert"))}),s=(e==null?void 0:e.data.alerts_summary)||[],x=(a==null?void 0:a.data)||[],d=l||c;return t.jsxs(L,{children:[t.jsx(k,{title:"Alerts"}),t.jsxs(v,{children:[d&&t.jsx(_,{}),!d&&s.length===0&&t.jsx(b,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(i.Button,{appearance:"positive",onClick:()=>o(`${g}settings/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!d&&s.length>0&&t.jsx(C,{alerts:s,pendingInstances:x})]})]})};export{H as default};
