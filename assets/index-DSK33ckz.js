import{f as h,x as p,y as m,a as x,r as j,R as c,j as e,L as f}from"./index-YVEwVKfb.js";import{r as _}from"./helpers-Bo73Thd0.js";const v="_container_1uszo_1",y={container:v},L=()=>{const[a]=h(),{setUser:u}=p(),{getAuthStateWithOidcQuery:l}=m(),d=x(),s=a.get("code")??"",r=a.get("state")??"",{data:t,isLoading:g}=l({code:s,state:r},{enabled:!!s&&!!r});return j.useEffect(()=>{var n,o;if(!(!t||!("current_account"in t.data)))if((n=t.data.return_to)!=null&&n.external&&t.data.return_to.url)_(t.data.return_to.url,{replace:!0});else{u(t.data);const i=new URL(((o=t.data.return_to)==null?void 0:o.url)??`${c}overview`,location.origin);d(i.toString().replace(i.origin,""),{replace:!0})}},[t]),e.jsx("div",{className:y.container,children:g?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:"Oops! Something went wrong. Please try again or contact our support team."}),e.jsx(f,{to:`${c}login`,className:"p-button",children:"Back to login"})]})})};export{L as default};
