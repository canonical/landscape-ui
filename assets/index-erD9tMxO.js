import{j as e,g as i,d as g,c as m,e as p,r as u,_ as f,f as h,p as l}from"./index-DiCHGiBf.js";import{E as x}from"./EmptyState-BQpqzkSf.js";import{P as _,a as j,b}from"./PageMain-SbAEQCyE.js";import{I as O}from"./InfoItem-BkJhF0SK.js";import{b as y}from"./output-BGPkZwlr.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import{u as P}from"./useMutation-GmxqXKvs.js";import{u as E}from"./useQuery-CpQuVpeO.js";import"./index.esm-D13Ro0EO.js";const S="_infoRow_2nvbc_1",v={infoRow:S},w=({organisationPreferences:t})=>{const o=[{label:"Organisation's name",value:t.title},{label:"Registration key",value:t.registration_password??"-"},{label:"Auto register new computers",value:y(t.auto_register_new_computers)}];return e.jsx("div",{className:v.infoRow,children:e.jsx(i.Row,{className:"u-no-padding--left u-no-padding--right u-no-max-width",children:o.map(({label:n,value:a})=>e.jsx(i.Col,{size:4,children:e.jsx(O,{label:n,value:a})},n))})})},R=()=>{const t=g(),o=m(),n=p(),a=(s,c={})=>E({queryKey:["preferences"],queryFn:()=>t.get("preferences"),...c}),r=P({mutationKey:["preferences","change"],mutationFn:s=>t.patch("preferences",s),onSuccess:()=>{o.invalidateQueries(["preferences"]).catch(n)}});return{getOrganisationPreferences:a,changeOrganisationPreferences:r}},C=u.lazy(()=>f(()=>import("./index-D3l0w1cL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(t=>({default:t.EditOrganisationPreferencesForm}))),F=()=>{const{setSidePanelContent:t}=h(),{getOrganisationPreferences:o}=R(),{data:n,isLoading:a,refetch:r}=o(),s=n==null?void 0:n.data,c=()=>{r()},d=()=>{t("Edit details",e.jsx(u.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(C,{organisationPreferences:s})}))};return e.jsxs(_,{children:[e.jsx(j,{title:"General",actions:[e.jsx(i.Button,{className:"p-segmented-control__button u-no-margin--bottom",type:"button",disabled:a||!s,onClick:d,children:e.jsx("span",{children:"Edit settings"})},"edit-settings")]}),e.jsxs(b,{children:[a&&e.jsx(l,{}),!a&&!s&&e.jsx(x,{title:"Could not load general information",icon:"connected",cta:[e.jsx(i.Button,{appearance:"positive",onClick:c,children:"Try again"},"refetch")]}),s&&e.jsx(w,{organisationPreferences:s})]})]})},k=F,A=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{w as O,A as i,R as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-D3l0w1cL.js","assets/index-DiCHGiBf.js","assets/index-BAlneFez.css","assets/SidePanelFormButtons-BHrpF6eW.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/formik.esm-Bu_XSuDa.js","assets/index.esm-D13Ro0EO.js","assets/EmptyState-BQpqzkSf.js","assets/EmptyState-BNXajmMK.css","assets/PageMain-SbAEQCyE.js","assets/PageMain-DyI__TtH.css","assets/InfoItem-BkJhF0SK.js","assets/InfoItem.module-BZ3tYMsb.js","assets/InfoItem-BbayMzTk.css","assets/output-BGPkZwlr.js","assets/useMutation-GmxqXKvs.js","assets/useQuery-CpQuVpeO.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
