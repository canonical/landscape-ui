const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D2hJB8h9.js","assets/index-vDh6p1re.js","assets/index-CjWED4RU.css","assets/useInstances-Df27HUCE.js","assets/useFetchOld-Dh4_z9Or.js","assets/useRoles-Cobv-tGH.js","assets/NoData-ClqjzLea.js","assets/usePageParams-C-pi3Kin.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{g as x,j as t,h as i,L as h,n as j,r as p,o as g,_ as I,f as P,e as f,a as b,E as L}from"./index-vDh6p1re.js";import{P as S,a as k,b as v}from"./PageMain-33U-guFi.js";import"./usePageParams-C-pi3Kin.js";import{S as u}from"./InstancesPageActions-CZBQFJte.js";import{u as A}from"./useInstances-Df27HUCE.js";import"./index-CS00h_Ig.js";import"./TablePagination-s2q42wYR.js";import"./TablePaginationBase-eH-xceTk.js";import"./StatusFilter-kNfNcZ7x.js";import"./TableFilter-D9jMhOmC.js";import"./TableFilterChips-BgTfFgZ3.js";import"./useFetchOld-Dh4_z9Or.js";import"./NoData-ClqjzLea.js";import"./helpers-gTsZ2i5X.js";const E="_listItem_upezw_1",N="_listItem__link_upezw_9",d={listItem:E,listItem__link:N},C=p.lazy(()=>I(()=>import("./index-D2hJB8h9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),w=({alerts:o,pendingInstances:a})=>{const{setSidePanelContent:r}=x(),s=()=>{r("Review Pending Instances",t.jsx(p.Suspense,{fallback:t.jsx(g,{}),children:t.jsx(C,{instances:a})}),"large")},l=o.map((n,c)=>{const e=u[n.alert_type]||u.Unknown;return t.jsxs("div",{className:d.listItem,children:[t.jsx(i.Icon,{name:`${e.icon.color??e.icon.gray}`}),e.alertType==="PendingComputersAlert"?t.jsxs(i.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:s,children:[`${a.length} pending `,a.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(h,{to:`/instances?status=${e.filterValue}`,className:j("u-no-margin u-no-padding",d.listItem__link),children:n.summary})]},e.alertType||c)});return t.jsx(i.List,{items:l})};function T(){const o=P();return{getAlertsSummaryQuery:()=>f({queryKey:["alert","summary"],queryFn:async()=>o.get("alerts/summary")})}}const Y=()=>{const o=b(),{getAlertsSummaryQuery:a}=T(),{getPendingInstancesQuery:r}=A(),{data:s,isLoading:l}=a(),{data:n,isLoading:c}=r(void 0,{enabled:!!(s!=null&&s.data.alerts_summary.find(_=>_.alert_type==="PendingComputersAlert"))}),e=(s==null?void 0:s.data.alerts_summary)||[],y=(n==null?void 0:n.data)||[],m=l||c;return t.jsxs(S,{children:[t.jsx(k,{title:"Alerts"}),t.jsxs(v,{children:[m&&t.jsx(g,{}),!m&&e.length===0&&t.jsx(L,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(i.Button,{appearance:"positive",onClick:()=>o("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!m&&e.length>0&&t.jsx(w,{alerts:e,pendingInstances:y})]})]})};export{Y as default};
