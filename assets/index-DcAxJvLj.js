import{h as f,k as c,f as g,p as y,s as h,j as s,g as r}from"./index-Bj3y1t-6.js";import{u as _}from"./useInstances-B9E9Q4Yh.js";import{S as I}from"./SidePanelFormButtons-dpQcLrQ5.js";import{u as S}from"./useRoles-BuiQ5OVH.js";import"./useFetchOld-BtTLYE3Q.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="41bf275d-07e8-4eba-8ad3-8c69944b8509",t._sentryDebugIdIdentifier="sentry-dbid-41bf275d-07e8-4eba-8ad3-8c69944b8509")}catch{}const x=f().shape({access_group:c(),comment:c(),title:c()}),A=({instance:t})=>{const{closeSidePanel:o}=g(),d=y(),{getAccessGroupQuery:l}=S(),{editInstanceQuery:u}=_(),{mutateAsync:m}=u,p=async n=>{try{await m({instanceId:t.id,...n})}catch(i){d(i)}finally{o()}},e=h({initialValues:{title:t.title,comment:t.comment,access_group:t.access_group},onSubmit:p,validationSchema:x}),{data:a}=l(),b=(a==null?void 0:a.data.map(({name:n,title:i})=>({label:i,value:n})))??[];return s.jsxs(r.Form,{onSubmit:e.handleSubmit,className:"l-form",noValidate:!0,children:[s.jsx(r.Input,{label:"Title","aria-label":"Title",type:"text",required:!0,disabled:t.is_wsl_instance,...e.getFieldProps("title"),error:e.touched.title&&e.errors.title?e.errors.title:void 0}),s.jsx(r.Select,{label:"Access group",options:b,...e.getFieldProps("access_group"),error:e.touched.access_group&&e.errors.access_group?e.errors.access_group:void 0}),s.jsx(r.Textarea,{label:"Comment",rows:5,...e.getFieldProps("comment"),error:e.touched.comment&&e.errors.comment?e.errors.comment:void 0}),s.jsx(I,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Save changes"})]})};export{A as default};
