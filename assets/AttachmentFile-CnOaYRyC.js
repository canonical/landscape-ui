import{b as j,i as g,j as t,o as d,d as a}from"./index-ClG4AO4X.js";const x=({attachmentId:s,scriptId:n},o={enabled:!0})=>{const c=j(),{data:r,isLoading:l,refetch:m}=g({queryKey:["scripts","attachment",s],queryFn:async()=>c.get(`scripts/${n}/attachments/${s}`),...o});return{scriptAttachment:r?.data??null,isScriptAttachmentsLoading:l,refetch:m}},y="_attachment_ijr45_1",A="_attachmentActions_ijr45_11",_="_actionButton_ijr45_16",i={attachment:y,attachmentActions:A,actionButton:_},w=({attachmentId:s,filename:n,onInitialAttachmentDelete:o,scriptId:c,className:r})=>{const{isScriptAttachmentsLoading:l,refetch:m}=x({attachmentId:s,scriptId:c||0},{enabled:!1}),p=async()=>{const{data:h}=await m();if(!h)return;const b=new Blob([h.data],{type:"application/octet-stream"}),u=URL.createObjectURL(b),e=document.createElement("a");e.href=u,e.download=n,document.body.appendChild(e),e.click(),e.remove(),URL.revokeObjectURL(u)};return t.jsxs("span",{className:d(i.attachment,r),children:[t.jsx("span",{children:n}),t.jsxs("div",{className:i.attachmentActions,children:[c?t.jsx(a.Button,{className:d("u-no-margin--bottom u-no-margin--right",i.actionButton),hasIcon:!0,type:"button",onClick:p,disabled:l,appearance:"base","aria-label":`Download ${n}`,children:t.jsx(a.Tooltip,{message:"Download",children:t.jsx(a.Icon,{name:"begin-downloading"})})}):null,o?t.jsx(a.Button,{type:"button",hasIcon:!0,appearance:"base",className:d("u-no-margin--bottom",i.actionButton),"aria-label":`Remove ${n} attachment`,onClick:o,children:t.jsx(a.Tooltip,{message:"Remove",position:"top-center",children:t.jsx(a.Icon,{name:a.ICONS.delete})})}):null]})]})};export{w as A};
