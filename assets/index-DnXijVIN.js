import{e as p,o as c,r as u,a as g,g as b,p as h,A as x,R as w,j as s,h as r}from"./index-BhA4J3ko.js";import{A as f}from"./AuthTemplate-CcnbsiRD.js";import{c as j,a as o,d as P}from"./index.esm-B8rBEOcC.js";const v=()=>{const d=p(),{setUser:l}=c(),[m,t]=u.useState(!1),n=g(),e=b({initialValues:{email:"",password:"",remember:!1},validationSchema:j().shape({email:o().email("Please provide a valid email address").required("This field is required"),password:o().required("This field is required"),remember:P()}),onSubmit:async a=>{t(!0);try{const{data:i}=await h.post(`${x}login`,{email:a.email,password:a.password});l(i,a.remember),n(`${w}`,{replace:!0})}catch(i){d(i)}t(!1)}});return s.jsxs(r.Form,{onSubmit:e.handleSubmit,children:[s.jsx(r.Input,{type:"text",label:"Email",error:e.touched.email&&e.errors.email?e.errors.email:void 0,...e.getFieldProps("email"),"data-testid":"email"}),s.jsx(r.PasswordToggle,{id:"password",label:"Password",error:e.touched.password&&e.errors.password?e.errors.password:void 0,...e.getFieldProps("password"),"data-testid":"password"}),s.jsx(r.CheckboxInput,{label:"Remember this device",...e.getFieldProps("remember")}),s.jsx("div",{className:"form-buttons",children:s.jsx(r.Button,{type:"submit",appearance:"positive",disabled:m,children:"Login"})})]})},T=()=>s.jsx(f,{title:"Login",children:s.jsx(v,{})});export{T as default};
