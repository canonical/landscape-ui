const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Es8iff_5.js","assets/index-Bd4iIRe_.js","assets/index-C0ZxZ9J6.css","assets/FileInput-BF7BK-gC.js","assets/SidePanelFormButtons-vMl4fSkh.js","assets/SidePanelFormButtons.module-C5v714vX.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/index-OHX2sxSE.js","assets/moment-DWLH54Z_.js","assets/TablePagination-9gj_8Kgx.js","assets/usePageParams-CGqhdr-B.js","assets/TablePaginationBase-BDX0aSIU.js","assets/TablePaginationBase-CJl3HN1X.css","assets/TableFilterChips-DUUXOsEl.js","assets/TableFilterChips-BAnU27MY.css","assets/useFetchOld-CisSrTSd.js","assets/NoData-BBZVu-3W.js","assets/index-Eujs1Quf.css","assets/useInstances-CXxtUloJ.js","assets/HeaderWithSearch-BZcWm4PV.js","assets/HeaderWithSearch-Dlfhk-35.css"])))=>i.map(i=>d[i]);
import{r as d,_ as b,f as j,j as e,E as C,g as u,n as w,b as S,e as _,c as r,d as x,p as Q}from"./index-Bd4iIRe_.js";import{u as I}from"./useInstances-CXxtUloJ.js";import{u as L}from"./useFetchOld-CisSrTSd.js";import{H as W}from"./HeaderWithSearch-BZcWm4PV.js";import{u as P}from"./usePageParams-CGqhdr-B.js";const q=d.lazy(()=>b(()=>import("./index-Es8iff_5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),A=()=>{const{setSidePanelContent:n}=j(),s=()=>{n("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(q,{})}))};return e.jsx(C,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(u.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},F=()=>{const n=S(),s=L(),o=_(),m=(t={},i={})=>x({queryKey:["wsl",t],queryFn:()=>o.get("computers/wsl-hosts",{params:t}),...i}),h=r({mutationFn:({parent_id:t,...i})=>o.post(`computers/${t}/children`,i),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),p=r({mutationFn:t=>s.get("DeleteChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),y=r({mutationFn:t=>s.get("SetDefaultChildComputer",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),l=r({mutationFn:t=>s.get("ShutdownHostComputer",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),g=r({mutationFn:t=>s.get("StartChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),c=r({mutationFn:t=>s.get("StopChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:h,deleteChildInstancesQuery:p,getWslInstanceNamesQuery:(t,i={})=>x({queryKey:["wsl-instance-names"],queryFn:()=>o.get("wsl-instance-names"),...i}),getWslHostsQuery:m,setDefaultChildInstanceQuery:y,shutdownHostInstanceQuery:l,startChildInstancesQuery:g,stopChildInstancesQuery:c}},D="_cta_hpksw_1",K={cta:D},B=d.lazy(()=>b(()=>import("./index-Es8iff_5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),H=({selectedInstances:n})=>{const{setPageParams:s}=P(),o=Q(),{setSidePanelContent:m}=j(),{deleteChildInstancesQuery:h}=F(),{removeInstancesQuery:p}=I(),{mutateAsync:y,isPending:l}=h,{mutateAsync:g,isPending:c}=p,f=async()=>{try{await y({computer_ids:n.map(({id:a})=>a)})}catch(a){o(a)}},t=async()=>{try{await g({computer_ids:n.map(({id:a})=>a)})}catch(a){o(a)}},i=()=>{m("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(B,{})}))},v=a=>{s({search:a})};return e.jsx(W,{onSearch:v,actions:e.jsxs("div",{className:K.cta,children:[e.jsx(u.Button,{type:"button",onClick:i,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(u.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Delete instances":"Delete instance",children:n.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:n[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:f},children:"Delete instance"}),e.jsx(u.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:n.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:n[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:c,confirmButtonLoading:c,onConfirm:t},children:"Remove from Landscape"})]})})]})})};export{H as W,A as a,F as u};
