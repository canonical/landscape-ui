const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DbV7_fBb.js","assets/index-aJwsc68L.js","assets/index-D38JayDC.css","assets/SidePanelFormButtons-Fi2QM0Bz.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/useGPGKeys-Bh_qsifr.js","assets/useFetchOld-DqwB-ncC.js","assets/tests-DHU7Nf1F.js","assets/useRoles-njF5h9Nh.js","assets/useAPTSources-up-s_Nwd.js","assets/PageMain-CZ35nLro.js","assets/PageMain--v5xNZ5p.css","assets/index-Cz9CfuJq.css"])))=>i.map(i=>d[i]);
import{p as b,r as l,j as e,g as o,f,n as u,E as P,_ as h}from"./index-aJwsc68L.js";import{P as A,a as y,b as _}from"./PageMain-CZ35nLro.js";import{u as p}from"./useAPTSources-up-s_Nwd.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new n.Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="d9621e02-f43f-4cd3-a4a4-c0ef078359c6",n._sentryDebugIdIdentifier="sentry-dbid-d9621e02-f43f-4cd3-a4a4-c0ef078359c6")}catch{}const x="_line_1ilcn_1",T="_accessGroup_1ilcn_10",j="_actions_1ilcn_19",d={line:x,accessGroup:T,actions:j},S=n=>{const s={};switch(n.column.id){case"name":s.role="rowheader";break;case"access_group":s["aria-label"]="Access group";break;case"line":s["aria-label"]="Line";break;case"id":s["aria-label"]="Actions";break}return s},w=({items:n})=>{const{removeAPTSourceQuery:s}=p(),t=b(),{mutateAsync:r,isPending:a}=s,i=async c=>{try{await r({name:c})}catch(g){t(g)}},m=l.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"access_group",Header:"Access group",className:d.accessGroup},{accessor:"line",Header:"Line",className:d.line},{accessor:"id",className:d.actions,Cell:({row:c})=>e.jsx(o.ConfirmationButton,{className:"u-no-margin--bottom u-no-padding--left is-small has-icon",type:"button",appearance:"base","aria-label":`Remove ${c.original.name} APT source`,confirmationModalProps:{title:`Deleting ${c.original.name} APT source`,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:a,confirmButtonDisabled:a,onConfirm:()=>i(c.original.name)},children:e.jsx(o.Tooltip,{position:"btm-center",message:"Delete",children:e.jsx(o.Icon,{name:o.ICONS.delete})})})}],[]);return e.jsx(o.ModularTable,{columns:m,data:l.useMemo(()=>n,[n.length]),emptyMsg:"No APT sources yet.",getCellProps:S})},v=l.lazy(()=>h(()=>import("./index-DbV7_fBb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(n=>({default:n.NewAPTSourceForm}))),N=()=>{const{setSidePanelContent:n}=f(),{getAPTSourcesQuery:s}=p(),{data:t,isLoading:r}=s(),a=(t==null?void 0:t.data)??[],i=()=>{n("Add APT source",e.jsx(l.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(v,{})}))};return e.jsxs(A,{children:[e.jsx(y,{title:"APT Sources",actions:[e.jsx(o.Button,{appearance:"positive",onClick:i,type:"button",children:"Add APT source"},"new-key-button")]}),e.jsxs(_,{children:[r&&e.jsx(u,{}),!r&&a.length===0&&e.jsx(P,{title:"No APT sources found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any APT sources yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage APT sources in Landscape"})]}),cta:[e.jsx(o.Button,{appearance:"positive",onClick:i,type:"button",children:"Add APT source"},"table-add-new-mirror")]}),!r&&a.length>0&&e.jsx(w,{items:a})]})]})},L=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}));export{w as A,L as i};
