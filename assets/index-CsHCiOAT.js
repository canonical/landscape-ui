const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DvAgLrMq.js","assets/index-Bj3y1t-6.js","assets/index-D38JayDC.css","assets/useGPGKeys-CovwgpEt.js","assets/useFetchOld-BtTLYE3Q.js","assets/tests-DQ3sX2Nf.js","assets/SidePanelFormButtons-dpQcLrQ5.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/PageMain-BzoqSo_G.js","assets/PageMain--v5xNZ5p.css"])))=>i.map(i=>d[i]);
import{p as g,r as l,j as e,g as a,f as b,n as p,E as G,_ as h}from"./index-Bj3y1t-6.js";import{P,a as _,b as x}from"./PageMain-BzoqSo_G.js";import{u as m}from"./useGPGKeys-CovwgpEt.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new n.Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="cf19a92e-e1e2-4138-8ffb-f84838ff1f17",n._sentryDebugIdIdentifier="sentry-dbid-cf19a92e-e1e2-4138-8ffb-f84838ff1f17")}catch{}const j="_fingerprint_xo0if_1",k="_accessType_xo0if_10",v="_actions_xo0if_19",d={fingerprint:j,accessType:k,actions:v},I=n=>{const s={};switch(n.column.id){case"name":s.role="rowheader";break;case"has_secret":s["aria-label"]="Access type";break;case"fingerprint":s["aria-label"]="Fingerprint";break;case"actions":s["aria-label"]="Actions";break}return s},w=({items:n})=>{const{removeGPGKeyQuery:s}=m(),r=g(),{mutateAsync:i,isPending:o}=s,c=l.useMemo(()=>n,[n.length]),u=async t=>{try{await i({name:t})}catch(f){r(f)}},y=l.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"has_secret",Header:"Access type",className:d.accessType,Cell:({row:t})=>t.original.has_secret?"Private":"Public"},{accessor:"fingerprint",Header:"Fingerprint",className:d.fingerprint},{accessor:"actions",className:d.actions,Cell:({row:t})=>e.jsx("div",{className:"divided-blocks",children:e.jsx("div",{className:"divided-blocks__item",children:e.jsx(a.ConfirmationButton,{className:"u-no-margin--bottom u-no-padding--left is-small has-icon",type:"button",appearance:"base","aria-label":`Remove ${t.original.name} GPG key`,confirmationModalProps:{title:`Deleting ${t.original.name} GPG key`,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:o,confirmButtonDisabled:o,onConfirm:()=>u(t.original.name)},children:e.jsx(a.Tooltip,{position:"top-center",message:"Delete",children:e.jsx(a.Icon,{name:a.ICONS.delete})})})})})}],[c]);return e.jsx(a.ModularTable,{columns:y,data:c,getCellProps:I,emptyMsg:"You have no GPG keys yet."})},N=l.lazy(()=>h(()=>import("./index-DvAgLrMq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(n=>({default:n.NewGPGKeyForm}))),C=()=>{const{setSidePanelContent:n}=b(),{getGPGKeysQuery:s}=m(),{data:r,isLoading:i}=s(),o=(r==null?void 0:r.data)??[],c=()=>{n("Import GPG key",e.jsx(l.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(N,{})}))};return e.jsxs(P,{children:[e.jsx(_,{title:"GPG Keys",actions:[e.jsx(a.Button,{appearance:"positive",onClick:c,type:"button","aria-label":"Import GPG key",children:"Import key"},"new-key-button")]}),e.jsxs(x,{children:[i&&e.jsx(p,{}),!i&&o.length===0&&e.jsx(G,{title:"No GPG keys found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any GPG keys yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage GPG keys in Landscape"})]}),cta:[e.jsx(a.Button,{appearance:"positive",onClick:c,type:"button","aria-label":"Import GPG key",children:"Import key"},"table-add-new-mirror")]}),!i&&o.length>0&&e.jsx(w,{items:o})]})]})},E=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{w as G,E as i};
