const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-FvyfSJlh.js","assets/index-BcwS0-pu.js","assets/index-BJ2QPnO2.css","assets/AssociationBlock-IQ9llR6e.js","assets/MultiSelectField-WE4hQb-T.js","assets/MultiSelectField-CD3NDVCz.css","assets/useGetTags-QEFIjI6m.js","assets/AssociationBlock-vsPH8fvb.css","assets/SidePanelFormButtons-Ca5om5Ec.js","assets/SidePanelFormButtons.module-BuIu-Bem.js","assets/SidePanelFormButtons-CmV-sWf7.css","assets/useRoles-BiygbnTO.js","assets/constants-dW6629jA.js","assets/index-FKBcgnWO.css","assets/index-n5e8Eiqr.js","assets/Blocks-Cn6mBR9S.js","assets/Blocks-bdK2PNd9.css","assets/PageMain-C7TIs687.js","assets/PageMain-CIunaku7.css","assets/TruncatedCell-Dg2xqnA2.js","assets/TruncatedCell-DraJKZqh.css","assets/useExpandableRow-BJRenp9X.js","assets/HeaderWithSearch-8u7NpAYq.js","assets/HeaderWithSearch-C2lwo0VI.css"])))=>i.map(i=>d[i]);
import{e as U,c as v,f as j,g as C,p as S,q as w,n as P,P as R,j as e,av as E,O as T,i,w as p,_ as x,h as A,aI as L,al as F,aJ as O,d as b,aC as k,aw as Q,E as M,a0 as N}from"./index-BcwS0-pu.js";import{P as I,a as D,b as $}from"./PageMain-C7TIs687.js";import{T as B}from"./TruncatedCell-Dg2xqnA2.js";import{u as H}from"./useExpandableRow-BJRenp9X.js";import{u as q}from"./useRoles-BiygbnTO.js";import{H as z}from"./HeaderWithSearch-8u7NpAYq.js";function _(){const a=U(),s=v(),o=j({mutationFn:async n=>s.get("CreateUpgradeProfile",{params:n}),onSuccess:async()=>a.invalidateQueries({queryKey:["upgradeProfiles"]})}),r=j({mutationFn:async n=>s.get("EditUpgradeProfile",{params:n}),onSuccess:async()=>a.invalidateQueries({queryKey:["upgradeProfiles"]})}),l=j({mutationFn:async n=>s.get("RemoveUpgradeProfile",{params:n}),onSuccess:async()=>a.invalidateQueries({queryKey:["upgradeProfiles"]})});return{createUpgradeProfileQuery:o,editUpgradeProfileQuery:r,removeUpgradeProfileQuery:l,getUpgradeProfilesQuery:(n={},d={})=>C({queryKey:["upgradeProfiles",n],queryFn:async()=>s.get("GetUpgradeProfiles",{params:n}),...d})}}const G=i.lazy(async()=>x(()=>import("./index-FvyfSJlh.js").then(a=>a.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),K=({profile:a})=>{const s=S(),{notify:o}=w(),{setSidePanelContent:r}=P(),{removeUpgradeProfileQuery:l}=_(),{value:g,setTrue:n,setFalse:d}=R(),{mutateAsync:u,isPending:f}=l,h=async()=>{try{await u({name:a.name}),o.success({message:`Upgrade profile "${a.title}" removed successfully`,title:"Upgrade profile removed"})}catch(m){s(m)}finally{d()}},y=()=>{r(`Edit "${a.title}" profile`,e.jsx(i.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(G,{action:"edit",profile:a})}))},t=[{icon:"edit",label:"Edit","aria-label":`Edit "${a.title}" profile`,onClick:y}],c=[{icon:"delete",label:"Remove","aria-label":`Remove "${a.title}" upgrade profile`,onClick:n}];return e.jsxs(e.Fragment,{children:[e.jsx(E,{toggleAriaLabel:`${a.title} profile actions`,actions:t,destructiveActions:c}),e.jsx(T,{isOpen:g,confirmationText:`remove ${a.title}`,title:"Remove upgrade profile",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:f,confirmButtonLoading:f,onConfirm:h,close:d,children:e.jsxs("p",{children:['This will remove "',a.title,'" profile. This action is'," ",e.jsx("b",{children:"irreversible"}),"."]})})]})},V=a=>({column:s,row:{index:o}})=>{const r={};switch(s.id){case"name":r.role="rowheader";break;case"access_group":r["aria-label"]="Access group";break;case"tags":r["aria-label"]="Tags",a===o&&(r.className="expandedCell");break;case"associated":r["aria-label"]="Associated instances";break;case"actions":r["aria-label"]="Actions";break}return r},J=a=>({index:s,original:o})=>{const r={};return a===s&&(r.className="expandedRow"),r["aria-label"]=`${o.title} upgrade profile row`,r},W=i.lazy(async()=>x(()=>import("./index-n5e8Eiqr.js"),__vite__mapDeps([14,1,2,15,16,12,17,18,19,20,21,11,22,23]))),Y=({profiles:a})=>{const{search:s}=A(),{setSidePanelContent:o}=P(),{getAccessGroupQuery:r}=q(),{expandedRowIndex:l,handleExpand:g,getTableRowsRef:n}=H(),{data:d}=r(),u=d?.data.map(({name:t,title:c})=>({label:c,value:t}))??[],f=i.useMemo(()=>s?a.filter(t=>t.title.toLowerCase().includes(s.toLowerCase())):a,[a,s]),h=t=>{o(t.title,e.jsx(i.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(W,{accessGroupOptions:u,profile:t})}))},y=i.useMemo(()=>[{...L,Cell:({row:{original:t}})=>e.jsxs(O,{children:[e.jsx(b.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>{h(t)},children:t.title}),e.jsx("span",{className:"u-text--muted",children:t.name})]})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:t}})=>e.jsx(e.Fragment,{children:u.find(({value:c})=>c===t.access_group)?.label??t.access_group})},{accessor:"tags",Header:"Tags",Cell:({row:{original:t,index:c}})=>t.tags.length>0?e.jsx(B,{content:t.tags.map(m=>e.jsx("span",{className:"truncatedItem",children:m},m)),isExpanded:c==l,onExpand:()=>{g(c)},showCount:!0}):e.jsx(k,{})},{accessor:"associated",Header:"Associated"},{...F,Cell:({row:{original:t}})=>e.jsx(K,{profile:t})}],[u.length,l]);return e.jsx("div",{ref:n,children:e.jsx(Q,{columns:y,data:f,emptyMsg:`No upgrade profiles found with the search: "${s}"`,getCellProps:V(l),getRowProps:J(l)})})},X=i.lazy(()=>x(()=>import("./index-FvyfSJlh.js").then(a=>a.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Z=()=>{const{setSidePanelContent:a}=P(),s=()=>{a("Add upgrade profile",e.jsx(i.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(X,{action:"add"})}))};return e.jsx(M,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(b.Button,{appearance:"positive",onClick:s,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],title:"No upgrade profiles found"})},ee=()=>e.jsxs(e.Fragment,{children:[e.jsx(z,{}),e.jsx(N,{filtersToDisplay:["search"]})]}),ae=()=>{const{getUpgradeProfilesQuery:a}=_(),{data:s,isLoading:o}=a();return e.jsxs(e.Fragment,{children:[o&&e.jsx(p,{}),!o&&(!s||!s.data.length)&&e.jsx(Z,{}),!o&&s&&s.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsx(Y,{profiles:s.data})]})]})},se=i.lazy(()=>x(()=>import("./index-FvyfSJlh.js").then(a=>a.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(a=>({default:a.SingleUpgradeProfileForm}))),te=()=>{const{setSidePanelContent:a}=P(),s=()=>{a("Add upgrade profile",e.jsx(i.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(se,{action:"add"})}))};return e.jsxs(I,{children:[e.jsx(D,{title:"Upgrade profiles",actions:[e.jsx(b.Button,{type:"button",appearance:"positive",onClick:s,children:"Add upgrade profile"},"add")]}),e.jsx($,{children:e.jsx(ae,{})})]})},de=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{Y as U,Z as a,ee as b,de as i,_ as u};
