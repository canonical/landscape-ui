import{c as d,S as j,u as g,a as u,b as P}from"./index-D-OXC4P1.js";import{r as o,j as e,t as p,d as S,_ as f,c as _}from"./index-CQs3wXys.js";import{P as h,a as C,b}from"./PageMain-BTzMuvvj.js";import{T as A}from"./TablePagination-DIiSuGph.js";import"./useConfirm-9PPCxKmU.js";import"./EmptyState-DNkTeHW1.js";import"./formik.esm-C_3GEhhV.js";import"./index.esm-85kEx3I1.js";import"./useFetchOld-D-5JyUuM.js";import"./useMutation-D9dT1mhA.js";import"./useQuery-DrwXjJzc.js";import"./useRoles-DHn7bJnc.js";import"./SidePanelFormButtons-CTKwSU1t.js";import"./SidePanelFormButtons.module-CoxOjuX8.js";const m={access_group:"",attachments:[],creator:{email:"",id:0,name:""},id:0,interpreter:"",time_limit:0,title:"loading",username:""},L=({column:t,row:{original:r}})=>{const s={};return r.title==="loading"?t.id==="title"?s.colSpan=4:(s.hidden=!0,s["aria-hidden"]=!0):t.id==="title"?s.role="rowheader":t.id==="access_group"?s["aria-label"]="Access group":t.id==="creator.name"?s["aria-label"]="Creator":t.id==="id"&&(s["aria-label"]="Actions"),s},x=({isScriptsLoading:t,scripts:r})=>{const s=o.useMemo(()=>t?[m]:r,[t,r]),n=o.useMemo(()=>[{Header:"Title",accessor:"title",Cell:({row:i})=>i.original.title===m.title?e.jsx(p,{}):i.original.title},{Header:"Access group",accessor:"access_group",className:d.accessGroup},{Header:"Creator",accessor:"creator.name",className:d.creator},{accessor:"id",className:d.actions,Cell:({row:i})=>e.jsx(j,{script:i.original})}],[s]);return e.jsx(S.ModularTable,{columns:n,data:s,getCellProps:L})},T=Object.freeze(Object.defineProperty({__proto__:null,ScriptList:x,ScriptsEmptyState:u,SingleScript:P,useScripts:g},Symbol.toStringTag,{value:"Module"})),E=()=>{const[t,r]=o.useState(1),[s,n]=o.useState(20),{getScriptsQuery:i}=g(),{data:a,isLoading:c}=i({limit:s,offset:(t-1)*s});return e.jsxs(e.Fragment,{children:[t===1&&s===20&&c&&e.jsx(p,{}),t===1&&s===20&&!c&&(!a||a.data.results.length===0)&&e.jsx(u,{}),t!==1||s!==20||!c&&a&&a.data.results.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{isScriptsLoading:c,scripts:(a==null?void 0:a.data.results)??[]}),e.jsx(A,{currentPage:t,totalItems:a==null?void 0:a.data.count,paginate:l=>{r(l)},pageSize:s,setPageSize:l=>{n(l)},currentItemCount:a.data.results.length})]})]})},v=o.lazy(()=>f(()=>Promise.resolve().then(()=>T),void 0).then(t=>({default:t.SingleScript}))),z=()=>{const{setSidePanelContent:t}=_(),r=()=>{t("Add script",e.jsx(o.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(v,{action:"add"})}))};return e.jsxs(h,{children:[e.jsx(C,{title:"Scripts",actions:[e.jsx(S.Button,{appearance:"positive",onClick:r,children:"Add script"},"add-script")]}),e.jsx(b,{children:e.jsx(E,{})})]})},q=z;export{q as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
