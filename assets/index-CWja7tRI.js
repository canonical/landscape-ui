import{j as e,ak as k,ag as x,r as f,H as j,c as S,aa as v,o as y,ah as I}from"./index-TxmzAx1n.js";import{P as b,a as N,b as L}from"./usePackages-BhZDZoiM.js";import{H as T}from"./HeaderWithSearch-BkONncYq.js";const g=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],A="_actions_dhdem_1",F={actions:A},H=({handleClearSelection:a,selectedPackages:t})=>e.jsxs(e.Fragment,{children:[e.jsx(T,{afterSearch:a,actions:e.jsxs("div",{className:F.actions,children:[e.jsx(k,{options:g}),e.jsx(b,{selectedPackages:t})]})}),e.jsx(x,{filtersToDisplay:["search","status"],statusOptions:g})]}),_=(a,t)=>{let s;return a===""?s="No packages found":a==="upgrade"?s="No available upgrades found":a==="security"?s="No available security upgrades found":a==="installed"?s="No installed packages found":s="No held packages found",t?`${s} with the search "${t}"`:s},M=()=>{const[a,t]=f.useState([]),{instanceId:s,childInstanceId:p}=j(),{status:c,search:l,currentPage:r,pageSize:n}=S(),{getInstancePackagesQuery:h}=N(),{state:o}=v(),m=Number(p??s),d=()=>{t([])},{data:{data:i}={data:{count:0,results:[]}},isLoading:u}=h({instance_id:m,search:l,limit:n,offset:r*n-n,installed:!c||void 0,upgrade:c==="upgrade"||void 0,held:c==="held"||void 0,security:c==="security"||void 0});return e.jsxs(e.Fragment,{children:[!l&&!c&&r===1&&n===20&&u?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[e.jsx(H,{selectedPackages:a,handleClearSelection:d}),e.jsx(L,{packages:i.results,packagesLoading:u,selectedPackages:a,onPackagesSelect:P=>{t(P)},emptyMsg:_(c,l),selectAll:!!(o!=null&&o.selectAll)})]}),e.jsx(I,{handleClearSelection:d,totalItems:i.count,currentItemCount:i.results.length})]})};export{M as default};
