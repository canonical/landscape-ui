import{_ as m,b as x,$ as _,c as E,a0 as f,r as A,R as n,a1 as S,a2 as j,j as e,a3 as U,L as v}from"./index-BniO5lih.js";import{u as N}from"./useGetStandaloneAccount-DbVEvvm3.js";import"./constants-Dfr6WUEj.js";import"./constants-BYjiL6e-.js";const O="_container_1uszo_1",b={container:O},L=()=>{const[d]=m(),{redirectToExternalUrl:s,setAuthLoading:r,setUser:i}=x(),{getAuthStateWithUbuntuOneQuery:h}=_(),{isSelfHosted:o,isSaas:u}=E(),{accountExists:c}=N(),a=f(),{data:t,isLoading:g}=h({url:window.location.toString()},{enabled:d.size>0});return A.useEffect(()=>{if(!(!t||!("current_account"in t.data)))if(t.data.return_to?.external&&t.data.return_to.url)s(t.data.return_to.url,{replace:!0});else{if(r(!0),i(t.data),t.data.invitation_id){a(n.auth.invitation({secureId:t.data.invitation_id}),{replace:!0});return}if(t.data.accounts.length===0){u&&window.location.hostname===S||o&&!c?a(n.auth.createAccount(),{replace:!0}):a(n.auth.noAccess(),{replace:!0});return}const p=t.data.return_to?.url,l=new URL(p??j,location.origin);a(l.toString().replace(l.origin,""),{replace:!0})}},[t,s,a,r,i,o,c,u]),e.jsx("div",{className:b.container,children:g?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:U}),e.jsx(v,{to:n.auth.login(),className:"p-button",children:"Back to login"})]})})};export{L as default};
