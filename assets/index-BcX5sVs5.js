import{r as c,_ as m,j as e,e as x,x as y,h as j,f as P,c as D}from"./index-USfFY6y3.js";import{P as C,a as A,b as k}from"./PageMain-BxDaTx_L.js";import{u as d}from"./useMutation-DY_6kw1u.js";import{u as h}from"./useQuery-BXclWMSX.js";import{E as L}from"./EmptyState-C3F4hI0m.js";const S=[{label:"General settings",id:"tab-link-general"},{label:"Alerts",id:"tab-link-alerts"},{label:"API credentials",id:"tab-link-api"}],v="_tabPanel_ai56l_1",E={tabPanel:v},U=c.lazy(()=>m(()=>import("./index-CIwObzQ_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),T=c.lazy(()=>m(()=>import("./index-YjLlxqeU.js"),__vite__mapDeps([8,1,2,9,10,11,3,4,5,6,12,13,14,15,16]))),F=c.lazy(()=>m(()=>import("./index-BTf6EIhl.js").then(s=>s.i),__vite__mapDeps([17,1,2,18,19,12,13,20,11,21,22,23,24,25,26,27,28]))),I=({user:s,credentials:r})=>{const[a,o]=c.useState("tab-link-general");return e.jsxs(e.Fragment,{children:[e.jsx(x.Tabs,{listClassName:"u-no-margin--bottom",links:S.map(({label:l,id:n})=>({label:l,id:n,role:"tab",active:n===a,onClick:()=>{o(n)}}))}),e.jsx("div",{tabIndex:0,role:"tabpanel","aria-labelledby":a,className:E.tabPanel,children:e.jsxs(c.Suspense,{fallback:e.jsx(y,{}),children:[a==="tab-link-general"&&e.jsx(U,{user:s}),a==="tab-link-alerts"&&e.jsx(F,{}),a==="tab-link-api"&&e.jsx(T,{user:s,credentials:r})]})})]})};function K(){const s=j(),r=P(),a=D(),o=(t={},i={})=>h({queryKey:["userDetails","get"],queryFn:()=>s.get("person",{params:t}),...i}),l=(t={},i={})=>h({queryKey:["userDetails","getCredentials"],queryFn:()=>s.get("credentials",{params:t}),...i}),n=d({mutationKey:["userDetails","generate"],mutationFn:t=>s.post("credentials",t),onSuccess:()=>{r.invalidateQueries(["userDetails","getCredentials"]).catch(a)}}),g=d({mutationKey:["userDetails","edit"],mutationFn:t=>s.post("person",t),onSuccess:()=>{r.invalidateQueries(["userDetails","get"]).catch(a)}}),p=d({mutationKey:["userDetails","preferredAccount"],mutationFn:t=>s.post("person",t),onSuccess:()=>{r.invalidateQueries(["userDetails","get"]).catch(a)}}),u=d({mutationKey:["userDetails","changePassword"],mutationFn:t=>s.put("password",t)});return{getUserDetails:o,generateApiCredentials:n,getUserApiCredentials:l,editUserDetails:g,setPreferredAccount:p,changePassword:u}}const q=()=>{var _;const{getUserDetails:s,getUserApiCredentials:r}=K(),{data:a,isLoading:o,refetch:l}=s(),{data:n,isLoading:g,refetch:p}=r(),u=a==null?void 0:a.data,t=(_=n==null?void 0:n.data)==null?void 0:_.credentials,i=u&&t,b=o||g,f=()=>{l(),p()};return e.jsxs(C,{children:[e.jsx(A,{title:"Account settings"}),e.jsxs(k,{children:[b&&e.jsx(y,{}),!b&&!i&&e.jsx(L,{title:"Could not load account information",icon:"connected",cta:[e.jsx(x.Button,{appearance:"positive",onClick:f,children:"Try again"},"refetch")]}),i&&e.jsx(I,{user:u,credentials:t})]})]})},O=q,N=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{N as i,K as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CIwObzQ_.js","assets/index-USfFY6y3.js","assets/index-57O3pXzM.css","assets/InfoItem-C4QiPsl7.js","assets/InfoItem-BbayMzTk.css","assets/PageMain-BxDaTx_L.js","assets/PageMain-DtiowUD8.css","assets/index-B5FHALjx.css","assets/index-YjLlxqeU.js","assets/DistributionCard.module-CdGw1YvC.js","assets/DistributionCard-CcioRwqI.css","assets/useConfirm-CBkoo4y2.js","assets/useMutation-DY_6kw1u.js","assets/useQuery-BXclWMSX.js","assets/EmptyState-C3F4hI0m.js","assets/EmptyState-BNXajmMK.css","assets/index-DpVlhj88.css","assets/index-BTf6EIhl.js","assets/useAlerts-tQW9MtFH.js","assets/useFetchOld-B0QImQ4i.js","assets/output-BGPkZwlr.js","assets/formik.esm-C4aerYG-.js","assets/index.esm-D9RDGm6v.js","assets/SidePanelFormButtons-eq1cIORy.js","assets/SidePanelFormButtons.module-CoxOjuX8.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/CheckboxGroup-7AXxCBHb.js","assets/CheckboxGroup-B4JHQ1cp.css","assets/index-CUPcIJCi.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
