import{q as h,i as S,t as x,k as _,n as u,j as r,h as a}from"./index-DnasqC8x.js";import{S as f}from"./SidePanelFormButtons-Cr7SdJy2.js";import{u as y}from"./useRoles-DtN19eIw.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as D}from"./constants-Bcc0MxuM.js";import"./SidePanelFormButtons.module-yv6Qz3cN.js";import"./useFetchOld-B66u7Ap8.js";import"./moment-C5S46NFB.js";import"./InfoItem-DipwkoX_.js";import"./NoData-BGJFjHqN.js";import"./index-DrGci_t_.js";import"./moment-D-lV1btS.js";import"./TablePagination-D7Ih5IbV.js";import"./TablePagination.module-CgQ3jx4B.js";import"./usePageParams-Ke7mv6oo.js";import"./SearchHelpPopup-D3qBHE3N.js";const j={name:"",access_group:""},O=()=>{const m=h(),{closeSidePanel:c}=S(),{createDistributionQuery:p,getDistributionsQuery:l}=D(),{getAccessGroupQuery:d}=y(),{mutateAsync:b}=p,{data:o}=d(),g=((o==null?void 0:o.data)??[]).map(e=>({label:e.title,value:e.name})),{data:s}=l({include_latest_sync:!0}),t=x({initialValues:j,validationSchema:_().shape({name:u().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:s},test:e=>!((s==null?void 0:s.data)??[]).map(({name:i})=>i).includes(e),message:"It must be unique within the account."}),access_group:u()}),onSubmit:async e=>{try{await b(e),c()}catch(i){m(i)}}});return r.jsxs(a.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[r.jsx(a.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:t.touched.name&&t.errors.name?t.errors.name:void 0}),r.jsx(a.Select,{label:"Access group",options:[{label:"Select access group",value:""},...g],...t.getFieldProps("access_group"),error:t.touched.access_group&&t.errors.access_group?t.errors.access_group:void 0}),r.jsx(f,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{O as default};
