import{c as E,r as s,_ as m,e as A,l as D,f as j,j as e,g as r,h,p}from"./index-DjN6NDkk.js";import{P as R,a as F,b as N}from"./PageMain-oGZOgh7s.js";import"./MultiSelectField.module-D1r8qo_i.js";import"./AssociationBlock.module-BSYf3X0u.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import{u as Q}from"./useFetchOld-D4uGCnIe.js";import{u as P}from"./useMutation-CPZ6Lp07.js";import{u as $}from"./useQuery-CsSPQ_-7.js";import"./index.esm-DhV5muB4.js";import{u as L}from"./useConfirm-DfWcK83z.js";import{u as M}from"./useRoles-D_duBWCq.js";import{E as O}from"./EmptyState-DDT28izc.js";function y(){const o=E(),n=Q(),l=P({mutationFn:i=>n.get("CreateUpgradeProfile",{params:i}),onSuccess:()=>o.invalidateQueries(["upgradeProfiles"])}),a=P({mutationFn:i=>n.get("EditUpgradeProfile",{params:i}),onSuccess:()=>o.invalidateQueries(["upgradeProfiles"])}),c=P({mutationFn:i=>n.get("RemoveUpgradeProfile",{params:i}),onSuccess:()=>o.invalidateQueries(["upgradeProfiles"])});return{createUpgradeProfileQuery:l,editUpgradeProfileQuery:a,removeUpgradeProfileQuery:c,getUpgradeProfilesQuery:(i={},f={})=>$({queryKey:["upgradeProfiles",i],queryFn:()=>n.get("GetUpgradeProfiles",{params:i}),...f})}}const T="_container_1sotk_1",H="_radioGroup_1sotk_7",z="_timeContainer_1sotk_13",G="_time_1sotk_13",V="_timeInput_1sotk_27",q="_inputDescriptionAfter_1sotk_32",K="_inputDescriptionBefore_1sotk_37",Y="_colon_1sotk_42",J="_tooltip_1sotk_48",W="_expiration_1sotk_52",X="_windowInputContainer_1sotk_59",Z="_windowInput_1sotk_59",ee="_windowInputDescription_1sotk_68",ke={container:T,radioGroup:H,timeContainer:z,time:G,timeInput:V,inputDescriptionAfter:q,inputDescriptionBefore:K,colon:Y,tooltip:J,expiration:W,windowInputContainer:X,windowInput:Z,windowInputDescription:ee},te="_truncated_1dm0b_1",oe="_actions_1dm0b_7",ne="_toggleButton_1dm0b_11",re="_actionButton_1dm0b_16",u={truncated:te,actions:oe,toggleButton:ne,actionButton:re},ae=s.lazy(()=>m(()=>import("./index-Drcy_Tjc.js").then(o=>o.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),se=s.lazy(()=>m(()=>import("./index-DnZcm6XJ.js"),__vite__mapDeps([20,1,2,21,22,23,24,25,17,26,27,6,7,12,13,15,16,9,10,11,19,18,28,29,30]))),ie=({profiles:o,search:n})=>{const l=A(),{notify:a}=D(),{setSidePanelContent:c}=j(),{confirmModal:g,closeConfirmModal:i}=L(),{removeUpgradeProfileQuery:f}=y(),{getAccessGroupQuery:U}=M(),{data:_}=U(),x=(_==null?void 0:_.data.map(({name:t,title:d})=>({label:d,value:t})))??[],b=s.useMemo(()=>n?o.filter(t=>t.title.includes(n)):o,[o,n]),{mutateAsync:C}=f,v=async t=>{try{await C({name:t}),a.success({message:`Upgrade profile "${t}" removed successfully`,title:"Upgrade profile removed"})}catch(d){l(d)}finally{i()}},w=t=>{g({title:"Remove upgrade profile",body:`This will remove "${t}" profile.`,buttons:[e.jsx(r.Button,{type:"button",appearance:"negative",onClick:()=>v(t),"aria-label":`Remove ${t} profile`,children:"Remove"},"remove")]})},k=t=>{c(t.title,e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(se,{accessGroupOptions:x,profile:t})}))},S=t=>{c(`Edit "${t.title}" profile`,e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(ae,{action:"edit",profile:t})}))},I=s.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:t}})=>e.jsx(r.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>k(t),children:t.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:t}})=>{var d;return e.jsx(e.Fragment,{children:((d=x.find(({value:B})=>B===t.access_group))==null?void 0:d.label)??t.access_group})}},{accessor:"tags",className:u.truncated,Header:"Tags",Cell:({row:{original:t}})=>e.jsx(e.Fragment,{children:t.tags.join(", ")})},{accessor:"associated",Header:"Associated"},{accessor:"actions",className:h("u-align-text--right",u.actions),Header:"Actions",Cell:({row:{original:t}})=>e.jsxs(r.ContextualMenu,{position:"left",toggleClassName:u.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(r.Icon,{name:"contextual-menu","aria-hidden":!0}),toggleProps:{"aria-label":`${t.name} profile actions`},children:[e.jsxs(r.Button,{type:"button",appearance:"base",hasIcon:!0,className:h("u-no-margin--bottom u-no-margin--right",u.actionButton),onClick:()=>S(t),"aria-label":`Edit ${t.name} profile`,children:[e.jsx(r.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(r.Button,{type:"button",appearance:"base",hasIcon:!0,className:h("u-no-margin--bottom u-no-margin--right",u.actionButton),onClick:()=>w(t.name),"aria-label":`Remove ${t.name} profile`,children:[e.jsx(r.Icon,{name:"delete"}),e.jsx("span",{children:"Remove"})]})]})}],[b,x.length]);return e.jsx(r.ModularTable,{columns:I,data:b,emptyMsg:`No profiles found with the search: "${n}"`})},le=s.lazy(()=>m(()=>import("./index-Drcy_Tjc.js").then(o=>o.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),ce=()=>{const{setSidePanelContent:o}=j(),n=()=>{o("Add upgrade profile",e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(le,{action:"add"})}))};return e.jsx(O,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(r.Button,{appearance:"positive",onClick:n,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],icon:"change-version",title:"Upgrade profiles not found"})},de=({onSearch:o})=>{const[n,l]=s.useState("");return e.jsx(r.Form,{onSubmit:a=>{a.preventDefault(),o(n)},children:e.jsx(r.Row,{className:"u-no-margin--left u-no-margin--right u-no-padding--left u-no-padding--right",children:e.jsx(r.Col,{size:4,children:e.jsx(r.SearchBox,{externallyControlled:!0,shouldRefocusAfterReset:!0,autoComplete:"off",value:n,onChange:a=>l(a),onClear:()=>{l(""),o("")},onSearch:()=>o(n)})})})})},ue=()=>{const[o,n]=s.useState(""),{getUpgradeProfilesQuery:l}=y(),{data:a,isLoading:c}=l();return e.jsxs(e.Fragment,{children:[c&&e.jsx(p,{}),!c&&(!a||!a.data.length)&&e.jsx(ce,{}),!c&&a&&a.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(de,{onSearch:g=>n(g)}),e.jsx(ie,{profiles:a.data,search:o})]})]})},pe=s.lazy(()=>m(()=>import("./index-Drcy_Tjc.js").then(o=>o.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(o=>({default:o.SingleUpgradeProfileForm}))),ge=()=>{const{setSidePanelContent:o}=j(),n=()=>{o("Add upgrade profile",e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(pe,{action:"add"})}))};return e.jsxs(R,{children:[e.jsx(F,{title:"Upgrade profiles",actions:[e.jsx(r.Button,{type:"button",appearance:"positive",onClick:n,children:"Add upgrade profile"},"add")]}),e.jsx(N,{children:e.jsx(ue,{})})]})},me=ge,Se=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{ie as U,ce as a,de as b,ke as c,Se as i,y as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-Drcy_Tjc.js","assets/index-DjN6NDkk.js","assets/index-BAlneFez.css","assets/formik.esm-DFe7W_K3.js","assets/AssociationBlock-TFmj5P2e.js","assets/MultiSelectField-BlJg7_0u.js","assets/MultiSelectField.module-D1r8qo_i.js","assets/MultiSelectField-B2rqRhX9.css","assets/useInstances-Bd32Lqj6.js","assets/useFetchOld-D4uGCnIe.js","assets/useMutation-CPZ6Lp07.js","assets/useQuery-CsSPQ_-7.js","assets/AssociationBlock.module-BSYf3X0u.js","assets/AssociationBlock-Cb2Mr2ww.css","assets/SidePanelFormButtons-DcwlKwEy.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/constants-dW6629jA.js","assets/useRoles-D_duBWCq.js","assets/index.esm-DhV5muB4.js","assets/index-DnZcm6XJ.js","assets/InfoItem-B24rOkZr.js","assets/InfoItem.module-BZ3tYMsb.js","assets/InfoItem-BbayMzTk.css","assets/useConfirm-DfWcK83z.js","assets/moment-Cl4UOzQZ.js","assets/PageMain-oGZOgh7s.js","assets/PageMain-DyI__TtH.css","assets/EmptyState-DDT28izc.js","assets/EmptyState-BNXajmMK.css","assets/index-YvXtz6mj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
