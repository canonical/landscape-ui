import{V as d,I as S}from"./ScriptsTabs-Zljf4zk4.js";import{c as U,a as $,d as J,S as K,u as Q,b as W}from"./ScriptsTabs-Zljf4zk4.js";import{o as f,p as x,n as b,q as g,j as i,d as r,s as o}from"./index-Y1sHRQPW.js";import{S as _}from"./SidePanelFormButtons-C9CoQZn-.js";import{u as h}from"./useRunScript-CGmaih91.js";import{D as y}from"./DeliveryBlock-BUf0h5_-.js";import"./index-BhXwIl60.js";import{S as j}from"./ScriptDropdown-B6YF1UjG.js";import{default as Y}from"./index-CeF3bS3d.js";import"./constants-Co65QhYz.js";import"./useRoles-DO4ymg7F.js";import"./TextConfirmationModal-CWzcJI3B.js";import"./HeaderWithSearch-D59A2pvb.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";import"./RadioGroup-CavPBo3K.js";import"./downshift.esm-CUmfFIyA.js";import"./CodeEditor-Ja8hki4c.js";import"./ScriptFormAttachments-BSRK5Sxx.js";import"./AttachmentFile-B2L8BEV9.js";const M=({parentAccessGroup:a,query:m})=>{const n=f(),{notify:u}=x(),{closeSidePanel:p}=b(),{runScript:c}=h(),t=g({initialValues:S,validationSchema:d,onSubmit:async e=>{try{await c({deliver_after:e.deliver_immediately?void 0:e.deliver_after,query:m,script_id:e.script_id,time_limit:e.time_limit,username:e.username}),p(),u.success({message:`"${e.script?.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(s){n(s)}}}),l=async e=>{if(await t.setFieldValue("script_id",e?.id??0),!t.values.username){const s=e?.username??"";await t.setFieldValue("username",s)}};return i.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[i.jsx(j,{script:t.values.script,setScript:async e=>{await t.setFieldValue("script",e),await l(e)},errorMessage:o(t,"script_id"),parentAccessGroup:a}),i.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:o(t,"username")})}),i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:o(t,"time_limit")})})]}),i.jsx(y,{formik:t}),i.jsx(_,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{Y as CreateScriptForm,M as RunInstanceScriptForm,j as ScriptDropdown,U as ScriptList,$ as ScriptsContainer,J as ScriptsEmptyState,K as ScriptsTabs,Q as useGetScripts,W as useGetSingleScript};
