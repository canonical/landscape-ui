import{w as p,x as f,y as x,a as y,r as _,j as t,C as b,L as m}from"./index-DBcAWqbv.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="5a03545d-6e6a-47ea-ba94-8481aa4da638",e._sentryDebugIdIdentifier="sentry-dbid-5a03545d-6e6a-47ea-ba94-8481aa4da638")}catch{}const j="_container_1uszo_1",w={container:j},E=()=>{const[e]=p(),{redirectToExternalUrl:s,setAuthLoading:c,setUser:u}=f(),{getAuthStateWithOidcQuery:l}=x(),g=y(),n=e.get("code")??"",r=e.get("state")??"",{data:a,isLoading:h}=l({code:n,state:r},{enabled:!!n&&!!r});return _.useEffect(()=>{var i,o;if(!(!a||!("current_account"in a.data)))if((i=a.data.return_to)!=null&&i.external&&a.data.return_to.url)s(a.data.return_to.url,{replace:!0});else{c(!0),u(a.data);const d=new URL(((o=a.data.return_to)==null?void 0:o.url)??"/overview",location.origin);g(d.toString().replace(d.origin,""),{replace:!0})}},[a,s]),t.jsx("div",{className:w.container,children:h?t.jsxs("div",{className:"u-align-text--center",children:[t.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[t.jsx("span",{className:"u-off-screen",children:"Loading..."}),t.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),t.jsx("span",{children:"Please wait while your request is being processed..."})]}):t.jsxs("div",{children:[t.jsx("p",{children:b}),t.jsx(m,{to:"/login",className:"p-button",children:"Back to login"})]})})};export{E as default};
