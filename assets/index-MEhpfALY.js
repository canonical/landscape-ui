import{a5 as x,B as A,m as _,F as h,K as F,O as o,j as a,d as i,G as u}from"./index-DskkQfCs.js";import{S as f}from"./SidePanelFormButtons-BslmUX5q.js";import{u as y}from"./useRoles-DGank1p2.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as D}from"./constants-CJUZxMlH.js";import"./SidePanelFormButtons.module-D2P5PizG.js";const E={name:"",access_group:x},G=()=>{const c=A(),{closeSidePanel:m}=_(),{createDistributionQuery:l,getDistributionsQuery:d}=D(),{getAccessGroupQuery:p}=y(),{mutateAsync:b}=l,{data:{data:g}={data:[]}}=p(),S=g.map(e=>({label:e.title,value:e.name})),{data:s}=d({include_latest_sync:!0}),t=h({initialValues:E,validationSchema:F().shape({name:o().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:s},test:e=>!((s==null?void 0:s.data)??[]).some(({name:r})=>r==e),message:"It must be unique within the account."}),access_group:o()}),onSubmit:async e=>{try{await b(e),m()}catch(r){c(r)}}});return a.jsxs(i.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[a.jsx(i.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:u(t,"name")}),a.jsx(i.Select,{label:"Access group",options:S,...t.getFieldProps("access_group"),error:u(t,"access_group")}),a.jsx(f,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{G as default};
