import{j as e,r as x,o as j,O as P,n as S}from"./index-CxLOff1E.js";import{T as b}from"./TablePagination-C1LFTN4v.js";import{P as k,a as v,b as N}from"./usePackages-BJN0Ece6.js";import{u as T}from"./usePageParams-DFUOXSDl.js";import{S as I}from"./StatusFilter-DEIysfAh.js";import{T as y}from"./TableFilterChips-CGEexDG3.js";import{H as L}from"./HeaderWithSearch-C7AUBVFU.js";import"./TablePaginationBase-dg24rlir.js";import"./useFetchOld-J8W4eeUY.js";import"./TableFilter-BFERAOTz.js";const m=[{label:"All",value:""},{label:"Installed",value:"installed"},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],A="_actions_dhdem_1",F={actions:A},_=({handleClearSelection:a,selectedPackages:n})=>e.jsxs(e.Fragment,{children:[e.jsx(L,{afterSearch:a,actions:e.jsxs("div",{className:F.actions,children:[e.jsx(I,{options:m}),e.jsx(k,{selectedPackages:n})]})}),e.jsx(y,{filtersToDisplay:["search","status"],statusOptions:m})]}),H=(a,n)=>{let s;return a===""?s="No packages found":a==="upgrade"?s="No available upgrades found":a==="security"?s="No available security upgrades found":a==="installed"?s="No installed packages found":s="No held packages found",n?`${s} with the search "${n}"`:s},q=()=>{const[a,n]=x.useState([]),{instanceId:s,childInstanceId:p}=j(),{status:l,search:i,currentPage:r,pageSize:o}=T(),{getInstancePackagesQuery:g}=v(),{state:c}=P(),f=Number(p??s),u=()=>{n([])},{data:t,isLoading:d}=g({instance_id:f,search:i,limit:o,offset:(r-1)*o,available:!1,installed:l==="installed"||!l||void 0,upgrade:l==="upgrade"||void 0,held:l==="held"||void 0,security:l==="security"||void 0});return e.jsxs(e.Fragment,{children:[!i&&!l&&r===1&&o===20&&d&&e.jsx(S,{}),(i||l||r!==1||o!==20||!d)&&e.jsxs(e.Fragment,{children:[e.jsx(_,{selectedPackages:a,handleClearSelection:u}),e.jsx(N,{packages:(t==null?void 0:t.data.results)??[],packagesLoading:d,selectedPackages:a,onPackagesSelect:h=>{n(h)},emptyMsg:H(l,i),selectAll:(c==null?void 0:c.selectAll)??!1})]}),e.jsx(b,{handleClearSelection:u,totalItems:t==null?void 0:t.data.count,currentItemCount:t==null?void 0:t.data.results.length})]})};export{q as default};
