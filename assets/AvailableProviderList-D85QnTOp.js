import{$ as v,O as N,_ as y,m as w,f as E,r as f,n as I,j as t,V as L,d as c,a6 as g}from"./index-BniO5lih.js";function O(){const{getInvitationSummaryQuery:o}=v(),{secureId:r}=N(),[u]=y(),e=r||u.get("invitation_id")||"",{data:l,isLoading:i}=o({invitationId:e},{enabled:!!e});return{invitationId:e,isLoading:i,invitationAccount:l?.data??null}}const P="_list_wqdfd_1",Q="_list__bordered_wqdfd_15",S="_button_wqdfd_23",$="_icon_wqdfd_31",s={list:P,list__bordered:Q,button:S,icon:$},q=(o,r={})=>{const u=w(),[e]=y(),i=e.has("code")?"employee-access/auth/start":"auth/start",{data:n,isLoading:p}=E({queryKey:["oidcUrl",o],queryFn:async()=>u.get(i,{params:o}),...r,gcTime:0});return{oidcUrlLocation:n?.data.location,isOidcUrlQueryLoading:p}},F=({isStandaloneOidcEnabled:o,isUbuntuOneEnabled:r,oidcProviders:u})=>{const[e,l]=f.useState(0),[i]=y(),{invitationId:n}=O(),{getUbuntuOneUrlQuery:p}=v(),m=i.get("redirect-to"),j=i.has("external"),h=i.get("code"),a={};e>0&&(a.id=e),m&&(a.return_to=m),n&&(a.invitation_id=n,a.return_to=`/accept-invitation/${n}`),j&&(a.external=!0),h&&(a.attach_code=h);const{oidcUrlLocation:x}=q(a,{enabled:e!==0});f.useEffect(()=>{x&&I(x)},[x]);const d={};m&&(d.return_to=`${window.origin}${m}`),n&&(d.invitation_id=n,d.return_to=`/accept-invitation/${n}`),j&&(d.external=!0);const{data:b,refetch:U}=p(d,{enabled:!1});return f.useEffect(()=>{b&&I(b.data.location)},[b]),t.jsxs(t.Fragment,{children:[h&&t.jsx("p",{className:"u-no-margin--bottom u-text--muted",children:"Sign in with your Identity provider to complete the attachment process."}),t.jsxs("ul",{className:L(s.list,{[s.list__bordered]:!h}),children:[r&&t.jsx("li",{className:"p-list__item",children:t.jsxs(c.Button,{type:"button",hasIcon:!0,onClick:U,className:s.button,children:[t.jsx(c.Icon,{name:g("ubuntu-one"),className:s.icon}),t.jsx("span",{children:"Sign in with Ubuntu One"})]})}),o&&t.jsx("li",{className:"p-list__item",children:t.jsxs(c.Button,{type:"button",hasIcon:!0,onClick:()=>{l(-1)},className:s.button,children:[t.jsx(c.Icon,{name:g("standalone"),className:s.icon}),t.jsx("span",{children:"Sign in with Enterprise Login"})]})}),u.map(_=>t.jsx("li",{className:"p-list__item",children:t.jsxs(c.Button,{type:"button",hasIcon:!0,onClick:()=>{l(_.id)},className:s.button,children:[t.jsx(c.Icon,{name:g(_.provider),className:s.icon}),t.jsx("span",{children:`Sign in with ${_.name}`})]})},_.id))]})]})};export{F as A,O as u};
