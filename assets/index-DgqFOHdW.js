import{V as d,I as S}from"./ScriptsTabs-BrOiXEKJ.js";import{b as ot,a as mt,c as at,S as pt,u as nt,d as ut}from"./ScriptsTabs-BrOiXEKJ.js";import{S as f}from"./ScriptDropdown-C9m_9P8C.js";import{u as lt}from"./ScriptDropdown-C9m_9P8C.js";import{z as x,B as b,y as g,C as y,j as e,d as r}from"./index-DYykpNVa.js";import{S as _}from"./SidePanelFormButtons-Aj5ThB2m.js";import{u as h}from"./useRunScript-E-Qq7n1I.js";import{g as o}from"./formikErrors-Bw8iTXYS.js";import{D as j}from"./DeliveryBlock-C-KDxUEZ.js";import"./helpers-DblkVUdf.js";import"./index-Cbj0Sz5k.js";import{default as St}from"./index-W9SAO84K.js";import"./TablePagination-CIA4CRba.js";import"./TableFilterChips-DLH4XQ-H.js";import"./constants-CXofZZ4i.js";import"./NoData-CT6SeJUX.js";import"./ResponsiveTable-C-8YbfBJ.js";import"./StaticLink-BX9qJBBO.js";import"./TruncatedCell-DQQZxgbr.js";import"./Truncated-DtD6hAHP.js";import"./useExpandableRow-CGDZ27WS.js";import"./useRoles-CK1OAvut.js";import"./useFetchOld-BGD2hIpr.js";import"./TextConfirmationModal-DuGXYB1S.js";import"./PageParamFilter-LH49uHXA.js";import"./TableFilter-C7yTBfOe.js";import"./HeaderWithSearch-DH3OfcZg.js";import"./SingleInstanceTabs.module-DvhuGYYD.js";import"./useInfiniteQuery-uvFBsnEF.js";import"./downshift.esm-CVSNbv_O.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./RadioGroup-DD61dFf3.js";import"./CodeEditor-B9M2dPM_.js";import"./ScriptFormAttachments-DAnYsFsn.js";import"./AttachmentFile-Dr_XbZxY.js";const et=({parentAccessGroup:m,query:a})=>{const p=x(),{notify:n}=b(),{closeSidePanel:u}=g(),{runScript:c}=h(),t=y({initialValues:S,validationSchema:d,onSubmit:async i=>{try{await c({deliver_after:i.deliver_immediately?void 0:i.deliver_after,query:a,script_id:i.script_id,time_limit:i.time_limit,username:i.username}),u(),n.success({message:`"${i.script?.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(s){p(s)}}}),l=async i=>{if(await t.setFieldValue("script_id",i?.id??0),!t.values.username){const s=i?.username??"";await t.setFieldValue("username",s)}};return e.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[e.jsx(f,{script:t.values.script,setScript:async i=>{await t.setFieldValue("script",i),await l(i)},errorMessage:o(t,"script_id"),parentAccessGroup:m}),e.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[e.jsx(r.Col,{size:6,children:e.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:o(t,"username")})}),e.jsx(r.Col,{size:6,children:e.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:o(t,"time_limit")})})]}),e.jsx(j,{formik:t}),e.jsx(_,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{St as CreateScriptForm,et as RunInstanceScriptForm,f as ScriptDropdown,ot as ScriptList,mt as ScriptsContainer,at as ScriptsEmptyState,pt as ScriptsTabs,nt as useGetScripts,lt as useGetScriptsInfinite,ut as useGetSingleScript};
