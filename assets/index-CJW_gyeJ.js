import{h as b,k as a,t as _,i as y,p as h,q as P,f as S,s as x,r as I,j as o,g as c}from"./index-5gUg1wBm.js";import{A as D}from"./AssociationBlock-BwsTaS_1.js";import{S as k}from"./SidePanelFormButtons-B3h2hemk.js";import{u as A}from"./index-CfOJWEAA.js";import{u as j}from"./useRoles-D_4_uFUG.js";import"./MultiSelectField-DeAhX_th.js";import"./useInstances-Bwh27CFJ.js";import"./useFetchOld-DoJhfK-Q.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";import"./PageMain-B2M7d-if.js";import"./HeaderWithSearch-FkYK9Nhc.js";import"./usePageParams-D1oM-inl.js";import"./SidePanelTablePagination-bUTjyY-q.js";import"./TablePaginationBase-ByjrjRdM.js";import"./TableFilterChips-DTuS4Wl3.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="ee79b0e6-e2a3-45b9-be28-7176c31a9cee",e._sentryDebugIdIdentifier="sentry-dbid-ee79b0e6-e2a3-45b9-be28-7176c31a9cee")}catch{}const E={access_group:"",all_computers:!1,description:"",tags:[],title:""},F=b().shape({access_group:a(),all_computers:y(),description:a(),tags:_().of(a()),title:a()}),z=({profile:e})=>{const r=h(),{notify:l}=P(),{closeSidePanel:p}=S(),{getAccessGroupQuery:d}=j(),{copyPackageProfileQuery:m}=A(),{mutateAsync:g}=m,{data:n}=d(),u=(n==null?void 0:n.data.map(({name:s,title:i})=>({label:i,value:s})))??[];u.unshift({label:"Select access group",value:""});const t=x({initialValues:E,onSubmit:async s=>{const i={all_computers:s.all_computers,access_group:s.access_group,copy_from:e.title,description:s.description,title:s.title};!s.all_computers&&s.tags.length>0&&(i.tags=s.tags);try{await g(i),p(),l.success({message:`Profile "${e.title}" duplicated successfully`,title:"Profile duplicated"})}catch(f){r(f)}},validationSchema:F});return I.useEffect(()=>{e&&t.setValues({access_group:e.access_group,all_computers:e.all_computers,description:e.description,tags:e.tags,title:`${e.title} (copy)`})},[e]),o.jsxs(c.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[o.jsx(c.Input,{type:"text",label:"Name",required:!0,...t.getFieldProps("title"),error:t.touched.title&&t.errors.title?t.errors.title:void 0}),o.jsx(c.Input,{type:"text",label:"Description",required:!0,autoComplete:"off",...t.getFieldProps("description"),error:t.touched.description&&t.errors.description?t.errors.description:void 0}),o.jsx(c.Select,{label:"Access group",...t.getFieldProps("access_group"),options:u,error:t.touched.access_group&&t.errors.access_group?t.errors.access_group:void 0}),o.jsx(D,{formik:t}),o.jsx(k,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Duplicate"})]})};export{z as default};
