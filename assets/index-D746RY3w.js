import{b as p,y as m,z as x,a as j,r as f,R as u,j as e,L as y}from"./index-Djpc6K0J.js";import{r as A}from"./helpers-Bo73Thd0.js";const _="_container_1uszo_1",v={container:_},L=()=>{const[s]=p(),{setUser:l}=m(),{getAuthStateWithOidcQuery:d}=x(),g=j(),a=s.get("code"),r=s.get("state"),{data:t,isLoading:n,error:h}=d({code:a,state:r},{enabled:!!a&&!!r});return f.useEffect(()=>{var o,i;if(t)if((o=t.data.return_to)!=null&&o.external&&t.data.return_to.url)A(t.data.return_to.url,{replace:!0});else{l(t.data);const c=new URL(((i=t.data.return_to)==null?void 0:i.url)??`${u}overview`,location.origin);g(c.toString().replace(c.origin,""),{replace:!0})}},[t]),e.jsxs("div",{className:v.container,children:[a&&r&&n&&e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}),(!a||!r||!n&&h)&&e.jsxs("div",{children:[e.jsx("p",{children:"Oops! Something went wrong. Please try again or contact our support team."}),e.jsx(y,{to:`${u}login`,className:"p-button",children:"Back to login"})]})]})};export{L as default};
