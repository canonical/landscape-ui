const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C7Qg2Olg.js","assets/index-Cy8r8ukC.js","assets/index-D8UVcD7h.css","assets/SidePanelFormButtons-CVG32ziI.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/useEditScript-BZDCUAeg.js","assets/ScriptsTabs-DZ9QB0Uw.js","assets/TruncatedCell-CCeJfEAx.js","assets/TruncatedCell-CoXbu3VM.css","assets/useRoles-t0BfZvG0.js","assets/HeaderWithSearch-CsukJ2Oa.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/SingleInstanceTabs.module-Cm1BYFZQ.js","assets/SingleInstanceTabs-9EpKZLyq.css","assets/index-CpLLnIdd.js","assets/useExpandableRow-Bx3EjO2s.js","assets/ScriptsTabs-DN44MVZt.css"])))=>i.map(i=>d[i]);
import{i as v,h as P,r,m as j,j as s,n as d,p as l,$ as y}from"./index-Cy8r8ukC.js";import{e as C}from"./ScriptsTabs-DZ9QB0Uw.js";import{S as b}from"./SidePanelTablePagination-USN1FGTg.js";import"./TruncatedCell-CCeJfEAx.js";import"./useRoles-t0BfZvG0.js";import"./HeaderWithSearch-CsukJ2Oa.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./index-CpLLnIdd.js";import"./useExpandableRow-Bx3EjO2s.js";const V=({scriptId:a,limit:o,offset:n})=>{const i=v(),{data:t,isLoading:c}=P({queryKey:["scripts","versions",a,o,n],queryFn:async()=>i.get(`scripts/${a}/versions`,{params:{limit:o,offset:n}})});return{versions:(t==null?void 0:t.data.results)??[],isVersionsLoading:c,count:t==null?void 0:t.data.count}},f="_version_1w5gk_1",E={version:f},k=r.lazy(async()=>y(()=>import("./index-C7Qg2Olg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),T=({script:a,viewVersionHistory:o})=>{const[n,i]=r.useState(1),[t,c]=r.useState(20),{setSidePanelContent:m}=j(),{versions:u,isVersionsLoading:p,count:g}=V({scriptId:a.id,limit:t,offset:(n-1)*t}),h=e=>{i(e)},S=e=>{c(e)},_=e=>{m(e.title,s.jsx(r.Suspense,{fallback:s.jsx(l,{}),children:s.jsx(k,{scriptId:a.id,scriptVersion:e,goBack:o,isArchived:a.status==="ARCHIVED"})}))},x=r.useMemo(()=>[{accessor:"version_number",Header:"Version",className:E.version,Cell:({row:{original:e}})=>s.jsx(d.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top",onClick:()=>{_(e)},children:e.version_number})},{accessor:"created_at",Header:"Created",Cell:({row:{original:e}})=>s.jsx(s.Fragment,{children:C({author:e.created_by.name,date:e.created_at})})}],[u]);return p?s.jsx(l,{}):s.jsxs(s.Fragment,{children:[s.jsx(d.ModularTable,{columns:x,data:u}),s.jsx(b,{currentPage:n,pageSize:t,paginate:h,setPageSize:S,totalItems:g})]})};export{T as default};
