import{X as g,b as h,Y as p,a as x,r as m,Z as _,j as e,_ as j,L as A}from"./index-W6vPPLJL.js";const E="_container_1uszo_1",f={container:E},S=()=>{const[a]=g(),{redirectToExternalUrl:s,setAuthLoading:o,setUser:c}=h(),{getAuthStateWithOidcQuery:u}=p(),l=x(),n=a.get("code")??"",r=a.get("state")??"",{data:t,isLoading:d}=u({code:n,state:r},{enabled:!!n&&!!r});return m.useEffect(()=>{if(!(!t||!("current_account"in t.data)))if(t.data.return_to?.external&&t.data.return_to.url)s(t.data.return_to.url,{replace:!0});else{o(!0),c(t.data);const i=new URL(t.data.return_to?.url??_,location.origin);l(i.toString().replace(i.origin,""),{replace:!0})}},[t,s]),e.jsx("div",{className:f.container,children:d?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:j}),e.jsx(A,{to:"/login",className:"p-button",children:"Back to login"})]})})};export{S as default};
