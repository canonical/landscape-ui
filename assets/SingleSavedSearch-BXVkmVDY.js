import{b as p,c as S,j as r,d as s}from"./index-CQs3wXys.js";import{u as b}from"./useSavedSearches-dHWyeXn-.js";import{c as x,a}from"./index.esm-85kEx3I1.js";import{u as f}from"./formik.esm-C_3GEhhV.js";import{S as y}from"./SidePanelFormButtons-CTKwSU1t.js";import"./useFetchOld-D-5JyUuM.js";import"./useMutation-D9dT1mhA.js";import"./useQuery-DrwXjJzc.js";import"./SidePanelFormButtons.module-CoxOjuX8.js";const g={name:"",title:"",search:""},A=x().shape({name:a().test({test:t=>t?/^[a-z0-9][-a-z0-9]*$/.test(t):!0,message:"Name must consist of only lowercase alphanumeric characters and hyphens"}),title:a().required("This field is required"),search:a().required("This field is required")}),V=({savedSearch:t})=>{const o=p(),{closeSidePanel:n}=S(),{createSavedSearchQuery:u,editSavedSearchQuery:c}=b(),{mutateAsync:m}=u,{mutateAsync:d}=c,e=f({initialValues:t||g,validationSchema:A,onSubmit:async i=>{try{t?await d(i):await m(i),l()}catch(h){o(h)}}}),l=()=>{e.resetForm(),n()};return r.jsxs(s.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(s.Input,{type:"text",label:"Title",required:!0,...e.getFieldProps("title"),error:e.touched.title&&e.errors.title?e.errors.title:void 0}),r.jsx(s.Input,{type:"text",label:"Search",required:!0,...e.getFieldProps("search"),error:e.touched.search&&e.errors.search?e.errors.search:void 0}),!t&&r.jsx(s.Input,{type:"text",label:"Name",...e.getFieldProps("name"),error:e.touched.name&&e.errors.name?e.errors.name:void 0}),r.jsx(y,{submitButtonDisabled:e.isSubmitting,submitButtonText:t?"Save changes":"Add"})]})};export{V as default};
