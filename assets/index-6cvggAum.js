const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DfzJgr2d.js","assets/index-Cgwrw4vf.js","assets/index-QfA8j4AK.css","assets/AssociationBlock-DNVGxBjU.js","assets/MultiSelectField-CCOz4BJu.js","assets/MultiSelectField-GyNA33om.css","assets/useInstances-Dpu7RjPA.js","assets/useFetchOld-D-Nlh7iI.js","assets/AssociationBlock-OuvPxND7.css","assets/SidePanelFormButtons-DgoyKUZ8.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/constants-Be8--fdY.js","assets/useRoles-Dv-vVWM-.js","assets/index-js_8cldS.css","assets/index-CGzVMTD-.js","assets/NoData-CsQjibpg.js","assets/usePageParams-Bx23zt7X.js","assets/PageMain-Do8pq2Oq.js","assets/PageMain--v5xNZ5p.css","assets/HeaderWithSearch-8mvqjRhK.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/TableFilterChips-OTSvn5O7.js","assets/TableFilterChips-CHqetGbX.css","assets/index-_v2C-3Y0.css"])))=>i.map(i=>d[i]);
import{b as F,c as j,d as w,r as n,p as T,q as I,f,j as e,g as o,n as p,_ as m,E as A}from"./index-Cgwrw4vf.js";import{P as D,a as L,b as M}from"./PageMain-Do8pq2Oq.js";import{u as O}from"./useFetchOld-D-Nlh7iI.js";import{u as k}from"./usePageParams-Bx23zt7X.js";import{u as R}from"./useRoles-Dv-vVWM-.js";import{H as B}from"./HeaderWithSearch-8mvqjRhK.js";import{T as Q}from"./TableFilterChips-OTSvn5O7.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="401f37de-48f7-4dc3-89ac-5cd999def26a",t._sentryDebugIdIdentifier="sentry-dbid-401f37de-48f7-4dc3-89ac-5cd999def26a")}catch{}function b(){const t=F(),a=O(),i=j({mutationFn:r=>a.get("CreateUpgradeProfile",{params:r}),onSuccess:()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})}),c=j({mutationFn:r=>a.get("EditUpgradeProfile",{params:r}),onSuccess:()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})}),l=j({mutationFn:r=>a.get("RemoveUpgradeProfile",{params:r}),onSuccess:()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})});return{createUpgradeProfileQuery:i,editUpgradeProfileQuery:c,removeUpgradeProfileQuery:l,getUpgradeProfilesQuery:(r={},g={})=>w({queryKey:["upgradeProfiles",r],queryFn:()=>a.get("GetUpgradeProfiles",{params:r}),...g})}}const H="_toggleButton_bnzrt_1",N="_menu_bnzrt_6",y={toggleButton:H,menu:N},$=n.lazy(()=>m(()=>import("./index-DfzJgr2d.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),q=({profile:t})=>{const[a,i]=n.useState(!1),[c,l]=n.useState(""),u=T(),{notify:r}=I(),{setSidePanelContent:g}=f(),{removeUpgradeProfileQuery:h}=b(),{mutateAsync:s,isPending:d}=h,x=async()=>{try{await s({name:t.name}),r.success({message:`Upgrade profile "${t.title}" removed successfully`,title:"Upgrade profile removed"})}catch(P){u(P)}},U=()=>{g(`Edit "${t.title}" profile`,e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx($,{action:"edit",profile:t})}))},v=()=>{i(!0)},C=()=>{i(!1)},S=P=>{l(P.target.value)},E=[{children:e.jsxs(e.Fragment,{children:[e.jsx(o.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),"aria-label":`Edit "${t.title}" profile`,hasIcon:!0,onClick:U},{children:e.jsxs(e.Fragment,{children:[e.jsx(o.Icon,{name:o.ICONS.delete}),e.jsx("span",{children:"Remove"})]}),"aria-label":`Remove "${t.title}" upgrade profile`,hasIcon:!0,onClick:v}];return e.jsxs(e.Fragment,{children:[e.jsx(o.ContextualMenu,{position:"left",className:y.menu,toggleClassName:y.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(o.Icon,{name:"contextual-menu","aria-hidden":!0}),toggleProps:{"aria-label":`${t.name} profile actions`},links:E}),a&&e.jsxs(o.ConfirmationModal,{title:"Remove upgrade profile",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:d||c!==`remove ${t.name}`,confirmButtonLoading:d,onConfirm:x,close:C,children:[e.jsxs("p",{children:['This will remove "',t.title,'" profile. This action is irreversible.']}),"Type ",e.jsxs("b",{children:["remove ",t.name]})," to confirm.",e.jsx(o.Input,{type:"text",value:c,onChange:S})]})]})},z="_truncated_1wloj_1",K="_actions_1wloj_7",_={truncated:z,actions:K},V=n.lazy(()=>m(()=>import("./index-CGzVMTD-.js"),__vite__mapDeps([15,1,2,16,17,12,18,19,7,13,20,21,22,23,24]))),G=({profiles:t})=>{const{search:a}=k(),{setSidePanelContent:i}=f(),{getAccessGroupQuery:c}=R(),{data:l}=c(),u=(l==null?void 0:l.data.map(({name:s,title:d})=>({label:d,value:s})))??[],r=n.useMemo(()=>a?t.filter(s=>s.title.toLowerCase().includes(a.toLowerCase())):t,[t,a]),g=s=>{i(s.title,e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(V,{accessGroupOptions:u,profile:s})}))},h=n.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:s}})=>e.jsx(o.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>g(s),children:s.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:s}})=>{var d;return e.jsx(e.Fragment,{children:((d=u.find(({value:x})=>x===s.access_group))==null?void 0:d.label)??s.access_group})}},{accessor:"tags",className:_.truncated,Header:"Tags",Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:s.tags.join(", ")})},{accessor:"associated",Header:"Associated"},{accessor:"actions",className:_.actions,Header:"Actions",Cell:({row:{original:s}})=>e.jsx(q,{profile:s})}],[r,u.length]);return e.jsx(o.ModularTable,{columns:h,data:r,emptyMsg:`No upgrade profiles found with the search: "${a}"`})},W=n.lazy(()=>m(()=>import("./index-DfzJgr2d.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),Y=()=>{const{setSidePanelContent:t}=f(),a=()=>{t("Add upgrade profile",e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(W,{action:"add"})}))};return e.jsx(A,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(o.Button,{appearance:"positive",onClick:a,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],title:"No upgrade profiles found"})},J=()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsx(Q,{filtersToDisplay:["search"]})]}),X=()=>{const{getUpgradeProfilesQuery:t}=b(),{data:a,isLoading:i}=t();return e.jsxs(e.Fragment,{children:[i&&e.jsx(p,{}),!i&&(!a||!a.data.length)&&e.jsx(Y,{}),!i&&a&&a.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx(G,{profiles:a.data})]})]})},Z=n.lazy(()=>m(()=>import("./index-DfzJgr2d.js").then(t=>t.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(t=>({default:t.SingleUpgradeProfileForm}))),ee=()=>{const{setSidePanelContent:t}=f(),a=()=>{t("Add upgrade profile",e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Z,{action:"add"})}))};return e.jsxs(D,{children:[e.jsx(L,{title:"Upgrade profiles",actions:[e.jsx(o.Button,{type:"button",appearance:"positive",onClick:a,children:"Add upgrade profile"},"add")]}),e.jsx(M,{children:e.jsx(X,{})})]})},le=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{G as U,Y as a,J as b,le as i,b as u};
