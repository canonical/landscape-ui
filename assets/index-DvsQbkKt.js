const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B7arEINl.js","assets/index-_GBNEgML.js","assets/index-D8C4EmL5.css","assets/useRoles-Cu4V5ba4.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{aD as c,aE as _,w as x,j as t,i as l,v as P,L as S,P as h,R as y,t as p,c as g,a3 as j,h as A,q as I,_ as E,aF as b,E as f}from"./index-_GBNEgML.js";import{P as k,a as v,b as L}from"./PageMain-Dp-fNxq8.js";const R="_listItem_upezw_1",T="_listItem__link_upezw_9",d={listItem:R,listItem__link:T},C=s=>{const e=c[s.alert_type]||c.Unknown,n=s.alert_type in _;return s.alert_type==="UbuntuProContractExpirationAlert"?{contractExpiryDays:e.filterValue}:n?{status:e.filterValue}:{query:e.query}},F=p.lazy(()=>j(()=>import("./index-B7arEINl.js"),__vite__mapDeps([0,1,2,3,4]))),N=({alerts:s,pendingInstances:e})=>{const{setSidePanelContent:n}=x(),i=()=>{n("Review Pending Instances",t.jsx(p.Suspense,{fallback:t.jsx(g,{}),children:t.jsx(F,{instances:e})}),"large")},o=s.map((r,u)=>{const a=c[r.alert_type]||c.Unknown,m=C(r);return t.jsxs("div",{className:d.listItem,children:[t.jsx(l.Icon,{name:`${a.icon.color??a.icon.gray}`}),a.alertType==="PendingComputersAlert"?t.jsxs(l.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:i,children:[`${e.length} pending `,P(e.length,"computer needs","computers need")," ","authorization"]}):t.jsx(S,{to:y.instances.root(m),className:h("u-no-margin u-no-padding",d.listItem__link),children:r.summary})]},a.alertType||u)});return t.jsx(l.List,{items:o})};function w(){const s=A();return{getAlertsSummaryQuery:()=>I({queryKey:["alert","summary"],queryFn:async()=>s.get("alerts/summary")})}}const q=()=>{const s=E(),{getAlertsSummaryQuery:e}=w(),{data:n,isLoading:i}=e(),o=n?.data.alerts_summary.some(m=>m.alert_type==="PendingComputersAlert"),{pendingInstances:r,isGettingPendingInstances:u}=b(void 0,{enabled:o}),a=n?.data.alerts_summary||[];return t.jsxs(k,{children:[t.jsx(v,{title:"Alerts"}),t.jsx(L,{children:i||o&&u?t.jsx(g,{}):a.length?t.jsx(N,{alerts:a,pendingInstances:r}):t.jsx(f,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet."}),cta:[t.jsx(l.Button,{appearance:"positive",onClick:()=>s(y.account.alerts(),{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]})})]})};export{q as default};
