const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-SV8mQKpX.js","assets/index-BhA4J3ko.js","assets/index-DWaf_ZwL.css","assets/AssociationBlock-CKSoNelA.js","assets/MultiSelectField-8o4i5z9Z.js","assets/MultiSelectField-DOBW8uWL.css","assets/useInstances-C6H1-Kjx.js","assets/PageMain-BGNK0xG-.js","assets/PageMain-BIuYvhUI.css","assets/useMutation-D6hW2Vr2.js","assets/useFetchOld-5foHVBsZ.js","assets/AssociationBlock-Cb2Mr2ww.css","assets/SidePanelFormButtons-7JkHrlOz.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/useRoles-Db1B50uX.js","assets/index.esm-B8rBEOcC.js","assets/constants-CGmSpzVx.js","assets/FileInput-CCUeGwmY.js","assets/WslInstancesHeader-DVFBVFkw.js","assets/EmptyState-C71tSpTG.js","assets/EmptyState-DUn4ZRie.css","assets/useConfirm-CiNGk-W0.js","assets/HeaderWithSearch-DjV1i2rB.js","assets/HeaderWithSearch-DQybm8h_.css","assets/usePageParams-Cx4Fh8yG.js","assets/WslInstancesHeader-C2N1H1qb.css","assets/CodeEditor-DeXfNykg.js","assets/CodeEditor-CA89WJcJ.css","assets/NoData-JiBvrZwJ.js","assets/index-YvXtz6mj.css","assets/index-B9jmeGi1.js","assets/index-DQNTzwQp.js","assets/InfoItem-CWs2RNzA.js","assets/InfoItem-C-lWh_lY.css","assets/index-DMJRXBNc.css"])))=>i.map(i=>d[i]);
import{r as a,_ as f,f as y,j as e,h as o,l as u,c as T,d as $,e as A,n as B,i as g}from"./index-BhA4J3ko.js";import{u as D,P as F,a as O,b as R}from"./PageMain-BGNK0xG-.js";import{E as q}from"./EmptyState-C71tSpTG.js";import{u as H}from"./useRoles-Db1B50uX.js";import{u as W}from"./usePageParams-Cx4Fh8yG.js";import{N as Q}from"./NoData-JiBvrZwJ.js";import{u as _}from"./useMutation-D6hW2Vr2.js";import{u as M}from"./useConfirm-CiNGk-W0.js";import{H as z}from"./HeaderWithSearch-DjV1i2rB.js";const V=a.lazy(()=>f(()=>import("./index-SV8mQKpX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),K=()=>{const{setSidePanelContent:n}=y(),t=()=>{n("Add WSL profile",e.jsx(a.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(V,{action:"add"})}))};return e.jsx(q,{title:"You don't have any WSL profiles yet",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"WSL profiles allow you to create and apply configurations for Windows Subsystem for Linux &lpar;WSL&rpar; instances, in bulk."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/manage-wsl-instances-in-landscape",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn how to use WSL profiles"})]}),cta:[e.jsx(o.Button,{appearance:"positive",onClick:t,children:"Add WSL profile"},"add")]})},G=`These instances are not compliant
with the profile. They do not have a
pending activity to become compliant.`,Y=`These instances are not compliant
with the profile. They do have a
pending activity to apply its
constraints.`,J=({column:n})=>{const t={};return n.id==="name"?t.role="rowheader":n.id==="access_group"?t["aria-label"]="Access group":n.id==="tags"?t["aria-label"]="Tags":n.id==="description"?t["aria-label"]="Description":n.id==="computers['non-compliant']"?t["aria-label"]="Not compliant instances":n.id==="computers['pending']"?t["aria-label"]="Pending instances":n.id==="computers['constrained']"?t["aria-label"]="Associated instances":n.id==="actions"&&(t["aria-label"]="Actions"),t},U="_truncated_lm2kq_1",X="_noWrap_lm2kq_2",Z="_actions_lm2kq_11",ee="_description_lm2kq_15",se="_toggleButton_lm2kq_19",te="_actionButton_lm2kq_24",l={truncated:U,noWrap:X,actions:Z,description:ee,toggleButton:se,actionButton:te};function v(){const n=T(),t=$(),i=(c,m={})=>D({queryKey:["wslProfiles"],queryFn:()=>t.get("child-instance-profiles"),...m}),d=_({mutationFn:c=>t.post("child-instance-profiles",c),onSuccess:()=>n.invalidateQueries({queryKey:["wslProfiles"]})}),p=_({mutationFn:({name:c})=>t.delete(`child-instance-profiles/${c}`),onSuccess:()=>n.invalidateQueries({queryKey:["wslProfiles"]})}),x=_({mutationFn:({name:c,...m})=>t.patch(`child-instance-profiles/${c}`,m),onSuccess:()=>n.invalidateQueries({queryKey:["wslProfiles"]})});return{createWslProfileQuery:d,editWslProfileQuery:x,getWslProfilesQuery:i,removeWslProfileQuery:p}}const ne=a.lazy(()=>f(()=>import("./index-B9jmeGi1.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,20,21,22,23,24,25,26,17,29,30]))),oe=a.lazy(()=>f(()=>import("./index-SV8mQKpX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),ae=a.lazy(()=>f(()=>import("./index-DQNTzwQp.js"),__vite__mapDeps([32,1,2,33,34,22,29,7,8,20,21,15,9,10,25,23,24,35]))),ie=({wslProfiles:n})=>{const{search:t}=W(),i=A(),{notify:d}=B(),{setSidePanelContent:p}=y(),{getAccessGroupQuery:x}=H(),{removeWslProfileQuery:c}=v(),{closeConfirmModal:m,confirmModal:S}=M(),{mutateAsync:C}=c,{data:j}=x(),P=(j==null?void 0:j.data.map(({name:s,title:r})=>({label:r,value:s})))??[],L=s=>{p(s.title,e.jsx(a.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(ae,{profile:s,accessGroupOptions:P})}))},w=s=>{p(`Edit "${s.title}" profile`,e.jsx(a.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(ne,{profile:s})}))},N=s=>{p(`Duplicate "${s.title}" profile`,e.jsx(a.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(oe,{action:"duplicate",profile:s})}))},E=async s=>{try{await C({name:s}),d.success({message:`WSL profile "${s}" removed successfully.`,title:"WSL profile removed"})}catch(r){i(r)}finally{m()}},I=(s,r)=>{S({title:`Remove ${s}`,body:e.jsxs("p",{children:["Removing this profile will affect"," ",e.jsxs("b",{children:[r," instances"]}),". This action is irreversible."]}),buttons:[e.jsx(o.Button,{type:"button",appearance:"negative",onClick:()=>E(s),"aria-label":`Remove ${s} profile`,children:"Remove"},"remove")]})},b=a.useMemo(()=>t?n.filter(s=>s.title.toLowerCase().includes(t.toLowerCase())):n,[n,t]),k=a.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:s}})=>e.jsx(o.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>L(s),children:s.title})},{accessor:"description",className:g(l.truncated,l.description),Header:"Description"},{accessor:"access_group",Header:"Access group",Cell:({row:{original:{access_group:s}}})=>{var r;return((r=P.find(({value:h})=>h===s))==null?void 0:r.label)??s}},{accessor:"tags",className:l.truncated,Header:"Tags",Cell:({row:{original:s}})=>s.tags.join(", ")||e.jsx(Q,{})},{accessor:"computers['non-compliant']",Header:e.jsxs("div",{className:l.noWrap,children:[e.jsx("span",{children:"Not compliant "}),e.jsx(o.Tooltip,{position:"btm-left",message:G,children:e.jsx(o.Icon,{name:"help"})})]}),Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:`${s.computers["non-compliant"].length} ${s.computers["non-compliant"].length===1?"instance":"instances"}`})},{accessor:"computers['pending']",Header:e.jsxs("div",{className:l.noWrap,children:[e.jsx("span",{children:"Pending "}),e.jsx(o.Tooltip,{position:"btm-left",message:Y,children:e.jsx(o.Icon,{name:"help"})})]}),Cell:({row:{original:s}})=>{var r,h;return e.jsx(e.Fragment,{children:`${((r=s.computers.pending)==null?void 0:r.length)??0} ${((h=s.computers.pending)==null?void 0:h.length)===1?"instance":"instances"}`})}},{accessor:"computers['constrained']",Header:"Associated",Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:`${s.computers.constrained.length} ${s.computers.constrained.length===1?"instance":"instances"}`})},{accessor:"actions",className:g("u-align-text--right",l.actions),Header:"Actions",Cell:({row:{original:s}})=>e.jsxs(o.ContextualMenu,{position:"left",toggleClassName:l.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(o.Icon,{name:"contextual-menu","aria-hidden":!0}),toggleProps:{"aria-label":`${s.name} profile actions`},children:[e.jsxs(o.Button,{type:"button",appearance:"base",hasIcon:!0,className:g("u-no-margin--bottom u-no-margin--right",l.actionButton),onClick:()=>w(s),"aria-label":`Edit ${s.name} profile`,children:[e.jsx(o.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(o.Button,{type:"button",appearance:"base",hasIcon:!0,className:g("u-no-margin--bottom u-no-margin--right",l.actionButton),onClick:()=>N(s),"aria-label":`Edit ${s.name} profile`,children:[e.jsx(o.Icon,{name:"canvas"}),e.jsx("span",{children:"Duplicate"})]}),e.jsxs(o.Button,{type:"button",appearance:"base",hasIcon:!0,className:"u-no-margin--bottom u-no-margin--right p-contextual-menu__link",onClick:()=>I(s.name,s.computers.constrained.length),"aria-label":`Remove ${s.name} profile`,children:[e.jsx(o.Icon,{name:o.ICONS.delete}),e.jsx("span",{children:"Remove"})]})]})}],[b,P.length]);return e.jsx(o.ModularTable,{columns:k,data:b,emptyMsg:`No WSL profiles found with the search "${t}"`,getCellProps:J})},re=()=>{const{setPageParams:n}=W(),t=i=>{n({search:i})};return e.jsx(z,{onSearch:t})},le=a.lazy(()=>f(()=>import("./index-SV8mQKpX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),ce=n=>e.jsx(a.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(le,{...n})}),de=()=>{const{setSidePanelContent:n}=y(),{getWslProfilesQuery:t}=v(),{data:i,isLoading:d}=t(),p=()=>{n("Add WSL profile",e.jsx(ce,{action:"add"}))};return e.jsxs(F,{children:[e.jsx(O,{title:"WSL Profiles",actions:[e.jsx(o.Button,{type:"button",appearance:"positive",onClick:p,children:"Add WSL profile"},"add-wsl-profile")]}),e.jsxs(R,{children:[d&&e.jsx(u,{}),!d&&(!i||i.data.results.length===0)&&e.jsx(K,{}),!d&&i&&i.data.results.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsx(ie,{wslProfiles:i.data.results})]})]})]})},_e=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{_e as i,v as u};
