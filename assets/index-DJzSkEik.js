import{j as a,h as P,r as x,m as b,K as j,l as k}from"./index-BZncHbld.js";import{T as S}from"./TablePagination-DZIPeLsQ.js";import{P as C,a as N,b as _}from"./useUsns-Dxb5uLhf.js";import{u as m}from"./usePageParams-DsZCpUh3.js";import{H as I}from"./HeaderWithSearch-BhNhDEFy.js";import"./TablePagination.module-CgQ3jx4B.js";import"./PageMain-DZPiYS8t.js";import"./useMutation-C-a8eqzH.js";import"./useFetchOld-BIuxw0nI.js";const L=[{label:"All",value:""},{label:"Installed",value:"installed"},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],y="_selectContainer_fv5fe_1",A="_actions_fv5fe_6",p={selectContainer:y,actions:A},E=({handleClearSelection:s,selectedPackages:o})=>{const{setPageParams:e,status:r}=m(),t=l=>{e({search:l}),s()},c=l=>{e({status:l}),s()};return a.jsx(I,{onSearch:t,actions:a.jsxs("div",{className:p.actions,children:[a.jsx(P.Select,{label:"Status",wrapperClassName:p.selectContainer,options:L,value:r,onChange:l=>c(l.target.value)}),a.jsx(C,{selectedPackages:o})]})})},H=(s,o)=>{let e;return s===""?e="No packages found":s==="upgrade"?e="No available upgrades found":s==="security"?e="No available security upgrades found":s==="installed"?e="No installed packages found":e="No held packages found",o?`${e} with the search "${o}"`:e},F=()=>{const[s,o]=x.useState([]),{instanceId:e,childInstanceId:r}=b(),{status:t,search:c,currentPage:l,pageSize:i}=m(),{getInstancePackagesQuery:h}=N(),{state:d}=j(),f=Number(r??e),g=()=>{o([])},{data:n,isLoading:u}=h({instance_id:f,search:c,limit:i,offset:(l-1)*i,available:!1,installed:t==="installed"||!t||void 0,upgrade:t==="upgrade"||void 0,held:t==="held"||void 0,security:t==="security"||void 0});return a.jsxs(a.Fragment,{children:[!c&&!t&&l===1&&i===20&&u&&a.jsx(k,{}),(c||t||l!==1||i!==20||!u)&&a.jsxs(a.Fragment,{children:[a.jsx(E,{selectedPackages:s,handleClearSelection:g}),a.jsx(_,{packages:(n==null?void 0:n.data.results)??[],packagesLoading:u,selectedPackages:s,onPackagesSelect:v=>{o(v)},emptyMsg:H(t,c),selectAll:(d==null?void 0:d.selectAll)??!1})]}),a.jsx(S,{handleClearSelection:g,totalItems:n==null?void 0:n.data.count,currentItemCount:n==null?void 0:n.data.results.length})]})},q=F;export{q as default};
