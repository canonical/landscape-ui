import{c as w,j as e,e as n,g as m}from"./index-7rbqZGOC.js";import{u as A}from"./index-BYae_EmQ.js";import{d as C,s as i}from"./DistributionCard.module-CdGw1YvC.js";import{u as _}from"./useConfirm-B_JFtESx.js";import{I as p}from"./InfoItem-CT4qJo1M.js";import{u as I}from"./PageMain-J6fXnbp-.js";import"./useMutation-CcXaMJpM.js";import"./useQuery-B9bt25H8.js";import"./EmptyState-Z1WsBfRf.js";const R="_tableHeader_1b655_1",$="_apiCredentials_1b655_5",k={tableHeader:R,apiCredentials:$},M=({user:r,credentials:u})=>{const o=I("(min-width: 620px)"),{confirmModal:b,closeConfirmModal:h}=_(),x=w(),{generateApiCredentials:g}=A(),{mutateAsync:j,isLoading:y}=g,f=async s=>{try{await j({account:s})}catch(a){x(a)}finally{h()}},v=({accountName:s,accountTitle:a,action:t})=>{b({title:`${t} API credentials for ${a}`,body:`${t==="Regenerate"?`${t.slice(0,-1)}ing your API credentials will make your previously used credentials obsolete and deauthenticate any clients using them. `:""}This action will create new credentials for integrating with the ${a} organisation`,buttons:[e.jsxs(n.Button,{appearance:"negative",hasIcon:!0,onClick:()=>f(s),"aria-label":`${t} API credentials confirmation for ${a}`,children:[y&&e.jsx(n.Spinner,{}),t," API credentials"]},"confirm-generate-credentials")]})};return e.jsx(e.Fragment,{children:e.jsx(n.Row,{className:"u-no-padding--left u-no-padding--right u-no-max-width",children:r.accounts.map(s=>{const a=u.find(l=>l.account_name===s.name),d=[{label:"Name",value:s.name},{label:"Title",value:s.title},{label:"Identity",value:e.jsx("code",{children:r.identity})},{label:"Endpoint",value:e.jsx("code",{children:(a==null?void 0:a.endpoint)??""})},{label:"Access Key",value:e.jsx("code",{children:(a==null?void 0:a.access_key)??""})},{label:"Secret Key",value:e.jsx("code",{children:(a==null?void 0:a.secret_key)??""})},{label:"Roles",value:s.roles.join(", ")}].map(l=>({columns:[{content:l.label,"aria-label":l.label,className:"u-no-margin--bottom"},{content:l.value,"aria-label":`${l.label} value`}]})),c=a!=null&&a.secret_key||a!=null&&a.access_key?"Regenerate":"Generate";return e.jsx(n.Col,{size:12,className:C.item,children:e.jsxs("div",{className:i.card,children:[e.jsxs("div",{className:i.header,children:[e.jsx("p",{className:i.title,children:s.title}),e.jsx(n.Button,{className:m("u-no-margin--bottom",{"is-small":o}),onClick:()=>v({accountName:s.name,accountTitle:s.title,action:c}),children:e.jsxs("span",{children:[c," API credentials"]})})]}),e.jsx("div",{className:i.content,children:o?e.jsx(n.MainTable,{rows:d,emptyStateMsg:"No data available"}):d.map((l,N)=>e.jsxs(n.Row,{className:m("u-no-padding--left u-no-padding--right",k.apiCredentials),children:[e.jsx(n.Col,{size:2,small:2,children:e.jsx(p,{label:"",value:l.columns[0].content})}),e.jsx(n.Col,{size:2,small:2,children:e.jsx(p,{label:"",value:l.columns[1].content})})]},N))})]})},s.title)})})})},D=M;export{D as default};
