import{G as v}from"./index-Baa6m-iR.js";import{q as p,s as y,v as G,z as b,f as o,j as r,e as a}from"./index-D2Oms9tG.js";import{u as h}from"./useGPGKeys-D4jiXxer.js";import{t as m}from"./tests-DFnZqbNV.js";import{S as x}from"./SidePanelFormButtons-BYOeNULY.js";import"./PageMain-9uLXS3Ev.js";import"./constants-DTivhiFn.js";import"./SidePanelFormButtons.module-CcPyiogC.js";const P={name:"",material:""},K=()=>{const{closeSidePanel:n}=p(),u=y(),{importGPGKeyQuery:d,getGPGKeysQuery:l}=h(),{mutateAsync:c}=d,{data:i}=l(),e=G({initialValues:P,validationSchema:b().shape({name:o().required("This field is required").test({test:m.test,message:m.message}).test({params:{getGPGKeysResponse:i},test:t=>!(i?.data??[]).map(({name:s})=>s).includes(t),message:"It must be unique within the account."}),material:o().required("This field is required").transform(t=>encodeURIComponent(t))}),onSubmit:async t=>{try{await c(t),n()}catch(s){u(s)}}});return r.jsxs(a.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(a.Input,{type:"text",label:"Name",required:!0,error:e.touched.name&&e.errors.name?e.errors.name:void 0,...e.getFieldProps("name")}),r.jsx(a.Textarea,{label:"Material",required:!0,rows:10,error:e.touched.material&&e.errors.material?e.errors.material:void 0,...e.getFieldProps("material")}),r.jsx(x,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Import key"})]})};export{v as GPGKeysList,K as NewGPGKeyForm,h as useGPGKeys};
