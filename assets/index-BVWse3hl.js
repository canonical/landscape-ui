import{b as pe,e as ge,f as _e,g as V,i as x,j as e,v as T,d as t,o as I,P as R,p as M,ap as fe,q as X,n as A,B as Z,J as B,K as be,A as S,s as xe,G as je,aJ as ve,$ as Ce,I as w,D as ee,N as L,h as Se,E as ye,aB as Ne}from"./index-58XCQrHI.js";import{S as ne}from"./SidePanelFormButtons-S63byZ8e.js";import{D as we}from"./downshift.esm-ZPVxy8Ru.js";import{H as Ie}from"./HeaderWithSearch-C49ydzbc.js";import{f as G}from"./helpers-Bg09bd6m.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";const H=()=>{const n=pe(),a=ge(),d=(r,f={})=>{if(!r)throw new Error("Missing required parameters");const{instance_id:_,...s}=r;return V({queryKey:["snaps",{...r}],queryFn:async()=>n.get(`computers/${_}/snaps/installed`,{params:s}),...f})},g=(r,f={})=>V({queryKey:["snaps",{...r}],queryFn:async()=>{if(!r)throw new Error("Missing required parameters");return n.get(`computers/${r.instance_id}/snaps/available?name_startswith=${r.query}`)},...f}),c=(r,f={})=>V({queryKey:["snaps",{...r}],queryFn:async()=>{if(!r)throw new Error("Missing required parameters");return n.get(`computers/${r.instance_id}/snaps/${r.name}/info`)},...f}),b=_e({mutationKey:["snaps","action"],mutationFn:async r=>n.post("snaps",r),onSuccess:async()=>a.invalidateQueries({queryKey:["snaps"]})});return{getSnapsQuery:d,getAvailableSnapInfo:c,getAvailableSnaps:g,snapsActionQuery:b}},$e="_toBeConfirmedCard_mibcv_1",Be="_toBeConfirmedCard__buttons_mibcv_6",Fe="_toBeConfirmedCard__confirmButton_mibcv_13",ke="_bold_mibcv_18",P={toBeConfirmedCard:$e,toBeConfirmedCard__buttons:Be,toBeConfirmedCard__confirmButton:Fe,bold:ke},Te=({name:n,handleDeleteToBeConfirmedItem:a,handleAddToSelectedItems:d,instanceId:g})=>{const[c,b]=x.useState(""),{getAvailableSnapInfo:r}=H(),{data:f,isLoading:_}=r({instance_id:g,name:n}),s=f?.data,i=x.useMemo(()=>s?s["channel-map"].sort((u,h)=>u.channel.architecture.localeCompare(h.channel.architecture)).map(u=>({label:`${u.channel.name} - ${u.channel.architecture}`,value:`${u.channel.name} - ${u.channel.architecture}`})):[],[s]),j=u=>{b(u)};return x.useEffect(()=>{i.length>0&&b(i[0].value)},[i]),e.jsxs(e.Fragment,{children:[_&&e.jsx(T,{}),s&&e.jsx(t.Form,{name:"add-snap",onSubmit:u=>{u.preventDefault(),d({"snap-id":s["snap-id"],name:s.name,snap:s.snap,revision:s["channel-map"].find(h=>`${h.channel.name} - ${h.channel.architecture}`===c)?.revision.toString()??"Unknown revision",channel:s["channel-map"].find(h=>`${h.channel.name} - ${h.channel.architecture}`===c)?.channel.name??"Unknown channel"})},children:e.jsxs("li",{className:I("p-autocomplete__result p-list__item p-card u-no-margin--bottom u-no-padding--bottom",P.toBeConfirmedCard),children:[e.jsx("div",{className:P.bold,children:s.name}),e.jsx("span",{children:e.jsx("small",{className:"u-text--muted p-text--small",children:s.snap.publisher["display-name"]})}),e.jsx(t.Select,{label:e.jsx("span",{className:"u-text--muted p-text--small",children:"Release"}),required:!0,value:c,options:i,onChange:u=>{j(u.currentTarget.value)},help:s["channel-map"].find(u=>`${u.channel.name} - ${u.channel.architecture}`===c)?.confinement==="classic"?e.jsxs("span",{children:[e.jsx(t.Icon,{name:t.ICONS.warning}),"This release requires classic permission."," ",e.jsx("a",{href:"https://snapcraft.io/docs",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more"})]}):void 0}),e.jsxs("div",{className:P.toBeConfirmedCard__buttons,children:[e.jsx(t.Button,{small:!0,type:"button",appearance:"base",onClick:()=>{a()},children:"Cancel"}),e.jsx(t.Button,{small:!0,className:P.toBeConfirmedCard__confirmButton,type:"submit",appearance:"positive",children:"Add"})]})]})})]})},Ae="_container_113js_1",He="_suggestionsContainer_113js_5",De="_pointer_113js_12",Ue="_highlighted_113js_17",Ee="_selectedContainer_113js_21",k={container:Ae,suggestionsContainer:He,pointer:De,highlighted:Ue,selectedContainer:Ee},Pe=200,Re=(n,a)=>{const d=n.toLowerCase(),g=a.toLowerCase(),c=d.indexOf(g);return c>=0?e.jsxs(e.Fragment,{children:[n.substring(0,c),e.jsx("strong",{children:n.substring(c,c+a.length)}),n.substring(c+a.length)]}):n},Ve=({selectedItems:n,setSelectedItems:a,setConfirming:d})=>{const{instanceId:g}=R(),c=M(),{getAvailableSnaps:b}=H(),[r,f]=x.useState(""),[_,s]=x.useState(!1),[i,j]=x.useState(),[u,h]=x.useState(""),v=x.useRef(null),l=Number(g),{data:D,isFetching:$}=b({instance_id:l,query:r},{enabled:r.length>2}),p=D?.data?.results??[],C=m=>!n.map(F=>F.name).includes(m),U=p.filter(m=>C(m.name));x.useEffect(()=>{i||v.current?.focus()},[i]);const N=m=>{a(n.filter(F=>F.name!==m))},O=()=>{j(null),d&&d(!1)},ie=()=>{i||s(!1)},q=()=>{h(""),f("")},Q=()=>{u.length>2?s(!0):s(!1)},re=m=>{h(m),m.length>2&&f(m)},oe=fe(()=>{try{Q()}catch(m){c(m)}},Pe),ce=m=>{a([...n,m]),q(),O()},de=m=>{m&&(d(!0),j(m))},ue=m=>{m.key==="Escape"?m.currentTarget.blur():oe()},Y=!_&&u.length<3?"Min 3. characters":p.length===0&&r&&!$?`No snaps found by "${r}"`:null;return e.jsxs("div",{className:k.container,children:[e.jsx(we,{onSelect:de,itemToString:()=>"",isOpen:_,children:({getInputProps:m,getItemProps:F,getMenuProps:he,highlightedIndex:me})=>e.jsxs("div",{className:"p-autocomplete",children:[e.jsx(t.SearchBox,{...m(),placeholder:"Search for available snaps",className:"u-no-margin--bottom",shouldRefocusAfterReset:!0,externallyControlled:!0,autocomplete:"off",value:u,ref:v,disabled:!!i,onChange:re,onClear:q,onBlur:ie,onFocus:Q,onKeyUp:ue}),Y?e.jsx("span",{className:"p-form-help-text",children:Y}):null,_&&(U.length>0||$)?e.jsx("ul",{className:I("p-list p-card--highlighted u-no-padding u-no-margin--bottom p-autocomplete__suggestions",k.suggestionsContainer),...he(),children:i&&l?e.jsx(Te,{handleAddToSelectedItems:ce,handleDeleteToBeConfirmedItem:O,name:i.name,instanceId:l},i["snap-id"]):$?e.jsx(T,{}):U.map((E,K)=>e.jsxs("li",{className:I("p-list__item",k.pointer,{[k.highlighted]:me===K}),...F({item:E,index:K}),children:[e.jsx("div",{className:"u-truncate","data-testid":"dropdownElement",children:Re(E.name,r)}),e.jsx("small",{className:"u-text-muted",children:E.snap.publisher["display-name"]})]},E["snap-id"]))}):null]})}),e.jsx("ul",{className:"p-list p-autocomplete__result-list u-no-margin--bottom",children:n.length?n.map(m=>e.jsxs("li",{className:I("p-autocomplete__result p-list__item p-card u-no-margin--bottom",k.selectedContainer),children:[e.jsxs("div",{children:[e.jsx("div",{children:m.name}),e.jsx("span",{children:e.jsx("small",{className:"u-text--muted p-text--small",children:`${m.snap.publisher["display-name"]} | ${m.channel}`})})]}),e.jsx(t.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom",onClick:()=>N(m.name),children:e.jsx(t.Icon,{name:t.ICONS.delete})})]},m["snap-id"])):null})]})},ae=()=>{const[n,a]=x.useState([]),[d,g]=x.useState(!1),c=M(),{notify:b}=X(),{closeSidePanel:r}=A(),{snapsActionQuery:f}=H(),{instanceId:_}=R(),s=Number(_),{mutateAsync:i,isPending:j}=f,u=async()=>{try{await i({computer_ids:[s],snaps:n.map(h=>({name:h.name,channel:h.channel,revision:h.revision})),action:"install"}),r(),b.success({message:`You queued ${Z(n.length,`snap ${n[0].name}`,`${n.length} snaps`)} to be installed.`}),a([])}catch(h){c(h)}};return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{selectedItems:n,setSelectedItems:h=>{a(h)},setConfirming:h=>{g(h)}}),e.jsx(ne,{submitButtonDisabled:n.length===0||d||j,cancelButtonDisabled:j,submitButtonText:"Install snaps",submitButtonAppearance:"positive",onSubmit:u})]})};var o=(n=>(n.Switch="Switch",n.Refresh="Refresh",n.Uninstall="Uninstall",n.Hold="Hold",n.Unhold="Unhold",n))(o||{});const se=n=>n.reduce((a,d)=>(d.held_until!==null?a.held++:a.unheld++,a),{held:0,unheld:0}),te=(n,a)=>n.filter(d=>a.includes(d.snap.id)),ze="_bold_1hrl2_1",Le="_radioGroup_1hrl2_5",Me="_marginTop_1hrl2_10",y={bold:ze,radioGroup:Le,marginTop:Me},z={deliver_immediately:B(),randomize_delivery:B(),deliver_delay_window:be().min(0,"Delivery delay must be greater than or equal to 0"),deliver_after:B().test({test:n=>n?S(n).isValid():!0,message:"You have to enter a valid date and time"})},Oe=n=>{switch(n){case o.Switch:return{...z,release:B().required("Release is required")};case o.Hold:return{...z,hold:B(),hold_until:B().test({test:a=>a?S(a).isValid():!0,message:"You have to enter a valid date and time"})};default:return{...z}}},qe={single:{[o.Refresh]:"This will update {snapName} to the latest version available. Automatic updates will resume, and {snapName} will be upgraded based on the regular refresh schedule.",[o.Uninstall]:"This will remove the snap from your system",[o.Hold]:"This will pause automatic updates for that particular snap. {snapName} will maintain the current version",[o.Unhold]:"This will resume automatic updates for that particular snap. {snapName} will be eligible for the latest version upgrades based on the regular refresh schedule."},multiple:{[o.Refresh]:"This will update the selected snaps to the latest version available. Automatic updates will resume, and the snaps will be upgraded based on the regular refresh schedule.",[o.Uninstall]:"This will remove the selected snaps from your system",[o.Hold]:"Holding a snap will pause automatic updates for that particular snap.",[o.Unhold]:"Unholding a snap will resume automatic updates for that particular snap."}},Qe=(n,a)=>{if(n===o.Switch)return null;const{held:d,unheld:g}=se(a),c=qe[a.length===1?"single":"multiple"][n].replaceAll("{snapName}",a[0].snap.name);return n===o.Refresh||n===o.Uninstall||a.length===1||d===0||g===0?e.jsx("p",{children:c}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:c}),e.jsxs("span",{children:["You selected ",a.length," snaps. This will:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[n===o.Hold?"hold":"unhold"," ",G({count:n===o.Hold?g:d,singular:"snap"})]}),e.jsxs("li",{children:["leave"," ",G({count:n===o.Hold?d:g,singular:"snap"})," ",n===o.Hold?"held":"unheld"]})]})]})},Ye=({installedSnaps:n,type:a})=>{const{instanceId:d}=R(),g=M(),{notify:c}=X(),{closeSidePanel:b}=A(),{snapsActionQuery:r,getAvailableSnapInfo:f}=H(),_=Number(d),{mutateAsync:s}=r,{data:i}=f({instance_id:_,name:n[0].snap.name},{enabled:a===o.Switch}),j=x.useMemo(()=>i?.data["channel-map"].sort((p,C)=>p.channel.architecture.localeCompare(C.channel.architecture)).map(p=>({label:`${p.channel.name} - ${p.channel.architecture}`,value:`${p.channel.name} - ${p.channel.architecture}`}))??[],[i?.data]),u=Oe(a),h=n.length===1?n[0]:null,v=h?i?.data["channel-map"][0]:null,l=xe({initialValues:{release:void 0,hold:a===o.Hold?"forever":void 0,hold_until:a===o.Hold?"":void 0,deliver_immediately:!0,randomize_delivery:!1,deliver_delay_window:0,deliver_after:""},validationSchema:je().shape(u),onSubmit:async p=>{try{s({computer_ids:[_],action:a===o.Uninstall?"remove":a===o.Switch?"refresh":a.toLowerCase(),snaps:n.map(U=>({name:U.snap.name,channel:p.release?i?.data["channel-map"].find(N=>`${N.channel.name} - ${N.channel.architecture}`===p.release)?.channel.name:void 0,revision:i?.data["channel-map"].find(N=>`${N.channel.name} - ${N.channel.architecture}`===p.release)?.revision.toString(),time:p.hold==="forever"?"forever":p.hold_until?S(p.hold_until).format():void 0})),deliver_after:p.deliver_immediately?void 0:p.deliver_after?S(p.deliver_after).format():void 0,deliver_after_window:p.randomize_delivery?p.deliver_delay_window:void 0}),b();const C=a===o.Hold?"held":a===o.Unhold?"unheld":`${a.toLowerCase()}ed`;c.success({message:`You queued ${h?h.snap.name:`${n.length} snaps`} to be ${C}.`})}catch(C){g(C)}}});x.useEffect(()=>{v&&a===o.Switch&&!l.values.release&&l.setFieldValue("release",`${v.channel.name} - ${v.channel.architecture}`)},[v]);const D=p=>{l.setFieldValue("hold",p.currentTarget.value),p.currentTarget.value==="date"&&l.setFieldValue("hold_until",S().toISOString().slice(0,16))},$=p=>{const C=p.currentTarget.value==="true";l.setFieldValue("deliver_immediately",C),C||l.setFieldValue("deliver_after",S().toISOString().slice(0,16))};return e.jsxs(t.Form,{onSubmit:l.handleSubmit,noValidate:!0,children:[Qe(a,n),a===o.Switch&&e.jsx(t.Select,{label:"release",labelClassName:"p-text--small p-text--small-caps",options:j,disabled:j.length===0,...l.getFieldProps("release")}),a===o.Hold&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:y.bold,children:"Hold"}),e.jsxs("div",{className:y.radioGroup,children:[e.jsx(t.Input,{type:"radio",label:"Indefinitely",...l.getFieldProps("hold"),onChange:D,checked:l.values.hold==="forever",value:"forever"}),e.jsx(t.Input,{type:"radio",label:"Select date",...l.getFieldProps("hold"),onChange:D,checked:l.values.hold==="date",value:"date"})]}),l.values.hold==="date"&&e.jsx(t.Input,{type:"datetime-local",error:l.touched.hold_until&&l.errors.hold_until?l.errors.hold_until:void 0,...l.getFieldProps("hold_until")})]}),e.jsx("span",{className:I(y.bold,y.marginTop),children:"Delivery time"}),e.jsxs("div",{className:y.radioGroup,children:[e.jsx(t.Input,{type:"radio",label:"As soon as possible",name:"deliver_immediately",value:"true",onChange:$,checked:l.values.deliver_immediately}),e.jsx(t.Input,{type:"radio",label:"Scheduled",name:"deliver_immediately",value:"false",onChange:$,checked:!l.values.deliver_immediately})]}),!l.values.deliver_immediately&&e.jsx(t.Input,{type:"datetime-local",label:"Deliver after",labelClassName:"u-off-screen",...l.getFieldProps("deliver_after"),error:l.touched.deliver_after&&l.errors.deliver_after?l.errors.deliver_after:void 0}),e.jsx("span",{className:I(y.bold,y.marginTop),children:"Randomise delivery over a time window"}),e.jsxs("div",{className:y.radioGroup,children:[e.jsx(t.Input,{type:"radio",label:"No",...l.getFieldProps("randomize_delivery"),onChange:async()=>{await l.setFieldValue("randomize_delivery",!1),await l.setFieldValue("deliver_delay_window",0)},checked:!l.values.randomize_delivery}),e.jsx(t.Input,{type:"radio",label:"Yes",...l.getFieldProps("randomize_delivery"),onChange:()=>l.setFieldValue("randomize_delivery",!0),checked:l.values.randomize_delivery})]}),l.values.randomize_delivery&&e.jsx(t.Input,{type:"number",inputMode:"numeric",min:0,label:"Delivery delay window",labelClassName:"u-off-screen",help:"Time in minutes",...l.getFieldProps("deliver_delay_window"),error:l.touched.deliver_delay_window&&l.errors.deliver_delay_window?l.errors.deliver_delay_window:void 0}),e.jsx(ne,{submitButtonText:a,submitButtonAppearance:a===o.Uninstall?"negative":"positive",submitButtonDisabled:l.isSubmitting})]})},Ke="_container_11i26_1",J={container:Ke},le=({selectedSnapIds:n,installedSnaps:a,sidePanel:d=!1})=>{const{setSidePanelContent:g}=A(),c=a.length===1?a[0]:null,b=te(a,n),{held:r,unheld:f}=se(b),_=i=>{const j=i===o.Unhold?r:i===o.Hold?f:n.length,u=c?`${i} ${c.snap.name}${i===o.Switch?"'s channel":""}`:`${i} ${j} ${Z(j,"snap")}`;g(u,e.jsx(x.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(Ye,{installedSnaps:b,type:i})}))},s=()=>{g("Install snaps",e.jsx(ae,{}))};return e.jsxs("div",{className:J.container,children:[!d&&e.jsxs(t.Button,{type:"button",onClick:s,hasIcon:!0,className:I("u-no-margin--bottom",J.noWrap),children:[e.jsx(t.Icon,{name:t.ICONS.plus}),e.jsx("span",{children:"Install"})]}),e.jsx(ve,{collapseFrom:"lg",buttons:[c&&d&&e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button has-icon u-no-margin--bottom",disabled:n.length===0,onClick:()=>{_(o.Switch)},children:[e.jsx(t.Icon,{name:"fork"}),e.jsx("span",{children:"Switch channel"})]},"switch-channel"),e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button has-icon u-no-margin--bottom",disabled:n.length===0,onClick:()=>{_(o.Uninstall)},children:[e.jsx(t.Icon,{name:t.ICONS.delete}),e.jsx("span",{children:"Uninstall"})]},"uninstall"),(c?.held_until===null||!d)&&e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button has-icon u-no-margin--bottom",disabled:f===0,onClick:()=>{_(o.Hold)},children:[e.jsx(t.Icon,{name:"pause"}),e.jsx("span",{children:"Hold"})]},"hold"),(c?.held_until!==null||!d)&&e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button has-icon u-no-margin--bottom",disabled:r===0,onClick:()=>{_(o.Unhold)},children:[e.jsx(t.Icon,{name:"play"}),e.jsx("span",{children:"Unhold"})]},"unhold"),e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button has-icon u-no-margin--bottom",disabled:n.length===0,onClick:()=>{_(o.Refresh)},children:[e.jsx(t.Icon,{name:"change-version"}),e.jsx("span",{children:"Refresh"})]},"refresh")]})]})},Ge="_actions_1l3g0_1",Je={actions:Ge},We=({handleClearSelection:n,selectedSnapIds:a,installedSnaps:d})=>e.jsxs(e.Fragment,{children:[e.jsx(Ie,{afterSearch:n,actions:e.jsx("div",{className:Je.actions,children:e.jsx(le,{selectedSnapIds:a,installedSnaps:te(d,a)})})}),e.jsx(Ce,{filtersToDisplay:["search"]})]}),Xe=({installedSnap:n})=>e.jsxs(e.Fragment,{children:[e.jsx(le,{selectedSnapIds:[n.snap.id],installedSnaps:[n],sidePanel:!0}),e.jsxs(t.Row,{className:"u-no-padding--left u-no-padding--right",children:[e.jsx(t.Col,{size:12,children:e.jsx(w,{label:"snap name",value:n.snap.name})}),e.jsx(t.Col,{size:6,children:e.jsx(w,{label:"channel",value:n.tracking_channel})}),e.jsx(t.Col,{size:6,children:e.jsx(w,{label:"version",value:n.version})}),e.jsx(t.Col,{size:6,children:e.jsx(w,{label:"confinement",value:n.confinement})}),e.jsx(t.Col,{size:6,children:e.jsx(w,{label:"held until",value:S(n.held_until).isValid()?S(n.held_until).format(ee):e.jsx(L,{})})}),e.jsx(t.Col,{size:12,children:e.jsx(w,{label:"summary",value:n.snap.summary??e.jsx(L,{})})}),e.jsx(t.Col,{size:12,children:e.jsx(w,{label:"publisher",value:n.snap.publisher.username})})]})]}),Ze="_details_9i6m6_1",en="_pause_9i6m6_5",W={details:Ze,pause:en},nn=n=>{const a={};switch(n.column.id){case"name":a.role="rowheader";break;case"channel":a["aria-label"]="Channel";break;case"held until":a["aria-label"]="Held until";break;case"version":a["aria-label"]="Version";break;case"summary":a["aria-label"]="Summary";break}return a},an=({installedSnaps:n,selectedSnapIds:a,isSnapsLoading:d,setSelectedSnapIds:g})=>{const{setSidePanelContent:c}=A(),b=s=>{a.includes(s.original.snap.id)?g(a.filter(i=>i!==s.original.snap.id)):g([...a,s.original.snap.id])},r=()=>{g(a.length!==0?[]:n.map(({snap:s})=>s.id))},f=s=>{c(`${s.snap.name} details`,e.jsx(x.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(Xe,{installedSnap:s})}))},_=x.useMemo(()=>[{Header:e.jsxs(e.Fragment,{children:[e.jsx(t.CheckboxInput,{label:e.jsx("span",{className:"u-off-screen",children:"Toggle all"}),inline:!0,onChange:r,checked:a.length===n.length&&n.length!==0,indeterminate:a.length!==0&&a.length<n.length}),e.jsx("span",{children:"Name"})]}),accessor:"name",Cell:({row:s})=>e.jsxs(e.Fragment,{children:[e.jsx(t.CheckboxInput,{label:e.jsx("span",{className:"u-off-screen",children:s.original.snap.name}),inline:!0,checked:a.includes(s.original.snap.id),onChange:()=>{b(s)}}),e.jsx(t.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top",onClick:()=>{f(s.original)},"aria-label":`Show details of snap ${s.original.snap.name}`,children:s.original.snap.name})]})},{Header:"channel",accessor:"channel",Cell:({row:s})=>e.jsx(e.Fragment,{children:s.original.tracking_channel})},{Header:"held until",accessor:"held_until",Cell:({row:s})=>e.jsx(e.Fragment,{children:S(s.original.held_until).isValid()?e.jsxs("span",{className:"font-monospace",children:[" ",S(s.original.held_until).format(ee)]}):e.jsx(L,{})})},{Header:"version",accessor:"version",Cell:({row:s})=>e.jsx(e.Fragment,{children:s.original.held_until?e.jsx(t.Tooltip,{message:"This snap is held",children:s.original.version}):s.original.version}),getCellIcon:({row:s})=>s.original.held_until?`pause ${W.pause}`:null},{Header:"summary",accessor:"summary",className:W.details,Cell:({row:s})=>e.jsx(e.Fragment,{children:s.original.snap.summary})}],[a,n]);return e.jsx(t.ModularTable,{columns:_,data:n,getCellProps:nn,emptyMsg:d?"Loading...":"No snaps found from the search"})},un=()=>{const[n,a]=x.useState([]),{instanceId:d,childInstanceId:g}=R(),{search:c,currentPage:b,pageSize:r}=Se(),{getSnapsQuery:f}=H(),{setSidePanelContent:_}=A(),s=Number(g??d),{data:i,isLoading:j}=f({instance_id:s,limit:r,offset:(b-1)*r,search:c}),u=()=>{_("Install snaps",e.jsx(ae,{}))},h=x.useMemo(()=>i?.data?.results??[],[i]),v=()=>{a([])};return e.jsxs(e.Fragment,{children:[!c&&j&&b===1&&r===20&&e.jsx(T,{}),!j&&!c&&(!i||i.data.results.length===0)&&e.jsx(ye,{title:"You haven't installed any snaps yet",cta:[e.jsx(t.Button,{type:"button",appearance:"positive",onClick:u,children:"Install snaps"},"empty-state-install-snap")]}),(c||b!==1||r!==20||i&&i?.data.results.length>0)&&e.jsxs(e.Fragment,{children:[e.jsx(We,{selectedSnapIds:n,installedSnaps:h,handleClearSelection:v}),e.jsx(an,{selectedSnapIds:n,setSelectedSnapIds:l=>{a(l)},installedSnaps:h,isSnapsLoading:j})]}),e.jsx(Ne,{handleClearSelection:v,totalItems:i?.data?.count,currentItemCount:i?.data?.results.length})]})};export{un as default};
