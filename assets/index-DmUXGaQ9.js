import{G as A}from"./index-Cs0CXYCo.js";import{o as p,B as b,F as h,M as x,P as o,j as s,d as i}from"./index-DC4Jl2A5.js";import{u as y}from"./useGPGKeys-2_b8qF6S.js";import{t as m}from"./tests-DFnZqbNV.js";import{S as P}from"./SidePanelFormButtons-DTvXZm78.js";import"./PageMain-Cx7Div-M.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";const S={name:"",material:""},j=()=>{const{closeSidePanel:n}=p(),u=b(),{importGPGKeyQuery:d,getGPGKeysQuery:l}=y(),{mutateAsync:c}=d,{data:r}=l(),e=h({initialValues:S,validationSchema:x().shape({name:o().required("This field is required").test({test:m.test,message:m.message}).test({params:{getGPGKeysResponse:r},test:t=>!((r==null?void 0:r.data)??[]).map(({name:a})=>a).includes(t),message:"It must be unique within the account."}),material:o().required("This field is required").transform(t=>encodeURIComponent(t))}),onSubmit:async t=>{try{await c(t),n()}catch(a){u(a)}}});return s.jsxs(i.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[s.jsx(i.Input,{type:"text",label:"Name",required:!0,error:e.touched.name&&e.errors.name?e.errors.name:void 0,...e.getFieldProps("name")}),s.jsx(i.Textarea,{label:"Material",required:!0,rows:10,error:e.touched.material&&e.errors.material?e.errors.material:void 0,...e.getFieldProps("material")}),s.jsx(P,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Import key"})]})};export{A as GPGKeysList,j as NewGPGKeyForm,y as useGPGKeys};
