const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DmMTdHmt.js","assets/index-BCcwPL71.js","assets/index-ZvFDk6Q4.css","assets/FileInput-CinI2W6i.js","assets/SidePanelFormButtons-CMh6q5y5.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/index-AkP2Nkw0.js","assets/moment-Dmr-fXrP.js","assets/TablePagination-B2EiYbph.js","assets/TablePagination.module-CgQ3jx4B.js","assets/TablePagination-DTa7xTwu.css","assets/usePageParams-B6rHQ1DL.js","assets/SearchHelpPopup-Rm3MKSyq.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/useFetchOld-Cgw7BzeN.js","assets/NoData-Bi4cXlRU.js","assets/index-BmoMXq9B.css","assets/useInstances-Cmm0kVQL.js","assets/HeaderWithSearch-DnUhI_Uj.js","assets/HeaderWithSearch-DQybm8h_.css"])))=>i.map(i=>d[i]);
import{r as d,_ as b,i as v,j as e,E as I,h as r,s as w,c as Q,d as W,e as l,f as g,k as L,C as q}from"./index-BCcwPL71.js";import{u as F}from"./useInstances-Cmm0kVQL.js";import{u as P}from"./useFetchOld-Cgw7BzeN.js";import{H as D}from"./HeaderWithSearch-DnUhI_Uj.js";import{u as K}from"./usePageParams-B6rHQ1DL.js";const k=d.lazy(()=>b(()=>import("./index-DmMTdHmt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),Y=()=>{const{setSidePanelContent:t}=v(),a=()=>{t("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(k,{})}))};return e.jsx(I,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(r.Button,{appearance:"positive",type:"button",onClick:a,children:e.jsx("span",{children:"Install new WSL instance"})},"install-new-instance-button")]})},E=()=>{const t=Q(),a=P(),i=W(),h=(s={},o={})=>g({queryKey:["wsl",s],queryFn:()=>i.get("computers/wsl-hosts",{params:s}),...o}),c=l({mutationFn:({parent_id:s,...o})=>i.post(`computers/${s}/children`,o),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),u=l({mutationFn:s=>a.get("DeleteChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),m=l({mutationFn:s=>a.get("SetDefaultChildComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),p=l({mutationFn:s=>a.get("ShutdownHostComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),y=l({mutationFn:s=>a.get("StartChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),x=l({mutationFn:s=>a.get("StopChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:c,deleteChildInstancesQuery:u,getWslInstanceNamesQuery:(s,o={})=>g({queryKey:["wsl-instance-names"],queryFn:()=>i.get("wsl-instance-names"),...o}),getWslHostsQuery:h,setDefaultChildInstanceQuery:m,shutdownHostInstanceQuery:p,startChildInstancesQuery:y,stopChildInstancesQuery:x}},R="_cta_hpksw_1",N={cta:R},T=d.lazy(()=>b(()=>import("./index-DmMTdHmt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),z=({selectedInstances:t})=>{const{setPageParams:a}=K(),i=L(),{setSidePanelContent:h}=v(),{confirmModal:c,closeConfirmModal:u}=q(),{deleteChildInstancesQuery:m}=E(),{removeInstancesQuery:p}=F(),{mutateAsync:y}=m,{mutateAsync:x}=p,j=async()=>{try{await y({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},s=()=>{const n=t.length!==1?"This will permanently delete selected instances from both the Windows host machine and Landscape.":e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]});c({title:t.length!==1?"Delete instances":"Delete instance",body:n,buttons:[e.jsx(r.Button,{appearance:"negative",onClick:j,children:"Delete"},"delete")]})},o=async()=>{try{await x({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},C=()=>{const n=t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),_=t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape";c({title:_,body:n,buttons:[e.jsx(r.Button,{appearance:"negative",onClick:o,children:"Remove"},"remove")]})},S=()=>{h("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(T,{})}))},f=n=>{a({search:n})};return e.jsx(D,{onSearch:f,actions:e.jsxs("div",{className:N.cta,children:[e.jsx(r.Button,{type:"button",onClick:S,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(r.Button,{type:"button",className:"p-segmented-control__button",onClick:s,disabled:t.length===0,children:e.jsx("span",{children:"Delete instance"})}),e.jsx(r.Button,{type:"button",className:"p-segmented-control__button",onClick:C,disabled:t.length===0,children:e.jsx("span",{children:"Remove from Landscape"})})]})})]})})};export{z as W,Y as a,E as u};
