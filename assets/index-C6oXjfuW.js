import{j as e,ay as I,az as S,O as v,w as b,aI as N,i as P,E as A,aA as E}from"./index-BniO5lih.js";import{P as T,a as _,b as F,c as w}from"./useUsns-r5HiN7yD.js";import{H}from"./HeaderWithSearch-S6PnmELF.js";import{u as L}from"./useSelection-p6Ak6tLO.js";import"./constants-HWGNn3R9.js";const f=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],O="_actions_dhdem_1",C={actions:O},R=({handleClearSelection:s,selectedPackages:t})=>e.jsxs(e.Fragment,{children:[e.jsx(H,{afterSearch:s,actions:e.jsxs("div",{className:C.actions,children:[e.jsx(I,{pageParamKey:"status",options:f,label:"Status"}),e.jsx(T,{selectedPackages:t})]})}),e.jsx(S,{filtersToDisplay:["search","status"],statusOptions:f})]}),U=(s,t)=>{let a;return s===""?a="No packages found":s==="upgrade"?a="No available upgrades found":s==="security"?a="No available security upgrades found":s==="installed"?a="No installed packages found":a="No held packages found",a=t?`${a} with the search "${t}"`:a,`${a}.`},D=()=>{const{instanceId:s,childInstanceId:t}=v(),{status:a,search:l,currentPage:h,pageSize:c}=b(),{getInstancePackagesQuery:r}=_(),{state:k}=N(),o=Number(t??s),{data:x,isPending:j,error:d}=r({limit:1,instance_id:o}),{data:n,isPending:i,error:u}=r({instance_id:o,search:l,limit:c,offset:h*c-c,installed:!a||void 0,upgrade:a==="upgrade"||void 0,held:a==="held"||void 0,security:a==="security"||void 0}),{selectedItems:g,setSelectedItems:p}=L(n?.data.results??[],i),m=()=>{p([])};if(j)return e.jsx(P,{});if(d)throw d;if(!x.data.count)return e.jsx(A,{title:"No packages have been found yet.",cta:[e.jsx(F,{appearance:"positive"},"install")]});if(u)throw u;return e.jsxs(e.Fragment,{children:[e.jsx(R,{selectedPackages:g,handleClearSelection:m}),i?e.jsx(P,{}):e.jsxs(e.Fragment,{children:[e.jsx(w,{packages:n.data.results,packagesLoading:i,selectedPackages:g,onPackagesSelect:y=>{p(y)},emptyMsg:U(a,l),selectAll:!!k?.selectAll}),e.jsx(E,{handleClearSelection:m,totalItems:n.data.count,currentItemCount:n.data.results.length})]})]})};export{D as default};
