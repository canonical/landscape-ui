import{q as u,n as f,a8 as y,i as a,B as g,a9 as S,aa as h,ab as x,j as i,o as b}from"./index-CltrzfEM.js";import{S as B}from"./SidePanelFormButtons-D9kT0cNJ.js";import{u as P}from"./useSecurityProfileForm-E8SrKjOg.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";import"./AssociationBlock-DX8_A7xh.js";import"./MultiSelectField-BkCPMoWo.js";import"./useGetTags-BxwF3Kxd.js";import"./useGetInstances-DfYmF7Iz.js";import"./FileInput-BFVx_0Lm.js";import"./Flow-0yKYXw6O.js";import"./useOrgSettings-oaosf4AA.js";import"./useRoles-CrC1PwPd.js";import"./RadioGroup-DM0DYkkI.js";const A="_step_koqdi_1",k={step:A},q=({onSuccess:n})=>{const{notify:d}=u(),{setSidePanelTitle:l}=f(),{addSecurityProfile:m,isSecurityProfileAdding:o}=y(),[e,r]=a.useState(0),{formik:c,steps:s}=P({initialValues:{all_computers:!1,access_group:S,day_of_month_type:"day-of-month",days:[],delivery_time:"asap",end_date:"",end_type:"never",every:7,months:[],randomize_delivery:"no",restart_deliver_delay_window:1,restart_deliver_delay:1,start_date:g().utc().format(h),start_type:"on-a-date",tags:[],tailoring_file:null,title:"",unit_of_time:"DAILY"},mutate:async t=>{m({access_group:t.access_group,all_computers:t.all_computers,benchmark:t.benchmark,mode:t.mode,restart_deliver_delay:t.restart_deliver_delay,restart_deliver_delay_window:t.restart_deliver_delay_window,schedule:t.schedule,start_date:t.start_date,tags:t.tags,tailoring_file:t.tailoring_file,title:t.title})},onSuccess:t=>{x(t,d),n(t)}});a.useEffect(()=>{l(i.jsxs(i.Fragment,{children:["Add security profile",i.jsxs("small",{className:b(k.step,"u-text--muted"),children:["Step ",e+1," of ",s.length]})]}))},[e]);const _=()=>{r(e-1)},p=()=>{e<s.length-1?r(e+1):c.handleSubmit()};return i.jsxs(i.Fragment,{children:[i.jsx("p",{children:s[e].description}),s[e].content,i.jsx(B,{hasBackButton:e>0,onBackButtonPress:e>0?_:void 0,onSubmit:p,submitButtonDisabled:s[e].isLoading||!s[e].isValid||o,submitButtonLoading:s[e].isLoading||o,submitButtonText:s[e].submitButtonText})]})};export{q as default};
