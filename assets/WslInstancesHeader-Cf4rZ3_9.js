const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CR0zzSx_.js","assets/index-aJwsc68L.js","assets/index-D38JayDC.css","assets/FileInput-DYYfiUUb.js","assets/SidePanelFormButtons-Fi2QM0Bz.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/index-BTwiatxk.js","assets/usePageParams-CzH8WT2r.js","assets/TablePagination-C3r33z9M.js","assets/TablePaginationBase-whHu4Pzw.js","assets/TablePaginationBase-CJl3HN1X.css","assets/StatusFilter-DaiNRGIJ.js","assets/TableFilter-DloSrc-1.js","assets/TableFilter-DXBG6q86.css","assets/TableFilterChips-DXrFRPii.js","assets/TableFilterChips-CHqetGbX.css","assets/useFetchOld-DqwB-ncC.js","assets/NoData-CmSHmpHE.js","assets/index-geI-abAU.css","assets/useInstances-b1TOjDNw.js","assets/HeaderWithSearch-Ogz6aBkR.js","assets/HeaderWithSearch-C2lwo0VI.css"])))=>i.map(i=>d[i]);
import{f as b,j as e,E as j,g as c,r as u,n as w,_ as x,b as v,e as _,c as i,d as g,p as C}from"./index-aJwsc68L.js";import{u as I}from"./useInstances-b1TOjDNw.js";import{u as Q}from"./useFetchOld-DqwB-ncC.js";import{H as S}from"./HeaderWithSearch-Ogz6aBkR.js";import"./usePageParams-CzH8WT2r.js";import{T as L}from"./TableFilterChips-DXrFRPii.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new n.Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="f9a73651-52ee-4466-a701-3c9233348da6",n._sentryDebugIdIdentifier="sentry-dbid-f9a73651-52ee-4466-a701-3c9233348da6")}catch{}const W=u.lazy(()=>x(()=>import("./index-CR0zzSx_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),N=()=>{const{setSidePanelContent:n}=b(),s=()=>{n("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(W,{})}))};return e.jsx(j,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(c.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},D=()=>{const n=v(),s=Q(),o=_(),d=(t={},a={})=>g({queryKey:["wsl",t],queryFn:()=>o.get("computers/wsl-hosts",{params:t}),...a}),m=i({mutationFn:({parent_id:t,...a})=>o.post(`computers/${t}/children`,a),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),h=i({mutationFn:t=>s.get("DeleteChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),r=i({mutationFn:t=>s.get("SetDefaultChildComputer",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),p=i({mutationFn:t=>s.get("ShutdownHostComputer",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),l=i({mutationFn:t=>s.get("StartChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),y=i({mutationFn:t=>s.get("StopChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:m,deleteChildInstancesQuery:h,getWslInstanceNamesQuery:(t,a={})=>g({queryKey:["wsl-instance-names"],queryFn:()=>o.get("wsl-instance-names"),...a}),getWslHostsQuery:d,setDefaultChildInstanceQuery:r,shutdownHostInstanceQuery:p,startChildInstancesQuery:l,stopChildInstancesQuery:y}},F="_cta_hpksw_1",q={cta:F},P=u.lazy(()=>x(()=>import("./index-CR0zzSx_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),A=({selectedInstances:n})=>{const s=C(),{setSidePanelContent:o}=b(),{deleteChildInstancesQuery:d}=D(),{removeInstancesQuery:m}=I(),{mutateAsync:h,isPending:r}=d,{mutateAsync:p,isPending:l}=m,y=async()=>{try{await h({computer_ids:n.map(({id:a})=>a)})}catch(a){s(a)}},f=async()=>{try{await p({computer_ids:n.map(({id:a})=>a)})}catch(a){s(a)}},t=()=>{o("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(P,{})}))};return e.jsxs(e.Fragment,{children:[e.jsx(S,{actions:e.jsxs("div",{className:q.cta,children:[e.jsx(c.Button,{type:"button",onClick:t,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(c.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Delete instances":"Delete instance",children:n.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:n[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:r,confirmButtonLoading:r,onConfirm:y},children:"Delete instance"}),e.jsx(c.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:n.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:n[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:f},children:"Remove from Landscape"})]})})]})}),e.jsx(L,{filtersToDisplay:["search"]})]})};export{A as W,N as a,D as u};
