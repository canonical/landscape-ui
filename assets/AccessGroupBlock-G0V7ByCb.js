import{r as g,j as t,g as h}from"./index-F5ixs2NP.js";try{let c=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new c.Error().stack;n&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[n]="ee3fd2d4-f4bb-4505-a8f3-3ed3651e1fd3",c._sentryDebugIdIdentifier="sentry-dbid-ee3fd2d4-f4bb-4505-a8f3-3ed3651e1fd3")}catch{}const f="_container_1rjk0_1",m="_checkboxColumn_1rjk0_7",_={container:f,checkboxColumn:m},j=({description:c,onPermissionChange:n,options:r,permissions:d,title:v})=>{const l=g.useMemo(()=>r.sort((e,a)=>e.values.view===""&&a.values.view!==""?-1:e.values.view!==""&&a.values.view===""?1:e.label.localeCompare(a.label)),[r]),u=e=>e.values.view===""||d.includes(r.filter(({label:a})=>a===e.label)[0].values.manage),s=(e,a)=>{d.includes(e.values[a])?n(d.filter(b=>b!==e.values[a])):n(a==="view"?[...d,e.values.view]:e.values.view!==""&&!d.includes(e.values.view)?[...d,e.values.manage,e.values.view]:[...d,e.values.manage])},i=g.useMemo(()=>[{accessor:"label",Header:"Property",Cell:({row:e})=>e.original.label.replace(/^\w/,a=>a.toUpperCase())},{accessor:"view",className:_.checkboxColumn,Header:"View",Cell:({row:e})=>t.jsx(h.CheckboxInput,{inline:!0,label:t.jsx("span",{className:"u-off-screen",children:`View ${e.original.label}`}),name:"permissions",value:e.original.values.view,disabled:u(e.original),checked:e.original.values.view===""||d.includes(e.original.values.view),onChange:()=>s(e.original,"view")})},{accessor:"manage",className:_.checkboxColumn,Header:"Manage",Cell:({row:e})=>t.jsx(h.CheckboxInput,{inline:!0,label:t.jsx("span",{className:"u-off-screen",children:`Manage ${e.original.label}`}),name:"permissions",value:e.original.values.manage,disabled:e.original.values.manage==="",checked:d.includes(e.original.values.manage),onChange:()=>s(e.original,"manage")})}],[l,d.length]);return t.jsxs("div",{className:_.container,children:[t.jsx("p",{className:"p-heading--5 u-no-margin--bottom",children:v}),t.jsx("p",{className:"p-text--small u-text--muted",children:c}),t.jsx(h.ModularTable,{columns:i,data:l,getHeaderProps:()=>({className:"u-text--muted"})})]})},x={"depth-1":"_depth-1_1twyj_1","depth-2":"_depth-2_1twyj_5","depth-3":"_depth-3_1twyj_9","depth-4":"_depth-4_1twyj_13","depth-5":"_depth-5_1twyj_17","depth-6":"_depth-6_1twyj_21","depth-7":"_depth-7_1twyj_25","depth-8":"_depth-8_1twyj_29","depth-9":"_depth-9_1twyj_33","depth-10":"_depth-10_1twyj_37"},w=({accessGroupOptions:c,accessGroups:n,onAccessGroupChange:r})=>{const d=(l,u)=>{if(n.includes(l.value)||n.some(s=>l.children.includes(s)))r(n.filter(s=>![l.value,...l.children,...l.parents].includes(s)));else{const s=[...n,l.value,...l.children];for(let i=l.depth-1;i>=0;i--){const e=u.filter(({depth:a})=>a===i).find(({value:a})=>l.parents.includes(a));if(e&&e.children.every(a=>s.includes(a)))s.push(e.value);else break}r(s)}},v=l=>l.some(u=>n.includes(u))&&l.some(u=>!n.includes(u));return t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"p-heading--5 u-no-margin--bottom",children:"Access Groups"}),c.map((l,u,s)=>t.jsx(h.CheckboxInput,{label:l.label,labelClassName:x[`depth-${l.depth}`],name:"access_groups",checked:n.includes(l.value),indeterminate:v(l.children),onChange:()=>d(l,s)},l.value))]})};export{w as A,j as P};
