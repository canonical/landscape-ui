import{j as e,r as P,o as x,O as k,n as j}from"./index-DPLJ1_NT.js";import{T as S}from"./TablePagination-BsgAbE2P.js";import{P as y,a as I,b}from"./usePackages-WQB7GdSJ.js";import{u as N}from"./usePageParams-1-ThHq1P.js";import{S as T}from"./StatusFilter-DiMI82Zm.js";import{T as v}from"./TableFilterChips-DoE1vNRM.js";import{H as L}from"./HeaderWithSearch-CZdACEz4.js";import"./TablePaginationBase--jZwlkTu.js";import"./useFetchOld-Bn8tkaGx.js";import"./TableFilter-syE9Wql0.js";const g=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],A="_actions_dhdem_1",F={actions:A},_=({handleClearSelection:s,selectedPackages:t})=>e.jsxs(e.Fragment,{children:[e.jsx(L,{afterSearch:s,actions:e.jsxs("div",{className:F.actions,children:[e.jsx(T,{options:g}),e.jsx(y,{selectedPackages:t})]})}),e.jsx(v,{filtersToDisplay:["search","status"],statusOptions:g})]}),H=(s,t)=>{let a;return s===""?a="No packages found":s==="upgrade"?a="No available upgrades found":s==="security"?a="No available security upgrades found":s==="installed"?a="No installed packages found":a="No held packages found",t?`${a} with the search "${t}"`:a},R=()=>{const[s,t]=P.useState([]),{instanceId:a,childInstanceId:m}=x(),{status:n,search:r,currentPage:i,pageSize:c}=N(),{getInstancePackagesQuery:p}=I(),{state:o}=k(),f=Number(m??a),d=()=>{t([])},{data:{data:l}={data:{count:0,results:[]}},isLoading:u}=p({instance_id:f,search:r,limit:c,offset:i*c-c,installed:!n||void 0,upgrade:n==="upgrade"||void 0,held:n==="held"||void 0,security:n==="security"||void 0});return e.jsxs(e.Fragment,{children:[!r&&!n&&i===1&&c===20&&u?e.jsx(j,{}):e.jsxs(e.Fragment,{children:[e.jsx(_,{selectedPackages:s,handleClearSelection:d}),e.jsx(b,{packages:l.results,packagesLoading:u,selectedPackages:s,onPackagesSelect:h=>{t(h)},emptyMsg:H(n,r),selectAll:!!(o!=null&&o.selectAll)})]}),e.jsx(S,{handleClearSelection:d,totalItems:l.count,currentItemCount:l.results.length})]})};export{R as default};
