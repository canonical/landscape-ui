import{a as h,j as t,g as p,R as _,r,_ as o,f as E,o as I,k as y,m as L}from"./index-DXs1haZl.js";import{P as T,a as S,b as A}from"./PageMain-DhSBVwHg.js";import{u as w,a as O}from"./useUsns-B3b7Nlk8.js";import"./HeaderWithSearch.module-ByXjIdeN.js";import{u as R}from"./useInstances-B3fQT90b.js";import{E as z}from"./EmptyState-BYL1pVz2.js";import{u as D}from"./usePageParams-BJqFm8Ol.js";import"./useFetchOld-DWTVWZGf.js";import"./useMutation-CoMMCR6r.js";import"./useQuery-DPA9mHwu.js";const V=({childInstanceId:a,instanceId:i})=>{const n=h();return t.jsx(z,{title:"Instance not found",icon:"connected",body:t.jsxs("p",{className:"u-no-margin--bottom",children:[t.jsx("span",{children:"Seems like the instance with id = "}),t.jsx("code",{children:i}),t.jsx("span",{children:" doesn't "}),a?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"have a child instance with id = "}),t.jsx("code",{children:a})]}):t.jsx("span",{children:"exist"})]}),cta:[t.jsx(p.Button,{appearance:"positive",onClick:()=>n(`${_}instances`,{replace:!0}),type:"button","aria-label":"Go back",children:"Back to Instances page"},"go-back-to-instances-page"),t.jsx(p.Button,{onClick:()=>n(`${_}`,{replace:!0}),type:"button","aria-label":"Go back",children:"Home page"},"go-back-to-home-page")]})},$=[{label:"Info",id:"tab-link-info"},{label:"WSL",id:"tab-link-wsl"},{label:"Activities",id:"tab-link-activities"},{label:"Security issues",id:"tab-link-security-issues"},{label:"Packages",id:"tab-link-packages"},{label:"Snaps",id:"tab-link-snaps"},{label:"Processes",id:"tab-link-processes"},{label:"Ubuntu Pro",id:"tab-link-ubuntu-pro"},{label:"Users",id:"tab-link-users"},{label:"Hardware",id:"tab-link-hardware"}],C=({id:a,label:i,packageCount:n,packagesLoading:u,usnCount:c,usnLoading:d})=>a==="tab-link-packages"&&u||a==="tab-link-security-issues"&&d?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:i}),t.jsx(p.Spinner,{className:"u-no-margin--bottom u-no-padding--top"})]}):a==="tab-link-packages"&&n?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:i}),t.jsx(p.Badge,{value:n})]}):a==="tab-link-security-issues"&&c?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:i}),t.jsx(p.Badge,{value:c,isNegative:!0})]}):i,B=({activeTabId:a,instance:i,onActiveTabChange:n,packageCount:u,packagesLoading:c,usnCount:d,usnLoading:b})=>$.filter(({id:l})=>!i.distribution||/\d{1,2}\.\d{2}/.test(i.distribution)?l!=="tab-link-wsl":["tab-link-info","tab-link-wsl","tab-link-activities","tab-link-hardware"].includes(l)).map(({label:l,id:s})=>({label:C({label:l,id:s,packageCount:u,packagesLoading:c,usnCount:d,usnLoading:b}),id:s,role:"tab",active:s===a,onClick:()=>n(s)})),N="_tabPanel_ai56l_1",U={tabPanel:N},F=r.lazy(()=>o(()=>import("./index-DfwKlmLj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),H=r.lazy(()=>o(()=>import("./index-GpQ7XKhn.js"),__vite__mapDeps([27,1,2,13,14,28,29,30,19,6,7,16,17,18,31]))),Q=r.lazy(()=>o(()=>import("./index-ChRgt29d.js"),__vite__mapDeps([32,1,2,9,10,11,33]))),G=r.lazy(()=>o(()=>import("./index-uR9lMBtC.js"),__vite__mapDeps([34,1,2,28,29,30,19,35,5,6,7,36,16,17,18]))),W=r.lazy(()=>o(()=>import("./index-HmY-E45r.js"),__vite__mapDeps([37,1,2,38,24,28,29,30,19,13,14,39,40,5,6,7,15,25,41]))),K=r.lazy(()=>o(()=>import("./index-Ce_gIUL9.js"),__vite__mapDeps([42,1,2,12,13,14,15,4,5,6,7,16,17,18,19,20]))),M=r.lazy(()=>o(()=>import("./index-D0XbU5Rs.js").then(a=>a.i),__vite__mapDeps([43,1,2,13,14,28,29,30,19,6,7,15,22,8,44,45,46,47,16,17,18,25,48]))),q=r.lazy(()=>o(()=>import("./index-BPjIWeJw.js"),__vite__mapDeps([49,1,2,13,14,35,5,6,7,36,28,29,30,19,15,50,24,25,51,52,53,54,55,56,57,3,58]))),J=r.lazy(()=>o(()=>import("./index-CRSQaUHl.js"),__vite__mapDeps([59,1,2,9,10,11,25,23,13,14,60]))),X=r.lazy(()=>o(()=>import("./index-CvbWc5Fb.js"),__vite__mapDeps([61,1,2,6,7,13,14,28,29,30,19,9,10,11,22,23,8,44,45,46,47,62,25,16,17,18,63]))),Y=({instance:a,packageCount:i,packagesLoading:n,usnCount:u,usnLoading:c})=>{const{closeSidePanel:d}=E(),{tab:b,setPageParams:l}=D(),s=b?`tab-link-${b}`:"tab-link-info",g=B({activeTabId:s,instance:a,onActiveTabChange:e=>{l({tab:e.replace("tab-link-","")}),d()},packageCount:i,packagesLoading:n,usnCount:u,usnLoading:c});return t.jsxs(t.Fragment,{children:[t.jsx(p.Tabs,{listClassName:"u-no-margin--bottom",links:g}),t.jsx("div",{tabIndex:0,role:"tabpanel","aria-labelledby":s,className:U.tabPanel,children:t.jsxs(r.Suspense,{fallback:t.jsx(I,{}),children:[s==="tab-link-info"&&t.jsx(F,{instance:a}),s==="tab-link-wsl"&&t.jsx(K,{instance:a}),s==="tab-link-activities"&&t.jsx(W,{instanceId:a.id}),s==="tab-link-security-issues"&&t.jsx(q,{instanceTitle:a.title}),s==="tab-link-packages"&&t.jsx(G,{}),s==="tab-link-snaps"&&t.jsx(X,{}),s==="tab-link-processes"&&t.jsx(H,{}),s==="tab-link-ubuntu-pro"&&t.jsx(J,{instance:a}),s==="tab-link-users"&&t.jsx(M,{}),s==="tab-link-hardware"&&t.jsx(Q,{instance:a})]})})]})},Z=a=>{if(a)return a.parent?[{label:"Instances",path:`${_}instances`},{label:a.parent.title,path:`${_}instances/${a.parent.id}`},{label:a.title,current:!0}]:[{label:"Instances",path:`${_}instances`},{label:a.title,current:!0}]},tt=()=>{var x,P,j;const{instanceId:a,childInstanceId:i}=y(),{user:n}=L(),u=h(),{getSingleInstanceQuery:c}=R(),{getUsnsQuery:d}=w(),{getInstancePackagesQuery:b}=O(),l=r.useRef("");r.useEffect(()=>{n!=null&&n.current_account&&(l.current||(l.current=n.current_account),l.current!==n.current_account&&u(`${_}instances`,{replace:!0}))},[n==null?void 0:n.current_account]);const{data:s,isLoading:g}=c({instanceId:parseInt(i||(a??"")),with_annotations:!0,with_grouped_hardware:!0},{enabled:!!a&&(!l.current||l.current===(n==null?void 0:n.current_account))}),e=(s==null?void 0:s.data)??null,{data:m,isLoading:f}=d({computer_ids:e?[e.id]:[],limit:1},{enabled:!!(e!=null&&e.distribution)&&/\d{1,2}\.\d{2}/.test(e.distribution)&&(!i||((x=e.parent)==null?void 0:x.id)===parseInt(a??""))}),{data:k,isLoading:v}=b({available:!1,upgrade:!0,instance_id:e?e.id:0,limit:1},{enabled:!!(e!=null&&e.distribution)&&/\d{1,2}\.\d{2}/.test(e.distribution)&&(!i||((P=e.parent)==null?void 0:P.id)===parseInt(a??""))});return t.jsxs(T,{children:[t.jsx(S,{title:(e==null?void 0:e.title)??"",hideTitle:!0,breadcrumbs:Z(e)}),t.jsxs(A,{children:[g&&t.jsx(I,{}),!g&&(!e||i&&((j=e==null?void 0:e.parent)==null?void 0:j.id)!==parseInt(a??""))&&t.jsx(V,{childInstanceId:i,instanceId:a}),!g&&e&&(!i||e.parent&&e.parent.id===parseInt(a??""))&&t.jsx(Y,{instance:e,packageCount:e.distribution?k==null?void 0:k.data.count:0,packagesLoading:v,usnCount:e.distribution?m==null?void 0:m.data.count:0,usnLoading:f})]})]})},dt=tt;export{dt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-DfwKlmLj.js","assets/index-DXs1haZl.js","assets/index-DzLy8aaC.css","assets/useOnClickOutside-C-WOPQdE.js","assets/useInstances-B3fQT90b.js","assets/useFetchOld-DWTVWZGf.js","assets/useMutation-CoMMCR6r.js","assets/useQuery-DPA9mHwu.js","assets/index.esm-FGh7VWBq.js","assets/InfoItem-BQPTGwVs.js","assets/InfoItem.module-BZ3tYMsb.js","assets/InfoItem-BbayMzTk.css","assets/WslInstanceList.module-ektlF0IO.js","assets/EmptyState-BYL1pVz2.js","assets/EmptyState-BNXajmMK.css","assets/useConfirm-C9Ai5vPv.js","assets/HeaderWithSearch-OzYSSkOw.js","assets/HeaderWithSearch.module-ByXjIdeN.js","assets/HeaderWithSearch-CCRO5bRP.css","assets/usePageParams-BJqFm8Ol.js","assets/WslInstanceList-CBvskeEg.css","assets/useRoles-CGNtMKpq.js","assets/formik.esm-CwYJvJSO.js","assets/moment-Cl4UOzQZ.js","assets/moment-BF0UQeMK.js","assets/NoData-BmTO_w1O.js","assets/index-Cpi7-04Q.css","assets/index-GpQ7XKhn.js","assets/TablePagination.module-DLVph1Z1.js","assets/TablePagination-JK-zjkSx.css","assets/TablePagination-DZ07rvb4.js","assets/index-CuwdzumK.css","assets/index-ChRgt29d.js","assets/index-fN93v_2M.css","assets/index-uR9lMBtC.js","assets/useUsns-B3b7Nlk8.js","assets/useUsns-DRSsqQ1A.css","assets/index-HmY-E45r.js","assets/index-BU3-Vm4G.js","assets/SearchHelpPopup-CCs3NejY.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/index-D7AnmhC7.css","assets/index-Ce_gIUL9.js","assets/index-D0XbU5Rs.js","assets/SidePanelFormButtons-Dtg_vQ52.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/helpers-prXd4jbM.js","assets/index-CYMeT6ai.css","assets/index-BPjIWeJw.js","assets/UsnList-CVWiDSUl.js","assets/TruncatedCell-Dx_NjREl.js","assets/TruncatedCell-BIhicLLO.css","assets/ExpandableTableFooter-BvE1KnQN.js","assets/ExpandableTableFooter.module-C3W6TVe_.js","assets/ExpandableTableFooter-PHbaG9hU.css","assets/helpers-BfuBH7Ij.js","assets/helpers-Cd2TCZfq.css","assets/index-DOFThauc.css","assets/index-CRSQaUHl.js","assets/index-BJLH30sJ.css","assets/index-CvbWc5Fb.js","assets/downshift.esm-CJYgPAQU.js","assets/index-DOYoxiiE.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
