import{b as g,y as h,z as p,a as x,r as m,R as s,j as e,h as j}from"./index-yURGZBtd.js";const w="_container_1uszo_1",b={container:w},y=()=>{const[n]=g(),{setUser:c}=h(),{getAuthStateWithUbuntuOneQuery:l}=p(),a=x(),{data:t,isLoading:r,error:d}=l({url:window.location.toString()},{enabled:n.size>0});return m.useEffect(()=>{var i,o;if(t)if((i=t.data.return_to)!=null&&i.external)window.location.replace(t.data.return_to.url??s);else{c(t.data);const u=new URL(((o=t.data.return_to)==null?void 0:o.url)??s,location.origin);a(u.toString().replace(u.origin,""),{replace:!0})}},[t]),e.jsxs("div",{className:b.container,children:[n.size>0&&r&&e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}),(n.size===0||!r&&d)&&e.jsxs("div",{children:[e.jsx("p",{children:"Oops! Something went wrong. Please try again or contact our support team."}),e.jsx(j.Button,{onClick:()=>a(`${s}login`),children:"Back to login"})]})]})};export{y as default};
