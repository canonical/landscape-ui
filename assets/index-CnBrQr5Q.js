import{y as p,l as S,B as x,F as b,J as h,j as t,m}from"./index-BLUNVNi0.js";import{S as g}from"./SidePanelFormButtons-CCa0SzC-.js";import{g as f}from"./formikErrors-Bw8iTXYS.js";import{t as n}from"./tests-DFnZqbNV.js";import{a as F}from"./constants-h2CgUBZg.js";import"./SidePanelFormButtons.module-D2P5PizG.js";const j={name:""},D=({distribution:e,origin:i})=>{const o=p(),{closeSidePanel:u}=S(),{deriveSeriesQuery:c}=F(),{mutateAsync:d}=c,l=x().shape({name:b().required("This field is required").test({test:n.test,message:n.message}).test({params:{distribution:e},test:r=>!e.series.map(({name:a})=>a).includes(r),message:"It must be unique within the distribution."})}),s=h({validationSchema:l,initialValues:j,onSubmit:async r=>{try{await d({name:r.name,distribution:e.name,origin:i}),u()}catch(a){o(a)}}});return t.jsxs(m.Form,{onSubmit:s.handleSubmit,noValidate:!0,children:[t.jsx(m.Input,{type:"text",label:"Series name",required:!0,...s.getFieldProps("name"),error:f(s,"name")}),t.jsxs("p",{className:"u-text--muted",children:["You are deriving ",e.name,"/",i,"."]}),t.jsx(g,{submitButtonDisabled:s.isSubmitting,submitButtonText:"Derive series"})]})};export{D as default};
