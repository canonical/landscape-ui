const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Co5AVJyO.js","assets/index-ClG4AO4X.js","assets/index-snvkEeYU.css","assets/useInstances-BPK1gQa7.js","assets/useRoles-C3np57d3.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{n as x,j as e,d as i,x as j,L as h,o as I,k as g,p,a2 as P,b as S,i as A,Y as b,E as f}from"./index-ClG4AO4X.js";import{P as k,a as L,b as v}from"./PageMain-BT2JE7aV.js";import{S as m}from"./InstancesPageActions-Dmd5okvh.js";import{u as Q}from"./useInstances-BPK1gQa7.js";import"./ResponsiveButtons-B8In4Cyg.js";const E="_listItem_upezw_1",N="_listItem__link_upezw_9",d={listItem:E,listItem__link:N},C=g.lazy(()=>P(()=>import("./index-Co5AVJyO.js"),__vite__mapDeps([0,1,2,3,4,5]))),R=({alerts:a,pendingInstances:s})=>{const{setSidePanelContent:o}=x(),n=()=>{o("Review Pending Instances",e.jsx(g.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(C,{instances:s})}),"large")},l=a.map((r,c)=>{const t=m[r.alert_type]||m.Unknown;return e.jsxs("div",{className:d.listItem,children:[e.jsx(i.Icon,{name:`${t.icon.color??t.icon.gray}`}),t.alertType==="PendingComputersAlert"?e.jsxs(i.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:n,children:[`${s.length} pending `,j(s.length,"computer needs","computers need")," ","authorization"]}):e.jsx(h,{to:`/instances?status=${t.filterValue}`,className:I("u-no-margin u-no-padding",d.listItem__link),children:r.summary})]},t.alertType||c)});return e.jsx(i.List,{items:l})};function w(){const a=S();return{getAlertsSummaryQuery:()=>A({queryKey:["alert","summary"],queryFn:async()=>a.get("alerts/summary")})}}const B=()=>{const a=b(),{getAlertsSummaryQuery:s}=w(),{getPendingInstancesQuery:o}=Q(),{data:n,isLoading:l}=s(),{data:r,isLoading:c}=o(void 0,{enabled:!!n?.data.alerts_summary.find(_=>_.alert_type==="PendingComputersAlert")}),t=n?.data.alerts_summary||[],y=r?.data||[],u=l||c;return e.jsxs(k,{children:[e.jsx(L,{title:"Alerts"}),e.jsxs(v,{children:[u&&e.jsx(p,{}),!u&&t.length===0&&e.jsx(f,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[e.jsx(i.Button,{appearance:"positive",onClick:async()=>a("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!u&&t.length>0&&e.jsx(R,{alerts:t,pendingInstances:y})]})]})};export{B as default};
