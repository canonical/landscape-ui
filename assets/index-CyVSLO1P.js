import{V as S,I as f}from"./ScriptsTabs-B4WNvYX2.js";import{c as O,a as U,d as $,S as J,u as K,b as Q}from"./ScriptsTabs-B4WNvYX2.js";import{y as x,z as b,l as g,A as y,j as i,m as r}from"./index-2fzpjuii.js";import{S as h}from"./SidePanelFormButtons-DAl7F5tV.js";import{u as j,D as F}from"./DeliveryBlock-B5YZXRhG.js";import{g as o}from"./formikErrors-Bw8iTXYS.js";import"./index-0zPblRXu.js";import{S as I}from"./ScriptDropdown-BbXaswXz.js";import{default as X}from"./index-H-_b9OGu.js";import"./TruncatedCell-CgdNfcLB.js";import"./useRoles-Dwt5A3Uj.js";import"./HeaderWithSearch-BIg5d4wD.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./SidePanelFormButtons.module-D2P5PizG.js";import"./downshift.esm-jxkUgyVF.js";import"./CodeEditor-egO5wbn8.js";import"./ScriptFormAttachments-Dp2EsS7q.js";import"./AttachmentFile-DvVitlT1.js";const G=({parentAccessGroup:a,query:m})=>{const n=x(),{notify:u}=b(),{closeSidePanel:l}=g(),{runScript:p}=j(),t=y({initialValues:f,validationSchema:S,onSubmit:async e=>{var s;try{await p({deliver_after:e.deliverImmediately?void 0:e.deliver_after,query:m,script_id:e.script_id,username:e.username}),l(),u.success({message:`"${(s=e.script)==null?void 0:s.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(d){n(d)}}}),c=async e=>{if(await t.setFieldValue("script_id",(e==null?void 0:e.id)??0),!t.values.username){const s=(e==null?void 0:e.username)??"";await t.setFieldValue("username",s)}};return i.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[i.jsx(I,{script:t.values.script,setScript:async e=>{await t.setFieldValue("script",e),await c(e)},errorMessage:o(t,"script_id"),parentAccessGroup:a}),i.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:o(t,"username")})}),i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:o(t,"time_limit")})})]}),i.jsx(F,{formik:t}),i.jsx(h,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{X as CreateScriptForm,G as RunInstanceScriptForm,I as ScriptDropdown,O as ScriptList,U as ScriptsContainer,$ as ScriptsEmptyState,J as ScriptsTabs,K as useGetScripts,Q as useGetSingleScript};
