import{r as B,X as we,j as d,h as Pe,o as Ie,g as _,e as Qe,l as ct,f as Ce,c as Ct,d as Tt,_ as Ge}from"./index-yMWucjne.js";import{u as st}from"./formik.esm-TzDEWCHS.js";import{S as ut}from"./SidePanelFormButtons-DbT96abC.js";import{u as Rt}from"./useConfirm-CTtafMTw.js";import{u as Ot}from"./useFetchOld-DLnvAPrG.js";import{u as de}from"./useMutation-zxPjmBpS.js";import{u as Xe}from"./useQuery-CgBhq_jS.js";import{E as Ut}from"./EmptyState-kWhHOMkp.js";import{c as Ae,a as ne,g as ae,d as Je,f as ke,b as Mt}from"./index.esm-kQX3iWxY.js";import{u as lt}from"./useRoles-D3w8gpMq.js";import{h as Nt}from"./moment-Cl4UOzQZ.js";var he={},Te={};Te.byteLength=Lt;Te.toByteArray=Vt;Te.fromByteArray=Qt;var ce=[],J=[],Pt=typeof Uint8Array<"u"?Uint8Array:Array,$e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ge=0,$t=$e.length;ge<$t;++ge)ce[ge]=$e[ge],J[$e.charCodeAt(ge)]=ge;J[45]=62;J[95]=63;function ht(r){var o=r.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=r.indexOf("=");a===-1&&(a=o);var l=a===o?0:4-a%4;return[a,l]}function Lt(r){var o=ht(r),a=o[0],l=o[1];return(a+l)*3/4-l}function Dt(r,o,a){return(o+a)*3/4-a}function Vt(r){var o,a=ht(r),l=a[0],f=a[1],p=new Pt(Dt(r,l,f)),m=0,s=f>0?l-4:l,b;for(b=0;b<s;b+=4)o=J[r.charCodeAt(b)]<<18|J[r.charCodeAt(b+1)]<<12|J[r.charCodeAt(b+2)]<<6|J[r.charCodeAt(b+3)],p[m++]=o>>16&255,p[m++]=o>>8&255,p[m++]=o&255;return f===2&&(o=J[r.charCodeAt(b)]<<2|J[r.charCodeAt(b+1)]>>4,p[m++]=o&255),f===1&&(o=J[r.charCodeAt(b)]<<10|J[r.charCodeAt(b+1)]<<4|J[r.charCodeAt(b+2)]>>2,p[m++]=o>>8&255,p[m++]=o&255),p}function qt(r){return ce[r>>18&63]+ce[r>>12&63]+ce[r>>6&63]+ce[r&63]}function kt(r,o,a){for(var l,f=[],p=o;p<a;p+=3)l=(r[p]<<16&16711680)+(r[p+1]<<8&65280)+(r[p+2]&255),f.push(qt(l));return f.join("")}function Qt(r){for(var o,a=r.length,l=a%3,f=[],p=16383,m=0,s=a-l;m<s;m+=p)f.push(kt(r,m,m+p>s?s:m+p));return l===1?(o=r[a-1],f.push(ce[o>>2]+ce[o<<4&63]+"==")):l===2&&(o=(r[a-2]<<8)+r[a-1],f.push(ce[o>>10]+ce[o>>4&63]+ce[o<<2&63]+"=")),f.join("")}var ze={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ze.read=function(r,o,a,l,f){var p,m,s=f*8-l-1,b=(1<<s)-1,C=b>>1,R=-7,v=a?f-1:0,w=a?-1:1,A=r[o+v];for(v+=w,p=A&(1<<-R)-1,A>>=-R,R+=s;R>0;p=p*256+r[o+v],v+=w,R-=8);for(m=p&(1<<-R)-1,p>>=-R,R+=l;R>0;m=m*256+r[o+v],v+=w,R-=8);if(p===0)p=1-C;else{if(p===b)return m?NaN:(A?-1:1)*(1/0);m=m+Math.pow(2,l),p=p-C}return(A?-1:1)*m*Math.pow(2,p-l)};ze.write=function(r,o,a,l,f,p){var m,s,b,C=p*8-f-1,R=(1<<C)-1,v=R>>1,w=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=l?0:p-1,Q=l?1:-1,x=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,m=R):(m=Math.floor(Math.log(o)/Math.LN2),o*(b=Math.pow(2,-m))<1&&(m--,b*=2),m+v>=1?o+=w/b:o+=w*Math.pow(2,1-v),o*b>=2&&(m++,b/=2),m+v>=R?(s=0,m=R):m+v>=1?(s=(o*b-1)*Math.pow(2,f),m=m+v):(s=o*Math.pow(2,v-1)*Math.pow(2,f),m=0));f>=8;r[a+A]=s&255,A+=Q,s/=256,f-=8);for(m=m<<f|s,C+=f;C>0;r[a+A]=m&255,A+=Q,m/=256,C-=8);r[a+A-Q]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const o=Te,a=ze,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=y,r.INSPECT_MAX_BYTES=50;const f=2147483647;r.kMaxLength=f,s.TYPED_ARRAY_SUPPORT=p(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function m(n){if(n>f)throw new RangeError('The value "'+n+'" is invalid for option "size"');const e=new Uint8Array(n);return Object.setPrototypeOf(e,s.prototype),e}function s(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(n)}return b(n,e,t)}s.poolSize=8192;function b(n,e,t){if(typeof n=="string")return w(n,e);if(ArrayBuffer.isView(n))return Q(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(oe(n,ArrayBuffer)||n&&oe(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(n,SharedArrayBuffer)||n&&oe(n.buffer,SharedArrayBuffer)))return x(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const i=n.valueOf&&n.valueOf();if(i!=null&&i!==n)return s.from(i,e,t);const c=P(n);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return s.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}s.from=function(n,e,t){return b(n,e,t)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function C(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function R(n,e,t){return C(n),n<=0?m(n):e!==void 0?typeof t=="string"?m(n).fill(e,t):m(n).fill(e):m(n)}s.alloc=function(n,e,t){return R(n,e,t)};function v(n){return C(n),m(n<0?0:$(n)|0)}s.allocUnsafe=function(n){return v(n)},s.allocUnsafeSlow=function(n){return v(n)};function w(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=G(n,e)|0;let i=m(t);const c=i.write(n,e);return c!==t&&(i=i.slice(0,c)),i}function A(n){const e=n.length<0?0:$(n.length)|0,t=m(e);for(let i=0;i<e;i+=1)t[i]=n[i]&255;return t}function Q(n){if(oe(n,Uint8Array)){const e=new Uint8Array(n);return x(e.buffer,e.byteOffset,e.byteLength)}return A(n)}function x(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&t===void 0?i=new Uint8Array(n):t===void 0?i=new Uint8Array(n,e):i=new Uint8Array(n,e,t),Object.setPrototypeOf(i,s.prototype),i}function P(n){if(s.isBuffer(n)){const e=$(n.length)|0,t=m(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||Ne(n.length)?m(0):A(n);if(n.type==="Buffer"&&Array.isArray(n.data))return A(n.data)}function $(n){if(n>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return n|0}function y(n){return+n!=n&&(n=0),s.alloc(+n)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(oe(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,c=t.length;for(let u=0,h=Math.min(i,c);u<h;++u)if(e[u]!==t[u]){i=e[u],c=t[u];break}return i<c?-1:c<i?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return s.alloc(0);let i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;const c=s.allocUnsafe(t);let u=0;for(i=0;i<e.length;++i){let h=e[i];if(oe(h,Uint8Array))u+h.length>c.length?(s.isBuffer(h)||(h=s.from(h)),h.copy(c,u)):Uint8Array.prototype.set.call(c,h,u);else if(s.isBuffer(h))h.copy(c,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=h.length}return c};function G(n,e){if(s.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||oe(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const t=n.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&t===0)return 0;let c=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Me(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return We(n).length;default:if(c)return i?-1:Me(n).length;e=(""+e).toLowerCase(),c=!0}}s.byteLength=G;function z(n,e,t){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return ie(this,e,t);case"utf8":case"utf-8":return Z(this,e,t);case"ascii":return K(this,e,t);case"latin1":case"binary":return ee(this,e,t);case"base64":return ue(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),i=!0}}s.prototype._isBuffer=!0;function I(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}s.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)I(this,t,t+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)I(this,t,t+3),I(this,t+1,t+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)I(this,t,t+7),I(this,t+1,t+6),I(this,t+2,t+5),I(this,t+3,t+4);return this},s.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Z(this,0,e):z.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let e="";const t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l&&(s.prototype[l]=s.prototype.inspect),s.prototype.compare=function(e,t,i,c,u){if(oe(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),c===void 0&&(c=0),u===void 0&&(u=this.length),t<0||i>e.length||c<0||u>this.length)throw new RangeError("out of range index");if(c>=u&&t>=i)return 0;if(c>=u)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,c>>>=0,u>>>=0,this===e)return 0;let h=u-c,j=i-t;const q=Math.min(h,j),L=this.slice(c,u),k=e.slice(t,i);for(let N=0;N<q;++N)if(L[N]!==k[N]){h=L[N],j=k[N];break}return h<j?-1:j<h?1:0};function O(n,e,t,i,c){if(n.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ne(t)&&(t=c?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(c)return-1;t=n.length-1}else if(t<0)if(c)t=0;else return-1;if(typeof e=="string"&&(e=s.from(e,i)),s.isBuffer(e))return e.length===0?-1:U(n,e,t,i,c);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):U(n,[e],t,i,c);throw new TypeError("val must be string, number or Buffer")}function U(n,e,t,i,c){let u=1,h=n.length,j=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(n.length<2||e.length<2)return-1;u=2,h/=2,j/=2,t/=2}function q(k,N){return u===1?k[N]:k.readUInt16BE(N*u)}let L;if(c){let k=-1;for(L=t;L<h;L++)if(q(n,L)===q(e,k===-1?0:L-k)){if(k===-1&&(k=L),L-k+1===j)return k*u}else k!==-1&&(L-=L-k),k=-1}else for(t+j>h&&(t=h-j),L=t;L>=0;L--){let k=!0;for(let N=0;N<j;N++)if(q(n,L+N)!==q(e,N)){k=!1;break}if(k)return L}return-1}s.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},s.prototype.indexOf=function(e,t,i){return O(this,e,t,i,!0)},s.prototype.lastIndexOf=function(e,t,i){return O(this,e,t,i,!1)};function H(n,e,t,i){t=Number(t)||0;const c=n.length-t;i?(i=Number(i),i>c&&(i=c)):i=c;const u=e.length;i>u/2&&(i=u/2);let h;for(h=0;h<i;++h){const j=parseInt(e.substr(h*2,2),16);if(Ne(j))return h;n[t+h]=j}return h}function D(n,e,t,i){return Fe(Me(e,n.length-t),n,t,i)}function T(n,e,t,i){return Fe(_t(e),n,t,i)}function Y(n,e,t,i){return Fe(We(e),n,t,i)}function se(n,e,t,i){return Fe(vt(e,n.length-t),n,t,i)}s.prototype.write=function(e,t,i,c){if(t===void 0)c="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")c=t,i=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(i)?(i=i>>>0,c===void 0&&(c="utf8")):(c=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const u=this.length-t;if((i===void 0||i>u)&&(i=u),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let h=!1;for(;;)switch(c){case"hex":return H(this,e,t,i);case"utf8":case"utf-8":return D(this,e,t,i);case"ascii":case"latin1":case"binary":return T(this,e,t,i);case"base64":return Y(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,e,t,i);default:if(h)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),h=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(n,e,t){return e===0&&t===n.length?o.fromByteArray(n):o.fromByteArray(n.slice(e,t))}function Z(n,e,t){t=Math.min(n.length,t);const i=[];let c=e;for(;c<t;){const u=n[c];let h=null,j=u>239?4:u>223?3:u>191?2:1;if(c+j<=t){let q,L,k,N;switch(j){case 1:u<128&&(h=u);break;case 2:q=n[c+1],(q&192)===128&&(N=(u&31)<<6|q&63,N>127&&(h=N));break;case 3:q=n[c+1],L=n[c+2],(q&192)===128&&(L&192)===128&&(N=(u&15)<<12|(q&63)<<6|L&63,N>2047&&(N<55296||N>57343)&&(h=N));break;case 4:q=n[c+1],L=n[c+2],k=n[c+3],(q&192)===128&&(L&192)===128&&(k&192)===128&&(N=(u&15)<<18|(q&63)<<12|(L&63)<<6|k&63,N>65535&&N<1114112&&(h=N))}}h===null?(h=65533,j=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|h&1023),i.push(h),c+=j}return M(i)}const F=4096;function M(n){const e=n.length;if(e<=F)return String.fromCharCode.apply(String,n);let t="",i=0;for(;i<e;)t+=String.fromCharCode.apply(String,n.slice(i,i+=F));return t}function K(n,e,t){let i="";t=Math.min(n.length,t);for(let c=e;c<t;++c)i+=String.fromCharCode(n[c]&127);return i}function ee(n,e,t){let i="";t=Math.min(n.length,t);for(let c=e;c<t;++c)i+=String.fromCharCode(n[c]);return i}function ie(n,e,t){const i=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);let c="";for(let u=e;u<t;++u)c+=At[n[u]];return c}function S(n,e,t){const i=n.slice(e,t);let c="";for(let u=0;u<i.length-1;u+=2)c+=String.fromCharCode(i[u]+i[u+1]*256);return c}s.prototype.slice=function(e,t){const i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);const c=this.subarray(e,t);return Object.setPrototypeOf(c,s.prototype),c};function g(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||g(e,t,this.length);let c=this[e],u=1,h=0;for(;++h<t&&(u*=256);)c+=this[e+h]*u;return c},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||g(e,t,this.length);let c=this[e+--t],u=1;for(;t>0&&(u*=256);)c+=this[e+--t]*u;return c},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e=e>>>0,t||g(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||g(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||g(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||g(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=le(function(e){e=e>>>0,me(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&xe(e,this.length-8);const c=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,u=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(c)+(BigInt(u)<<BigInt(32))}),s.prototype.readBigUInt64BE=le(function(e){e=e>>>0,me(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&xe(e,this.length-8);const c=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],u=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(c)<<BigInt(32))+BigInt(u)}),s.prototype.readIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||g(e,t,this.length);let c=this[e],u=1,h=0;for(;++h<t&&(u*=256);)c+=this[e+h]*u;return u*=128,c>=u&&(c-=Math.pow(2,8*t)),c},s.prototype.readIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||g(e,t,this.length);let c=t,u=1,h=this[e+--c];for(;c>0&&(u*=256);)h+=this[e+--c]*u;return u*=128,h>=u&&(h-=Math.pow(2,8*t)),h},s.prototype.readInt8=function(e,t){return e=e>>>0,t||g(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e=e>>>0,t||g(e,2,this.length);const i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i},s.prototype.readInt16BE=function(e,t){e=e>>>0,t||g(e,2,this.length);const i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i},s.prototype.readInt32LE=function(e,t){return e=e>>>0,t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e=e>>>0,t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=le(function(e){e=e>>>0,me(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&xe(e,this.length-8);const c=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(c)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=le(function(e){e=e>>>0,me(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&xe(e,this.length-8);const c=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(c)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)}),s.prototype.readFloatLE=function(e,t){return e=e>>>0,t||g(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e=e>>>0,t||g(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||g(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||g(e,8,this.length),a.read(this,e,!1,52,8)};function E(n,e,t,i,c,u){if(!s.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>c||e<u)throw new RangeError('"value" argument is out of bounds');if(t+i>n.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,i,c){if(e=+e,t=t>>>0,i=i>>>0,!c){const j=Math.pow(2,8*i)-1;E(this,e,t,i,j,0)}let u=1,h=0;for(this[t]=e&255;++h<i&&(u*=256);)this[t+h]=e/u&255;return t+i},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,i,c){if(e=+e,t=t>>>0,i=i>>>0,!c){const j=Math.pow(2,8*i)-1;E(this,e,t,i,j,0)}let u=i-1,h=1;for(this[t+u]=e&255;--u>=0&&(h*=256);)this[t+u]=e/h&255;return t+i},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function V(n,e,t,i,c){Ke(e,i,c,n,t,7);let u=Number(e&BigInt(4294967295));n[t++]=u,u=u>>8,n[t++]=u,u=u>>8,n[t++]=u,u=u>>8,n[t++]=u;let h=Number(e>>BigInt(32)&BigInt(4294967295));return n[t++]=h,h=h>>8,n[t++]=h,h=h>>8,n[t++]=h,h=h>>8,n[t++]=h,t}function te(n,e,t,i,c){Ke(e,i,c,n,t,7);let u=Number(e&BigInt(4294967295));n[t+7]=u,u=u>>8,n[t+6]=u,u=u>>8,n[t+5]=u,u=u>>8,n[t+4]=u;let h=Number(e>>BigInt(32)&BigInt(4294967295));return n[t+3]=h,h=h>>8,n[t+2]=h,h=h>>8,n[t+1]=h,h=h>>8,n[t]=h,t+8}s.prototype.writeBigUInt64LE=le(function(e,t=0){return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=le(function(e,t=0){return te(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,i,c){if(e=+e,t=t>>>0,!c){const q=Math.pow(2,8*i-1);E(this,e,t,i,q-1,-q)}let u=0,h=1,j=0;for(this[t]=e&255;++u<i&&(h*=256);)e<0&&j===0&&this[t+u-1]!==0&&(j=1),this[t+u]=(e/h>>0)-j&255;return t+i},s.prototype.writeIntBE=function(e,t,i,c){if(e=+e,t=t>>>0,!c){const q=Math.pow(2,8*i-1);E(this,e,t,i,q-1,-q)}let u=i-1,h=1,j=0;for(this[t+u]=e&255;--u>=0&&(h*=256);)e<0&&j===0&&this[t+u+1]!==0&&(j=1),this[t+u]=(e/h>>0)-j&255;return t+i},s.prototype.writeInt8=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeBigInt64LE=le(function(e,t=0){return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=le(function(e,t=0){return te(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(n,e,t,i,c,u){if(t+i>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function re(n,e,t,i,c){return e=+e,t=t>>>0,c||X(n,e,t,4),a.write(n,e,t,i,23,4),t+4}s.prototype.writeFloatLE=function(e,t,i){return re(this,e,t,!0,i)},s.prototype.writeFloatBE=function(e,t,i){return re(this,e,t,!1,i)};function He(n,e,t,i,c){return e=+e,t=t>>>0,c||X(n,e,t,8),a.write(n,e,t,i,52,8),t+8}s.prototype.writeDoubleLE=function(e,t,i){return He(this,e,t,!0,i)},s.prototype.writeDoubleBE=function(e,t,i){return He(this,e,t,!1,i)},s.prototype.copy=function(e,t,i,c){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!c&&c!==0&&(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<i&&(c=i),c===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-i&&(c=e.length-t+i);const u=c-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,i,c):Uint8Array.prototype.set.call(e,this.subarray(i,c),t),u},s.prototype.fill=function(e,t,i,c){if(typeof e=="string"){if(typeof t=="string"?(c=t,t=0,i=this.length):typeof i=="string"&&(c=i,i=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!s.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(e.length===1){const h=e.charCodeAt(0);(c==="utf8"&&h<128||c==="latin1")&&(e=h)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let u;if(typeof e=="number")for(u=t;u<i;++u)this[u]=e;else{const h=s.isBuffer(e)?e:s.from(e,c),j=h.length;if(j===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(u=0;u<i-t;++u)this[u+t]=h[u%j]}return this};const pe={};function Ue(n,e,t){pe[n]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Ue("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ue("ERR_INVALID_ARG_TYPE",function(n,e){return`The "${n}" argument must be of type number. Received type ${typeof e}`},TypeError),Ue("ERR_OUT_OF_RANGE",function(n,e,t){let i=`The value of "${n}" is out of range.`,c=t;return Number.isInteger(t)&&Math.abs(t)>2**32?c=Ye(String(t)):typeof t=="bigint"&&(c=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(c=Ye(c)),c+="n"),i+=` It must be ${e}. Received ${c}`,i},RangeError);function Ye(n){let e="",t=n.length;const i=n[0]==="-"?1:0;for(;t>=i+4;t-=3)e=`_${n.slice(t-3,t)}${e}`;return`${n.slice(0,t)}${e}`}function St(n,e,t){me(e,"offset"),(n[e]===void 0||n[e+t]===void 0)&&xe(e,n.length-(t+1))}function Ke(n,e,t,i,c,u){if(n>t||n<e){const h=typeof e=="bigint"?"n":"";let j;throw u>3?e===0||e===BigInt(0)?j=`>= 0${h} and < 2${h} ** ${(u+1)*8}${h}`:j=`>= -(2${h} ** ${(u+1)*8-1}${h}) and < 2 ** ${(u+1)*8-1}${h}`:j=`>= ${e}${h} and <= ${t}${h}`,new pe.ERR_OUT_OF_RANGE("value",j,n)}St(i,c,u)}function me(n,e){if(typeof n!="number")throw new pe.ERR_INVALID_ARG_TYPE(e,"number",n)}function xe(n,e,t){throw Math.floor(n)!==n?(me(n,t),new pe.ERR_OUT_OF_RANGE(t||"offset","an integer",n)):e<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,n)}const Bt=/[^+/0-9A-Za-z-_]/g;function Ft(n){if(n=n.split("=")[0],n=n.trim().replace(Bt,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Me(n,e){e=e||1/0;let t;const i=n.length;let c=null;const u=[];for(let h=0;h<i;++h){if(t=n.charCodeAt(h),t>55295&&t<57344){if(!c){if(t>56319){(e-=3)>-1&&u.push(239,191,189);continue}else if(h+1===i){(e-=3)>-1&&u.push(239,191,189);continue}c=t;continue}if(t<56320){(e-=3)>-1&&u.push(239,191,189),c=t;continue}t=(c-55296<<10|t-56320)+65536}else c&&(e-=3)>-1&&u.push(239,191,189);if(c=null,t<128){if((e-=1)<0)break;u.push(t)}else if(t<2048){if((e-=2)<0)break;u.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;u.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;u.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return u}function _t(n){const e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function vt(n,e){let t,i,c;const u=[];for(let h=0;h<n.length&&!((e-=2)<0);++h)t=n.charCodeAt(h),i=t>>8,c=t%256,u.push(c),u.push(i);return u}function We(n){return o.toByteArray(Ft(n))}function Fe(n,e,t,i){let c;for(c=0;c<i&&!(c+t>=e.length||c>=n.length);++c)e[c+t]=n[c];return c}function oe(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function Ne(n){return n!==n}const At=function(){const n="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const i=t*16;for(let c=0;c<16;++c)e[i+c]=n[t]+n[c]}return e}();function le(n){return typeof BigInt>"u"?jt:n}function jt(){throw new Error("BigInt not supported")}})(he);function Gt(r,o,a){return o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r}function Ze(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(r,f).enumerable})),a.push.apply(a,l)}return a}function et(r){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Ze(Object(a),!0).forEach(function(l){Gt(r,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(a,l))})}return r}function zt(r,o){if(r==null)return{};var a={},l=Object.keys(r),f,p;for(p=0;p<l.length;p++)f=l[p],!(o.indexOf(f)>=0)&&(a[f]=r[f]);return a}function Ht(r,o){if(r==null)return{};var a=zt(r,o),l,f;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(r);for(f=0;f<p.length;f++)l=p[f],!(o.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(r,l)&&(a[l]=r[l])}return a}function Yt(r,o){return Kt(r)||Wt(r,o)||Xt(r,o)||Jt()}function Kt(r){if(Array.isArray(r))return r}function Wt(r,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var a=[],l=!0,f=!1,p=void 0;try{for(var m=r[Symbol.iterator](),s;!(l=(s=m.next()).done)&&(a.push(s.value),!(o&&a.length===o));l=!0);}catch(b){f=!0,p=b}finally{try{!l&&m.return!=null&&m.return()}finally{if(f)throw p}}return a}}function Xt(r,o){if(r){if(typeof r=="string")return tt(r,o);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tt(r,o)}}function tt(r,o){(o==null||o>r.length)&&(o=r.length);for(var a=0,l=new Array(o);a<o;a++)l[a]=r[a];return l}function Jt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zt(r,o,a){return o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r}function rt(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(r,f).enumerable})),a.push.apply(a,l)}return a}function nt(r){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?rt(Object(a),!0).forEach(function(l){Zt(r,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(a,l))})}return r}function er(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return function(l){return o.reduceRight(function(f,p){return p(f)},l)}}function be(r){return function o(){for(var a=this,l=arguments.length,f=new Array(l),p=0;p<l;p++)f[p]=arguments[p];return f.length>=r.length?r.apply(this,f):function(){for(var m=arguments.length,s=new Array(m),b=0;b<m;b++)s[b]=arguments[b];return o.apply(a,[].concat(f,s))}}}function je(r){return{}.toString.call(r).includes("Object")}function tr(r){return!Object.keys(r).length}function Se(r){return typeof r=="function"}function rr(r,o){return Object.prototype.hasOwnProperty.call(r,o)}function nr(r,o){return je(o)||fe("changeType"),Object.keys(o).some(function(a){return!rr(r,a)})&&fe("changeField"),o}function ir(r){Se(r)||fe("selectorType")}function or(r){Se(r)||je(r)||fe("handlerType"),je(r)&&Object.values(r).some(function(o){return!Se(o)})&&fe("handlersType")}function ar(r){r||fe("initialIsRequired"),je(r)||fe("initialType"),tr(r)&&fe("initialContent")}function cr(r,o){throw new Error(r[o]||r.default)}var sr={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},fe=be(cr)(sr),_e={changes:nr,selector:ir,handler:or,initial:ar};function ur(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_e.initial(r),_e.handler(o);var a={current:r},l=be(fr)(a,o),f=be(hr)(a),p=be(_e.changes)(r),m=be(lr)(a);function s(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(R){return R};return _e.selector(C),C(a.current)}function b(C){er(l,f,p,m)(C)}return[s,b]}function lr(r,o){return Se(o)?o(r.current):o}function hr(r,o){return r.current=nt(nt({},r.current),o),o}function fr(r,o,a){return Se(o)?o(r.current):Object.keys(a).forEach(function(l){var f;return(f=o[l])===null||f===void 0?void 0:f.call(o,r.current[l])}),a}var dr={create:ur},pr={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function mr(r){return function o(){for(var a=this,l=arguments.length,f=new Array(l),p=0;p<l;p++)f[p]=arguments[p];return f.length>=r.length?r.apply(this,f):function(){for(var m=arguments.length,s=new Array(m),b=0;b<m;b++)s[b]=arguments[b];return o.apply(a,[].concat(f,s))}}}function gr(r){return{}.toString.call(r).includes("Object")}function yr(r){return r||it("configIsRequired"),gr(r)||it("configType"),r.urls?(wr(),{paths:{vs:r.urls.monacoBase}}):r}function wr(){console.warn(ft.deprecation)}function xr(r,o){throw new Error(r[o]||r.default)}var ft={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},it=mr(xr)(ft),br={config:yr},Er=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return function(f){return a.reduceRight(function(p,m){return m(p)},f)}};function dt(r,o){return Object.keys(o).forEach(function(a){o[a]instanceof Object&&r[a]&&Object.assign(o[a],dt(r[a],o[a]))}),et(et({},r),o)}var Ir={type:"cancelation",msg:"operation is manually canceled"};function Le(r){var o=!1,a=new Promise(function(l,f){r.then(function(p){return o?f(Ir):l(p)}),r.catch(f)});return a.cancel=function(){return o=!0},a}var Sr=dr.create({config:pr,isInitialized:!1,resolve:null,reject:null,monaco:null}),pt=Yt(Sr,2),Be=pt[0],Re=pt[1];function Br(r){var o=br.config(r),a=o.monaco,l=Ht(o,["monaco"]);Re(function(f){return{config:dt(f.config,l),monaco:a}})}function Fr(){var r=Be(function(o){var a=o.monaco,l=o.isInitialized,f=o.resolve;return{monaco:a,isInitialized:l,resolve:f}});if(!r.isInitialized){if(Re({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),Le(De);if(window.monaco&&window.monaco.editor)return mt(window.monaco),r.resolve(window.monaco),Le(De);Er(_r,Ar)(jr)}return Le(De)}function _r(r){return document.body.appendChild(r)}function vr(r){var o=document.createElement("script");return r&&(o.src=r),o}function Ar(r){var o=Be(function(l){var f=l.config,p=l.reject;return{config:f,reject:p}}),a=vr("".concat(o.config.paths.vs,"/loader.js"));return a.onload=function(){return r()},a.onerror=o.reject,a}function jr(){var r=Be(function(a){var l=a.config,f=a.resolve,p=a.reject;return{config:l,resolve:f,reject:p}}),o=window.require;o.config(r.config),o(["vs/editor/editor.main"],function(a){mt(a),r.resolve(a)},function(a){r.reject(a)})}function mt(r){Be().monaco||Re({monaco:r})}function Cr(){return Be(function(r){var o=r.monaco;return o})}var De=new Promise(function(r,o){return Re({resolve:r,reject:o})}),gt={config:Br,init:Fr,__getMonacoInstance:Cr},Tr={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ve=Tr,Rr={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Or=Rr;function Ur({children:r}){return we.createElement("div",{style:Or.container},r)}var Mr=Ur,Nr=Mr;function Pr({width:r,height:o,isEditorReady:a,loading:l,_ref:f,className:p,wrapperProps:m}){return we.createElement("section",{style:{...Ve.wrapper,width:r,height:o},...m},!a&&we.createElement(Nr,null,l),we.createElement("div",{ref:f,style:{...Ve.fullWidth,...!a&&Ve.hide},className:p}))}var $r=Pr,yt=B.memo($r);function Lr(r){B.useEffect(r,[])}var wt=Lr;function Dr(r,o,a=!0){let l=B.useRef(!0);B.useEffect(l.current||!a?()=>{l.current=!1}:r,o)}var W=Dr;function Ee(){}function ye(r,o,a,l){return Vr(r,l)||qr(r,o,a,l)}function Vr(r,o){return r.editor.getModel(xt(r,o))}function qr(r,o,a,l){return r.editor.createModel(o,a,l?xt(r,l):void 0)}function xt(r,o){return r.Uri.parse(o)}function kr({original:r,modified:o,language:a,originalLanguage:l,modifiedLanguage:f,originalModelPath:p,modifiedModelPath:m,keepCurrentOriginalModel:s=!1,keepCurrentModifiedModel:b=!1,theme:C="light",loading:R="Loading...",options:v={},height:w="100%",width:A="100%",className:Q,wrapperProps:x={},beforeMount:P=Ee,onMount:$=Ee}){let[y,G]=B.useState(!1),[z,I]=B.useState(!0),O=B.useRef(null),U=B.useRef(null),H=B.useRef(null),D=B.useRef($),T=B.useRef(P),Y=B.useRef(!1);wt(()=>{let F=gt.init();return F.then(M=>(U.current=M)&&I(!1)).catch(M=>(M==null?void 0:M.type)!=="cancelation"&&console.error("Monaco initialization: error:",M)),()=>O.current?Z():F.cancel()}),W(()=>{if(O.current&&U.current){let F=O.current.getOriginalEditor(),M=ye(U.current,r||"",l||a||"text",p||"");M!==F.getModel()&&F.setModel(M)}},[p],y),W(()=>{if(O.current&&U.current){let F=O.current.getModifiedEditor(),M=ye(U.current,o||"",f||a||"text",m||"");M!==F.getModel()&&F.setModel(M)}},[m],y),W(()=>{let F=O.current.getModifiedEditor();F.getOption(U.current.editor.EditorOption.readOnly)?F.setValue(o||""):o!==F.getValue()&&(F.executeEdits("",[{range:F.getModel().getFullModelRange(),text:o||"",forceMoveMarkers:!0}]),F.pushUndoStop())},[o],y),W(()=>{var F,M;(M=(F=O.current)==null?void 0:F.getModel())==null||M.original.setValue(r||"")},[r],y),W(()=>{let{original:F,modified:M}=O.current.getModel();U.current.editor.setModelLanguage(F,l||a||"text"),U.current.editor.setModelLanguage(M,f||a||"text")},[a,l,f],y),W(()=>{var F;(F=U.current)==null||F.editor.setTheme(C)},[C],y),W(()=>{var F;(F=O.current)==null||F.updateOptions(v)},[v],y);let se=B.useCallback(()=>{var K;if(!U.current)return;T.current(U.current);let F=ye(U.current,r||"",l||a||"text",p||""),M=ye(U.current,o||"",f||a||"text",m||"");(K=O.current)==null||K.setModel({original:F,modified:M})},[a,o,f,r,l,p,m]),ue=B.useCallback(()=>{var F;!Y.current&&H.current&&(O.current=U.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...v}),se(),(F=U.current)==null||F.editor.setTheme(C),G(!0),Y.current=!0)},[v,C,se]);B.useEffect(()=>{y&&D.current(O.current,U.current)},[y]),B.useEffect(()=>{!z&&!y&&ue()},[z,y,ue]);function Z(){var M,K,ee,ie;let F=(M=O.current)==null?void 0:M.getModel();s||((K=F==null?void 0:F.original)==null||K.dispose()),b||((ee=F==null?void 0:F.modified)==null||ee.dispose()),(ie=O.current)==null||ie.dispose()}return we.createElement(yt,{width:A,height:w,isEditorReady:y,loading:R,_ref:H,className:Q,wrapperProps:x})}var Qr=kr;B.memo(Qr);function Gr(r){let o=B.useRef();return B.useEffect(()=>{o.current=r},[r]),o.current}var zr=Gr,ve=new Map;function Hr({defaultValue:r,defaultLanguage:o,defaultPath:a,value:l,language:f,path:p,theme:m="light",line:s,loading:b="Loading...",options:C={},overrideServices:R={},saveViewState:v=!0,keepCurrentModel:w=!1,width:A="100%",height:Q="100%",className:x,wrapperProps:P={},beforeMount:$=Ee,onMount:y=Ee,onChange:G,onValidate:z=Ee}){let[I,O]=B.useState(!1),[U,H]=B.useState(!0),D=B.useRef(null),T=B.useRef(null),Y=B.useRef(null),se=B.useRef(y),ue=B.useRef($),Z=B.useRef(),F=B.useRef(l),M=zr(p),K=B.useRef(!1),ee=B.useRef(!1);wt(()=>{let g=gt.init();return g.then(E=>(D.current=E)&&H(!1)).catch(E=>(E==null?void 0:E.type)!=="cancelation"&&console.error("Monaco initialization: error:",E)),()=>T.current?S():g.cancel()}),W(()=>{var E,V,te,X;let g=ye(D.current,r||l||"",o||f||"",p||a||"");g!==((E=T.current)==null?void 0:E.getModel())&&(v&&ve.set(M,(V=T.current)==null?void 0:V.saveViewState()),(te=T.current)==null||te.setModel(g),v&&((X=T.current)==null||X.restoreViewState(ve.get(p))))},[p],I),W(()=>{var g;(g=T.current)==null||g.updateOptions(C)},[C],I),W(()=>{!T.current||l===void 0||(T.current.getOption(D.current.editor.EditorOption.readOnly)?T.current.setValue(l):l!==T.current.getValue()&&(ee.current=!0,T.current.executeEdits("",[{range:T.current.getModel().getFullModelRange(),text:l,forceMoveMarkers:!0}]),T.current.pushUndoStop(),ee.current=!1))},[l],I),W(()=>{var E,V;let g=(E=T.current)==null?void 0:E.getModel();g&&f&&((V=D.current)==null||V.editor.setModelLanguage(g,f))},[f],I),W(()=>{var g;s!==void 0&&((g=T.current)==null||g.revealLine(s))},[s],I),W(()=>{var g;(g=D.current)==null||g.editor.setTheme(m)},[m],I);let ie=B.useCallback(()=>{var g;if(!(!Y.current||!D.current)&&!K.current){ue.current(D.current);let E=p||a,V=ye(D.current,l||r||"",o||f||"",E||"");T.current=(g=D.current)==null?void 0:g.editor.create(Y.current,{model:V,automaticLayout:!0,...C},R),v&&T.current.restoreViewState(ve.get(E)),D.current.editor.setTheme(m),s!==void 0&&T.current.revealLine(s),O(!0),K.current=!0}},[r,o,a,l,f,p,C,R,v,m,s]);B.useEffect(()=>{I&&se.current(T.current,D.current)},[I]),B.useEffect(()=>{!U&&!I&&ie()},[U,I,ie]),F.current=l,B.useEffect(()=>{var g,E;I&&G&&((g=Z.current)==null||g.dispose(),Z.current=(E=T.current)==null?void 0:E.onDidChangeModelContent(V=>{ee.current||G(T.current.getValue(),V)}))},[I,G]),B.useEffect(()=>{if(I){let g=D.current.editor.onDidChangeMarkers(E=>{var te;let V=(te=T.current.getModel())==null?void 0:te.uri;if(V&&E.find(X=>X.path===V.path)){let X=D.current.editor.getModelMarkers({resource:V});z==null||z(X)}});return()=>{g==null||g.dispose()}}return()=>{}},[I,z]);function S(){var g,E;(g=Z.current)==null||g.dispose(),w?v&&ve.set(p,T.current.saveViewState()):(E=T.current.getModel())==null||E.dispose(),T.current.dispose()}return we.createElement(yt,{width:A,height:Q,isEditorReady:I,loading:b,_ref:Y,className:x,wrapperProps:P})}var Yr=Hr,Kr=B.memo(Yr);const Wr="_highlighter_1co8v_1",Xr="_error_1co8v_9",ot={highlighter:Wr,error:Xr},bt=({label:r,onChange:o,value:a,className:l,error:f=!1,labelClassName:p,required:m=!1})=>d.jsxs("div",{className:Pe("p-form__group p-form-validation",{"is-error":f}),children:[d.jsx("label",{className:Pe("p-form__label",{"is-required":m},p),htmlFor:"code",children:r}),d.jsxs("div",{className:"p-form__control u-clearfix",children:[d.jsx(Kr,{language:"shell",height:"16rem",loading:d.jsx(Ie,{}),defaultValue:"#!/bin/bash",className:Pe(ot.highlighter,{[ot.error]:f},l),value:a,onChange:o,options:{minimap:{enabled:!1},renderLineHighlight:"none",padding:{top:8,bottom:8}}}),f&&d.jsxs("p",{className:"p-form-validation__message",id:"code-error-message",children:[d.jsx("strong",{children:"Error: "}),d.jsx("span",{children:f})]})]})]}),Jr=({formik:r})=>{var o,a,l,f,p,m,s,b,C,R,v,w,A,Q,x;return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"p-heading--5",children:"List of attachments"}),d.jsx("p",{className:"u-text--muted",children:"Attachments that will be sent along with the script. You can attach up to 5 files, for a maximum of 1.00MB. Filenames must be unique. On the client, the attachments will be placed in the directory whose name is accessible through the environment variable LANDSCAPE_ATTACHMENTS. They'll be deleted once the script has been run."}),d.jsx(_.Input,{label:"First attachment",labelClassName:"u-off-screen",type:"file",onChange:P=>{var $;return r.setFieldValue("attachments.first",(($=P.target.files)==null?void 0:$[0])??null)},error:(o=r.touched.attachments)!=null&&o.first&&((a=r.errors.attachments)!=null&&a.first)?(l=r.errors.attachments)==null?void 0:l.first:void 0}),d.jsx(_.Input,{label:"Second attachment",labelClassName:"u-off-screen",type:"file",onChange:P=>{var $;return r.setFieldValue("attachments.second",(($=P.target.files)==null?void 0:$[0])??null)},error:(f=r.touched.attachments)!=null&&f.second&&((p=r.errors.attachments)!=null&&p.second)?(m=r.errors.attachments)==null?void 0:m.second:void 0}),d.jsx(_.Input,{label:"Third attachment",labelClassName:"u-off-screen",type:"file",onChange:P=>{var $;return r.setFieldValue("attachments.third",(($=P.target.files)==null?void 0:$[0])??null)},error:(s=r.touched.attachments)!=null&&s.third&&((b=r.errors.attachments)!=null&&b.third)?(C=r.errors.attachments)==null?void 0:C.third:void 0}),d.jsx(_.Input,{label:"Fourth attachment",labelClassName:"u-off-screen",type:"file",onChange:P=>{var $;return r.setFieldValue("attachments.fourth",(($=P.target.files)==null?void 0:$[0])??null)},error:(R=r.touched.attachments)!=null&&R.fourth&&((v=r.errors.attachments)!=null&&v.fourth)?(w=r.errors.attachments)==null?void 0:w.fourth:void 0}),d.jsx(_.Input,{label:"Fifth attachment",labelClassName:"u-off-screen",type:"file",onChange:P=>{var $;return r.setFieldValue("attachments.fifth",(($=P.target.files)==null?void 0:$[0])??null)},error:(A=r.touched.attachments)!=null&&A.fifth&&((Q=r.errors.attachments)!=null&&Q.fifth)?(x=r.errors.attachments)==null?void 0:x.fifth:void 0})]})},Zr="_radioGroup_1cojx_1",en={radioGroup:Zr},tn=({formik:r})=>{const o=async a=>{const l=a.currentTarget.value==="true";await r.setFieldValue("deliverImmediately",l),l||await r.setFieldValue("deliver_after",Nt().toISOString().slice(0,16))};return d.jsxs(d.Fragment,{children:[d.jsx("span",{children:d.jsx("b",{children:"Delivery time"})}),d.jsxs("div",{className:en.radioGroup,children:[d.jsx(_.Input,{type:"radio",label:"As soon as possible",name:"deliverImmediately",value:"true",onChange:o,checked:r.values.deliverImmediately}),d.jsx(_.Input,{type:"radio",label:"Scheduled",name:"deliverImmediately",value:"false",onChange:o,checked:!r.values.deliverImmediately})]}),!r.values.deliverImmediately&&d.jsx(_.Input,{label:"Deliver after",type:"datetime-local",labelClassName:"u-off-screen",...r.getFieldProps("deliver_after"),error:r.touched.deliver_after&&typeof r.errors.deliver_after=="string"?r.errors.deliver_after:void 0})]})},rn={access_group:"",attachments:{first:null,second:null,third:null,fourth:null,fifth:null},code:"",deliverImmediately:!0,deliver_after:"",saveScript:!0,script_id:0,time_limit:300,title:"",type:"new",username:""},nn=Ae().shape({access_group:ne().when("type",{is:"new",then:r=>r.required()}),attachments:Ae().shape({first:ae().nullable(),second:ae().nullable(),third:ae().nullable(),fourth:ae().nullable(),fifth:ae().nullable()}),code:ne().when("type",{is:"new",then:r=>r.required()}),deliverImmediately:Je().required(),deliver_after:ne().when("deliverImmediately",{is:!1,then:r=>r.required()}),saveScript:Je().when("type",{is:"new",then:r=>r.required()}),script_id:ke().when("type",{is:"existing",then:r=>r.min(1,"Script is required")}),time_limit:ke().when("type",{is:"new",then:r=>r.required()}),title:ne().when("type",{is:"new",then:r=>r.required()}),type:ne().required(),username:ne().required()}),on=[{label:"New script",value:"new"},{label:"Existing script",value:"existing"}],an=(r,o)=>{var a;return{message:`"${r.type==="new"?r.title:(a=o.find(({value:l})=>l===r.script_id))==null?void 0:a.label}" script queued to execute successfully`,title:"Script execution queued"}},cn=r=>{const o=(r==null?void 0:r.map(({id:a,title:l})=>({label:l,value:a})))??[];return o.unshift({label:"Select script",value:0}),o},sn=({query:r})=>{const o=Qe(),{notify:a}=ct(),{closeSidePanel:l}=Ce(),{getAccessGroupQuery:f}=lt(),{createScriptAttachmentQuery:p,createScriptQuery:m,executeScriptQuery:s,getScriptsQuery:b,removeScriptQuery:C}=Oe(),{mutateAsync:R}=p,{mutateAsync:v}=m,{mutateAsync:w}=s,{mutateAsync:A}=C,x=st({initialValues:rn,validationSchema:nn,onSubmit:async I=>{try{if(I.type==="existing")await w({deliver_after:I.deliverImmediately?I.deliver_after:void 0,query:r,script_id:I.script_id,username:I.username});else{const{data:O}=await v({title:I.title,time_limit:I.time_limit,code:he.Buffer.from(I.code).toString("base64"),access_group:I.access_group,username:I.username}),U=Object.values(I.attachments).filter(Boolean);if(U.length>0){const H=await Promise.all(U.map(T=>T.arrayBuffer())),D=U.map(({name:T},Y)=>R({script_id:O.id,file:`${T}$$${he.Buffer.from(H[Y]).toString("base64")}`}));await Promise.all(D)}await w({deliver_after:I.deliverImmediately?I.deliver_after:void 0,query:r,script_id:O.id,username:I.username}),I.saveScript||await A({script_id:O.id})}l(),a.success(an(I,$))}catch(O){o(O)}}}),{data:P}=b(),$=cn(P==null?void 0:P.data.results),y=async I=>{var U;const O=parseInt(I.target.value);if(await x.setFieldValue("script_id",O),!x.values.username){const H=((U=P==null?void 0:P.data.results.find(({id:D})=>D===O))==null?void 0:U.username)??"";await x.setFieldValue("username",H)}},{data:G}=f(),z=B.useMemo(()=>((G==null?void 0:G.data)??[]).map(({name:I,title:O})=>({label:O,value:I})),[G]);return d.jsxs(_.Form,{onSubmit:x.handleSubmit,noValidate:!0,children:[d.jsx(_.Select,{label:"Type",labelClassName:"u-off-screen",required:!0,options:on,...x.getFieldProps("type"),error:x.touched.type&&x.errors.type?x.errors.type:void 0}),x.values.type==="existing"&&d.jsx(_.Select,{label:"Script",required:!0,options:$,...x.getFieldProps("script_id"),onChange:y,error:x.touched.script_id&&x.errors.script_id?x.errors.script_id:void 0}),x.values.type==="new"&&d.jsxs(d.Fragment,{children:[d.jsx(_.Input,{label:"Title",type:"text",required:!0,...x.getFieldProps("title"),error:x.touched.title&&x.errors.title?x.errors.title:void 0}),d.jsx(_.Input,{label:"Time limit",type:"number",required:!0,...x.getFieldProps("time_limit"),error:x.touched.time_limit&&x.errors.time_limit?x.errors.time_limit:void 0}),d.jsx(bt,{label:"Code",required:!0,onChange:I=>{x.setFieldValue("code",I??"")},value:x.values.code,error:x.touched.code&&x.errors.code?x.errors.code:void 0}),d.jsx(_.Select,{label:"Access group",required:!0,options:[{label:"Select access group",value:""},...z],...x.getFieldProps("access_group"),error:x.touched.access_group&&x.errors.access_group?x.errors.access_group:void 0})]}),d.jsx(_.Input,{label:"Run as user",type:"text",required:!0,...x.getFieldProps("username"),error:x.touched.username&&x.errors.username?x.errors.username:void 0}),x.values.type==="new"&&d.jsxs(d.Fragment,{children:[d.jsx(_.CheckboxInput,{label:"Save script",...x.getFieldProps("saveScript"),checked:x.values.saveScript}),d.jsx(Jr,{formik:x})]}),d.jsx(tn,{formik:x}),d.jsx(ut,{submitButtonDisabled:x.isSubmitting,submitButtonText:"Run script"})]})},un=sn;function Oe(){const r=Ct(),o=Ot(),a=Tt(),l=(w={},A={})=>Xe({queryKey:["scripts",w],queryFn:()=>a.get("scripts",{params:w}),...A}),f=(w,A={})=>Xe({queryKey:["scriptCode",w],queryFn:()=>o.get("GetScriptCode",{params:w}),...A}),p=de({mutationKey:["scripts","execute"],mutationFn:w=>o.get("ExecuteScript",{params:w})}),m=de({mutationKey:["scripts","remove"],mutationFn:w=>o.get("RemoveScript",{params:w}),onSuccess:()=>r.invalidateQueries(["scripts"])}),s=de({mutationKey:["scripts","create"],mutationFn:w=>o.get("CreateScript",{params:w}),onSuccess:()=>r.invalidateQueries(["scripts"])}),b=de({mutationKey:["scripts","edit"],mutationFn:w=>o.get("EditScript",{params:w}),onSuccess:()=>r.invalidateQueries(["scripts"])}),C=de({mutationKey:["scripts","copy"],mutationFn:w=>o.get("CopyScript",{params:w}),onSuccess:()=>r.invalidateQueries(["scripts"])}),R=de({mutationKey:["scripts","removeAttachment"],mutationFn:w=>o.get("RemoveScriptAttachment",{params:w}),onSuccess:()=>r.invalidateQueries(["scripts"])}),v=de({mutationKey:["scripts","createAttachment"],mutationFn:w=>o.get("CreateScriptAttachment",{params:w}),onSuccess:()=>r.invalidateQueries(["scripts"])});return{getScriptsQuery:l,getScriptCodeQuery:f,executeScriptQuery:p,removeScriptQuery:m,createScriptQuery:s,editScriptQuery:b,copyScriptQuery:C,removeScriptAttachmentQuery:R,createScriptAttachmentQuery:v}}const ln=B.lazy(()=>Ge(()=>Promise.resolve().then(()=>It),void 0)),hn=B.lazy(()=>Ge(()=>import("./index-CX0eSXxS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),fn=({script:r})=>{const o=Qe(),{notify:a}=ct(),{setSidePanelContent:l}=Ce(),{closeConfirmModal:f,confirmModal:p}=Rt(),{removeScriptQuery:m}=Oe(),{mutateAsync:s}=m,b=(w,A)=>{w.currentTarget.blur(),l(`Run "${A.title}" script`,d.jsx(B.Suspense,{fallback:d.jsx(Ie,{}),children:d.jsx(hn,{script:A})}))},C=(w,A)=>{if(A.action==="add")return;w.currentTarget.blur();const Q=A.action==="copy"?`Copy "${A.script.title}" script`:`Edit "${A.script.title}" script`;l(Q,d.jsx(B.Suspense,{fallback:d.jsx(Ie,{}),children:d.jsx(ln,{...A})}))},R=async w=>{try{await s({script_id:w.id}),a.success({message:`"${w.title}" script removed successfully`,title:"Script removed"})}catch(A){o(A)}finally{f()}},v=w=>{p({title:"Remove script",body:`This will remove "${w.title}" script.`,buttons:[d.jsx(_.Button,{appearance:"negative",onClick:()=>R(w),hasIcon:!0,"aria-label":`Remove ${w.title} script`,children:"Remove"},`remove-script-${w.title}`)]})};return d.jsxs("div",{className:"divided-blocks",children:[d.jsx("div",{className:"divided-blocks__item",children:d.jsx(_.Tooltip,{message:"Run script",position:"btm-center",children:d.jsx(_.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left","aria-label":`Copy ${r.title} script`,onClick:w=>b(w,r),children:d.jsx(_.Icon,{name:"unit-running",className:"u-no-margin--left"})})})}),d.jsx("div",{className:"divided-blocks__item",children:d.jsx(_.Tooltip,{message:"Duplicate",position:"btm-center",children:d.jsx(_.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left","aria-label":`Copy ${r.title} script`,onClick:w=>C(w,{action:"copy",script:r}),children:d.jsx(_.Icon,{name:"canvas",className:"u-no-margin--left"})})})}),d.jsx("div",{className:"divided-blocks__item",children:d.jsx(_.Tooltip,{message:"Edit",position:"btm-center",children:d.jsx(_.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left","aria-label":`Edit ${r.title} script`,onClick:w=>C(w,{action:"edit",script:r}),children:d.jsx(_.Icon,{name:"edit",className:"u-no-margin--left"})})})}),d.jsx("div",{className:"divided-blocks__item",children:d.jsx(_.Tooltip,{message:"Remove",position:"btm-center",children:d.jsx(_.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left","aria-label":`Remove ${r.title} script`,onClick:()=>v(r),children:d.jsx(_.Icon,{name:"delete",className:"u-no-margin--left"})})})})]})},at={access_group:"",attachments:[],creator:{email:"",id:0,name:""},id:0,interpreter:"",time_limit:0,title:"loading",username:""},dn=({column:r,row:{original:o}})=>{const a={};return o.title==="loading"?r.id==="title"?a.colSpan=4:(a.hidden=!0,a["aria-hidden"]=!0):r.id==="title"?a.role="rowheader":r.id==="access_group"?a["aria-label"]="Access group":r.id==="creator.name"?a["aria-label"]="Creator":r.id==="id"&&(a["aria-label"]="Actions"),a},pn="_actions_1ixz3_1",mn="_creator_1ixz3_2",gn="_accessGroup_1ixz3_3",qe={actions:pn,creator:mn,accessGroup:gn},yn=({isScriptsLoading:r,scripts:o})=>{const a=B.useMemo(()=>r?[at]:o,[r,o]),l=B.useMemo(()=>[{Header:"Title",accessor:"title",Cell:({row:f})=>f.original.title===at.title?d.jsx(Ie,{}):f.original.title},{Header:"Access group",accessor:"access_group",className:qe.accessGroup},{Header:"Creator",accessor:"creator.name",className:qe.creator},{accessor:"id",className:qe.actions,Cell:({row:f})=>d.jsx(fn,{script:f.original})}],[a]);return d.jsx(_.ModularTable,{columns:l,data:a,getCellProps:dn})},wn=yn,xn=B.lazy(()=>Ge(()=>Promise.resolve().then(()=>It),void 0)),bn=()=>{const{setSidePanelContent:r}=Ce(),o=()=>{r("Add script",d.jsx(B.Suspense,{fallback:d.jsx(Ie,{}),children:d.jsx(xn,{action:"add"})}))};return d.jsx(Ut,{title:"No scripts found",icon:"connected",body:d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"u-no-margin--bottom",children:"You haven’t added any scripts yet."}),d.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage instances in Landscape"})]}),cta:[d.jsx(_.Button,{appearance:"positive",onClick:o,type:"button",children:"Add script"},"table-add-new-mirror")]})},En=bn,In={add:"Add script",copy:"Copy script",edit:"Save changes"},Sn={title:"",code:"",access_group:"",time_limit:300,username:"",attachments:{first:null,second:null,third:null,fourth:null,fifth:null},attachmentsToRemove:[]},Bn=r=>{var T,Y,se,ue,Z,F,M,K,ee,ie;const{closeSidePanel:o}=Ce(),a=Qe(),{getAccessGroupQuery:l}=lt(),{createScriptQuery:f,editScriptQuery:p,copyScriptQuery:m,getScriptCodeQuery:s,createScriptAttachmentQuery:b,removeScriptAttachmentQuery:C}=Oe(),{mutateAsync:R}=f,{mutateAsync:v}=p,{mutateAsync:w}=m,{mutateAsync:A}=b,{mutateAsync:Q}=C,x=Ae().shape({title:ne().required("This field is required"),time_limit:ke().required("This field is required"),code:ne().test({name:"required",message:"This field is required",test:S=>r.action==="copy"||r.action==="edit"||!!S}),username:ne(),access_group:ne(),attachments:Ae().shape({first:ae().nullable(),second:ae().nullable(),third:ae().nullable(),fourth:ae().nullable(),fifth:ae().nullable()}),attachmentsToRemove:Mt().of(ne())}),P=async(S,g)=>{const E=[],V=[],te=[];for(const re of g)re&&(V.push(re.arrayBuffer()),te.push(re.name));const X=await Promise.all(V);for(let re=0;re<X.length;re++)E.push(A({script_id:S,file:`${te[re]}$$${he.Buffer.from(X[re]).toString("base64")}`}));await Promise.all(E)},y=st({initialValues:Sn,validationSchema:x,onSubmit:async S=>{try{if(r.action==="add"){const g=await R({title:S.title,time_limit:S.time_limit,code:he.Buffer.from(S.code).toString("base64"),username:S.username,access_group:S.access_group});await P(g.data.id,Object.values(S.attachments))}else if(r.action==="edit"){const g=[],E=Object.values(S.attachments).filter(V=>V);for(const V of S.attachmentsToRemove)g.push(Q({script_id:r.script.id,filename:V}));g.length?(await Promise.all([...g,v({script_id:r.script.id,title:S.title,time_limit:S.time_limit,code:he.Buffer.from(S.code).toString("base64"),username:S.username})]),E.length&&await P(r.script.id,E)):E.length?await Promise.all([v({script_id:r.script.id,title:S.title,time_limit:S.time_limit,code:he.Buffer.from(S.code).toString("base64"),username:S.username}),P(r.script.id,Object.values(S.attachments))]):await v({script_id:r.script.id,title:S.title,time_limit:S.time_limit,code:he.Buffer.from(S.code).toString("base64"),username:S.username})}else r.action==="copy"&&await w({script_id:r.script.id,destination_title:S.title,access_group:S.access_group});G()}catch(g){a(g)}}}),G=()=>{y.resetForm(),o()};B.useEffect(()=>{r.action!=="add"&&(r.action==="copy"?y.setFieldValue("access_group",r.script.access_group):r.action==="edit"&&(y.setFieldValue("title",r.script.title),y.setFieldValue("time_limit",r.script.time_limit),y.setFieldValue("username",r.script.username),y.setFieldValue("access_group",r.script.access_group)))},[r.action]);const{data:z,isFetching:I}=s({script_id:r.action==="edit"?r.script.id:0},{enabled:r.action==="edit"});B.useEffect(()=>{I||y.setFieldValue("code",(z==null?void 0:z.data)??"")},[I]);const{data:O}=l(),U=B.useMemo(()=>((O==null?void 0:O.data)??[]).map(({name:S,title:g})=>({label:g,value:S})),[O]),H=[d.jsx(_.Input,{type:"file",label:"First attachment",labelClassName:"u-off-screen",onChange:S=>{var g;y.setFieldValue("attachments.first",((g=S.target.files)==null?void 0:g[0])??null)},error:((T=y.touched.attachments)==null?void 0:T.first)&&((Y=y.errors.attachments)==null?void 0:Y.first)},"first"),d.jsx(_.Input,{type:"file",label:"Second attachment",labelClassName:"u-off-screen",onChange:S=>{var g;y.setFieldValue("attachments.second",((g=S.target.files)==null?void 0:g[0])??null)},error:((se=y.touched.attachments)==null?void 0:se.second)&&((ue=y.errors.attachments)==null?void 0:ue.second)},"second"),d.jsx(_.Input,{type:"file",label:"Third attachment",labelClassName:"u-off-screen",onChange:S=>{var g;y.setFieldValue("attachments.third",((g=S.target.files)==null?void 0:g[0])??null)},error:((Z=y.touched.attachments)==null?void 0:Z.third)&&((F=y.errors.attachments)==null?void 0:F.third)},"third"),d.jsx(_.Input,{type:"file",label:"Fourth attachment",labelClassName:"u-off-screen",onChange:S=>{var g;y.setFieldValue("attachments.fourth",((g=S.target.files)==null?void 0:g[0])??null)},error:((M=y.touched.attachments)==null?void 0:M.fourth)&&((K=y.errors.attachments)==null?void 0:K.fourth)},"fourth"),d.jsx(_.Input,{type:"file",label:"Fifth attachment",labelClassName:"u-off-screen",onChange:S=>{var g;y.setFieldValue("attachments.fifth",((g=S.target.files)==null?void 0:g[0])??null)},error:((ee=y.touched.attachments)==null?void 0:ee.fifth)&&((ie=y.errors.attachments)==null?void 0:ie.fifth)},"fifth")],D=()=>{const S=H;if(r.action==="edit"){const g=r.script.attachments.filter(E=>!y.values.attachmentsToRemove.includes(E)).reverse();for(const E of g)S.unshift(d.jsxs("div",{children:[d.jsx("span",{children:E}),d.jsxs(_.Button,{hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left p-tooltip--top-center","aria-label":`Remove ${E} attachment`,onClick:()=>{y.setFieldValue("attachmentsToRemove",[...y.values.attachmentsToRemove,E])},children:[d.jsx("span",{className:"p-tooltip__message",children:"Remove"}),d.jsx("i",{className:"p-icon--delete"})]})]},E))}return S.slice(0,5)};return d.jsxs(_.Form,{onSubmit:y.handleSubmit,noValidate:!0,children:[d.jsx(_.Input,{type:"text",label:"Title",required:!0,...y.getFieldProps("title"),error:y.touched.title&&y.errors.title?y.errors.title:void 0}),(r.action==="add"||r.action==="edit")&&d.jsxs(d.Fragment,{children:[d.jsx(_.Input,{type:"number",label:"Time limit (seconds)",required:!0,...y.getFieldProps("time_limit"),error:y.touched.time_limit&&y.errors.time_limit?y.errors.time_limit:void 0}),d.jsx(bt,{label:"Code",required:!0,onChange:S=>{y.setFieldValue("code",S??"")},value:y.values.code,error:y.touched.code&&y.errors.code?y.errors.code:void 0}),d.jsx(_.Input,{type:"text",label:"Run as user",...y.getFieldProps("username"),error:y.touched.username&&y.errors.username?y.errors.username:void 0})]}),d.jsx(_.Select,{label:"Access group",options:[{label:"Select access group",value:""},...U],...y.getFieldProps("access_group"),error:y.touched.access_group&&y.errors.access_group?y.errors.access_group:void 0}),(r.action==="add"||r.action==="edit")&&d.jsxs(d.Fragment,{children:[d.jsx("h5",{children:"List of attachments"}),d.jsx("p",{className:"u-text--muted",children:"Attachments that will be sent along with the script. You can attach up to 5 files, for a maximum of 1.00MB. Filenames must be unique. On the client, the attachments will be placed in the directory whose name is accessible through the environment variable LANDSCAPE_ATTACHMENTS. They'll be deleted once the script has been run."})]}),(r.action==="add"||r.action==="edit")&&D(),d.jsx(ut,{submitButtonDisabled:y.isSubmitting,submitButtonText:In[r.action]})]})},Et=Bn,It=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),Pn=Object.freeze(Object.defineProperty({__proto__:null,RunInstanceScriptForm:un,ScriptList:wn,ScriptsEmptyState:En,SingleScript:Et,useScripts:Oe},Symbol.toStringTag,{value:"Module"}));export{tn as D,En as S,wn as a,Pn as i,Oe as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CX0eSXxS.js","assets/index-yMWucjne.js","assets/index-BAlneFez.css","assets/formik.esm-TzDEWCHS.js","assets/moment-CuejNwqT.js","assets/MultiSelectField-Fg_KTABz.js","assets/MultiSelectField.module-D1r8qo_i.js","assets/MultiSelectField-B2rqRhX9.css","assets/SidePanelFormButtons-DbT96abC.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/useInstances-D5b51srl.js","assets/useFetchOld-DLnvAPrG.js","assets/useMutation-zxPjmBpS.js","assets/useQuery-CgBhq_jS.js","assets/index.esm-kQX3iWxY.js","assets/useConfirm-CTtafMTw.js","assets/EmptyState-kWhHOMkp.js","assets/EmptyState-BNXajmMK.css","assets/useRoles-D3w8gpMq.js","assets/moment-Cl4UOzQZ.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
