import{j as a,g as v,r as x,k as b,J as j,o as k}from"./index-DXs1haZl.js";import"./TablePagination.module-DLVph1Z1.js";import{T as S}from"./TablePagination-DZ07rvb4.js";import{c as p,P as N,a as I,b as L}from"./useUsns-B3b7Nlk8.js";import{u as m}from"./usePageParams-BJqFm8Ol.js";import{H as y}from"./HeaderWithSearch-OzYSSkOw.js";import"./useFetchOld-DWTVWZGf.js";import"./useMutation-CoMMCR6r.js";import"./useQuery-DPA9mHwu.js";import"./HeaderWithSearch.module-ByXjIdeN.js";const C=[{label:"All",value:""},{label:"Installed",value:"installed"},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],A=({handleClearSelection:s,selectedPackages:n})=>{const{setPageParams:e,status:i}=m(),t=l=>{e({search:l}),s()},r=l=>{e({status:l}),s()};return a.jsx(y,{onSearch:t,actions:a.jsxs("div",{className:p.actions,children:[a.jsx(v.Select,{label:"Status",wrapperClassName:p.selectContainer,options:C,value:i,onChange:l=>r(l.target.value)}),a.jsx(N,{selectedPackages:n})]})})},E=(s,n)=>{let e;return s===""?e="No packages found":s==="upgrade"?e="No available upgrades found":s==="security"?e="No available security upgrades found":s==="installed"?e="No installed packages found":e="No held packages found",n?`${e} with the search "${n}"`:e},H=()=>{const[s,n]=x.useState([]),{instanceId:e,childInstanceId:i}=b(),{status:t,search:r,currentPage:l,pageSize:c}=m(),{getInstancePackagesQuery:h}=I(),{state:d}=j(),f=Number(i??e),g=()=>{n([])},{data:o,isLoading:u}=h({instance_id:f,search:r,limit:c,offset:(l-1)*c,available:!1,installed:t==="installed"||!t||void 0,upgrade:t==="upgrade"||void 0,held:t==="held"||void 0,security:t==="security"||void 0});return a.jsxs(a.Fragment,{children:[!r&&!t&&l===1&&c===20&&u&&a.jsx(k,{}),(r||t||l!==1||c!==20||!u)&&a.jsxs(a.Fragment,{children:[a.jsx(A,{selectedPackages:s,handleClearSelection:g}),a.jsx(L,{packages:(o==null?void 0:o.data.results)??[],packagesLoading:u,selectedPackages:s,onPackagesSelect:P=>{n(P)},emptyMsg:E(t,r),selectAll:(d==null?void 0:d.selectAll)??!1})]}),a.jsx(S,{handleClearSelection:g,totalItems:o==null?void 0:o.data.count,currentItemCount:o==null?void 0:o.data.results.length})]})},_=H;export{_ as default};
