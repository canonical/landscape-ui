import{f as l,t as u,v as g,o as n,a8 as c,z as d,j as r}from"./index-CNSDWj8Q.js";import{S as a}from"./SidePanel-ChyjtMJv.js";import{u as f}from"./useGetPageScriptProfile-yEth1egE.js";import{S}from"./ScriptProfileForm-CdAD-ysD.js";import"./AssociationBlock-B4LnXWNE.js";import"./MultiSelectField-CqoYdMk0.js";import"./useGetTags-B_HL7bdb.js";import"./index-6UOHovCk.js";import"./TableFilterChips-06YfpJdc.js";import"./TablePagination-CFXNvqsZ.js";import"./ScriptsTabs-DfoExKFg.js";import"./helpers-kPKhnyjI.js";import"./constants-CDnVvJTb.js";import"./NoData-6ZK9sV5u.js";import"./ResponsiveTable-BXalKviy.js";import"./StaticLink-BEYCGcPv.js";import"./TruncatedCell-BMum6DLZ.js";import"./Truncated-Dtg97i8C.js";import"./useExpandableRow-B4jhRgod.js";import"./useRoles-DYJzr0u4.js";import"./useFetchOld-BAAs34Op.js";import"./TextConfirmationModal-q88mH05g.js";import"./PageParamFilter-ChSwlZqZ.js";import"./TableFilter-2AKF5NjJ.js";import"./HeaderWithSearch-D2tNhOlz.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./index-CySvbr4l.js";import"./ProfileAssociatedInstancesLink-Neer6jGU.js";import"./SidePanelFormButtons-DIizKTix.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useGetInstances-rIFBd_bT.js";import"./InstancesPageActions-DL7_pmR1.js";import"./index-D-YBZSy_.js";import"./formikErrors-Bw8iTXYS.js";import"./ListTitle-BUruUKn1.js";import"./InfoGrid-3w5mqARw.js";import"./InfoItem-Bt7JBIPo.js";import"./ScriptDropdown-BDpvNfnn.js";import"./downshift.esm-DADdD-V8.js";const h=()=>{const t=l(),e=u(),{isPending:o,mutateAsync:s}=g({mutationFn:async({id:m,...p})=>t.patch(`script-profiles/${m}`,p),onSuccess:async()=>e.invalidateQueries({queryKey:["scriptProfiles"]})});return{isEditingScriptProfile:o,editScriptProfile:s}},y=t=>({...t,interval:"",...t.trigger,start_after:t.trigger.trigger_type=="recurring"?n(t.trigger.start_after).utc().format(c):"",timestamp:t.trigger.trigger_type=="one_time"?n(t.trigger.timestamp).utc().format(c):""}),ot=()=>{const{notify:t}=d(),{scriptProfile:e,isGettingScriptProfile:o}=f(),{editScriptProfile:s,isEditingScriptProfile:m}=h();if(o)return r.jsx(a.LoadingState,{});const p=async i=>{await s({id:e.id,all_computers:i.all_computers,tags:i.tags,time_limit:i.time_limit,title:i.title,trigger:i.trigger,username:i.username})};return r.jsxs(r.Fragment,{children:[r.jsxs(a.Header,{children:["Edit ",e.title]}),r.jsx(a.Content,{children:r.jsx(S,{disabledFields:{script_id:!0,trigger_type:!0},initialValues:y(e),onSubmit:p,onSuccess:i=>{t.success({title:`You have successfully saved changes for ${i.title}`,message:"The changes will be applied to this profile."})},submitButtonText:"Save changes",submitting:m})})]})};export{ot as default};
