import{p as l,f as S,h,k as x,s as b,j as s,g as m}from"./index-DCLFjw4n.js";import{S as g}from"./SidePanelFormButtons-BEcUkkn0.js";import{g as f}from"./formikErrors-Bw8iTXYS.js";import{t as o}from"./tests-DFnZqbNV.js";import{a as j}from"./constants-C0FKtOLc.js";import"./SidePanelFormButtons.module-D2P5PizG.js";import"./useFetchOld-CeF4Ue_s.js";import"./usePageParams-DeQfI8dW.js";import"./NoData-CpDVMwx5.js";import"./index-CP3UsS9Y.js";import"./TablePagination-s3lB0_4W.js";import"./TablePaginationBase-DKYSvNPy.js";import"./StatusFilter-58Yy9-XI.js";import"./TableFilter-CMQLsF6_.js";import"./TableFilterChips-pQ6HS23b.js";const v={name:""},$=({distribution:e,origin:a})=>{const n=l(),{closeSidePanel:u}=S(),{deriveSeriesQuery:p}=j(),{mutateAsync:c}=p,d=h().shape({name:x().required("This field is required").test({test:o.test,message:o.message}).test({params:{distribution:e},test:r=>!e.series.map(({name:i})=>i).includes(r),message:"It must be unique within the distribution."})}),t=b({validationSchema:d,initialValues:v,onSubmit:async r=>{try{await c({name:r.name,distribution:e.name,origin:a}),u()}catch(i){n(i)}}});return s.jsxs(m.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(m.Input,{type:"text",label:"Series name",required:!0,...t.getFieldProps("name"),error:f(t,"name")}),s.jsxs("p",{className:"u-text--muted",children:["You are deriving ",e.name,"/",a,"."]}),s.jsx(g,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Derive series"})]})};export{$ as default};
