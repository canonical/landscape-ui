import{j as s,r as b,o as y,Q as P,n as k}from"./index-Bj3y1t-6.js";import{T as x}from"./TablePagination-CdVMJYdj.js";import{P as I,a as j,b as S}from"./usePackages-CytMYZ2v.js";import{u as T}from"./usePageParams-CXSkxOFx.js";import{S as _}from"./StatusFilter-DVQJH1hk.js";import{T as N}from"./TableFilterChips-D1Inrseb.js";import{H as v}from"./HeaderWithSearch-BjKNVAC_.js";import"./TablePaginationBase-CXsMC9fV.js";import"./useFetchOld-BtTLYE3Q.js";import"./TableFilter-Bt7vmO0n.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="4047df04-8d9f-4817-883f-9306c674b0fd",e._sentryDebugIdIdentifier="sentry-dbid-4047df04-8d9f-4817-883f-9306c674b0fd")}catch{}const g=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],w="_actions_dhdem_1",L={actions:w},A=({handleClearSelection:e,selectedPackages:a})=>s.jsxs(s.Fragment,{children:[s.jsx(v,{afterSearch:e,actions:s.jsxs("div",{className:L.actions,children:[s.jsx(_,{options:g}),s.jsx(I,{selectedPackages:a})]})}),s.jsx(N,{filtersToDisplay:["search","status"],statusOptions:g})]}),D=(e,a)=>{let t;return e===""?t="No packages found":e==="upgrade"?t="No available upgrades found":e==="security"?t="No available security upgrades found":e==="installed"?t="No installed packages found":t="No held packages found",a?`${t} with the search "${a}"`:t},R=()=>{const[e,a]=b.useState([]),{instanceId:t,childInstanceId:f}=y(),{status:n,search:o,currentPage:l,pageSize:d}=T(),{getInstancePackagesQuery:p}=j(),{state:r}=P(),m=Number(f??t),i=()=>{a([])},{data:{data:c}={data:{count:0,results:[]}},isLoading:u}=p({instance_id:m,search:o,limit:d,offset:l*d-d,installed:!n||void 0,upgrade:n==="upgrade"||void 0,held:n==="held"||void 0,security:n==="security"||void 0});return s.jsxs(s.Fragment,{children:[!o&&!n&&l===1&&d===20&&u?s.jsx(k,{}):s.jsxs(s.Fragment,{children:[s.jsx(A,{selectedPackages:e,handleClearSelection:i}),s.jsx(S,{packages:c.results,packagesLoading:u,selectedPackages:e,onPackagesSelect:h=>{a(h)},emptyMsg:D(n,o),selectAll:!!(r!=null&&r.selectAll)})]}),s.jsx(x,{handleClearSelection:i,totalItems:c.count,currentItemCount:c.results.length})]})};export{R as default};
