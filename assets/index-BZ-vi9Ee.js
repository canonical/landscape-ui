import{r as d,j as t,g as c,N as g,f as j,p as N,q as C}from"./index-ByADQnPs.js";import{S}from"./SidePanelFormButtons-BH8h4yK5.js";import"./usePageParams-5nFqhiQZ.js";import{u as E}from"./useUpdateEmployeeGroups-B6QAeh3i.js";import"./EmployeeGroupIdentityIssuerList-B-CYBRo3.js";import{S as P,E as B}from"./SidePanelDescription-9-PTOjXj.js";import"./SidePanelFormButtons.module-D2P5PizG.js";import"./TablePagination-BQvrOeIR.js";import"./TablePaginationBase-C43SLHIs.js";import"./TableFilter-BS-fqEh_.js";import"./TableFilterChips-B0xVlNvZ.js";import"./HeaderWithSearch-Cqvt7mQJ.js";import"./index-BUG3Yipx.js";import"./TruncatedCell-dRAwLE2Y.js";const v="_listItem_4lnuc_1",D="_listItemContent_4lnuc_5",$="_groupInfo_4lnuc_12",G="_minusIcon_4lnuc_17",R="_plusIcon_4lnuc_21",T="_priorityControls_4lnuc_25",k="_priorityInput_4lnuc_31",F="_priorityButton_4lnuc_38",n={listItem:v,listItemContent:D,groupInfo:$,minusIcon:G,plusIcon:R,priorityControls:T,priorityInput:k,priorityButton:F},L=({group:r,onPriorityChange:o,setSubmissionBlocked:u})=>{const{priority:e}=r,l=d.useRef(!1),a=s=>{if(isNaN(s))return;o(s);const i=s>=0;l.current=!i,u(!i)};return t.jsx("div",{className:n.listItem,children:t.jsxs("div",{className:n.listItemContent,children:[t.jsx("div",{className:n.groupInfo,children:t.jsx("span",{children:r.name})}),t.jsxs("div",{className:n.priorityControls,children:[t.jsx(c.Button,{type:"button",appearance:"base",className:n.priorityButton,onClick:()=>{a((e??0)-1)},"aria-label":`Decrease priority for ${r.name}`,disabled:e===0||e===null,children:t.jsx(c.Icon,{name:"minus",className:n.minusIcon})}),t.jsx(c.Input,{type:"number",className:n.priorityInput,value:e??void 0,placeholder:e===null?g:void 0,onChange:s=>{a(parseInt(s.target.value,10))},min:"0","aria-label":`Priority for ${r.name}`,error:l.current?!0:void 0}),t.jsx(c.Button,{type:"button",appearance:"base",className:n.priorityButton,onClick:()=>{a((e??0)+1)},"aria-label":`Increase priority for ${r.name}`,children:t.jsx(c.Icon,{name:"plus",className:n.plusIcon})})]})]})})},O=({groups:r,onPriorityChange:o,setSubmissionBlocked:u})=>{const[e,l]=d.useState([]),a=(s,i)=>{l([...e.filter(y=>y.id!==s),{id:s,priority:i}]),o(s,i)};return t.jsx("ul",{className:"p-list--divided u-no-margin--bottom",children:r.map(s=>t.jsx("li",{className:"p-list__item",children:t.jsx(L,{group:s,onPriorityChange:i=>{a(s.id,i)},setSubmissionBlocked:u},s.id)},s.id))})},Z=({groups:r})=>{const[o,u]=d.useState(r),[e,l]=d.useState(!1),{closeSidePanel:a}=j(),s=N(),{notify:i}=C(),{updateEmployeeGroups:y,isUpdatingEmployeeGroups:_}=E(),h=async I=>{I.preventDefault();try{await y(o.map(({id:f,priority:x,autoinstall_file:b})=>({id:f,priority:x,autoinstall_file:b}))),a();const p=o.length===1?"Priority updated":"Priorities updated",m=o.length===1?`You've successfully updated priority for the ${o[0].name} group.`:`You've successfully updated priorities for ${o.length} ${o.length>1?"groups":"group"}.`;i.success({title:p,message:m})}catch(p){s(p)}};return t.jsxs(t.Fragment,{children:[t.jsx(P,{children:B}),t.jsxs(c.Form,{onSubmit:h,children:[t.jsx(O,{groups:o,onPriorityChange:(I,p)=>{u(o.map(m=>m.id===I?{...m,priority:p}:m))},setSubmissionBlocked:l}),t.jsx(S,{submitButtonText:"Update priorities",submitButtonDisabled:_||e})]})]})};export{Z as default};
