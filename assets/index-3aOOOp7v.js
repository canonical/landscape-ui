import{e as P,l as f,f as b,r as S,j as s,g as r}from"./index-DXs1haZl.js";import{u as x}from"./index-DUm5A9qd.js";import{u as _}from"./formik.esm-CwYJvJSO.js";import{u as h}from"./useRoles-CGNtMKpq.js";import{c as k,a,d as y,b as A}from"./index.esm-FGh7VWBq.js";import{S as j}from"./SidePanelFormButtons-Dtg_vQ52.js";import{A as E}from"./AssociationBlock-bGiZRSmg.js";import"./PageMain-DhSBVwHg.js";import"./useFetchOld-DWTVWZGf.js";import"./useMutation-CoMMCR6r.js";import"./useQuery-DPA9mHwu.js";import"./MultiSelectField.module-D1r8qo_i.js";import"./AssociationBlock.module-BSYf3X0u.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import"./InfoItem-BQPTGwVs.js";import"./InfoItem.module-BZ3tYMsb.js";import"./useConfirm-C9Ai5vPv.js";import"./HeaderWithSearch-OzYSSkOw.js";import"./HeaderWithSearch.module-ByXjIdeN.js";import"./SidePanelTablePagination-BVUfufsF.js";import"./TablePagination.module-DLVph1Z1.js";import"./EmptyState-BYL1pVz2.js";import"./usePageParams-BJqFm8Ol.js";import"./MultiSelectField-26Sjy70t.js";import"./useInstances-B3fQT90b.js";const F={access_group:"",all_computers:!1,description:"",tags:[],title:""},I=k().shape({access_group:a(),all_computers:y(),description:a(),tags:A().of(a()),title:a().required("Required")}),$=({profile:e})=>{const m=P(),{notify:p}=f(),{closeSidePanel:u}=b(),{editPackageProfileQuery:n}=x(),{getAccessGroupQuery:l}=h(),{data:i}=l(),d=(i==null?void 0:i.data.map(({name:o,title:c})=>({label:c,value:o})))??[],{mutateAsync:g}=n,t=_({initialValues:F,onSubmit:async o=>{try{await g({...o,name:e.name,tags:o.all_computers?[]:o.tags}),u(),p.success({message:`Package profile "${e.name}" updated successfully`,title:"Package profile updated"})}catch(c){m(c)}},validationSchema:I});return S.useEffect(()=>{e&&t.setValues({access_group:e.access_group,all_computers:e.all_computers,description:e.description,tags:e.tags,title:e.title})},[e]),s.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(r.Input,{type:"text",label:"Name",...t.getFieldProps("title"),error:t.touched.title&&t.errors.title?t.errors.title:void 0}),s.jsx(r.Input,{type:"text",label:"Description",...t.getFieldProps("description"),error:t.touched.description&&t.errors.description?t.errors.description:void 0}),s.jsx(r.Select,{label:"Access group",options:d,...t.getFieldProps("access_group"),error:t.touched.access_group&&t.errors.access_group||void 0}),s.jsx(E,{formik:t}),s.jsx(j,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Save changes"})]})},st=$;export{st as default};
