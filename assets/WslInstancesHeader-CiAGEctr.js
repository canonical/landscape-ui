const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-eMxlJvAq.js","assets/index-2fzpjuii.js","assets/index-DBjrXwEZ.css","assets/FileInput-CWPijyCU.js","assets/SidePanelFormButtons-DAl7F5tV.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/HeaderWithSearch-BIg5d4wD.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/useInstances-DeMDoX3c.js"])))=>i.map(i=>d[i]);
import{l as b,j as n,E as Q,m as d,r,o as j,_ as C,f as W,e as q,i as F,g as l,h as x,z as D,y as T,ah as K,a1 as w}from"./index-2fzpjuii.js";import{H as P}from"./HeaderWithSearch-BIg5d4wD.js";import{u as B}from"./useInstances-DeMDoX3c.js";const $=r.lazy(()=>C(()=>import("./index-eMxlJvAq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),H=()=>{const{setSidePanelContent:e}=b(),s=()=>{e("Install new WSL instance",n.jsx(r.Suspense,{fallback:n.jsx(j,{}),children:n.jsx($,{})}))};return n.jsx(Q,{title:"No WSL Instances found",body:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),n.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[n.jsx(d.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},k=()=>{const e=W(),s=q(),o=F(),c=(t={},i={})=>x({queryKey:["wsl",t],queryFn:async()=>o.get("computers/wsl-hosts",{params:t}),...i}),u=l({mutationFn:async({parent_id:t,...i})=>o.post(`computers/${t}/children`,i),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),y=l({mutationFn:async t=>s.get("DeleteChildComputers",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),p=l({mutationFn:async t=>s.get("SetDefaultChildComputer",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),g=l({mutationFn:async t=>s.get("ShutdownHostComputer",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),v=l({mutationFn:async t=>s.get("StartChildComputers",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),h=l({mutationFn:async t=>s.get("StopChildComputers",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:u,deleteChildInstancesQuery:y,getWslInstanceNamesQuery:(t,i={})=>x({queryKey:["wsl-instance-names"],queryFn:async()=>o.get("wsl-instance-names"),...i}),getWslHostsQuery:c,setDefaultChildInstanceQuery:p,shutdownHostInstanceQuery:g,startChildInstancesQuery:v,stopChildInstancesQuery:h}},E="_cta_hpksw_1",I={cta:E},N=r.lazy(async()=>C(()=>import("./index-eMxlJvAq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),M=({selectedInstances:e})=>{const[s,o]=r.useState(""),{notify:c}=D(),u=T(),{setSidePanelContent:y}=b(),{deleteChildInstancesQuery:p}=k(),{removeInstancesQuery:g}=B(),{mutateAsync:v,isPending:h}=p,{mutateAsync:f,isPending:t}=g,i=a=>{o(a)},m=()=>{o("")},L=async()=>{try{await v({computer_ids:e.map(({id:a})=>a)}),m(),c.success({title:`You queued ${e.length} instance${e.length===1?"":"s"} to be deleted.`,message:`${e.length} instance${e.length===1?"":"s"} will be deleted.`})}catch(a){u(a)}},S=async()=>{try{await f({computer_ids:e.map(({id:a})=>a)}),m(),c.success({title:`You have successfully removed ${e.length} instance${e.length===1?"":"s"}.`,message:e.length===1?`${e.length} instance has been removed from Landscape. To manage it again, you will need to re-register it in Landscape.`:`${e.length} instances have been removed from Landscape. To manage them again, you will need to re-register them in Landscape.`})}catch(a){u(a)}},_=()=>{y("Install new WSL instance",n.jsx(r.Suspense,{fallback:n.jsx(j,{}),children:n.jsx(N,{})}))};return n.jsxs(n.Fragment,{children:[n.jsx(P,{actions:n.jsxs("div",{className:I.cta,children:[n.jsx(d.Button,{type:"button",onClick:_,children:n.jsx("span",{children:"Create new instance"})}),n.jsx("div",{className:"p-segmented-control",children:n.jsxs("div",{className:"p-segmented-control__list",children:[n.jsx(d.Button,{type:"button",className:"p-segmented-control__button",disabled:e.length===0,onClick:()=>{i("delete")},children:"Delete instance"}),n.jsx(d.Button,{type:"button",className:"p-segmented-control__button",disabled:e.length===0,onClick:()=>{i("remove")},children:"Remove from Landscape"})]})})]})}),n.jsx(K,{filtersToDisplay:["search"]}),n.jsx(w,{isOpen:s==="remove",close:m,onConfirm:S,title:e.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:t,confirmButtonLoading:t,confirmationText:e.length!==1?"remove instances":`remove ${e[0].title}`,children:e.length!==1?n.jsx("p",{children:"This will remove the selected instances from Landscape. They will remain on the parent machine. You can re-register them to Landscape at any time."}):n.jsxs("p",{children:["This will remove the instance ",n.jsx("b",{children:e[0].title})," ","from Landscape. It will remain on the parent machine. You can re-register it to Landscape at any time."]})}),n.jsx(w,{isOpen:s==="delete",close:m,onConfirm:L,title:e.length!==1?"Delete instances":"Delete instance",confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:h,confirmButtonLoading:h,confirmationText:e.length!==1?"delete instances":`delete ${e[0].title}`,children:e.length!==1?n.jsx("p",{children:"This will permanently delete the selected instances from both the Windows host machine and Landscape."}):n.jsxs("p",{children:["This will permanently delete the instance"," ",n.jsx("b",{children:e[0].title})," from both the Windows host machine and Landscape."]})})]})};export{M as W,H as a,k as u};
