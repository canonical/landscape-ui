import{k as P,n as r,l as b,w as S,q as x,s as _,i as f,t as h,r as k,j as s,h as a}from"./index-YVEwVKfb.js";import{u as y}from"./index-OVj3vXCj.js";import{u as A}from"./useRoles-GlqnpP7a.js";import{S as j}from"./SidePanelFormButtons-BbCceNfY.js";import{A as E}from"./AssociationBlock-Dh8QsNQw.js";import"./PageMain-CGzkX2Ni.js";import"./useFetchOld-B7WFsVWh.js";import"./InfoItem-CitwWeUN.js";import"./HeaderWithSearch-DjnXEv9d.js";import"./SidePanelTablePagination-DEAo0EuX.js";import"./TablePagination.module-CgQ3jx4B.js";import"./usePageParams-3qh8vF2w.js";import"./SidePanelFormButtons.module-yv6Qz3cN.js";import"./MultiSelectField-LKfc4J1O.js";import"./useInstances-Dy6pVmOW.js";const F={access_group:"",all_computers:!1,description:"",tags:[],title:""},I=P().shape({access_group:r(),all_computers:b(),description:r(),tags:S().of(r()),title:r().required("Required")}),Q=({profile:e})=>{const u=x(),{notify:n}=_(),{closeSidePanel:p}=f(),{editPackageProfileQuery:l}=y(),{getAccessGroupQuery:m}=A(),{data:i}=m(),d=(i==null?void 0:i.data.map(({name:o,title:c})=>({label:c,value:o})))??[],{mutateAsync:g}=l,t=h({initialValues:F,onSubmit:async o=>{try{await g({...o,name:e.name,tags:o.all_computers?[]:o.tags}),p(),n.success({message:`Package profile "${e.name}" updated successfully`,title:"Package profile updated"})}catch(c){u(c)}},validationSchema:I});return k.useEffect(()=>{e&&t.setValues({access_group:e.access_group,all_computers:e.all_computers,description:e.description,tags:e.tags,title:e.title})},[e]),s.jsxs(a.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(a.Input,{type:"text",label:"Name",...t.getFieldProps("title"),error:t.touched.title&&t.errors.title?t.errors.title:void 0}),s.jsx(a.Input,{type:"text",label:"Description",...t.getFieldProps("description"),error:t.touched.description&&t.errors.description?t.errors.description:void 0}),s.jsx(a.Select,{label:"Access group",options:d,...t.getFieldProps("access_group"),error:t.touched.access_group&&t.errors.access_group||void 0}),s.jsx(E,{formik:t}),s.jsx(j,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Save changes"})]})};export{Q as default};
