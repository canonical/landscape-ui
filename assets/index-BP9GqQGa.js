const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-yIonPpQK.js","assets/index-DUhs-kzo.js","assets/index-DXB7zdRE.css","assets/SidePanelFormButtons-CrzPmb1Q.js","assets/SidePanelFormButtons.module-BuIu-Bem.js","assets/SidePanelFormButtons-CmV-sWf7.css","assets/useGPGKeys-B9xXkDez.js","assets/tests-DFnZqbNV.js","assets/useRoles-BgNzArKs.js","assets/useAPTSources-BTTLrh9O.js","assets/PageMain-CpmdXc36.js","assets/PageMain-CIunaku7.css","assets/index-Cz9CfuJq.css"])))=>i.map(i=>d[i]);
import{p as b,q as T,a5 as h,j as e,av as x,d as r,i as l,al as y,aw as j,n as f,v as d,E as _,a3 as v}from"./index-DUhs-kzo.js";import{P as S,a as L,b as C}from"./PageMain-CpmdXc36.js";import{u as p}from"./useAPTSources-BTTLrh9O.js";const N=({aptSource:s})=>{const{removeAPTSourceQuery:o}=p(),a=b(),{notify:n}=T(),{value:t,setTrue:c,setFalse:i}=h(),{mutateAsync:A,isPending:u}=o,P=async()=>{try{await A({name:s.name}),n.success({title:"Successfully deleted APT source",message:`You have successfully deleted the ${s.name} APT source`})}catch(g){a(g)}finally{i()}};return e.jsxs(e.Fragment,{children:[e.jsx(x,{toggleAriaLabel:`${s.name} APT source actions`,destructiveActions:[{icon:r.ICONS.delete,label:"Delete","aria-label":`Remove ${s.name} APT source`,onClick:c}]}),t&&e.jsx(r.ConfirmationModal,{close:i,title:`Deleting ${s.name} APT source`,confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:u,confirmButtonDisabled:u,onConfirm:P,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."})})]})},k="_line_1odl9_1",w="_accessGroup_1odl9_10",m={line:k,accessGroup:w},M=s=>{const o={};switch(s.column.id){case"name":o.role="rowheader";break;case"access_group":o["aria-label"]="Access group";break;case"line":o["aria-label"]="Line";break;case"id":o["aria-label"]="Actions";break}return o},O=({items:s})=>{const o=l.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"access_group",Header:"Access group",className:m.accessGroup},{accessor:"line",Header:"Line",className:m.line},{...y,Cell:({row:a})=>e.jsx(N,{aptSource:a.original})}],[]);return e.jsx(j,{columns:o,data:l.useMemo(()=>s,[s.length]),emptyMsg:"No APT sources yet.",getCellProps:M})},B=l.lazy(async()=>v(()=>import("./index-yIonPpQK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(s=>({default:s.NewAPTSourceForm}))),E=()=>{const{setSidePanelContent:s}=f(),{getAPTSourcesQuery:o}=p(),{data:a,isLoading:n}=o(),t=a?.data??[],c=()=>{s("Add APT source",e.jsx(l.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(B,{})}))};return e.jsxs(S,{children:[e.jsx(L,{title:"APT sources",actions:[e.jsx(r.Button,{appearance:"positive",onClick:c,type:"button",children:"Add APT source"},"new-key-button")]}),e.jsxs(C,{children:[n&&e.jsx(d,{}),!n&&t.length===0&&e.jsx(_,{title:"No APT sources found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any APT sources yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage APT sources in Landscape"})]}),cta:[e.jsx(r.Button,{appearance:"positive",onClick:c,type:"button",children:"Add APT source"},"table-add-new-mirror")]}),!n&&t.length>0&&e.jsx(O,{items:t})]})]})},H=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{O as A,H as i};
