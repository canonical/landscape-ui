const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CRCcrk6t.js","assets/index-JmUiQLT0.js","assets/index-CcmRCwcv.css","assets/AssociationBlock-B6O8IPdQ.js","assets/MultiSelectField-B4k3zBMB.js","assets/MultiSelectField-GyNA33om.css","assets/useInstances-D0v_QIsY.js","assets/AssociationBlock-DQBJa-xL.css","assets/SidePanelFormButtons-C1lvjmQv.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/constants-dW6629jA.js","assets/useRoles-TLpbBTfo.js","assets/index-js_8cldS.css","assets/index-B0c3GjfZ.js","assets/PageMain-Od9y7FSL.js","assets/PageMain--v5xNZ5p.css","assets/HeaderWithSearch-Cf7vkzOJ.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/index-_v2C-3Y0.css"])))=>i.map(i=>d[i]);
import{f as C,e as S,g as j,h as F,r,y as E,z as A,l as f,j as e,m as i,a2 as L,o as p,_ as h,c as O,N as w,E as M,ah as R}from"./index-JmUiQLT0.js";import{P as T,a as k,b as B}from"./PageMain-Od9y7FSL.js";import{u as N}from"./useRoles-TLpbBTfo.js";import{H as Q}from"./HeaderWithSearch-Cf7vkzOJ.js";function _(){const t=C(),a=S(),o=j({mutationFn:async n=>a.get("CreateUpgradeProfile",{params:n}),onSuccess:async()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})}),u=j({mutationFn:async n=>a.get("EditUpgradeProfile",{params:n}),onSuccess:async()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})}),l=j({mutationFn:async n=>a.get("RemoveUpgradeProfile",{params:n}),onSuccess:async()=>t.invalidateQueries({queryKey:["upgradeProfiles"]})});return{createUpgradeProfileQuery:o,editUpgradeProfileQuery:u,removeUpgradeProfileQuery:l,getUpgradeProfilesQuery:(n={},g={})=>F({queryKey:["upgradeProfiles",n],queryFn:async()=>a.get("GetUpgradeProfiles",{params:n}),...g})}}const D="_toggleButton_bnzrt_1",H="_menu_bnzrt_6",P={toggleButton:D,menu:H},I=r.lazy(async()=>h(()=>import("./index-CRCcrk6t.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),$=({profile:t})=>{const[a,o]=r.useState(!1),u=E(),{notify:l}=A(),{setSidePanelContent:d}=f(),{removeUpgradeProfileQuery:n}=_(),{mutateAsync:g,isPending:m}=n,s=()=>{o(!0)},c=()=>{o(!1)},x=async()=>{try{await g({name:t.name}),c(),l.success({message:`Upgrade profile "${t.title}" removed successfully`,title:"Upgrade profile removed"})}catch(v){u(v)}},U=()=>{d(`Edit "${t.title}" profile`,e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(I,{action:"edit",profile:t})}))},b=[{children:e.jsxs(e.Fragment,{children:[e.jsx(i.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),"aria-label":`Edit "${t.title}" profile`,hasIcon:!0,onClick:U},{children:e.jsxs(e.Fragment,{children:[e.jsx(i.Icon,{name:i.ICONS.delete}),e.jsx("span",{children:"Remove"})]}),"aria-label":`Remove "${t.title}" upgrade profile`,hasIcon:!0,onClick:s}];return e.jsxs(e.Fragment,{children:[e.jsx(i.ContextualMenu,{position:"left",className:P.menu,toggleClassName:P.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(i.Icon,{name:"contextual-menu","aria-hidden":!0}),toggleProps:{"aria-label":`${t.title} profile actions`},links:b}),e.jsx(L,{isOpen:a,confirmationText:`remove ${t.name}`,title:"Remove upgrade profile",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:m,confirmButtonLoading:m,onConfirm:x,close:c,children:e.jsxs("p",{children:['This will remove "',t.title,'" profile. This action is'," ",e.jsx("b",{children:"irreversible"}),"."]})})]})},z="_truncated_1wloj_1",q="_actions_1wloj_7",y={truncated:z,actions:q},K=r.lazy(async()=>h(()=>import("./index-B0c3GjfZ.js"),__vite__mapDeps([14,1,2,11,15,16,12,17,18,19]))),V=({profiles:t})=>{const{search:a}=O(),{setSidePanelContent:o}=f(),{getAccessGroupQuery:u}=N(),{data:l}=u(),d=(l==null?void 0:l.data.map(({name:s,title:c})=>({label:c,value:s})))??[],n=r.useMemo(()=>a?t.filter(s=>s.title.toLowerCase().includes(a.toLowerCase())):t,[t,a]),g=s=>{o(s.title,e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(K,{accessGroupOptions:d,profile:s})}))},m=r.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:s}})=>e.jsx(i.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>{g(s)},children:s.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:s}})=>{var c;return e.jsx(e.Fragment,{children:((c=d.find(({value:x})=>x===s.access_group))==null?void 0:c.label)??s.access_group})}},{accessor:"tags",className:y.truncated,Header:"Tags",Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:s.tags.length>0?s.tags.join(", "):e.jsx(w,{})})},{accessor:"associated",Header:"Associated"},{accessor:"actions",className:y.actions,Header:"Actions",Cell:({row:{original:s}})=>e.jsx($,{profile:s})}],[n,d.length]);return e.jsx(i.ModularTable,{columns:m,data:n,emptyMsg:`No upgrade profiles found with the search: "${a}"`})},G=r.lazy(()=>h(()=>import("./index-CRCcrk6t.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),W=()=>{const{setSidePanelContent:t}=f(),a=()=>{t("Add upgrade profile",e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(G,{action:"add"})}))};return e.jsx(M,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(i.Button,{appearance:"positive",onClick:a,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],title:"No upgrade profiles found"})},Y=()=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsx(R,{filtersToDisplay:["search"]})]}),J=()=>{const{getUpgradeProfilesQuery:t}=_(),{data:a,isLoading:o}=t();return e.jsxs(e.Fragment,{children:[o&&e.jsx(p,{}),!o&&(!a||!a.data.length)&&e.jsx(W,{}),!o&&a&&a.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(V,{profiles:a.data})]})]})},X=r.lazy(()=>h(()=>import("./index-CRCcrk6t.js").then(t=>t.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(t=>({default:t.SingleUpgradeProfileForm}))),Z=()=>{const{setSidePanelContent:t}=f(),a=()=>{t("Add upgrade profile",e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(X,{action:"add"})}))};return e.jsxs(T,{children:[e.jsx(k,{title:"Upgrade profiles",actions:[e.jsx(i.Button,{type:"button",appearance:"positive",onClick:a,children:"Add upgrade profile"},"add")]}),e.jsx(B,{children:e.jsx(J,{})})]})},ne=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{V as U,W as a,Y as b,ne as i,_ as u};
