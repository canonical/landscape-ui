const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NewAPTSourceForm-DyyLRIMf.js","assets/index-BUcGDZCR.js","assets/index-DEuNBe7s.css","assets/useAPTSources-D_fsPYmg.js","assets/useFetchOld-wQl16_NT.js","assets/useGPGKeys-CPsX706Y.js","assets/useRoles-C51ddSpY.js","assets/tests-DFnZqbNV.js","assets/SidePanelFormButtons-UNqnJWHo.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/NewAPTSourceForm-DQhIHzOK.css"])))=>i.map(i=>d[i]);
import{k as P,r as i,j as e,h as n,_ as A,i as h,t as d,E as b}from"./index-BUcGDZCR.js";import{P as x,a as j,b as T}from"./PageMain-CCULNlPm.js";import{u as m}from"./useAPTSources-D_fsPYmg.js";import"./useFetchOld-wQl16_NT.js";const _="_line_1ilcn_1",f="_accessGroup_1ilcn_10",y="_actions_1ilcn_19",u={line:_,accessGroup:f,actions:y},S=({items:r})=>{const{removeAPTSourceQuery:l}=m(),a=P(),{mutateAsync:t,isPending:o}=l,c=async s=>{try{await t({name:s})}catch(g){a(g)}},p=i.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"access_group",Header:"Access group",className:u.accessGroup},{accessor:"line",Header:"Line",className:u.line},{accessor:"id",className:u.actions,Cell:({row:s})=>e.jsx(n.ConfirmationButton,{className:"u-no-margin--bottom u-no-padding--left is-small has-icon",type:"button",appearance:"base","aria-label":`Remove ${s.original.name} APT source`,confirmationModalProps:{title:`Deleting ${s.original.name} APT source`,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:o,confirmButtonDisabled:o,onConfirm:()=>c(s.original.name)},children:e.jsx(n.Tooltip,{position:"btm-center",message:"Delete",children:e.jsx(n.Icon,{name:n.ICONS.delete})})})}],[]);return e.jsx(n.ModularTable,{columns:p,data:i.useMemo(()=>r,[r.length]),emptyMsg:"No APT sources yet.",getCellProps:({column:s})=>{switch(s.id){case"name":return{role:"rowheader"};case"access_group":return{"aria-label":"Access group"};case"line":return{"aria-label":"Line"};case"id":return{"aria-label":"Actions"};default:return{}}}})},v=i.lazy(()=>A(()=>import("./NewAPTSourceForm-DyyLRIMf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),E=()=>{const{setSidePanelContent:r}=h(),{getAPTSourcesQuery:l}=m(),{data:a,isLoading:t}=l(),o=(a==null?void 0:a.data)??[],c=()=>{r("Add APT source",e.jsx(i.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(v,{})}))};return e.jsxs(x,{children:[e.jsx(j,{title:"APT Sources",actions:[e.jsx(n.Button,{appearance:"positive",onClick:c,type:"button",children:"Add APT source"},"new-key-button")]}),e.jsxs(T,{children:[t&&e.jsx(d,{}),!t&&o.length===0&&e.jsx(b,{title:"No APT sources found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any APT sources yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage APT sources in Landscape"})]}),cta:[e.jsx(n.Button,{appearance:"positive",onClick:c,type:"button",children:"Add APT source"},"table-add-new-mirror")]}),!t&&o.length>0&&e.jsx(S,{items:o})]})]})};export{E as default};
