import{f as l,v as g,w as u,o as n,ag as c,B as d,j as r}from"./index-Dfc97QGW.js";import{S as a}from"./SidePanel-BVCSOSpO.js";import{u as f}from"./useGetPageScriptProfile-DtK3AzaF.js";import{S}from"./ScriptProfileForm-jsud-xeu.js";import"./AssociationBlock-BvR_yeWx.js";import"./MultiSelectField-fcXogomg.js";import"./useGetTags-oA_gPXb8.js";import"./index-DyYA0Kdx.js";import"./TableFilterChips-DXWGZ6VK.js";import"./TablePagination-B0v8QAQr.js";import"./ScriptsTabs-BSK7sb4n.js";import"./helpers-BbXQOWxJ.js";import"./constants-BTpoIHxf.js";import"./NoData-DMN9LLPq.js";import"./ResponsiveTable-ViIMTRR6.js";import"./StaticLink-BNg3qc2M.js";import"./TruncatedCell-Cf7_euhM.js";import"./Truncated-D8EZCoK1.js";import"./useExpandableRow-DYtdXwcw.js";import"./useRoles-TXLG25Jr.js";import"./useFetchOld-BgGVMMmJ.js";import"./TextConfirmationModal-O9rtHEfo.js";import"./PageParamFilter-C5PJgjVf.js";import"./TableFilter-BmLRyeMD.js";import"./HeaderWithSearch-cCuZhEhs.js";import"./SingleInstanceTabs.module-DvhuGYYD.js";import"./index-DiSNWm9B.js";import"./ProfileAssociatedInstancesLink-CSFk2VcW.js";import"./SidePanelFormButtons-BdOP5SSP.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useGetInstances-Ccq0NH3v.js";import"./InstancesPageActions-Dns4Yse-.js";import"./index-S_kjB96R.js";import"./formikErrors-Bw8iTXYS.js";import"./ListTitle-DsIgCqjQ.js";import"./InfoGrid-CrJbMYy5.js";import"./InfoItem-DImpX37B.js";import"./ScriptDropdown-DJ8TKgp3.js";import"./useInfiniteQuery-Dl6Bz4vo.js";import"./downshift.esm-DGSOz4JI.js";const h=()=>{const t=l(),e=g(),{isPending:o,mutateAsync:s}=u({mutationFn:async({id:m,...p})=>t.patch(`script-profiles/${m}`,p),onSuccess:async()=>e.invalidateQueries({queryKey:["scriptProfiles"]})});return{isEditingScriptProfile:o,editScriptProfile:s}},y=t=>({...t,interval:"",...t.trigger,start_after:t.trigger.trigger_type=="recurring"?n(t.trigger.start_after).utc().format(c):"",timestamp:t.trigger.trigger_type=="one_time"?n(t.trigger.timestamp).utc().format(c):""}),st=()=>{const{notify:t}=d(),{scriptProfile:e,isGettingScriptProfile:o}=f(),{editScriptProfile:s,isEditingScriptProfile:m}=h();if(o)return r.jsx(a.LoadingState,{});const p=async i=>{await s({id:e.id,all_computers:i.all_computers,tags:i.tags,time_limit:i.time_limit,title:i.title,trigger:i.trigger,username:i.username})};return r.jsxs(r.Fragment,{children:[r.jsxs(a.Header,{children:["Edit ",e.title]}),r.jsx(a.Content,{children:r.jsx(S,{disabledFields:{script_id:!0,trigger_type:!0},initialValues:y(e),onSubmit:p,onSuccess:i=>{t.success({title:`You have successfully saved changes for ${i.title}`,message:"The changes will be applied to this profile."})},submitButtonText:"Save changes",submitting:m})})]})};export{st as default};
