import{p as h,f as S,s as f,h as x,k as u,j as r,g as a}from"./index-BRihK9aF.js";import{S as _}from"./SidePanelFormButtons-BFlViY8c.js";import{u as y}from"./useRoles-BaBAheRf.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as D}from"./constants-DdAECAFq.js";import"./SidePanelFormButtons.module-C5v714vX.js";import"./useFetchOld-CpP6IFJx.js";import"./usePageParams-iyOWMaH2.js";import"./NoData-UXVxwgLt.js";import"./index-ClUtLbQ0.js";import"./TablePagination-5Vy8vn_p.js";import"./TablePaginationBase-BoGPMhhk.js";import"./StatusFilter-BGKMvabJ.js";import"./TableFilter-BXUu-Qwz.js";import"./TableFilterChips-BIIQiaEm.js";const j={name:"",access_group:""},$=()=>{const m=h(),{closeSidePanel:c}=S(),{createDistributionQuery:p,getDistributionsQuery:l}=D(),{getAccessGroupQuery:d}=y(),{mutateAsync:b}=p,{data:i}=d(),g=((i==null?void 0:i.data)??[]).map(t=>({label:t.title,value:t.name})),{data:s}=l({include_latest_sync:!0}),e=f({initialValues:j,validationSchema:x().shape({name:u().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:s},test:t=>!((s==null?void 0:s.data)??[]).map(({name:o})=>o).includes(t),message:"It must be unique within the account."}),access_group:u()}),onSubmit:async t=>{try{await b(t),c()}catch(o){m(o)}}});return r.jsxs(a.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(a.Input,{type:"text",label:"Distribution name",required:!0,...e.getFieldProps("name"),error:e.touched.name&&e.errors.name?e.errors.name:void 0}),r.jsx(a.Select,{label:"Access group",options:[{label:"Select access group",value:""},...g],...e.getFieldProps("access_group"),error:e.touched.access_group&&e.errors.access_group?e.errors.access_group:void 0}),r.jsx(_,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Add distribution"})]})};export{$ as default};
