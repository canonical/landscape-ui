import{r as x,j as s,m as O,g as n}from"./index-BJrExKCU.js";import{u as q}from"./usePageParams-DK6tFkJI.js";const z=["accessGroups","availabilityZones","os","fromDate","status","tags","toDate","type"],K=a=>a?a.split(",").filter(i=>i.trim()!=="").map(i=>`'${i}'`):[],M=(a,i)=>{const u=i.replace(/^'|'$/g,""),p=a.split(","),t=p.indexOf(u);return t===-1?a:[...p.slice(0,t),...p.slice(t+1)].join(",")},d=(a,i)=>{var u;return((u=a==null?void 0:a.find(p=>p.value===i))==null?void 0:u.label)??i},Q=({filtersToMonitor:a,search:i,query:u,...p})=>{const t={totalChipsToRenderCount:0};a.includes("query")?(t.areSearchQueryChipsRender=!!u,t.totalChipsToRenderCount+=u.trim()?u.split(",").length:0):a.includes("search")&&(t.isSearchChipRender=!!i,t.totalChipsToRenderCount+=Number(t.isSearchChipRender));for(const[R,g]of Object.entries(p)){const j=R;if(a.includes(j))if(Array.isArray(g)){const y=`are${j.replace(/^\w/,h=>h.toUpperCase())}ChipsRender`;t[y]=!!g.length,t.totalChipsToRenderCount+=g.length}else{const y=`is${j.replace(/^\w/,f=>f.toUpperCase())}ChipRender`,h=!!g;t[y]=h,t.totalChipsToRenderCount+=Number(h)}}return t},Z="_container_6jjiy_1",U="_chipsContainer_6jjiy_8",V="_collapsed_6jjiy_17",H="_clearAllButton_6jjiy_22",J="_showLessButton_6jjiy_23",W="_showMoreButton_6jjiy_24",X="_clearAllIcon_6jjiy_39",C={container:Z,chipsContainer:U,collapsed:V,clearAllButton:H,showLessButton:J,showMoreButton:W,clearAllIcon:X},se=({accessGroupOptions:a,availabilityZonesOptions:i,autoinstallFileOptions:u,employeeGroupOptions:p,filtersToDisplay:t,osOptions:R,statusOptions:g,tagOptions:j,typeOptions:y})=>{const[h,f]=x.useState(!1),[_,b]=x.useState(0),F=t??z,D=x.useRef(null),{setPageParams:r,accessGroups:N,autoinstallFiles:v,availabilityZones:B,employeeGroups:A,fromDate:S,os:$,status:w,tags:T,toDate:E,type:k,search:L,query:I}=q(),G=()=>{r({accessGroups:[],autoinstallFiles:[],availabilityZones:[],employeeGroups:[],fromDate:"",os:"",status:"",tags:[],toDate:"",type:"",search:"",query:""}),f(!1)},P=()=>{if(!D.current)return;const e=[...D.current.querySelectorAll(".p-chip")];if(!e.length){b(0);return}const m=e[0].offsetTop,l=e.filter(({offsetTop:c})=>c>m).length;l===0&&(f(!1),b(0)),b(l)};x.useEffect(()=>(window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}),[]),x.useEffect(()=>{P()},[N.length,B.length,v.length,A.length,S,_,$,w,T.length,E,k,L]);const o=Q({accessGroups:N,autoinstallFiles:v,availabilityZones:B,employeeGroups:A,filtersToMonitor:F,fromDate:S,os:$,search:L,status:w,tags:T,toDate:E,type:k,query:I});return o.totalChipsToRenderCount===0?null:s.jsxs("div",{className:C.container,children:[s.jsxs("div",{ref:D,className:O(C.chipsContainer,{[C.collapsed]:!h}),children:[o.totalChipsToRenderCount>1&&s.jsxs(n.Button,{type:"button",appearance:"link",hasIcon:!0,className:C.clearAllButton,onClick:G,children:[s.jsx(n.Icon,{name:"close",className:C.clearAllIcon}),s.jsx("span",{children:"Clear all filters"})]}),o.areSearchQueryChipsRender&&K(I).map((e,m)=>s.jsx(n.Chip,{value:`Query: ${e}`,onDismiss:()=>{r({query:M(I,e)})},className:"u-no-margin--bottom u-no-margin--right"},e+m)),o.isSearchChipRender&&s.jsx(n.Chip,{value:`Search: ${L}`,onDismiss:()=>{r({search:""})},className:"u-no-margin--bottom u-no-margin--right"}),o.isStatusChipRender&&s.jsx(n.Chip,{value:`Status: ${d(g,w)}`,onDismiss:()=>{r({status:""})},className:"u-no-margin--bottom u-no-margin--right"}),o.isOsChipRender&&s.jsx(n.Chip,{value:`OS: ${d(R,$)}`,onDismiss:()=>{r({os:""})},className:"u-no-margin--bottom u-no-margin--right"}),o.areAvailabilityZonesChipsRender&&B.map((e,m,l)=>s.jsx(n.Chip,{value:`Availability z.: ${d(i,e)}`,onDismiss:()=>{r({availabilityZones:l.filter(c=>c!==e)})},className:"u-no-margin--bottom u-no-margin--right"},e)),o.areAccessGroupsChipsRender&&N.map((e,m,l)=>s.jsx(n.Chip,{value:`Access group: ${d(a,e)}`,onDismiss:()=>{r({accessGroups:l.filter(c=>c!==e)})},className:"u-no-margin--bottom u-no-margin--right"},e)),o.areAutoinstallFilesChipsRender&&v.map((e,m,l)=>s.jsx(n.Chip,{value:`Autoinstall file: ${d(u,e)}`,onDismiss:()=>{r({autoinstallFiles:l.filter(c=>c!==e)})},className:"u-no-margin--bottom u-no-margin--right"},e)),o.areEmployeeGroupsChipsRender&&A.map((e,m,l)=>s.jsx(n.Chip,{value:`Employee group: ${d(p,e)}`,onDismiss:()=>{r({employeeGroups:l.filter(c=>c!==e)})},className:"u-no-margin--bottom u-no-margin--right"},e)),o.areTagsChipsRender&&T.map((e,m,l)=>s.jsx(n.Chip,{value:`Tag: ${d(j,e)}`,onDismiss:()=>{r({tags:l.filter(c=>c!==e)})},className:"u-no-margin--bottom u-no-margin--right"},e)),o.isFromDateChipRender&&s.jsx(n.Chip,{value:`From: ${S}`,onDismiss:()=>{r({fromDate:""})},className:"u-no-margin--bottom u-no-margin--right"}),o.isToDateChipRender&&s.jsx(n.Chip,{value:`To: ${E}`,onDismiss:()=>{r({toDate:""})},className:"u-no-margin--bottom u-no-margin--right"}),o.isTypeChipRender&&s.jsx(n.Chip,{value:`Type: ${d(y,k)}`,onDismiss:()=>{r({type:""})},className:"u-no-margin--bottom u-no-margin--right"}),h&&s.jsx(n.Button,{type:"button",appearance:"link",className:C.showLessButton,onClick:()=>{f(!1)},children:s.jsx("span",{className:"u-text--muted",children:"Show less"})})]}),_>0&&!h&&s.jsx(n.Button,{type:"button",appearance:"link",className:C.showMoreButton,onClick:()=>{f(!0)},children:s.jsx("span",{className:"u-text--muted",children:`+${_}`})})]})};export{se as T};
