import{p as u,i as c,z as m,B as p,y as P,C as l,j as r,d as e}from"./index-Dfc97QGW.js";import{S as h}from"./SidePanelFormButtons-BdOP5SSP.js";import{P as g}from"./PasswordConstraints-CIW5Acqh.js";import{p as f}from"./constants-D5S_Jdc8.js";import{u as S}from"./EditUserForm-Chvtk2Zy.js";import{g as b}from"./formikErrors-Bw8iTXYS.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useAuthAccounts-C0VrFEFy.js";const x=u().shape({currentPassword:c().required("This field is required"),newPassword:f.password}),B=()=>{const a=m(),{notify:t}=p(),{closeSidePanel:d}=P(),{changePassword:n}=S(),{mutateAsync:i}=n,s=l({initialValues:{currentPassword:"",newPassword:""},validationSchema:x,onSubmit:async o=>{try{await i({password:o.currentPassword,new_password:o.newPassword}),d(),t.success({message:"Password changed successfully"})}catch(w){a(w)}}});return r.jsxs(e.Form,{noValidate:!0,onSubmit:s.handleSubmit,children:[r.jsx(e.Input,{label:"Current password",type:"password",required:!0,autoComplete:"current-password",error:b(s,"currentPassword"),...s.getFieldProps("currentPassword")}),r.jsx(e.PasswordToggle,{required:!0,id:"new-password",label:"New password",autoComplete:"new-password","data-testid":"new-password",error:s.touched.newPassword&&s.errors.newPassword&&s.errors.newPassword==="This field is required"?s.errors.newPassword:void 0,...s.getFieldProps("newPassword")}),r.jsx(g,{password:s.values.newPassword,touched:!!s.touched.newPassword,hasError:!!s.errors.newPassword}),r.jsx(h,{submitButtonDisabled:s.isSubmitting,submitButtonText:"Save changes"})]})};export{B as default};
