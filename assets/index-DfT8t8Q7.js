import{V as g,c as h,W as p,X as x,o as _,R as n,Y as m,j as e,Z as j,L as U}from"./index-CmmfIHlE.js";const f="_container_1uszo_1",A={container:f},S=()=>{const[u]=g(),{redirectToExternalUrl:r,setAuthLoading:s,setUser:i}=h(),{getAuthStateWithUbuntuOneQuery:c}=p(),a=x(),{data:t,isLoading:l}=c({url:window.location.toString()},{enabled:u.size>0});return _.useEffect(()=>{if(!(!t||!("current_account"in t.data)))if(t.data.return_to?.external&&t.data.return_to.url)r(t.data.return_to.url,{replace:!0});else{if(s(!0),i(t.data),t.data.invitation_id){a(n.auth.invitation({secureId:t.data.invitation_id}),{replace:!0});return}if(t.data.accounts.length===0){a(n.auth.createAccount(),{replace:!0});return}const d=t.data.return_to?.url,o=new URL(d??m,location.origin);a(o.toString().replace(o.origin,""),{replace:!0})}},[t,r,a,s,i]),e.jsx("div",{className:A.container,children:l?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:j}),e.jsx(U,{to:n.auth.login(),className:"p-button",children:"Back to login"})]})})};export{S as default};
