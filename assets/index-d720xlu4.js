const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DXM8-o-X.js","assets/index-Bwatsl1G.js","assets/index-BwHlIK4o.css","assets/AssociationBlock-BXH6xB6x.js","assets/MultiSelectField-B42pkRH6.js","assets/MultiSelectField-GyNA33om.css","assets/useInstances-CvI7zscF.js","assets/useFetchOld--qBGHGTA.js","assets/AssociationBlock-OuvPxND7.css","assets/SidePanelFormButtons-CIamrVW7.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/useRoles-f6kdZUNk.js","assets/PageMain-CJJxVTE6.js","assets/PageMain--v5xNZ5p.css","assets/usePageParams-gxSf1nMa.js","assets/NoData-CcX6zdBS.js","assets/HeaderWithSearch-C5C_dSyA.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/TableFilterChips-t7GEBfEp.js","assets/TableFilterChips-CHqetGbX.css","assets/index-BkP3mq0s.css","assets/index-CcPdBkMU.js","assets/index-_v2C-3Y0.css"])))=>i.map(i=>d[i]);
import{b as w,c as j,d as F,r as n,p as T,q as D,f as g,j as e,g as l,n as p,_ as v,E as I}from"./index-Bwatsl1G.js";import{P as L,a as O,b as k}from"./PageMain-CJJxVTE6.js";import{u as A}from"./usePageParams-gxSf1nMa.js";import{u as M}from"./useRoles-f6kdZUNk.js";import{u as Q}from"./useFetchOld--qBGHGTA.js";import{N as B}from"./NoData-CcX6zdBS.js";import{H as N}from"./HeaderWithSearch-C5C_dSyA.js";import{T as H}from"./TableFilterChips-t7GEBfEp.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="b05cccc5-11eb-479f-8819-67beea408ae6",t._sentryDebugIdIdentifier="sentry-dbid-b05cccc5-11eb-479f-8819-67beea408ae6")}catch{}const $="_toggleButton_bnzrt_1",q="_menu_bnzrt_6",y={toggleButton:$,menu:q};function _(){const t=w(),o=Q(),r=j({mutationFn:s=>o.get("CreateRemovalProfile",{params:s}),onSuccess:()=>t.invalidateQueries({queryKey:["removalProfiles"]})}),d=j({mutationFn:s=>o.get("EditRemovalProfile",{params:s}),onSuccess:()=>t.invalidateQueries({queryKey:["removalProfiles"]})}),i=j({mutationFn:s=>o.get("RemoveRemovalProfile",{params:s}),onSuccess:()=>t.invalidateQueries({queryKey:["removalProfiles"]})});return{createRemovalProfileQuery:r,editRemovalProfileQuery:d,removeRemovalProfileQuery:i,getRemovalProfilesQuery:(s={},f={})=>F({queryKey:["removalProfiles"],queryFn:()=>o.get("GetRemovalProfiles",{params:s}),...f})}}const z=n.lazy(()=>v(()=>import("./index-DXM8-o-X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),K=({profile:t})=>{const[o,r]=n.useState(!1),[d,i]=n.useState(""),u=T(),{notify:s}=D(),{setSidePanelContent:f}=g(),{removeRemovalProfileQuery:x}=_(),{mutateAsync:a,isPending:c}=x,h=async()=>{try{await a({name:t.name}),s.success({message:`${t.title} profile removed successfully`,title:"Removal profile removed"})}catch(m){u(m)}finally{P()}},R=m=>{f(`Edit ${m.title} profile`,e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(z,{action:"edit",profile:m})}))},C=()=>{r(!0)},P=()=>{r(!1)},S=m=>{i(m.target.value)},E=[{children:e.jsxs(e.Fragment,{children:[e.jsx(l.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),"aria-label":`Edit "${t.title}" profile`,hasIcon:!0,onClick:()=>R(t)},{children:e.jsxs(e.Fragment,{children:[e.jsx(l.Icon,{name:l.ICONS.delete}),e.jsx("span",{children:"Remove"})]}),"aria-label":`Remove "${t.title}" profile`,hasIcon:!0,onClick:C}];return e.jsxs(e.Fragment,{children:[e.jsx(l.ContextualMenu,{position:"left",className:y.menu,toggleClassName:y.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(l.Icon,{name:"contextual-menu"}),toggleProps:{"aria-label":`${t.title} profile actions`},links:E}),o&&e.jsxs(l.ConfirmationModal,{title:"Remove package profile",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:d!==t.name||c,confirmButtonLoading:c,onConfirm:h,close:P,children:[e.jsxs("p",{children:['This will remove "',t.title,'" profile. This action is irreversible.']}),"Type ",e.jsxs("b",{children:["remove ",t.name]})," to confirm.",e.jsx(l.Input,{type:"text",value:d,onChange:S})]})]})},V="_truncated_1wloj_1",G="_actions_1wloj_7",b={truncated:V,actions:G},W=n.lazy(()=>v(()=>import("./index-CcPdBkMU.js"),__vite__mapDeps([22,1,2,16,13,14,15,12,7,17,18,19,20,23]))),Y=({profiles:t})=>{const{search:o}=A(),{setSidePanelContent:r}=g(),{getAccessGroupQuery:d}=M(),{data:i}=d(),u=(i==null?void 0:i.data.map(({name:a,title:c})=>({label:c,value:a})))??[],s=n.useMemo(()=>o?t.filter(a=>a.title.toLowerCase().includes(o.toLowerCase())):t,[t,o]),f=a=>{r(a.title,e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(W,{accessGroupOptions:u,profile:a})}))},x=n.useMemo(()=>[{accessor:"title",Header:"Name",Cell:({row:{original:a}})=>e.jsx(l.Button,{type:"button",appearance:"link",onClick:()=>f(a),className:"u-no-margin--bottom u-no-padding--top","aria-label":`Open "${a.title}" profile details`,children:a.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:a}})=>{var c;return e.jsx(e.Fragment,{children:((c=u.find(h=>h.value===a.access_group))==null?void 0:c.label)??a.access_group})}},{accessor:"tags",className:b.truncated,Header:"Tags",Cell:({row:{original:a}})=>a.tags.join(", ")||e.jsx(B,{})},{accessor:"associated",Header:"Associated"},{accessor:"actions",className:b.actions,Header:"Actions",Cell:({row:{original:a}})=>e.jsx(K,{profile:a})}],[s]);return e.jsx(l.ModularTable,{columns:x,data:s,emptyMsg:`No removal profiles found with the search: "${o}"`})},J=n.lazy(()=>v(()=>import("./index-DXM8-o-X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),U=()=>{const{setSidePanelContent:t}=g(),o=()=>{t("Add removal profile",e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(J,{action:"add"})}))};return e.jsx(I,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You havenâ€™t added any removal profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(l.Button,{appearance:"positive",onClick:o,type:"button",children:"Add removal profile"},"table-add-new-mirror")],title:"No removal profiles found"})},X=()=>e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(H,{filtersToDisplay:["search"]})]}),Z=n.lazy(()=>v(()=>import("./index-DXM8-o-X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),ee=t=>e.jsx(n.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Z,{...t})}),te=()=>{const{getRemovalProfilesQuery:t}=_(),{data:o,isLoading:r}=t();return e.jsxs(e.Fragment,{children:[r&&e.jsx(p,{}),!r&&(!o||o.data.length===0)&&e.jsx(U,{}),!r&&o&&o.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsx(Y,{profiles:o.data})]})]})},oe=()=>{const{setSidePanelContent:t}=g(),o=()=>{t("Add removal profile",e.jsx(ee,{action:"add"}))};return e.jsxs(L,{children:[e.jsx(O,{title:"Removal profiles",actions:[e.jsx(l.Button,{type:"button",appearance:"positive",onClick:o,children:"Add removal profile"},"add")]}),e.jsx(k,{children:e.jsx(te,{})})]})},me=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{me as i,_ as u};
