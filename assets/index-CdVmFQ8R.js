import{h as b,k as h,p as y,q as S,f as A,s as _,j as a,g as u}from"./index-5gUg1wBm.js";import{u as I}from"./useRoles-D_4_uFUG.js";import{S as x}from"./SidePanelFormButtons-B3h2hemk.js";import"./useFetchOld-DoJhfK-Q.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="f664265c-f593-45c9-8d0f-0512d5c4188e",e._sentryDebugIdIdentifier="sentry-dbid-f664265c-f593-45c9-8d0f-0512d5c4188e")}catch{}const D={access_group:""},$=b({access_group:h().required("This field is required")}),d=e=>{const s=(e==null?void 0:e.map(i=>({label:i.title,value:i.name})))??[];return s.unshift({label:"Select access group",value:""}),s},C=({selected:e})=>{const s=y(),{notify:i}=S(),{closeSidePanel:l}=A(),{getAccessGroupQuery:f,changeComputersAccessGroupQuery:g}=I(),{data:t}=f(),{mutateAsync:m}=g,p=d(t==null?void 0:t.data),n=_({initialValues:D,onSubmit:async({access_group:r})=>{var c;try{await m({access_group:r,query:e.map(({id:o})=>`id:${o}`).join(" OR ")}),l(),i.success({title:"Access group changed",message:`Access group for ${e.length>1?`${e.length} instances`:`"${e[0].title}" instance`} successfully changed to ${((c=p.find(({value:o})=>o===r))==null?void 0:c.label)??""}`})}catch(o){s(o)}},validationSchema:$});return a.jsxs(u.Form,{onSubmit:n.handleSubmit,noValidate:!0,children:[a.jsx(u.Select,{label:"Access group",required:!0,options:d(t==null?void 0:t.data),...n.getFieldProps("access_group"),error:n.touched.access_group&&n.errors.access_group?n.errors.access_group:void 0}),a.jsx(x,{submitButtonDisabled:n.isSubmitting,submitButtonText:"Assign"})]})};export{C as default};
