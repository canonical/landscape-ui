const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CFdmOk3l.js","assets/index-YVEwVKfb.js","assets/index-DEuNBe7s.css","assets/FileInput-D0zl79Bg.js","assets/SidePanelFormButtons-BbCceNfY.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/index-D1BGvOPG.js","assets/moment-CvVldq5K.js","assets/TablePagination-DgKjfhG_.js","assets/TablePagination.module-CgQ3jx4B.js","assets/TablePagination-DTa7xTwu.css","assets/usePageParams-3qh8vF2w.js","assets/SearchHelpPopup-BZ5x0pi6.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/useFetchOld-B7WFsVWh.js","assets/NoData-DDYYPU53.js","assets/index-BmoMXq9B.css","assets/useInstances-Dy6pVmOW.js","assets/HeaderWithSearch-DjnXEv9d.js","assets/HeaderWithSearch-DQybm8h_.css"])))=>i.map(i=>d[i]);
import{r as d,_ as f,i as j,j as e,E as C,h as u,o as v,b as S,c as _,d as r,e as b,q as Q}from"./index-YVEwVKfb.js";import{u as I}from"./useInstances-Dy6pVmOW.js";import{u as L}from"./useFetchOld-B7WFsVWh.js";import{H as W}from"./HeaderWithSearch-DjnXEv9d.js";import{u as P}from"./usePageParams-3qh8vF2w.js";const q=d.lazy(()=>f(()=>import("./index-CFdmOk3l.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),A=()=>{const{setSidePanelContent:t}=j(),s=()=>{t("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(q,{})}))};return e.jsx(C,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(u.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},F=()=>{const t=S(),s=L(),o=_(),m=(n={},i={})=>b({queryKey:["wsl",n],queryFn:()=>o.get("computers/wsl-hosts",{params:n}),...i}),h=r({mutationFn:({parent_id:n,...i})=>o.post(`computers/${n}/children`,i),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),p=r({mutationFn:n=>s.get("DeleteChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),y=r({mutationFn:n=>s.get("SetDefaultChildComputer",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),l=r({mutationFn:n=>s.get("ShutdownHostComputer",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),g=r({mutationFn:n=>s.get("StartChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),c=r({mutationFn:n=>s.get("StopChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:h,deleteChildInstancesQuery:p,getWslInstanceNamesQuery:(n,i={})=>b({queryKey:["wsl-instance-names"],queryFn:()=>o.get("wsl-instance-names"),...i}),getWslHostsQuery:m,setDefaultChildInstanceQuery:y,shutdownHostInstanceQuery:l,startChildInstancesQuery:g,stopChildInstancesQuery:c}},D="_cta_hpksw_1",K={cta:D},B=d.lazy(()=>f(()=>import("./index-CFdmOk3l.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),H=({selectedInstances:t})=>{const{setPageParams:s}=P(),o=Q(),{setSidePanelContent:m}=j(),{deleteChildInstancesQuery:h}=F(),{removeInstancesQuery:p}=I(),{mutateAsync:y,isPending:l}=h,{mutateAsync:g,isPending:c}=p,x=async()=>{try{await y({computer_ids:t.map(({id:a})=>a)})}catch(a){o(a)}},n=async()=>{try{await g({computer_ids:t.map(({id:a})=>a)})}catch(a){o(a)}},i=()=>{m("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(B,{})}))},w=a=>{s({search:a})};return e.jsx(W,{onSearch:w,actions:e.jsxs("div",{className:K.cta,children:[e.jsx(u.Button,{type:"button",onClick:i,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(u.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:t.length===0,confirmationModalProps:{title:t.length!==1?"Delete instances":"Delete instance",children:t.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:x},children:"Delete instance"}),e.jsx(u.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:t.length===0,confirmationModalProps:{title:t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:c,confirmButtonLoading:c,onConfirm:n},children:"Remove from Landscape"})]})})]})})};export{H as W,A as a,F as u};
