import{K as S,O as i,m as x,B as f,C as h,F as I,j as s,d as o}from"./index-DHd_VY7f.js";import{u as _}from"./useInstances-CQSvXsWp.js";import{S as y}from"./SidePanelFormButtons-CzXdW2Nh.js";import{u as j}from"./useRoles-DeiF58Ke.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";const F=S().shape({access_group:i(),comment:i(),title:i()}),E=({instance:t})=>{const{closeSidePanel:n}=x(),u=f(),{notify:l}=h(),{getAccessGroupQuery:m}=j(),{editInstanceQuery:d}=_(),{mutateAsync:p}=d,b=async a=>{try{await p({instanceId:t.id,...a}),n(),l.success({title:"Instance updated",message:`Instance "${t.title}" updated successfully`})}catch(c){u(c)}},e=I({initialValues:{title:t.title,comment:t.comment,access_group:t.access_group},onSubmit:b,validationSchema:F}),{data:r}=m(),g=(r==null?void 0:r.data.map(({name:a,title:c})=>({label:c,value:a})))??[];return s.jsxs(o.Form,{onSubmit:e.handleSubmit,className:"l-form",noValidate:!0,children:[s.jsx(o.Input,{label:"Title","aria-label":"Title",type:"text",required:!0,disabled:t.is_wsl_instance,...e.getFieldProps("title"),error:e.touched.title&&e.errors.title?e.errors.title:void 0}),s.jsx(o.Select,{label:"Access group",options:g,...e.getFieldProps("access_group"),error:e.touched.access_group&&e.errors.access_group?e.errors.access_group:void 0}),s.jsx(o.Textarea,{label:"Comment",rows:5,...e.getFieldProps("comment"),error:e.touched.comment&&e.errors.comment?e.errors.comment:void 0}),s.jsx(y,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Save changes"})]})};export{E as default};
