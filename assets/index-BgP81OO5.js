import{r as F,p as C,q as I,f as N,s as S,j as t,g as i}from"./index-DdVy3CIu.js";import{C as j}from"./CodeEditor-DCDAlWlp.js";import{S as L}from"./SidePanelFormButtons-CKYzlbXP.js";import{g as u}from"./formikErrors-Bw8iTXYS.js";import{V as y,r as c,D as T,a as p,h as D,b as P}from"./EmployeeGroupIdentityIssuerList-7ekPTM7W.js";import"./index-CzMCzDjk.js";import"./SidePanelFormButtons.module-D2P5PizG.js";import"./usePageParams-CcklzBaA.js";import"./TablePagination-DcRP3nto.js";import"./TablePaginationBase-ZnL0qmAy.js";import"./TableFilter-CDgyuP9F.js";import"./TableFilterChips-3QiSvy-H.js";import"./HeaderWithSearch-w77Jjk9W.js";import"./TruncatedCell-DGWBciT5.js";const V="_form_1dly8_1",$="_inputContainer_1dly8_7",k="_input_1dly8_7",v="_inputDescription_1dly8_16",o={form:V,inputContainer:$,input:k,inputDescription:v},W=({buttonText:d,description:f,initialFile:r=T,notification:l,onSubmit:x})=>{const m=F.useRef(null),_=C(),{notify:h}=I(),{closeSidePanel:g}=N(),n=S({initialValues:{...r,filename:c(r.filename)},validationSchema:y,onSubmit:async e=>{const s=`${e.filename}${p}`;try{await x({...e,filename:s}),g(),h.success({message:`${s} ${l.message}`,title:`${l.title} ${s}`})}catch(a){_(a)}}}),E=async({target:{files:e}})=>{if(!e)return;const[s]=e,a=n.setFieldValue("contents",await s.text());if(n.values.filename){await a;return}await Promise.all([n.setFieldValue("filename",c(s.name)),a])},b=async e=>{await n.setFieldValue("contents",e)},A=()=>{var e;(e=m.current)==null||e.click()};return t.jsxs(i.Form,{className:o.form,noValidate:!0,onSubmit:n.handleSubmit,children:[t.jsx("span",{children:f}),t.jsxs("div",{className:o.inputContainer,children:[t.jsx(i.Input,{wrapperClassName:o.input,type:"text",label:"File name",...n.getFieldProps("filename"),error:u(n,"filename"),disabled:!!r.filename,required:!0}),t.jsx("span",{className:o.inputDescription,children:p})]}),t.jsx("input",{ref:m,className:"u-hide",type:"file",accept:D.map(e=>`.${e}`).join(","),onChange:E}),t.jsx(j,{label:"Code",value:n.values.contents,onChange:b,error:u(n,"contents"),required:!0,language:P,headerContent:t.jsxs(i.Button,{className:"u-no-margin--bottom",appearance:"base",hasIcon:!0,onClick:A,type:"button",children:[t.jsx(i.Icon,{name:"upload"}),t.jsx("span",{children:"Populate from file"})]})}),t.jsx(L,{submitButtonDisabled:n.isSubmitting,submitButtonText:d})]})};export{W as default};
