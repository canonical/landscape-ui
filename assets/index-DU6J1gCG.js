import{e as h,r as l,j as e,g as t,_ as b,f,o as y}from"./index-Dt7YhOS0.js";import{P as x,a as k,b as j}from"./PageMain-ByarrGgW.js";import{E as _}from"./EmptyState-BG0AupYF.js";import{u as v}from"./useConfirm-CR6bT57R.js";import{u}from"./useGPGKeys-iB4zFSoG.js";import"./useFetchOld-BGspy5lX.js";import"./useMutation-B0Ge1lYR.js";import"./useQuery-Dlf2yvOE.js";const C="_fingerprint_ikstg_1",K="_accessType_ikstg_10",N="_actions_ikstg_19",p={fingerprint:C,accessType:K,actions:N},I=({items:i})=>{const{confirmModal:d,closeConfirmModal:n}=v(),{removeGPGKeyQuery:o}=u(),r=h(),{mutateAsync:c}=o,m=l.useMemo(()=>i,[i.length]),g=async s=>{try{await c({name:s})}catch(a){r(a)}finally{n()}},G=s=>{d({body:"Are you sure? This action is permanent and can not be undone.",title:`Deleting ${s} GPG key`,buttons:[e.jsx(t.Button,{appearance:"negative",hasIcon:!0,onClick:()=>g(s),"aria-label":`Delete ${s} GPG key`,children:"Delete"},`delete-key-${s}`)]})},P=l.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"has_secret",Header:"Access type",className:p.accessType,Cell:({row:s})=>s.original.has_secret?"Private":"Public"},{accessor:"fingerprint",Header:"Fingerprint",className:p.fingerprint},{accessor:"actions",className:p.actions,Cell:({row:s})=>e.jsx("div",{className:"divided-blocks",children:e.jsx("div",{className:"divided-blocks__item",children:e.jsx(t.Tooltip,{message:"Delete",position:"top-center",children:e.jsx(t.Button,{small:!0,hasIcon:!0,appearance:"base",className:"u-no-margin--bottom u-no-padding--left","aria-label":`Remove ${s.original.name} GPG key`,onClick:()=>G(s.original.name),children:e.jsx(t.Icon,{name:t.ICONS.delete,className:"u-no-margin--left"})})})})})}],[m]);return e.jsx(t.ModularTable,{columns:P,data:m,getCellProps:({column:s})=>{const a={};return s.id==="name"?a.role="rowheader":s.id==="has_secret"?a["aria-label"]="Access type":s.id==="fingerprint"?a["aria-label"]="Fingerprint":s.id==="actions"&&(a["aria-label"]="Actions"),a},emptyMsg:"You have no GPG keys yet."})},T=l.lazy(()=>b(()=>import("./NewGPGKeyForm-BDmP5ip2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),D=()=>{const{setSidePanelContent:i}=f(),{getGPGKeysQuery:d}=u(),{data:n,isLoading:o}=d(),r=(n==null?void 0:n.data)??[],c=()=>{i("Import GPG key",e.jsx(l.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(T,{})}))};return e.jsxs(x,{children:[e.jsx(k,{title:"GPG Keys",actions:[e.jsx(t.Button,{appearance:"positive",onClick:c,type:"button","aria-label":"Import GPG key",children:"Import key"},"new-key-button")]}),e.jsxs(j,{children:[o&&e.jsx(y,{}),!o&&r.length===0&&e.jsx(_,{title:"No GPG keys found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any GPG keys yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage GPG keys in Landscape"})]}),cta:[e.jsx(t.Button,{appearance:"positive",onClick:c,type:"button","aria-label":"Import GPG key",children:"Import key"},"table-add-new-mirror")]}),!o&&r.length>0&&e.jsx(I,{items:r})]})]})},$=D;export{$ as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/NewGPGKeyForm-BDmP5ip2.js","assets/index-Dt7YhOS0.js","assets/index-BAlneFez.css","assets/formik.esm-g8btJLb9.js","assets/index.esm-Cy_yj1Qh.js","assets/useGPGKeys-iB4zFSoG.js","assets/useFetchOld-BGspy5lX.js","assets/useMutation-B0Ge1lYR.js","assets/useQuery-Dlf2yvOE.js","assets/tests-DFnZqbNV.js","assets/SidePanelFormButtons-Cs6mvCpL.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
