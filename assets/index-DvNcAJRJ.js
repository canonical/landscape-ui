import{j as e,e as i,h as g,f as m,c as p,r as u,_ as f,d as h,x as l}from"./index-USfFY6y3.js";import{E as x}from"./EmptyState-C3F4hI0m.js";import{P as _,a as j,b}from"./PageMain-BxDaTx_L.js";import{I as y}from"./InfoItem-C4QiPsl7.js";import{b as O}from"./output-BGPkZwlr.js";import{u as E}from"./useMutation-DY_6kw1u.js";import{u as P}from"./useQuery-BXclWMSX.js";const S="_infoRow_2nvbc_1",v={infoRow:S},w=({organisationPreferences:t})=>{const o=[{label:"Organisation's name",value:t.title},{label:"Registration key",value:t.registration_password??"-"},{label:"Auto register new computers",value:O(t.auto_register_new_computers)}];return e.jsx("div",{className:v.infoRow,children:e.jsx(i.Row,{className:"u-no-padding--left u-no-padding--right u-no-max-width",children:o.map(({label:n,value:a})=>e.jsx(i.Col,{size:4,children:e.jsx(y,{label:n,value:a})},n))})})},R=()=>{const t=g(),o=m(),n=p(),a=(s,c={})=>P({queryKey:["preferences"],queryFn:()=>t.get("preferences"),...c}),r=E({mutationKey:["preferences","change"],mutationFn:s=>t.patch("preferences",s),onSuccess:()=>{o.invalidateQueries(["preferences"]).catch(n)}});return{getOrganisationPreferences:a,changeOrganisationPreferences:r}},C=u.lazy(()=>f(()=>import("./index-D5iAb2jw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),F=()=>{const{setSidePanelContent:t}=h(),{getOrganisationPreferences:o}=R(),{data:n,isLoading:a,refetch:r}=o(),s=n==null?void 0:n.data,c=()=>{r()},d=()=>{t("Edit details",e.jsx(u.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(C,{organisationPreferences:s})}))};return e.jsxs(_,{children:[e.jsx(j,{title:"General",actions:[e.jsx(i.Button,{className:"p-segmented-control__button u-no-margin--bottom",type:"button",disabled:a||!s,onClick:d,children:e.jsx("span",{children:"Edit settings"})},"edit-settings")]}),e.jsxs(b,{children:[a&&e.jsx(l,{}),!a&&!s&&e.jsx(x,{title:"Could not load general information",icon:"connected",cta:[e.jsx(i.Button,{appearance:"positive",onClick:c,children:"Try again"},"refetch")]}),s&&e.jsx(w,{organisationPreferences:s})]})]})},k=F,N=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{N as i,R as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-D5iAb2jw.js","assets/index-USfFY6y3.js","assets/index-57O3pXzM.css","assets/SidePanelFormButtons-eq1cIORy.js","assets/SidePanelFormButtons.module-CoxOjuX8.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/formik.esm-C4aerYG-.js","assets/index.esm-D9RDGm6v.js","assets/EmptyState-C3F4hI0m.js","assets/EmptyState-BNXajmMK.css","assets/PageMain-BxDaTx_L.js","assets/PageMain-DtiowUD8.css","assets/InfoItem-C4QiPsl7.js","assets/InfoItem-BbayMzTk.css","assets/output-BGPkZwlr.js","assets/useMutation-DY_6kw1u.js","assets/useQuery-BXclWMSX.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
