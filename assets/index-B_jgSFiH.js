import{V as S,I as f}from"./ScriptsTabs-BQ1QThUW.js";import{c as H,a as O,d as U,S as $,u as J,b as K}from"./ScriptsTabs-BQ1QThUW.js";import{A as x,B as b,k as g,C as h,j as i,n as r,F as a}from"./index-B_G_5wPF.js";import{S as y}from"./SidePanelFormButtons-XM1c0Oqk.js";import{u as F,D as j}from"./DeliveryBlock-BI4xiMzJ.js";import"./index-DeLS61ok.js";import{S as I}from"./ScriptDropdown-C0thRtuh.js";import{default as W}from"./index-Cuj_hmss.js";import"./useRoles-CqwO4URy.js";import"./HeaderWithSearch-BtAoyXnn.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./useExpandableRow-kg-sbpQF.js";import"./SidePanelFormButtons.module-D2P5PizG.js";import"./downshift.esm-LM6yw0be.js";import"./CodeEditor-DyuvpSc4.js";import"./ScriptFormAttachments-BlZ4_TVd.js";import"./AttachmentFile-CJ-JnUoG.js";const z=({parentAccessGroup:o,query:n})=>{const u=x(),{notify:m}=b(),{closeSidePanel:l}=g(),{runScript:p}=F(),t=h({initialValues:f,validationSchema:S,onSubmit:async e=>{var s;try{await p({deliver_after:e.deliverImmediately?void 0:e.deliver_after,query:n,script_id:e.script_id,username:e.username}),l(),m.success({message:`"${(s=e.script)==null?void 0:s.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(d){u(d)}}}),c=async e=>{if(await t.setFieldValue("script_id",(e==null?void 0:e.id)??0),!t.values.username){const s=(e==null?void 0:e.username)??"";await t.setFieldValue("username",s)}};return i.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[i.jsx(I,{script:t.values.script,setScript:async e=>{await t.setFieldValue("script",e),await c(e)},errorMessage:a(t,"script_id"),parentAccessGroup:o}),i.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:a(t,"username")})}),i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:a(t,"time_limit")})})]}),i.jsx(j,{formik:t}),i.jsx(y,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{W as CreateScriptForm,z as RunInstanceScriptForm,I as ScriptDropdown,H as ScriptList,O as ScriptsContainer,U as ScriptsEmptyState,$ as ScriptsTabs,J as useGetScripts,K as useGetSingleScript};
