import{b as Q,g as E,i as b,V as P,W as w,af as S,r as g,j as t,d as a,a2 as f}from"./index-Bcke6Ud3.js";import{u as k}from"./useInvitation-BQ6m0juP.js";const B=(o,m={})=>{const h=Q(),{data:s,isPending:c}=E({queryKey:["oidcUrl",o],queryFn:async()=>h.get("employee-access/auth/start",{params:o}),...m,gcTime:0});return{data:s,isPending:c}},C="_list_1v1l7_1",F="_button_1v1l7_20",L="_icon_1v1l7_28",n={list:C,button:F,icon:L},$=({isStandaloneOidcEnabled:o,isUbuntuOneEnabled:m,oidcProviders:h})=>{const[s,c]=b.useState(0),[_]=P(),{invitationId:r}=k(),{getOidcUrlQuery:j,getUbuntuOneUrlQuery:U}=w(),I=S(),l=_.get("redirect-to"),y=_.has("external"),i=I.state?.code,e={};s>0&&(e.id=s),l&&(e.return_to=l),r&&(e.invitation_id=r),y&&(e.external=!0),i&&(e.attach_code=i);const v=j(e,{enabled:s!==0&&!i}),N=B(e,{enabled:s!==0&&!!i}),{data:x}=i?N:v;b.useEffect(()=>{x&&g(x.data.location)},[x]);const u={};l&&(u.return_to=`${window.origin}${l}`),r&&(u.invitation_id=r),y&&(u.external=!0);const{data:p,refetch:O}=U(u,{enabled:!1});return b.useEffect(()=>{p&&g(p.data.location)},[p]),t.jsxs("ul",{className:n.list,children:[m&&t.jsx("li",{className:"p-list__item",children:t.jsxs(a.Button,{type:"button",hasIcon:!0,onClick:O,className:n.button,children:[t.jsx(a.Icon,{name:f("ubuntu-one"),className:n.icon}),t.jsx("span",{children:"Sign in with Ubuntu One"})]})}),o&&t.jsx("li",{className:"p-list__item",children:t.jsxs(a.Button,{type:"button",hasIcon:!0,onClick:()=>{c(-1)},className:n.button,children:[t.jsx(a.Icon,{name:f("standalone"),className:n.icon}),t.jsx("span",{children:"Sign in with Enterprise Login"})]})}),h.map(d=>t.jsx("li",{className:"p-list__item",children:t.jsxs(a.Button,{type:"button",hasIcon:!0,onClick:()=>{c(d.id)},className:n.button,children:[t.jsx(a.Icon,{name:f(d.provider),className:n.icon}),t.jsx("span",{children:`Sign in with ${d.name}`})]})},d.id))]})};export{$ as A};
