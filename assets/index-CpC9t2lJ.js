import{P as g,b as h,Q as p,a as x,r as m,R as _,j as e,U as j,L as U}from"./index-2fzpjuii.js";const A="_container_1uszo_1",E={container:A},S=()=>{const[i]=g(),{redirectToExternalUrl:a,setAuthLoading:o,setUser:u}=h(),{getAuthStateWithUbuntuOneQuery:c}=p(),l=x(),{data:t,isLoading:d}=c({url:window.location.toString()},{enabled:i.size>0});return m.useEffect(()=>{var n,s;if(!(!t||!("current_account"in t.data)))if((n=t.data.return_to)!=null&&n.external&&t.data.return_to.url)a(t.data.return_to.url,{replace:!0});else{o(!0),u(t.data);const r=new URL(((s=t.data.return_to)==null?void 0:s.url)??_,location.origin);l(r.toString().replace(r.origin,""),{replace:!0})}},[t,a]),e.jsx("div",{className:E.container,children:d?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:j}),e.jsx(U,{to:"/login",className:"p-button",children:"Back to login"})]})})};export{S as default};
