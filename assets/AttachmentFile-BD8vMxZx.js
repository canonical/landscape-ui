import{c as g,l as j,j as t,p as m,d as a}from"./index-D2Gp0fO6.js";const x=({attachmentId:s,scriptId:n},o={enabled:!0})=>{const i=g(),{data:e,isLoading:l,refetch:h}=j({queryKey:["scripts","attachment",s],queryFn:async()=>i.get(`scripts/${n}/attachments/${s}`),...o});return{scriptAttachment:(e==null?void 0:e.data)??null,isScriptAttachmentsLoading:l,refetch:h}},w="_attachment_3h4gw_1",y="_attachmentActions_3h4gw_11",A="_actionButton_3h4gw_16",r={attachment:w,attachmentActions:y,actionButton:A},B=({attachmentId:s,filename:n,onInitialAttachmentDelete:o,scriptId:i,className:e})=>{const{isScriptAttachmentsLoading:l,refetch:h}=x({attachmentId:s,scriptId:i||0},{enabled:!1}),p=async()=>{const{data:d}=await h();if(!d)return;const b=new Blob([d.data],{type:"application/octet-stream"}),u=URL.createObjectURL(b),c=document.createElement("a");c.href=u,c.download=n,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(u)};return t.jsxs("span",{className:m(r.attachment,e),children:[t.jsx("span",{children:n}),t.jsxs("div",{className:r.attachmentActions,children:[i?t.jsx(a.Button,{className:m("u-no-margin--bottom u-no-margin--right",r.actionButton),hasIcon:!0,type:"button",onClick:p,disabled:l,appearance:"base","aria-label":`Download ${n}`,children:t.jsx(a.Tooltip,{message:"Download",children:t.jsx(a.Icon,{name:"begin-downloading"})})}):null,o?t.jsx(a.Button,{type:"button",hasIcon:!0,appearance:"base",className:m("u-no-margin--bottom",r.actionButton),"aria-label":`Remove ${n} attachment`,onClick:o,children:t.jsx(a.Tooltip,{message:"Remove",position:"top-center",children:t.jsx(a.Icon,{name:a.ICONS.delete})})}):null]})]})};export{B as A};
