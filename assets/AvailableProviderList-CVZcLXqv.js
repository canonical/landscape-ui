import{W as I,c as N,G as w,V as y,d as E,m as L,o as f,r as v,j as t,K as P,e as r,$ as g}from"./index-D2Oms9tG.js";function O(){const{getInvitationSummaryQuery:c}=I(),{user:u}=N(),{secureId:d}=w(),[s]=y(),i=u?.invitation_id||d||s.get("invitation_id")||"",{data:a,isLoading:e}=c({invitationId:i},{enabled:!!i});return{invitationId:i,isLoading:e,invitationAccount:a?.data??null}}const Q="_list_wqdfd_1",S="_list__bordered_wqdfd_15",$="_button_wqdfd_23",q="_icon_wqdfd_31",n={list:Q,list__bordered:S,button:$,icon:q},k=(c,u={})=>{const d=E(),[s]=y(),a=s.has("code")?"employee-access/auth/start":"auth/start",{data:e,isLoading:p}=L({queryKey:["oidcUrl",c],queryFn:async()=>d.get(a,{params:c}),...u,gcTime:0});return{oidcUrlLocation:e?.data.location,isOidcUrlQueryLoading:p}},F=({isStandaloneOidcEnabled:c,isUbuntuOneEnabled:u,oidcProviders:d})=>{const[s,i]=f.useState(0),[a]=y(),{invitationId:e}=O(),{getUbuntuOneUrlQuery:p}=I(),m=a.get("redirect-to"),j=a.has("external"),h=a.get("code"),o={};s>0&&(o.id=s),m&&(o.return_to=m),e&&(o.invitation_id=e,o.return_to=`/accept-invitation/${e}`),j&&(o.external=!0),h&&(o.attach_code=h);const{oidcUrlLocation:x}=k(o,{enabled:s!==0});f.useEffect(()=>{x&&v(x)},[x]);const l={};m&&(l.return_to=`${window.origin}${m}`),e&&(l.invitation_id=e,l.return_to=`/accept-invitation/${e}`),j&&(l.external=!0);const{data:b,refetch:U}=p(l,{enabled:!1});return f.useEffect(()=>{b&&v(b.data.location)},[b]),t.jsxs(t.Fragment,{children:[h&&t.jsx("p",{className:"u-no-margin--bottom u-text--muted",children:"Sign in with your Identity provider to complete the attachment process."}),t.jsxs("ul",{className:P(n.list,{[n.list__bordered]:!h}),children:[u&&t.jsx("li",{className:"p-list__item",children:t.jsxs(r.Button,{type:"button",hasIcon:!0,onClick:U,className:n.button,children:[t.jsx(r.Icon,{name:g("ubuntu-one"),className:n.icon}),t.jsx("span",{children:"Sign in with Ubuntu One"})]})}),c&&t.jsx("li",{className:"p-list__item",children:t.jsxs(r.Button,{type:"button",hasIcon:!0,onClick:()=>{i(-1)},className:n.button,children:[t.jsx(r.Icon,{name:g("standalone"),className:n.icon}),t.jsx("span",{children:"Sign in with Enterprise Login"})]})}),d.map(_=>t.jsx("li",{className:"p-list__item",children:t.jsxs(r.Button,{type:"button",hasIcon:!0,onClick:()=>{i(_.id)},className:n.button,children:[t.jsx(r.Icon,{name:g(_.provider),className:n.icon}),t.jsx("span",{children:`Sign in with ${_.name}`})]})},_.id))]})]})};export{F as A,O as u};
