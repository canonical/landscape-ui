import{j as a,g as P,r as v,o as b,Q as j,n as S}from"./index-DMXNEIi7.js";import{T as k}from"./TablePagination-C2Qj9oCi.js";import{P as C,a as N,b as _}from"./useUsns-CNAF_U73.js";import{u as m}from"./usePageParams-0jCHbpdj.js";import{H as I}from"./HeaderWithSearch-AkBGQxEr.js";import"./TablePaginationBase-ilpj99iv.js";import"./useFetchOld-CbtR_FJp.js";const L=[{label:"All",value:""},{label:"Installed",value:"installed"},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],y="_selectContainer_fv5fe_1",A="_actions_fv5fe_6",p={selectContainer:y,actions:A},E=({handleClearSelection:s,selectedPackages:o})=>{const{setPageParams:e,status:r}=m(),t=n=>{e({search:n}),s()},c=n=>{e({status:n}),s()};return a.jsx(I,{onSearch:t,actions:a.jsxs("div",{className:p.actions,children:[a.jsx(P.Select,{label:"Status",wrapperClassName:p.selectContainer,options:L,value:r,onChange:n=>c(n.target.value)}),a.jsx(C,{selectedPackages:o})]})})},H=(s,o)=>{let e;return s===""?e="No packages found":s==="upgrade"?e="No available upgrades found":s==="security"?e="No available security upgrades found":s==="installed"?e="No installed packages found":e="No held packages found",o?`${e} with the search "${o}"`:e},U=()=>{const[s,o]=v.useState([]),{instanceId:e,childInstanceId:r}=b(),{status:t,search:c,currentPage:n,pageSize:i}=m(),{getInstancePackagesQuery:f}=N(),{state:d}=j(),h=Number(r??e),g=()=>{o([])},{data:l,isLoading:u}=f({instance_id:h,search:c,limit:i,offset:(n-1)*i,available:!1,installed:t==="installed"||!t||void 0,upgrade:t==="upgrade"||void 0,held:t==="held"||void 0,security:t==="security"||void 0});return a.jsxs(a.Fragment,{children:[!c&&!t&&n===1&&i===20&&u&&a.jsx(S,{}),(c||t||n!==1||i!==20||!u)&&a.jsxs(a.Fragment,{children:[a.jsx(E,{selectedPackages:s,handleClearSelection:g}),a.jsx(_,{packages:(l==null?void 0:l.data.results)??[],packagesLoading:u,selectedPackages:s,onPackagesSelect:x=>{o(x)},emptyMsg:H(t,c),selectAll:(d==null?void 0:d.selectAll)??!1})]}),a.jsx(k,{handleClearSelection:g,totalItems:l==null?void 0:l.data.count,currentItemCount:l==null?void 0:l.data.results.length})]})};export{U as default};
