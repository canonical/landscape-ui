const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-JWuy6Gju.js","assets/index-Bwatsl1G.js","assets/index-BwHlIK4o.css","assets/useInstances-CvI7zscF.js","assets/useFetchOld--qBGHGTA.js","assets/useRoles-f6kdZUNk.js","assets/NoData-CcX6zdBS.js","assets/usePageParams-gxSf1nMa.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{f,j as e,g as i,L as x,m as b,r as p,n as g,_ as h,e as I,d as j,a as P,E as k}from"./index-Bwatsl1G.js";import{P as L,a as S,b as w}from"./PageMain-CJJxVTE6.js";import"./usePageParams-gxSf1nMa.js";import{S as m}from"./InstancesPageActions-0XsW5-wX.js";import{u as v}from"./useInstances-CvI7zscF.js";import"./index-C_rp6kpZ.js";import"./TablePagination-CYwNZA2E.js";import"./TablePaginationBase-Ds3XrZnG.js";import"./StatusFilter-BlNgJH3S.js";import"./TableFilter-DyxtB4xw.js";import"./TableFilterChips-t7GEBfEp.js";import"./useFetchOld--qBGHGTA.js";import"./NoData-CcX6zdBS.js";import"./helpers-Q9GvzaAC.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="168d8c49-e369-4da1-9d63-23e1f1f7c5a1",t._sentryDebugIdIdentifier="sentry-dbid-168d8c49-e369-4da1-9d63-23e1f1f7c5a1")}catch{}const A="_listItem_upezw_1",E="_listItem__link_upezw_9",u={listItem:A,listItem__link:E},N=p.lazy(()=>h(()=>import("./index-JWuy6Gju.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),T=({alerts:t,pendingInstances:s})=>{const{setSidePanelContent:r}=f(),a=()=>{r("Review Pending Instances",e.jsx(p.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(N,{instances:s})}),"large")},l=t.map((o,c)=>{const n=m[o.alert_type]||m.Unknown;return e.jsxs("div",{className:u.listItem,children:[e.jsx(i.Icon,{name:`${n.icon.color??n.icon.gray}`}),n.alertType==="PendingComputersAlert"?e.jsxs(i.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:a,children:[`${s.length} pending `,s.length!==1?"computers need ":"computer needs ","authorization"]}):e.jsx(x,{to:`/instances?status=${n.filterValue}`,className:b("u-no-margin u-no-padding",u.listItem__link),children:o.summary})]},n.alertType||c)});return e.jsx(i.List,{items:l})};function C(){const t=I();return{getAlertsSummaryQuery:()=>j({queryKey:["alert","summary"],queryFn:()=>t.get("alerts/summary")})}}const Y=()=>{const t=P(),{getAlertsSummaryQuery:s}=C(),{getPendingInstancesQuery:r}=v(),{data:a,isLoading:l}=s(),{data:o,isLoading:c}=r(void 0,{enabled:!!(a!=null&&a.data.alerts_summary.find(_=>_.alert_type==="PendingComputersAlert"))}),n=(a==null?void 0:a.data.alerts_summary)||[],y=(o==null?void 0:o.data)||[],d=l||c;return e.jsxs(L,{children:[e.jsx(S,{title:"Alerts"}),e.jsxs(w,{children:[d&&e.jsx(g,{}),!d&&n.length===0&&e.jsx(k,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[e.jsx(i.Button,{appearance:"positive",onClick:()=>t("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!d&&n.length>0&&e.jsx(T,{alerts:n,pendingInstances:y})]})]})};export{Y as default};
