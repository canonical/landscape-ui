const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-VcLXxSiD.js","assets/index-BMhnQnvO.js","assets/index-BPqj2aAr.css","assets/formik.esm-CIbWtvkk.js","assets/index.esm-Cg6cKhK8.js","assets/FileInput-BnEKcqHU.js","assets/SidePanelFormButtons-Sm5GAIF2.js","assets/SidePanelFormButtons.module-D1MffuBu.js","assets/SidePanelFormButtons-5RbWRdTr.css","assets/index-UIx74X9c.js","assets/moment-BcE1DmV8.js","assets/TablePagination-BdWPaBG6.js","assets/TablePagination.module-DLVph1Z1.js","assets/TablePagination-JK-zjkSx.css","assets/usePageParams-C2gko9oh.js","assets/EmptyState-ClMN1u86.js","assets/EmptyState-BNXajmMK.css","assets/SearchHelpPopup-ufAPkkhr.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/useFetchOld-Cff5y19B.js","assets/useMutation-Diy-BhWO.js","assets/useQuery-Dxk6aJEc.js","assets/useConfirm-DBWWlNvT.js","assets/NoData-D_FYardG.js","assets/index-D7AnmhC7.css","assets/useInstances-CmnK8qSQ.js","assets/HeaderWithSearch-CYHrik7-.js","assets/HeaderWithSearch-CCRO5bRP.css"])))=>i.map(i=>d[i]);
import{r as d,_ as b,f as v,j as e,g as r,k as w,c as I,d as Q,e as W}from"./index-BMhnQnvO.js";import{E as L}from"./EmptyState-ClMN1u86.js";import{u as F}from"./useConfirm-DBWWlNvT.js";import{u as P}from"./useInstances-CmnK8qSQ.js";import{u as D}from"./useFetchOld-Cff5y19B.js";import{u as l}from"./useMutation-Diy-BhWO.js";import{u as j}from"./useQuery-Dxk6aJEc.js";import{H as k}from"./HeaderWithSearch-CYHrik7-.js";import{u as E}from"./usePageParams-C2gko9oh.js";const R=d.lazy(()=>b(()=>import("./index-VcLXxSiD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),U=()=>{const{setSidePanelContent:t}=v(),a=()=>{t("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(R,{})}))};return e.jsx(L,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(r.Button,{appearance:"positive",type:"button",onClick:a,children:e.jsx("span",{children:"Install new WSL instance"})},"install-new-instance-button")]})},N=()=>{const t=I(),a=D(),i=Q(),m=(s={},o={})=>j({queryKey:["wsl",s],queryFn:()=>i.get("computers/wsl-hosts",{params:s}),...o}),c=l({mutationFn:({parent_id:s,...o})=>i.post(`computers/${s}/children`,o),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),u=l({mutationFn:s=>a.get("DeleteChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),h=l({mutationFn:s=>a.get("SetDefaultChildComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),p=l({mutationFn:s=>a.get("ShutdownHostComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),y=l({mutationFn:s=>a.get("StartChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),x=l({mutationFn:s=>a.get("StopChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])});return{createChildInstanceQuery:c,deleteChildInstancesQuery:u,getWslInstanceNamesQuery:(s,o={})=>j({queryKey:["wsl-instance-names"],queryFn:()=>i.get("wsl-instance-names"),...o}),getWslHostsQuery:m,setDefaultChildInstanceQuery:h,shutdownHostInstanceQuery:p,startChildInstancesQuery:y,stopChildInstancesQuery:x}},T="_cta_hpksw_1",B={cta:T},H=d.lazy(()=>b(()=>import("./index-VcLXxSiD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),G=({selectedInstances:t})=>{const{setPageParams:a}=E(),i=W(),{setSidePanelContent:m}=v(),{confirmModal:c,closeConfirmModal:u}=F(),{deleteChildInstancesQuery:h}=N(),{removeInstancesQuery:p}=P(),{mutateAsync:y}=h,{mutateAsync:x}=p,g=async()=>{try{await y({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},s=()=>{const n=t.length!==1?"This will permanently delete selected instances from both the Windows host machine and Landscape.":e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]});c({title:t.length!==1?"Delete instances":"Delete instance",body:n,buttons:[e.jsx(r.Button,{appearance:"negative",onClick:g,children:"Delete"},"delete")]})},o=async()=>{try{await x({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},C=()=>{const n=t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),_=t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape";c({title:_,body:n,buttons:[e.jsx(r.Button,{appearance:"negative",onClick:o,children:"Remove"},"remove")]})},f=()=>{m("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(H,{})}))},S=n=>{a({search:n})};return e.jsx(k,{onSearch:S,actions:e.jsxs("div",{className:B.cta,children:[e.jsx(r.Button,{type:"button",onClick:f,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(r.Button,{type:"button",className:"p-segmented-control__button",onClick:s,disabled:t.length===0,children:e.jsx("span",{children:"Delete instance"})}),e.jsx(r.Button,{type:"button",className:"p-segmented-control__button",onClick:C,disabled:t.length===0,children:e.jsx("span",{children:"Remove from Landscape"})})]})})]})})};export{G as W,U as a,N as u};
