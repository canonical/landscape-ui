import{V as l,a as d,W as g,X as h,i as p,Y as x,j as e,Z as m,L as _}from"./index-58XCQrHI.js";const j="_container_1uszo_1",A={container:j},S=()=>{const[s]=l(),{redirectToExternalUrl:a,setAuthLoading:r,setUser:i}=d(),{getAuthStateWithUbuntuOneQuery:o}=g(),u=h(),{data:t,isLoading:c}=o({url:window.location.toString()},{enabled:s.size>0});return p.useEffect(()=>{if(!(!t||!("current_account"in t.data)))if(t.data.return_to?.external&&t.data.return_to.url)a(t.data.return_to.url,{replace:!0});else{r(!0),i(t.data);const n=new URL(t.data.return_to?.url??x,location.origin);u(n.toString().replace(n.origin,""),{replace:!0})}},[t,a]),e.jsx("div",{className:A.container,children:c?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:m}),e.jsx(_,{to:"/login",className:"p-button",children:"Back to login"})]})})};export{S as default};
