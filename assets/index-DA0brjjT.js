import{f as j,j as t,g as a,R as p,h as f,r as h,p as g,a as P}from"./index-Bwv21umG.js";import{P as I,a as y,b}from"./PageMain-e3QUHu3w.js";import{S as m}from"./constants-C0eAoEXY.js";import N from"./index-DvPNxFIL.js";import{u as k}from"./useAlerts-DFWCMbBF.js";import{E as L}from"./EmptyState-BVaENBo3.js";import{u as A}from"./useInstances-zDlqbUFb.js";import"./useConfirm-C8SdOzvQ.js";import"./useRoles-CEVrDnUF.js";import"./useFetchOld-CLIuhBjP.js";import"./useMutation-J8RvGgz_.js";import"./useQuery-Dt9EUPCN.js";import"./moment-Cws0WeZv.js";const S="_listItem_5dsnu_1",v="_listItem__link_5dsnu_9",d={listItem:S,listItem__link:v},C=({alerts:i,pendingInstances:n})=>{const{setSidePanelContent:o}=j(),e=()=>{o("Review Pending Instances",t.jsx(h.Suspense,{fallback:t.jsx(g,{}),children:t.jsx(N,{instances:n})}),"large")},r=i.map(s=>t.jsxs("div",{className:d.listItem,children:[t.jsx("i",{className:`p-icon--${m[s.alert_type].icon.color}`}),s.alert_type==="PendingComputersAlert"?t.jsxs(a.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:e,children:[`${n.length} pending `,n.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(a.Link,{href:`${p}instances?status=${m[s.alert_type].filterValue}`,className:f("u-no-margin u-no-padding",d.listItem__link),children:s.summary})]},s.alert_type));return t.jsx(a.List,{items:r})},E=()=>{const i=P(),{getAlertsSummaryQuery:n}=k(),{getPendingInstancesQuery:o}=A(),{data:e,isLoading:r}=n(),{data:s,isInitialLoading:u}=o(void 0,{enabled:!!(e!=null&&e.data.alerts_summary.find(x=>x.alert_type==="PendingComputersAlert"))}),l=(e==null?void 0:e.data.alerts_summary)||[],_=(s==null?void 0:s.data)||[],c=r||u;return t.jsxs(I,{children:[t.jsx(y,{title:"Alerts"}),t.jsxs(b,{children:[c&&t.jsx(g,{}),!c&&l.length===0&&t.jsx(L,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(a.Button,{appearance:"positive",onClick:()=>i(`${p}settings/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!c&&l.length>0&&t.jsx(C,{alerts:l,pendingInstances:_})]})]})},Y=E;export{Y as default};
