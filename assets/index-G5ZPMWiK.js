import{e as _,l as b,f as P,r as S,j as s,g as i}from"./index-DXs1haZl.js";import{u as x}from"./formik.esm-CwYJvJSO.js";import{A as y}from"./AssociationBlock-bGiZRSmg.js";import{S as h}from"./SidePanelFormButtons-Dtg_vQ52.js";import{u as A}from"./index-DUm5A9qd.js";import{u as j}from"./useRoles-CGNtMKpq.js";import{c as k,a as c,d as F,b as D}from"./index.esm-FGh7VWBq.js";import"./MultiSelectField-26Sjy70t.js";import"./MultiSelectField.module-D1r8qo_i.js";import"./useInstances-B3fQT90b.js";import"./useFetchOld-DWTVWZGf.js";import"./useMutation-CoMMCR6r.js";import"./useQuery-DPA9mHwu.js";import"./AssociationBlock.module-BSYf3X0u.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import"./PageMain-DhSBVwHg.js";import"./InfoItem-BQPTGwVs.js";import"./InfoItem.module-BZ3tYMsb.js";import"./useConfirm-C9Ai5vPv.js";import"./HeaderWithSearch-OzYSSkOw.js";import"./HeaderWithSearch.module-ByXjIdeN.js";import"./SidePanelTablePagination-BVUfufsF.js";import"./TablePagination.module-DLVph1Z1.js";import"./EmptyState-BYL1pVz2.js";import"./usePageParams-BJqFm8Ol.js";const I={access_group:"",all_computers:!1,description:"",tags:[],title:""},$=k().shape({access_group:c(),all_computers:F(),description:c(),tags:D().of(c()),title:c()}),E=({profile:e})=>{const u=_(),{notify:l}=b(),{closeSidePanel:m}=P(),{getAccessGroupQuery:n}=j(),{copyPackageProfileQuery:d}=A(),{mutateAsync:g}=d,{data:a}=n(),p=(a==null?void 0:a.data.map(({name:o,title:r})=>({label:r,value:o})))??[];p.unshift({label:"Select access group",value:""});const t=x({initialValues:I,onSubmit:async o=>{const r={all_computers:o.all_computers,access_group:o.access_group,copy_from:e.title,description:o.description,title:o.title};!o.all_computers&&o.tags.length>0&&(r.tags=o.tags);try{await g(r),m(),l.success({message:`Profile "${e.title}" duplicated successfully`,title:"Profile duplicated"})}catch(f){u(f)}},validationSchema:$});return S.useEffect(()=>{e&&t.setValues({access_group:e.access_group,all_computers:e.all_computers,description:e.description,tags:e.tags,title:`${e.title} (copy)`})},[e]),s.jsxs(i.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(i.Input,{type:"text",label:"Name",required:!0,...t.getFieldProps("title"),error:t.touched.title&&t.errors.title?t.errors.title:void 0}),s.jsx(i.Input,{type:"text",label:"Description",required:!0,autoComplete:"off",...t.getFieldProps("description"),error:t.touched.description&&t.errors.description?t.errors.description:void 0}),s.jsx(i.Select,{label:"Access group",...t.getFieldProps("access_group"),options:p,error:t.touched.access_group&&t.errors.access_group?t.errors.access_group:void 0}),s.jsx(y,{formik:t}),s.jsx(h,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Duplicate"})]})},st=E;export{st as default};
