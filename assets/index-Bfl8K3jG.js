const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BcKAs5MX.js","assets/index-DHbl-CCi.js","assets/index-tBQFzVrl.css","assets/AssociationBlock-Do3F-jfS.js","assets/MultiSelectField-B3yKIE4v.js","assets/MultiSelectField-GyNA33om.css","assets/useInstances-CUSJv4Ud.js","assets/AssociationBlock-DQBJa-xL.css","assets/SidePanelFormButtons-NGTDJtpv.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/useRoles-B7NZVQZu.js","assets/PageMain-BjXt8C80.js","assets/PageMain--v5xNZ5p.css","assets/HeaderWithSearch-cWh3cSzk.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/index-BkP3mq0s.css","assets/index-gTC3yQB0.js","assets/index-_v2C-3Y0.css"])))=>i.map(i=>d[i]);
import{f as _,e as b,g as x,h as C,y as S,z as E,l as v,af as F,j as e,ak as L,a2 as A,r,o as u,_ as p,c as O,ab as T,m as f,N as Q,E as k,aj as w}from"./index-DHbl-CCi.js";import{P as M,a as D,b as N}from"./PageMain-BjXt8C80.js";import{u as $}from"./useRoles-B7NZVQZu.js";import{H}from"./HeaderWithSearch-cWh3cSzk.js";function j(){const o=_(),a=b(),n=x({mutationFn:async s=>a.get("CreateRemovalProfile",{params:s}),onSuccess:async()=>o.invalidateQueries({queryKey:["removalProfiles"]})}),d=x({mutationFn:async s=>a.get("EditRemovalProfile",{params:s}),onSuccess:async()=>o.invalidateQueries({queryKey:["removalProfiles"]})}),l=x({mutationFn:async s=>a.get("RemoveRemovalProfile",{params:s}),onSuccess:async()=>o.invalidateQueries({queryKey:["removalProfiles"]})});return{createRemovalProfileQuery:n,editRemovalProfileQuery:d,removeRemovalProfileQuery:l,getRemovalProfilesQuery:(s={},i={})=>C({queryKey:["removalProfiles"],queryFn:async()=>a.get("GetRemovalProfiles",{params:s}),...i})}}const B=r.lazy(async()=>p(()=>import("./index-BcKAs5MX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),q=({profile:o})=>{const a=S(),{notify:n}=E(),{setSidePanelContent:d}=v(),{removeRemovalProfileQuery:l}=j(),{value:m,setTrue:s,setFalse:i}=F(),{mutateAsync:P,isPending:t}=l,c=async()=>{try{await P({name:o.name}),i(),n.success({message:`${o.title} profile removed successfully`,title:"Removal profile removed"})}catch(y){a(y)}},g=y=>{d(`Edit ${o.title} profile`,e.jsx(r.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(B,{action:"edit",profile:y})}))},R=[{icon:"edit",label:"Edit","aria-label":`Edit "${o.title}" profile`,onClick:()=>{g(o)}}],h=[{icon:"delete",label:"Remove","aria-label":`Remove "${o.title}" profile`,onClick:s}];return e.jsxs(e.Fragment,{children:[e.jsx(L,{toggleAriaLabel:`${o.title} profile actions`,actions:R,destructiveActions:h}),e.jsx(A,{isOpen:m,title:"Remove package profile",confirmationText:`remove ${o.name}`,confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:t,confirmButtonLoading:t,onConfirm:c,close:i,children:e.jsxs("p",{children:['This will remove "',o.title,'" profile. This action is'," ",e.jsx("b",{children:"irreversible"}),"."]})})]})},z="_truncated_1799b_1",I={truncated:z},K=r.lazy(async()=>p(()=>import("./index-gTC3yQB0.js"),__vite__mapDeps([17,1,2,12,13,11,14,15,18]))),V=({profiles:o})=>{const{search:a}=O(),{setSidePanelContent:n}=v(),{getAccessGroupQuery:d}=$(),{data:l}=d(),m=(l==null?void 0:l.data.map(({name:t,title:c})=>({label:c,value:t})))??[],s=r.useMemo(()=>a?o.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())):o,[o,a]),i=t=>{n(t.title,e.jsx(r.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(K,{accessGroupOptions:m,profile:t})}))},P=r.useMemo(()=>[{accessor:"title",Header:"Name",Cell:({row:{original:t}})=>e.jsx(f.Button,{type:"button",appearance:"link",onClick:()=>{i(t)},className:"u-no-margin--bottom u-no-padding--top","aria-label":`Open "${t.title}" profile details`,children:t.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:t}})=>{var c;return e.jsx(e.Fragment,{children:((c=m.find(g=>g.value===t.access_group))==null?void 0:c.label)??t.access_group})}},{accessor:"tags",className:I.truncated,Header:"Tags",Cell:({row:{original:t}})=>t.tags.join(", ")||e.jsx(Q,{})},{accessor:"associated",Header:"Associated"},{...T,Cell:({row:{original:t}})=>e.jsx(q,{profile:t})}],[s]);return e.jsx(f.ModularTable,{columns:P,data:s,emptyMsg:`No removal profiles found with the search: "${a}"`})},G=r.lazy(()=>p(()=>import("./index-BcKAs5MX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),U=()=>{const{setSidePanelContent:o}=v(),a=()=>{o("Add removal profile",e.jsx(r.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(G,{action:"add"})}))};return e.jsx(k,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You havenâ€™t added any removal profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(f.Button,{appearance:"positive",onClick:a,type:"button",children:"Add removal profile"},"table-add-new-mirror")],title:"No removal profiles found"})},W=()=>e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(w,{filtersToDisplay:["search"]})]}),Y=r.lazy(()=>p(()=>import("./index-BcKAs5MX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),J=o=>e.jsx(r.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(Y,{...o})}),X=()=>{const{getRemovalProfilesQuery:o}=j(),{data:a,isLoading:n}=o();return e.jsxs(e.Fragment,{children:[n&&e.jsx(u,{}),!n&&(!a||a.data.length===0)&&e.jsx(U,{}),!n&&a&&a.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(V,{profiles:a.data})]})]})},Z=()=>{const{setSidePanelContent:o}=v(),a=()=>{o("Add removal profile",e.jsx(J,{action:"add"}))};return e.jsxs(M,{children:[e.jsx(D,{title:"Removal profiles",actions:[e.jsx(f.Button,{type:"button",appearance:"positive",onClick:a,children:"Add removal profile"},"add")]}),e.jsx(N,{children:e.jsx(X,{})})]})},se=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{se as i,j as u};
