import{y as x,l as f,A as h,C as y,G as i,j as r,m as o}from"./index-Q7_P6QJX.js";import{S as A}from"./SidePanelFormButtons-BqhcAbDz.js";import{u as D}from"./useRoles-D5p8Vk3F.js";import{g as u}from"./formikErrors-Bw8iTXYS.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as F}from"./constants-BRd_UPlY.js";import"./SidePanelFormButtons.module-D2P5PizG.js";const _={name:"",access_group:""},v=()=>{const c=x(),{closeSidePanel:m}=f(),{createDistributionQuery:l,getDistributionsQuery:p}=F(),{getAccessGroupQuery:d}=D(),{mutateAsync:b}=l,{data:{data:g}={data:[]}}=d(),S=g.map(t=>({label:t.title,value:t.name})),{data:s}=p({include_latest_sync:!0}),e=h({initialValues:_,validationSchema:y().shape({name:i().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:s},test:t=>!((s==null?void 0:s.data)??[]).some(({name:a})=>a==t),message:"It must be unique within the account."}),access_group:i()}),onSubmit:async t=>{try{await b(t),m()}catch(a){c(a)}}});return r.jsxs(o.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(o.Input,{type:"text",label:"Distribution name",required:!0,...e.getFieldProps("name"),error:u(e,"name")}),r.jsx(o.Select,{label:"Access group",options:[{label:"Select access group",value:""},...S],...e.getFieldProps("access_group"),error:u(e,"access_group")}),r.jsx(A,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Add distribution"})]})};export{v as default};
