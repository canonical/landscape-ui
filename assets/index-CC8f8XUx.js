import{j as s,r as h,o as y,J as P,n as k}from"./index-BWDSuVdc.js";import{T as x}from"./TablePagination-B-je2IEH.js";import{P as I,a as j,b as S}from"./usePackages-D55McjMX.js";import{u as v}from"./usePageParams-Bts0F2BK.js";import{S as T}from"./StatusFilter-BJ1mp4rK.js";import{T as _}from"./TableFilterChips-BuKzUo5Y.js";import{H as N}from"./HeaderWithSearch-BVVpyzCJ.js";import"./TablePaginationBase-BhH1Qvbp.js";import"./useFetchOld-BrEW1db4.js";import"./TableFilter-B1PCZQ69.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="59e8e68c-edab-43a9-b1be-fb348fac086b",e._sentryDebugIdIdentifier="sentry-dbid-59e8e68c-edab-43a9-b1be-fb348fac086b")}catch{}const g=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],w="_actions_dhdem_1",L={actions:w},A=({handleClearSelection:e,selectedPackages:a})=>s.jsxs(s.Fragment,{children:[s.jsx(N,{afterSearch:e,actions:s.jsxs("div",{className:L.actions,children:[s.jsx(T,{options:g}),s.jsx(I,{selectedPackages:a})]})}),s.jsx(_,{filtersToDisplay:["search","status"],statusOptions:g})]}),D=(e,a)=>{let t;return e===""?t="No packages found":e==="upgrade"?t="No available upgrades found":e==="security"?t="No available security upgrades found":e==="installed"?t="No installed packages found":t="No held packages found",a?`${t} with the search "${a}"`:t},J=()=>{const[e,a]=h.useState([]),{instanceId:t,childInstanceId:p}=y(),{status:n,search:c,currentPage:i,pageSize:o}=v(),{getInstancePackagesQuery:f}=j(),{state:r}=P(),m=Number(p??t),d=()=>{a([])},{data:{data:l}={data:{count:0,results:[]}},isLoading:u}=f({instance_id:m,search:c,limit:o,offset:i*o-o,installed:!n||void 0,upgrade:n==="upgrade"||void 0,held:n==="held"||void 0,security:n==="security"||void 0});return s.jsxs(s.Fragment,{children:[!c&&!n&&i===1&&o===20&&u?s.jsx(k,{}):s.jsxs(s.Fragment,{children:[s.jsx(A,{selectedPackages:e,handleClearSelection:d}),s.jsx(S,{packages:l.results,packagesLoading:u,selectedPackages:e,onPackagesSelect:b=>{a(b)},emptyMsg:D(n,c),selectAll:!!(r!=null&&r.selectAll)})]}),s.jsx(x,{handleClearSelection:d,totalItems:l.count,currentItemCount:l.results.length})]})};export{J as default};
