const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-ClD7-ypJ.js","assets/index-DAg1o-hl.js","assets/index-_cqP-NZ4.css","assets/useInstances-By10VFXi.js","assets/useFetchOld-CgHla_fb.js","assets/useRoles-uJJuagDr.js","assets/NoData-DSLoqvtK.js","assets/moment-FynXb_Ke.js","assets/index-CoQBeqtS.css"])))=>i.map(i=>d[i]);
import{r as p,_ as h,i as j,j as t,d as o,L as P,R as g,c as I,o as _,h as f,g as b,a as L,E as S}from"./index-DAg1o-hl.js";import{P as k,a as A,b as E}from"./PageMain-8B-RmEE7.js";import{S as d}from"./InstancesPageActions-GByMpPfP.js";import"./moment-C5S46NFB.js";import{u as N}from"./useInstances-By10VFXi.js";import"./index-B4hFp1kH.js";import"./moment-FynXb_Ke.js";import"./TablePagination-DarOwDdU.js";import"./TablePagination.module-CgQ3jx4B.js";import"./usePageParams-DGfmjBId.js";import"./TableFilterChips-BOeDSx8n.js";import"./useFetchOld-CgHla_fb.js";import"./NoData-DSLoqvtK.js";const v="_listItem_upezw_1",T="_listItem__link_upezw_9",u={listItem:v,listItem__link:T},C=p.lazy(()=>h(()=>import("./index-ClD7-ypJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),w=({alerts:i,pendingInstances:a})=>{const{setSidePanelContent:r}=j(),s=()=>{r("Review Pending Instances",t.jsx(p.Suspense,{fallback:t.jsx(_,{}),children:t.jsx(C,{instances:a})}),"large")},l=i.map((n,c)=>{const e=d[n.alert_type]||d.Unknown;return t.jsxs("div",{className:u.listItem,children:[t.jsx(o.Icon,{name:`${e.icon.color??e.icon.gray}`}),e.alertType==="PendingComputersAlert"?t.jsxs(o.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:s,children:[`${a.length} pending `,a.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(P,{to:`${g}instances?status=${e.filterValue}`,className:I("u-no-margin u-no-padding",u.listItem__link),children:n.summary})]},e.alertType||c)});return t.jsx(o.List,{items:l})};function $(){const i=f();return{getAlertsSummaryQuery:()=>b({queryKey:["alert","summary"],queryFn:()=>i.get("alerts/summary")})}}const M=()=>{const i=L(),{getAlertsSummaryQuery:a}=$(),{getPendingInstancesQuery:r}=N(),{data:s,isLoading:l}=a(),{data:n,isLoading:c}=r(void 0,{enabled:!!(s!=null&&s.data.alerts_summary.find(x=>x.alert_type==="PendingComputersAlert"))}),e=(s==null?void 0:s.data.alerts_summary)||[],y=(n==null?void 0:n.data)||[],m=l||c;return t.jsxs(k,{children:[t.jsx(A,{title:"Alerts"}),t.jsxs(E,{children:[m&&t.jsx(_,{}),!m&&e.length===0&&t.jsx(S,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(o.Button,{appearance:"positive",onClick:()=>i(`${g}account/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!m&&e.length>0&&t.jsx(w,{alerts:e,pendingInstances:y})]})]})};export{M as default};
