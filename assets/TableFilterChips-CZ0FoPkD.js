import{r as j,j as t,m as L,g as o}from"./index-DNI6uvRV.js";import{u as P}from"./usePageParams-CWR0Fwx8.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="c5d7439d-df10-4780-873a-44c7bd176b2b",e._sentryDebugIdIdentifier="sentry-dbid-c5d7439d-df10-4780-873a-44c7bd176b2b")}catch{}const O=["accessGroups","availabilityZones","os","fromDate","status","tags","toDate","type"],F=e=>e?e.split(",").filter(a=>a.trim()!=="").map(a=>`'${a}'`):[],q=(e,a)=>{const l=a.replace(/^'|'$/g,""),c=e.split(","),n=c.indexOf(l);return n===-1?e:[...c.slice(0,n),...c.slice(n+1)].join(",")},y=(e,a)=>{var l;return((l=e==null?void 0:e.find(c=>c.value===a))==null?void 0:l.label)??a},z=({filtersToMonitor:e,search:a,query:l,...c})=>{const n={totalChipsToRenderCount:0};e.includes("query")?(n.areSearchQueryChipsRender=!!l,n.totalChipsToRenderCount+=l.trim()?l.split(",").length:0):e.includes("search")&&(n.isSearchChipRender=!!a,n.totalChipsToRenderCount+=Number(n.isSearchChipRender));for(const[x,g]of Object.entries(c)){const d=x;if(e.includes(d))if(Array.isArray(g)){const u=`are${d.replace(/^\w/,h=>h.toUpperCase())}ChipsRender`;n[u]=!!g.length,n.totalChipsToRenderCount+=g.length}else{const u=`is${d.replace(/^\w/,b=>b.toUpperCase())}ChipRender`,h=!!g;n[u]=h,n.totalChipsToRenderCount+=Number(h)}}return n},G="_container_6jjiy_1",K="_chipsContainer_6jjiy_8",M="_collapsed_6jjiy_17",Q="_clearAllButton_6jjiy_22",Z="_showLessButton_6jjiy_23",U="_showMoreButton_6jjiy_24",V="_clearAllIcon_6jjiy_39",C={container:G,chipsContainer:K,collapsed:M,clearAllButton:Q,showLessButton:Z,showMoreButton:U,clearAllIcon:V},W=({accessGroupOptions:e,availabilityZonesOptions:a,filtersToDisplay:l,osOptions:c,statusOptions:n,tagOptions:x,typeOptions:g})=>{const[d,u]=j.useState(!1),[h,b]=j.useState(0),E=l??O,R=j.useRef(null),{setPageParams:i,accessGroups:_,availabilityZones:D,fromDate:w,os:N,status:v,tags:B,toDate:T,type:S,search:A,query:$}=P(),k=()=>{i({accessGroups:[],availabilityZones:[],fromDate:"",os:"",status:"",tags:[],toDate:"",type:"",search:"",query:""}),u(!1)},I=()=>{if(!R.current)return;const s=[...R.current.querySelectorAll(".p-chip")];if(!s.length)return b(0);const f=s[0].offsetTop,p=s.filter(({offsetTop:m})=>m>f).length;p===0&&(u(!1),b(0)),b(p)};j.useEffect(()=>(window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}),[]),j.useEffect(()=>{I()},[_.length,D.length,w,h,N,v,B.length,T,S,A]);const r=z({accessGroups:_,availabilityZones:D,filtersToMonitor:E,fromDate:w,os:N,search:A,status:v,tags:B,toDate:T,type:S,query:$});return r.totalChipsToRenderCount===0?null:t.jsxs("div",{className:C.container,children:[t.jsxs("div",{ref:R,className:L(C.chipsContainer,{[C.collapsed]:!d}),children:[r.totalChipsToRenderCount>1&&t.jsxs(o.Button,{type:"button",appearance:"link",hasIcon:!0,className:C.clearAllButton,onClick:k,children:[t.jsx(o.Icon,{name:"close",className:C.clearAllIcon}),t.jsx("span",{children:"Clear all filters"})]}),r.areSearchQueryChipsRender&&F($).map((s,f)=>t.jsx(o.Chip,{value:`Query: ${s}`,onDismiss:()=>i({query:q($,s)}),className:"u-no-margin--bottom u-no-margin--right"},s+f)),r.isSearchChipRender&&t.jsx(o.Chip,{value:`Search: ${A}`,onDismiss:()=>i({search:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isStatusChipRender&&t.jsx(o.Chip,{value:`Status: ${y(n,v)}`,onDismiss:()=>i({status:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isOsChipRender&&t.jsx(o.Chip,{value:`OS: ${y(c,N)}`,onDismiss:()=>i({os:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.areAvailabilityZonesChipsRender&&D.map((s,f,p)=>t.jsx(o.Chip,{value:`Availability z.: ${y(a,s)}`,onDismiss:()=>i({availabilityZones:p.filter(m=>m!==s)}),className:"u-no-margin--bottom u-no-margin--right"},s)),r.areAccessGroupsChipsRender&&_.map((s,f,p)=>t.jsx(o.Chip,{value:`Access group: ${y(e,s)}`,onDismiss:()=>i({accessGroups:p.filter(m=>m!==s)}),className:"u-no-margin--bottom u-no-margin--right"},s)),r.areTagsChipsRender&&B.map((s,f,p)=>t.jsx(o.Chip,{value:`Tag: ${y(x,s)}`,onDismiss:()=>i({tags:p.filter(m=>m!==s)}),className:"u-no-margin--bottom u-no-margin--right"},s)),r.isFromDateChipRender&&t.jsx(o.Chip,{value:`From: ${w}`,onDismiss:()=>i({fromDate:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isToDateChipRender&&t.jsx(o.Chip,{value:`To: ${T}`,onDismiss:()=>i({toDate:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isTypeChipRender&&t.jsx(o.Chip,{value:`Type: ${y(g,S)}`,onDismiss:()=>i({type:""}),className:"u-no-margin--bottom u-no-margin--right"}),d&&t.jsx(o.Button,{type:"button",appearance:"link",className:C.showLessButton,onClick:()=>u(!1),children:t.jsx("span",{className:"u-text--muted",children:"Show less"})})]}),h>0&&!d&&t.jsx(o.Button,{type:"button",appearance:"link",className:C.showMoreButton,onClick:()=>u(!0),children:t.jsx("span",{className:"u-text--muted",children:`+${h}`})})]})};export{W as T};
