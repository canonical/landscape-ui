import{K as h,N as m,u as x,a as g,T as _,r as E,R as n,P as f,j as t,Q as P,L as S,S as j}from"./index-CNSDWj8Q.js";import{u as v}from"./useGetStandaloneAccount-Bma65hIh.js";import"./constants-DcOGIsSH.js";import"./constants-Byx_TwUc.js";const A="_container_1uszo_1",N={container:A},G=()=>{const[l]=h(),s=m(),{redirectToExternalUrl:a,setUser:r}=x(),{isSelfHosted:i,isSaas:o}=g(),{accountExists:c}=v(),{authData:e,isLoading:d}=_(window.location.toString(),l.size>0);return E.useEffect(()=>{if(!e||!("current_account"in e))return;if(e.return_to?.external&&e.return_to.url){a(e.return_to.url,{replace:!0});return}if(r(e),e.invitation_id){s(n.auth.invitation({secureId:e.invitation_id}),{replace:!0});return}if(e.accounts.length===0){o&&window.location.hostname===j||i&&!c?s(n.auth.createAccount(),{replace:!0}):s(n.auth.noAccess(),{replace:!0});return}const p=e.return_to?.url,u=new URL(p??f,location.origin);s(u.toString().replace(u.origin,""),{replace:!0})},[e,a,s,r,i,c,o]),t.jsx("div",{className:N.container,children:d?t.jsxs("div",{className:"u-align-text--center",children:[t.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[t.jsx("span",{className:"u-off-screen",children:"Loading..."}),t.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),t.jsx("span",{children:"Please wait while your request is being processed..."})]}):t.jsxs("div",{children:[t.jsx("p",{children:P}),t.jsx(S,{to:n.auth.login(),className:"p-button",children:"Back to login"})]})})};export{G as default};
