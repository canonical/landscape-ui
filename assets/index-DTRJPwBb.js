const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index--Pa2oqxa.js","assets/index-CYtilM9P.js","assets/index-DCq_vsqr.css","assets/CodeEditor-z6Eebfrn.js","assets/index-CYu41lMo.js","assets/CodeEditor-CwlLRp3p.css","assets/SidePanelFormButtons-BzdUfBMS.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/usePageParams-ZZvT3eZS.js","assets/EmployeeGroupIdentityIssuerList-CbQ9SgTn.js","assets/TablePagination-BBOB7v53.js","assets/TablePaginationBase-CdWtR2Ho.js","assets/TablePaginationBase-CJl3HN1X.css","assets/TableFilter-Cre4PFKR.js","assets/TableFilter-CNw_lMaf.css","assets/TableFilterChips-Dqh7xIWp.js","assets/TableFilterChips-CHqetGbX.css","assets/HeaderWithSearch-DM4VyiUV.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/TruncatedCell-CmgOKtjr.js","assets/TruncatedCell-CoXbu3VM.css","assets/EmployeeGroupIdentityIssuerList-DJkUyphv.css","assets/index-4Er8Yk3q.css"])))=>i.map(i=>d[i]);
import{e as p,d as _,j as e,g as t,I as c,D as m,f as g,r as d,n as j,_ as b}from"./index-CYtilM9P.js";import{h as x}from"./usePageParams-ZZvT3eZS.js";import{d as v}from"./EmployeeGroupIdentityIssuerList-CbQ9SgTn.js";const F=({id:s,...o})=>{const l=p(),{data:n,isLoading:i}=_({queryKey:["autoinstallFile",{...o}],queryFn:async()=>l.get(`autoinstall/${s}`,{params:o})});return{autoinstallFile:n==null?void 0:n.data,isAutoinstallFileLoading:i}},y=({file:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(t.Row,{className:"u-no-padding",children:[e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Name",value:s.filename})}),e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Version",value:s.version})})]}),e.jsxs(t.Row,{className:"u-no-padding",children:[e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Last modified",value:x(s.last_modified_at).format(m)})}),e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Date created",value:x(s.created_at).format(m)})})]}),e.jsx(c,{label:"Employee groups associated",value:s.groups.map(o=>o.name).join(", ")})]}),I=d.lazy(async()=>b(()=>import("./index--Pa2oqxa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),A=({file:s,viewVersionHistory:o})=>{const{setSidePanelContent:l}=g(),{autoinstallFile:n,isAutoinstallFileLoading:i}=F({id:s.id,with_versions:!0}),r=(n==null?void 0:n.versions.toReversed())??[],u=d.useMemo(()=>[{accessor:"version",Header:"Version",Cell:({row:{original:a}})=>{const h=()=>{l(e.jsx(v,{file:s,version:a.version}),e.jsx(d.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(I,{file:s,goBack:o,versionInfo:a})}))};return e.jsxs(t.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top",onClick:h,children:["Version ",a.version]})}},{accessor:"created_at",Header:"Created at",Cell:({row:{original:{created_at:a}}})=>e.jsx("div",{children:x(a).format(m)})}],[r]);return i?e.jsx(j,{}):e.jsx(t.ModularTable,{columns:u,data:r})},C=[{id:"info",label:"Info"},{id:"version-history",label:"Version history"}],f=({file:s,viewVersionHistory:o,initialTabId:l="info"})=>{const[n,i]=d.useState(l),r=C.map(({label:u,id:a})=>({label:u,active:a===n,role:"tab",onClick:()=>{i(a)}}));return e.jsxs(e.Fragment,{children:[e.jsx(t.Tabs,{links:r}),n==="info"&&e.jsx(y,{file:s}),n==="version-history"&&e.jsx(A,{file:s,viewVersionHistory:o})]})},S=({edit:s,file:o,remove:l,setAsDefault:n,viewVersionHistory:i,initialTabId:r})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button",onClick:s,hasIcon:!0,children:[e.jsx(t.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),!o.is_default&&e.jsxs(e.Fragment,{children:[e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button",onClick:n,hasIcon:!0,children:[e.jsx(t.Icon,{name:"starred"}),e.jsx("span",{children:"Set as default"})]}),e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button",onClick:l,hasIcon:!0,children:[e.jsx(t.Icon,{name:t.ICONS.delete}),e.jsx("span",{children:"Remove"})]})]})]})}),e.jsx(f,{initialTabId:r,file:o,viewVersionHistory:i})]}),E=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{E as i,F as u};
