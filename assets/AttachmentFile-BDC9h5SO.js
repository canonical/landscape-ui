import{i as g,h as j,j as t,n as d,m as a}from"./index-BLZdd84A.js";const x=({attachmentId:s,scriptId:n},o={enabled:!0})=>{const i=g(),{data:e,isLoading:l,refetch:m}=j({queryKey:["scripts","attachment",s],queryFn:async()=>i.get(`scripts/${n}/attachments/${s}`),...o});return{scriptAttachment:(e==null?void 0:e.data)??null,isScriptAttachmentsLoading:l,refetch:m}},y="_attachment_1a6r0_1",A="_attachmentActions_1a6r0_13",_="_actionButton_1a6r0_18",r={attachment:y,attachmentActions:A,actionButton:_},w=({attachmentId:s,filename:n,onInitialAttachmentDelete:o,scriptId:i,className:e})=>{const{isScriptAttachmentsLoading:l,refetch:m}=x({attachmentId:s,scriptId:i||0},{enabled:!1}),p=async()=>{const{data:h}=await m();if(!h)return;const b=new Blob([h.data],{type:"application/octet-stream"}),u=URL.createObjectURL(b),c=document.createElement("a");c.href=u,c.download=n,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(u)};return t.jsxs("span",{className:d(r.attachment,e),children:[t.jsx("span",{children:n}),t.jsxs("div",{className:r.attachmentActions,children:[i?t.jsx(a.Button,{className:d("u-no-margin--bottom u-no-margin--right",r.actionButton),hasIcon:!0,type:"button",onClick:p,disabled:l,appearance:"base","aria-label":`Download ${n}`,children:t.jsx(a.Tooltip,{message:"Download",children:t.jsx(a.Icon,{name:"begin-downloading"})})}):null,o?t.jsx(a.Button,{type:"button",hasIcon:!0,appearance:"base",className:d("u-no-margin--bottom",r.actionButton),"aria-label":`Remove ${n} attachment`,onClick:o,children:t.jsx(a.Tooltip,{message:"Remove",position:"top-center",children:t.jsx(a.Icon,{name:a.ICONS.delete})})}):null]})]})};export{w as A};
