import{p as c,f,h as b,k as g,s as y,j as r,g as o}from"./index-Cgwrw4vf.js";import{S}from"./SidePanelFormButtons-DgoyKUZ8.js";import{g as h}from"./formikErrors-BgJTm8U7.js";import{t as n}from"./tests-BLGo17je.js";import{a as x}from"./constants-Bayn8_OW.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";import"./useFetchOld-D-Nlh7iI.js";import"./usePageParams-Bx23zt7X.js";import"./NoData-CsQjibpg.js";import"./index-BSAzkWo0.js";import"./TablePagination-hxZwHX0l.js";import"./TablePaginationBase-0Yjs9u1P.js";import"./StatusFilter-CRYo5xB6.js";import"./TableFilter-Cf7QWTAd.js";import"./TableFilterChips-OTSvn5O7.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fc93dc97-72d8-4710-8aa0-d045f996623a",e._sentryDebugIdIdentifier="sentry-dbid-fc93dc97-72d8-4710-8aa0-d045f996623a")}catch{}const I={name:""},V=({distribution:e,origin:t})=>{const m=c(),{closeSidePanel:d}=f(),{deriveSeriesQuery:u}=x(),{mutateAsync:l}=u,p=b().shape({name:g().required("This field is required").test({test:n.test,message:n.message}).test({params:{distribution:e},test:i=>!e.series.map(({name:a})=>a).includes(i),message:"It must be unique within the distribution."})}),s=y({validationSchema:p,initialValues:I,onSubmit:async i=>{try{await l({name:i.name,distribution:e.name,origin:t}),d()}catch(a){m(a)}}});return r.jsxs(o.Form,{onSubmit:s.handleSubmit,noValidate:!0,children:[r.jsx(o.Input,{type:"text",label:"Series name",required:!0,...s.getFieldProps("name"),error:h(s,"name")}),r.jsxs("p",{className:"u-text--muted",children:["You are deriving ",e.name,"/",t,"."]}),r.jsx(S,{submitButtonDisabled:s.isSubmitting,submitButtonText:"Derive series"})]})};export{V as default};
