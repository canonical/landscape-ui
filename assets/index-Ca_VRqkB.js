import{p as f,f as h,s as x,h as y,k as a,j as r,g as i}from"./index-CYtilM9P.js";import{S as A}from"./SidePanelFormButtons-BzdUfBMS.js";import{u as D}from"./useRoles-CxRPnarx.js";import{g as u}from"./formikErrors-Bw8iTXYS.js";import{t as m}from"./tests-DFnZqbNV.js";import{u as F}from"./constants-B8nn3mu0.js";import"./SidePanelFormButtons.module-D2P5PizG.js";import"./useFetchOld-DGhJqqp0.js";import"./usePageParams-ZZvT3eZS.js";import"./NoData-1Ct4F_u9.js";import"./index-PQrFIM4i.js";import"./TablePagination-BBOB7v53.js";import"./TablePaginationBase-CdWtR2Ho.js";import"./StatusFilter-B35ZyMlb.js";import"./TableFilter-Cre4PFKR.js";import"./TableFilterChips-Dqh7xIWp.js";const _={name:"",access_group:""},O=()=>{const n=f(),{closeSidePanel:c}=h(),{createDistributionQuery:p,getDistributionsQuery:l}=F(),{getAccessGroupQuery:d}=D(),{mutateAsync:b}=p,{data:{data:g}={data:[]}}=d(),S=g.map(e=>({label:e.title,value:e.name})),{data:s}=l({include_latest_sync:!0}),t=x({initialValues:_,validationSchema:y().shape({name:a().required("This field is required.").test({test:m.test,message:m.message}).test({params:{getDistributionsResponse:s},test:e=>!((s==null?void 0:s.data)??[]).some(({name:o})=>o==e),message:"It must be unique within the account."}),access_group:a()}),onSubmit:async e=>{try{await b(e),c()}catch(o){n(o)}}});return r.jsxs(i.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[r.jsx(i.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:u(t,"name")}),r.jsx(i.Select,{label:"Access group",options:[{label:"Select access group",value:""},...S],...t.getFieldProps("access_group"),error:u(t,"access_group")}),r.jsx(A,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{O as default};
