import{a5 as x,q as A,p as D,t as _,y as h,B as o,j as s,e as a,v as u}from"./index-z5xHjj8b.js";import{S as y}from"./SidePanelFormButtons-CkbaPPEY.js";import{u as f}from"./useRoles-D6qQDMzc.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as F}from"./constants-P_KX4MbP.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./constants-CgBihAJX.js";const E={name:"",access_group:x},N=()=>{const c=A(),{closeSidePanel:m}=D(),{createDistributionQuery:p,getDistributionsQuery:l}=F(),{getAccessGroupQuery:d}=f(),{mutateAsync:b}=p,{data:{data:g}={data:[]}}=d(),S=g.map(e=>({label:e.title,value:e.name})),{data:i}=l({include_latest_sync:!0}),t=_({initialValues:E,validationSchema:h().shape({name:o().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:i},test:e=>!(i?.data??[]).some(({name:r})=>r==e),message:"It must be unique within the account."}),access_group:o()}),onSubmit:async e=>{try{await b(e),m()}catch(r){c(r)}}});return s.jsxs(a.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(a.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:u(t,"name")}),s.jsx(a.Select,{label:"Access group",options:S,...t.getFieldProps("access_group"),error:u(t,"access_group")}),s.jsx(y,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{N as default};
