const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DZLHUDMR.js","assets/index-K2U83YxJ.js","assets/index-C0ZxZ9J6.css","assets/useInstances-BNPdLjb2.js","assets/useFetchOld-skueaXrj.js","assets/useRoles-CHAvRChh.js","assets/NoData-DE16lN-s.js","assets/usePageParams-btTIl-Mq.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{r as p,_ as x,f as j,j as t,g as o,L as h,m as f,n as g,e as I,d as P,a as b,E as L}from"./index-K2U83YxJ.js";import{P as S,a as k,b as A}from"./PageMain-pETsHEwo.js";import"./usePageParams-btTIl-Mq.js";import{S as d}from"./InstancesPageActions-C7OfKg3F.js";import{u as E}from"./useInstances-BNPdLjb2.js";import"./index-BO3qciQE.js";import"./TablePagination-B87KF8DI.js";import"./TablePaginationBase-CHdj3YtJ.js";import"./StatusFilter-BqfQ_NEp.js";import"./TableFilter-Bs4z0Q86.js";import"./TableFilterChips-F9CkWOGf.js";import"./useFetchOld-skueaXrj.js";import"./NoData-DE16lN-s.js";const N="_listItem_upezw_1",v="_listItem__link_upezw_9",u={listItem:N,listItem__link:v},C=p.lazy(()=>x(()=>import("./index-DZLHUDMR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),w=({alerts:i,pendingInstances:n})=>{const{setSidePanelContent:r}=j(),s=()=>{r("Review Pending Instances",t.jsx(p.Suspense,{fallback:t.jsx(g,{}),children:t.jsx(C,{instances:n})}),"large")},l=i.map((a,c)=>{const e=d[a.alert_type]||d.Unknown;return t.jsxs("div",{className:u.listItem,children:[t.jsx(o.Icon,{name:`${e.icon.color??e.icon.gray}`}),e.alertType==="PendingComputersAlert"?t.jsxs(o.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:s,children:[`${n.length} pending `,n.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(h,{to:`/instances?status=${e.filterValue}`,className:f("u-no-margin u-no-padding",u.listItem__link),children:a.summary})]},e.alertType||c)});return t.jsx(o.List,{items:l})};function T(){const i=I();return{getAlertsSummaryQuery:()=>P({queryKey:["alert","summary"],queryFn:()=>i.get("alerts/summary")})}}const O=()=>{const i=b(),{getAlertsSummaryQuery:n}=T(),{getPendingInstancesQuery:r}=E(),{data:s,isLoading:l}=n(),{data:a,isLoading:c}=r(void 0,{enabled:!!(s!=null&&s.data.alerts_summary.find(y=>y.alert_type==="PendingComputersAlert"))}),e=(s==null?void 0:s.data.alerts_summary)||[],_=(a==null?void 0:a.data)||[],m=l||c;return t.jsxs(S,{children:[t.jsx(k,{title:"Alerts"}),t.jsxs(A,{children:[m&&t.jsx(g,{}),!m&&e.length===0&&t.jsx(L,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(o.Button,{appearance:"positive",onClick:()=>i("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!m&&e.length>0&&t.jsx(w,{alerts:e,pendingInstances:_})]})]})};export{O as default};
