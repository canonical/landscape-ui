const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-r5NcXjQ7.js","assets/index-F5ixs2NP.js","assets/index-D38JayDC.css","assets/useInstances-ilOChO3j.js","assets/useFetchOld-IYQtjqtR.js","assets/useRoles-Cwy1oMtZ.js","assets/NoData-D5--INTl.js","assets/usePageParams-ByN77I-a.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{f,j as e,g as o,L as x,m as b,r as p,n as g,_ as h,e as I,d as j,a as P,E as k}from"./index-F5ixs2NP.js";import{P as L,a as S,b as w}from"./PageMain-CxdJyWEW.js";import"./usePageParams-ByN77I-a.js";import{S as m}from"./InstancesPageActions-ZWiagQKD.js";import{u as A}from"./useInstances-ilOChO3j.js";import"./index-Be1OeTg7.js";import"./TablePagination-BrIH39sP.js";import"./TablePaginationBase-CfRQScDE.js";import"./StatusFilter-DZQLeRRj.js";import"./TableFilter-B53U33U0.js";import"./TableFilterChips-5N5Oo-yw.js";import"./useFetchOld-IYQtjqtR.js";import"./NoData-D5--INTl.js";import"./helpers-Bhl8U_1z.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="5d952cda-f057-4e95-881e-e9288c71ad56",t._sentryDebugIdIdentifier="sentry-dbid-5d952cda-f057-4e95-881e-e9288c71ad56")}catch{}const E="_listItem_upezw_1",N="_listItem__link_upezw_9",u={listItem:E,listItem__link:N},v=p.lazy(()=>h(()=>import("./index-r5NcXjQ7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),T=({alerts:t,pendingInstances:s})=>{const{setSidePanelContent:r}=f(),a=()=>{r("Review Pending Instances",e.jsx(p.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(v,{instances:s})}),"large")},l=t.map((i,d)=>{const n=m[i.alert_type]||m.Unknown;return e.jsxs("div",{className:u.listItem,children:[e.jsx(o.Icon,{name:`${n.icon.color??n.icon.gray}`}),n.alertType==="PendingComputersAlert"?e.jsxs(o.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:a,children:[`${s.length} pending `,s.length!==1?"computers need ":"computer needs ","authorization"]}):e.jsx(x,{to:`/instances?status=${n.filterValue}`,className:b("u-no-margin u-no-padding",u.listItem__link),children:i.summary})]},n.alertType||d)});return e.jsx(o.List,{items:l})};function C(){const t=I();return{getAlertsSummaryQuery:()=>j({queryKey:["alert","summary"],queryFn:()=>t.get("alerts/summary")})}}const Y=()=>{const t=P(),{getAlertsSummaryQuery:s}=C(),{getPendingInstancesQuery:r}=A(),{data:a,isLoading:l}=s(),{data:i,isLoading:d}=r(void 0,{enabled:!!(a!=null&&a.data.alerts_summary.find(_=>_.alert_type==="PendingComputersAlert"))}),n=(a==null?void 0:a.data.alerts_summary)||[],y=(i==null?void 0:i.data)||[],c=l||d;return e.jsxs(L,{children:[e.jsx(S,{title:"Alerts"}),e.jsxs(w,{children:[c&&e.jsx(g,{}),!c&&n.length===0&&e.jsx(k,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[e.jsx(o.Button,{appearance:"positive",onClick:()=>t("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!c&&n.length>0&&e.jsx(T,{alerts:n,pendingInstances:y})]})]})};export{Y as default};
