import{a5 as x,y as h,x as A,B as D,k as _,h as a,j as s,d as i}from"./index-CNSDWj8Q.js";import{S as f}from"./SidePanelFormButtons-DIizKTix.js";import{u as y}from"./useRoles-DYJzr0u4.js";import{g as u}from"./formikErrors-Bw8iTXYS.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as F}from"./constants-DvWgdSYC.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useFetchOld-BAAs34Op.js";import"./constants-CDnVvJTb.js";import"./NoData-6ZK9sV5u.js";import"./index-D-YBZSy_.js";import"./TablePagination-CFXNvqsZ.js";import"./TableFilterChips-06YfpJdc.js";import"./PageParamFilter-ChSwlZqZ.js";import"./TableFilter-2AKF5NjJ.js";import"./ResponsiveTable-BXalKviy.js";const E={name:"",access_group:x},C=()=>{const m=h(),{closeSidePanel:c}=A(),{createDistributionQuery:p,getDistributionsQuery:l}=F(),{getAccessGroupQuery:d}=y(),{mutateAsync:b}=p,{data:{data:g}={data:[]}}=d(),S=g.map(e=>({label:e.title,value:e.name})),{data:o}=l({include_latest_sync:!0}),t=D({initialValues:E,validationSchema:_().shape({name:a().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:o},test:e=>!(o?.data??[]).some(({name:r})=>r==e),message:"It must be unique within the account."}),access_group:a()}),onSubmit:async e=>{try{await b(e),c()}catch(r){m(r)}}});return s.jsxs(i.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(i.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:u(t,"name")}),s.jsx(i.Select,{label:"Access group",options:S,...t.getFieldProps("access_group"),error:u(t,"access_group")}),s.jsx(f,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{C as default};
