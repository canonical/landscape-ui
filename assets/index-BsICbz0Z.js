import{h,t as g,k as c,p as v,q as I,f as S,s as x,j as s,g as p}from"./index-PskL3iTG.js";import{M as j}from"./MultiSelectField-BSSSInAh.js";import{S as q}from"./SidePanelFormButtons-DlXpjCdR.js";import{u as A}from"./index-D9gP7aQ9.js";import{u as F}from"./useRoles-BxehRQdH.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";import"./PageMain-Bca32Np2.js";import"./useFetchOld-CYaeEIdJ.js";import"./TablePagination-CD1UC8hD.js";import"./usePageParams-CifSYXVe.js";import"./TablePaginationBase-Bpm64W1F.js";import"./NoData-BmtcbUJB.js";import"./TableFilterChips-Cy3N2xI1.js";import"./HeaderWithSearch-DDEpmpdu.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="cf2c6e83-f01d-452b-8154-14ca7f63baac",t._sentryDebugIdIdentifier="sentry-dbid-cf2c6e83-f01d-452b-8154-14ca7f63baac")}catch{}const w=t=>h().shape({email:c().required("This field is required.").email("Please provide a valid email address").test({name:"unique-email",params:{invitations:t},test:(a,{createError:o,parent:n})=>{const r=t.find(({email:l})=>l===a);return!r||o({message:`${n.name??r.name} is already invited to this account`})}}),name:c().required("This field is required."),roles:g().of(c())}),D={email:"",name:"",roles:[]},Q=()=>{const t=v(),{notify:a}=I(),{getInvitationsQuery:o,inviteAdministratorQuery:n}=A(),{getRolesQuery:r}=F(),{closeSidePanel:l}=S(),{data:d}=o(),{mutateAsync:b}=n,y=async i=>{try{await b(i),l(),a.success({title:"You sent an administrator invite",message:`${i.name} will receive an invitation email`})}catch(u){t(u)}},e=x({initialValues:D,validationSchema:w((d==null?void 0:d.data.results)??[]),onSubmit:y}),{data:m}=r(),f=(m==null?void 0:m.data.map(({name:i})=>({label:i,value:i})))??[];return s.jsxs(p.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[s.jsx("p",{children:"An invitation, sent by email, contains a link a prospective administrator can use to join this account."}),s.jsx(p.Input,{type:"text",label:"Name",autoComplete:"off",required:!0,...e.getFieldProps("name"),error:e.touched.name&&e.errors.name?e.errors.name:void 0}),s.jsx(p.Input,{type:"email",label:"Email address",autoComplete:"off",required:!0,...e.getFieldProps("email"),error:e.touched.email&&e.errors.email?e.errors.email:void 0}),s.jsx(j,{variant:"condensed",label:"Roles",items:f,selectedItems:f.filter(({value:i})=>e.values.roles.includes(i)),onItemsUpdate:i=>e.setFieldValue("roles",i.map(({value:u})=>u))}),s.jsx(q,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Send invite"})]})};export{Q as default};
