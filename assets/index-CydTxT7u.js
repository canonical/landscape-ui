const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Da25mOIA.js","assets/index-BLZdd84A.js","assets/index-DyfkgHlR.css","assets/CodeEditor-BxWEjXvT.js","assets/index-hQx3i3uj.js","assets/CodeEditor-CwlLRp3p.css","assets/SidePanelFormButtons-BADKKUMW.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/EmployeeGroupIdentityIssuerList-DWedjLJj.js","assets/HeaderWithSearch-DG0zrpzf.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/TruncatedCell-Bf9evOgO.js","assets/TruncatedCell-CoXbu3VM.css","assets/EmployeeGroupIdentityIssuerList-DJkUyphv.css","assets/index-4Er8Yk3q.css"])))=>i.map(i=>d[i]);
import{i as p,h as _,j as e,m as t,I as c,v as m,D as x,l as b,r as d,o as j,_ as g}from"./index-BLZdd84A.js";import{d as v}from"./EmployeeGroupIdentityIssuerList-DWedjLJj.js";const F=({id:s,...o})=>{const l=p(),{data:n,isLoading:i}=_({queryKey:["autoinstallFile",{...o}],queryFn:async()=>l.get(`autoinstall/${s}`,{params:o})});return{autoinstallFile:n==null?void 0:n.data,isAutoinstallFileLoading:i}},y=({file:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(t.Row,{className:"u-no-padding",children:[e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Name",value:s.filename})}),e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Version",value:s.version})})]}),e.jsxs(t.Row,{className:"u-no-padding",children:[e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Last modified",value:m(s.last_modified_at).format(x)})}),e.jsx(t.Col,{size:6,children:e.jsx(c,{label:"Date created",value:m(s.created_at).format(x)})})]}),e.jsx(c,{label:"Employee groups associated",value:s.groups.map(o=>o.name).join(", ")})]}),I=d.lazy(async()=>g(()=>import("./index-Da25mOIA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),A=({file:s,viewVersionHistory:o})=>{const{setSidePanelContent:l}=b(),{autoinstallFile:n,isAutoinstallFileLoading:i}=F({id:s.id,with_versions:!0}),r=(n==null?void 0:n.versions.toReversed())??[],u=d.useMemo(()=>[{accessor:"version",Header:"Version",Cell:({row:{original:a}})=>{const h=()=>{l(e.jsx(v,{file:s,version:a.version}),e.jsx(d.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(I,{file:s,goBack:o,versionInfo:a})}))};return e.jsxs(t.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top",onClick:h,children:["Version ",a.version]})}},{accessor:"created_at",Header:"Created at",Cell:({row:{original:{created_at:a}}})=>e.jsx("div",{children:m(a).format(x)})}],[r]);return i?e.jsx(j,{}):e.jsx(t.ModularTable,{columns:u,data:r})},C=[{id:"info",label:"Info"},{id:"version-history",label:"Version history"}],S=({file:s,viewVersionHistory:o,initialTabId:l="info"})=>{const[n,i]=d.useState(l),r=C.map(({label:u,id:a})=>({label:u,active:a===n,role:"tab",onClick:()=>{i(a)}}));return e.jsxs(e.Fragment,{children:[e.jsx(t.Tabs,{links:r}),n==="info"&&e.jsx(y,{file:s}),n==="version-history"&&e.jsx(A,{file:s,viewVersionHistory:o})]})},T=({edit:s,file:o,remove:l,setAsDefault:n,viewVersionHistory:i,initialTabId:r})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button",onClick:s,hasIcon:!0,children:[e.jsx(t.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),!o.is_default&&e.jsxs(e.Fragment,{children:[e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button",onClick:n,hasIcon:!0,children:[e.jsx(t.Icon,{name:"starred"}),e.jsx("span",{children:"Set as default"})]}),e.jsxs(t.Button,{type:"button",className:"p-segmented-control__button",onClick:l,hasIcon:!0,children:[e.jsx(t.Icon,{name:t.ICONS.delete}),e.jsx("span",{children:"Remove"})]})]})]})}),e.jsx(S,{initialTabId:r,file:o,viewVersionHistory:i})]}),k=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{k as i,F as u};
