const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CN2bbOq2.js","assets/index-DAg1o-hl.js","assets/index-_cqP-NZ4.css","assets/FileInput-DOtb0fR8.js","assets/SidePanelFormButtons-DpWiVTI8.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/index-B4hFp1kH.js","assets/moment-FynXb_Ke.js","assets/TablePagination-DarOwDdU.js","assets/TablePagination.module-CgQ3jx4B.js","assets/TablePagination-DTa7xTwu.css","assets/usePageParams-DGfmjBId.js","assets/TableFilterChips-BOeDSx8n.js","assets/TableFilterChips-Bkpu0rSB.css","assets/useFetchOld-CgHla_fb.js","assets/NoData-DSLoqvtK.js","assets/index-WbRrN-Yr.css","assets/useInstances-By10VFXi.js","assets/HeaderWithSearch-Cj6UX8NR.js","assets/HeaderWithSearch-DQybm8h_.css"])))=>i.map(i=>d[i]);
import{r as d,_ as b,i as j,j as e,E as C,d as u,o as w,e as S,h as _,f as r,g as x,q as Q}from"./index-DAg1o-hl.js";import{u as I}from"./useInstances-By10VFXi.js";import{u as L}from"./useFetchOld-CgHla_fb.js";import{H as W}from"./HeaderWithSearch-Cj6UX8NR.js";import{u as P}from"./usePageParams-DGfmjBId.js";const q=d.lazy(()=>b(()=>import("./index-CN2bbOq2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),A=()=>{const{setSidePanelContent:n}=j(),s=()=>{n("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(q,{})}))};return e.jsx(C,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(u.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},F=()=>{const n=S(),s=L(),o=_(),m=(t={},i={})=>x({queryKey:["wsl",t],queryFn:()=>o.get("computers/wsl-hosts",{params:t}),...i}),h=r({mutationFn:({parent_id:t,...i})=>o.post(`computers/${t}/children`,i),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),p=r({mutationFn:t=>s.get("DeleteChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),y=r({mutationFn:t=>s.get("SetDefaultChildComputer",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),l=r({mutationFn:t=>s.get("ShutdownHostComputer",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),g=r({mutationFn:t=>s.get("StartChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),c=r({mutationFn:t=>s.get("StopChildComputers",{params:t}),onSuccess:()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:h,deleteChildInstancesQuery:p,getWslInstanceNamesQuery:(t,i={})=>x({queryKey:["wsl-instance-names"],queryFn:()=>o.get("wsl-instance-names"),...i}),getWslHostsQuery:m,setDefaultChildInstanceQuery:y,shutdownHostInstanceQuery:l,startChildInstancesQuery:g,stopChildInstancesQuery:c}},D="_cta_hpksw_1",K={cta:D},B=d.lazy(()=>b(()=>import("./index-CN2bbOq2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),H=({selectedInstances:n})=>{const{setPageParams:s}=P(),o=Q(),{setSidePanelContent:m}=j(),{deleteChildInstancesQuery:h}=F(),{removeInstancesQuery:p}=I(),{mutateAsync:y,isPending:l}=h,{mutateAsync:g,isPending:c}=p,f=async()=>{try{await y({computer_ids:n.map(({id:a})=>a)})}catch(a){o(a)}},t=async()=>{try{await g({computer_ids:n.map(({id:a})=>a)})}catch(a){o(a)}},i=()=>{m("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(B,{})}))},v=a=>{s({search:a})};return e.jsx(W,{onSearch:v,actions:e.jsxs("div",{className:K.cta,children:[e.jsx(u.Button,{type:"button",onClick:i,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(u.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Delete instances":"Delete instance",children:n.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:n[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:f},children:"Delete instance"}),e.jsx(u.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:n.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:n[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:c,confirmButtonLoading:c,onConfirm:t},children:"Remove from Landscape"})]})})]})})};export{H as W,A as a,F as u};
