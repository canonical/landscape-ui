const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-NACw-8X4.js","assets/index-DYykpNVa.js","assets/index-hef1aQzf.css","assets/useGPGKeys-DzOwP1o9.js","assets/useFetchOld-BGD2hIpr.js","assets/tests-DFnZqbNV.js","assets/SidePanelFormButtons-Aj5ThB2m.js","assets/SidePanelFormButtons.module-CcPyiogC.js","assets/SidePanelFormButtons-DP4HE5AU.css","assets/formikErrors-Bw8iTXYS.js","assets/PageMain-BnPck7ZK.js","assets/PageMain-30196XJe.css","assets/constants-CXofZZ4i.js","assets/ResponsiveTable-C-8YbfBJ.js","assets/ResponsiveTable-Czda4kFo.css"])))=>i.map(i=>d[i]);
import{z as g,g as P,j as e,ab as b,d as i,r as c,y as f,e as d,E as h,$ as x}from"./index-DYykpNVa.js";import{P as j,a as _,b as k}from"./PageMain-BnPck7ZK.js";import{L as v}from"./constants-CXofZZ4i.js";import{R as C}from"./ResponsiveTable-C-8YbfBJ.js";import{u as p}from"./useGPGKeys-DzOwP1o9.js";const L=({gpgKey:s})=>{const a=g(),{removeGPGKeyQuery:n}=p(),{value:t,setTrue:o,setFalse:r}=P(),{mutateAsync:u,isPending:l}=n,y=async()=>{try{await u({name:s.name})}catch(G){a(G)}finally{r()}};return e.jsxs(e.Fragment,{children:[e.jsx(b,{toggleAriaLabel:`${s.name} GPG key actions`,destructiveActions:[{icon:i.ICONS.delete,label:"Remove","aria-label":`Remove ${s.name} GPG key`,onClick:o}]}),t&&e.jsx(i.ConfirmationModal,{close:r,title:`Deleting ${s.name} GPG key`,confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:l,confirmButtonDisabled:l,onConfirm:y,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."})})]})},A="_fingerprint_wf9ay_1",T="_accessType_wf9ay_10",m={fingerprint:A,accessType:T},w=s=>{const a={};switch(s.column.id){case"name":a.role="rowheader";break;case"has_secret":a["aria-label"]="Access type";break;case"fingerprint":a["aria-label"]="Fingerprint";break;case"actions":a["aria-label"]="Actions";break}return a},S=({items:s})=>{const a=c.useMemo(()=>s,[s.length]),n=c.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"has_secret",Header:"Access type",className:m.accessType,Cell:({row:t})=>t.original.has_secret?"Private":"Public"},{accessor:"fingerprint",Header:"Fingerprint",className:m.fingerprint},{...v,Cell:({row:t})=>e.jsx(L,{gpgKey:t.original})}],[a]);return e.jsx(C,{columns:n,data:a,getCellProps:w,emptyMsg:"You have no GPG keys yet."})},M=c.lazy(async()=>x(()=>import("./index-NACw-8X4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(s=>({default:s.NewGPGKeyForm}))),N=()=>{const{setSidePanelContent:s}=f(),{getGPGKeysQuery:a}=p(),{data:n,isLoading:t}=a(),o=n?.data??[],r=()=>{s("Import GPG key",e.jsx(c.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(M,{})}))};return e.jsxs(j,{children:[e.jsx(_,{title:"GPG keys",actions:[e.jsx(i.Button,{appearance:"positive",onClick:r,type:"button","aria-label":"Import GPG key",children:"Import key"},"new-key-button")]}),e.jsxs(k,{hasTable:!0,children:[t&&e.jsx(d,{}),!t&&o.length===0&&e.jsx(h,{title:"No GPG keys found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You haven't added any GPG keys yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage GPG keys in Landscape"})]}),cta:[e.jsx(i.Button,{appearance:"positive",onClick:r,type:"button","aria-label":"Import GPG key",children:"Import key"},"table-add-new-mirror")]}),!t&&o.length>0&&e.jsx(S,{items:o})]})]})},F=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}));export{S as G,F as i};
