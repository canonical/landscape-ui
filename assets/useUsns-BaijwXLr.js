import{u as F}from"./useFetchOld-Dx05gkab.js";import{c as y,d as m,e as v}from"./index-aXCRV7My.js";import{u as o}from"./useMutation-DTawIE4_.js";import{u as i}from"./useQuery-BbzlNKqA.js";const f=()=>{const t=y(),n=F(),c=m(),r=v(),g=(e,u={})=>i({queryKey:["packages",e],queryFn:()=>c.get("packages",{params:e}),...u}),p=({instance_id:e,...u},l={})=>i({queryKey:["packages",{instance_id:e,...u}],queryFn:()=>c.get(`computers/${e}/packages`,{params:u}),...l}),s=o({mutationKey:["packages","install"],mutationFn:e=>n.get("InstallPackages",{params:e}),onSuccess:()=>{t.invalidateQueries(["packages"]).catch(r)}}),a=o({mutationKey:["packages","install"],mutationFn:e=>n.get("RemovePackages",{params:e}),onSuccess:()=>{t.invalidateQueries(["packages"]).catch(r)}}),k=o({mutationKey:["packages","upgrade"],mutationFn:e=>n.get("UpgradePackages",{params:e}),onSuccess:()=>{t.invalidateQueries(["packages"]).catch(r)}}),d=({instanceId:e,packageName:u},l={})=>i({queryKey:["packages",{instanceId:e,packageName:u}],queryFn:()=>c.get(`computers/${e}/packages/installed/${u}/downgrades`),...l}),Q=o({mutationFn:({instanceId:e,...u})=>c.post(`computers/${e}/packages/installed`,u),onSuccess:()=>{t.invalidateQueries(["packages"]).catch(r)}});return{getPackagesQuery:g,getInstancePackagesQuery:p,installPackagesQuery:s,removePackagesQuery:a,upgradePackagesQuery:k,getDowngradePackageVersionsQuery:d,downgradePackageVersionQuery:Q}};function $(){const t=y(),n=m(),c=(s,a={})=>i({queryKey:["usns",s],queryFn:()=>n.get("usns",{params:s}),...a}),r=({usn:s,...a},k={})=>i({queryKey:["usnPackages",{usn:s,...a}],queryFn:()=>n.get(`usns/${s}`,{params:a}),...k}),g=o({mutationFn:({instanceId:s,...a})=>n.post(`/computers/${s}/usns/upgrade-packages`,a),onSuccess:()=>Promise.all([t.invalidateQueries(["usns"]),t.invalidateQueries(["activities"])])}),p=o({mutationFn:({instanceId:s,...a})=>n.post(`/computers/${s}/usns/remove-packages`,a),onSuccess:()=>Promise.all([t.invalidateQueries(["usns"]),t.invalidateQueries(["activities"])])});return{getUsnsQuery:c,getAffectedPackagesQuery:r,upgradeUsnPackagesQuery:g,removeUsnPackagesQuery:p}}export{f as a,$ as u};
