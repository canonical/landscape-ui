import{r as o,j as c,k as R}from"./index-BMhnQnvO.js";import{U as C}from"./UsnList-DDpKnMX7.js";import{u as L}from"./useUsns-Dw6dj2_v.js";import"./moment-BcE1DmV8.js";import"./SelectAllButton-D_BMBSCB.js";import"./ExpandableTableFooter-9RPwl5aD.js";import"./NoData-D_FYardG.js";import"./TablePagination-BdWPaBG6.js";import"./TablePagination.module-DLVph1Z1.js";import"./usePageParams-C2gko9oh.js";import"./TruncatedCell-iDjT0CSt.js";import"./useConfirm-DBWWlNvT.js";import"./helpers-BQ6A_CwO.js";import"./useOnClickOutside-B6njW3aZ.js";import"./useFetchOld-Cff5y19B.js";import"./useMutation-Diy-BhWO.js";import"./useQuery-Dxk6aJEc.js";const j=({excludedUsns:n,instances:m,onExcludedUsnsChange:p})=>{const[a,f]=o.useState(0),[s,g]=o.useState([]),i=o.useRef(0),u=o.useRef(-1),{getUsnsQuery:U}=L(),{data:r,isLoading:l}=U({computer_ids:m.map(({id:t})=>t),show_packages:!1,limit:5,offset:a});o.useEffect(()=>{!r||a===u.current||(i.current=r.data.count,u.current=a,g(t=>[...t,...r.data.results]))},[r]);const h=t=>{p(s.filter(({usn:e})=>!t.includes(e)).map(({usn:e})=>e))},S=s.filter(({usn:t})=>!n.includes(t)).map(({usn:t})=>t),d=o.useMemo(()=>{const t=new Set(s.map(({usn:e})=>e));return n.length>0&&n.some(e=>!t.has(e))},[n.length,s]);return l&&!s.length?c.jsx(R,{}):c.jsx(C,{tableType:"expandable",onNextPageFetch:()=>f(t=>t+5),instances:m,isUsnsLoading:l,onSelectedUsnsChange:h,onSelectAllClick:()=>p([]),selectedUsns:S,showSelectAllButton:d,totalSelectedUsnCount:i.current-n.length,totalUsnCount:i.current,usns:s})},q=j;export{q as default};
