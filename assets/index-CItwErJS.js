const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DXjCFIWL.js","assets/index-CAxb-9CO.js","assets/index-DXB7zdRE.css","assets/useGPGKeys-BrcIH-8i.js","assets/tests-DFnZqbNV.js","assets/SidePanelFormButtons-THQX_GYS.js","assets/SidePanelFormButtons.module-BuIu-Bem.js","assets/SidePanelFormButtons-CmV-sWf7.css","assets/PageMain-DA-yLzkU.js","assets/PageMain-CIunaku7.css"])))=>i.map(i=>d[i]);
import{p as P,a5 as g,j as e,av as b,d as i,i as c,al as h,n as f,v as d,E as x,a3 as j}from"./index-CAxb-9CO.js";import{P as _,a as k,b as v}from"./PageMain-DA-yLzkU.js";import{u as m}from"./useGPGKeys-BrcIH-8i.js";const C=({gpgKey:a})=>{const s=P(),{removeGPGKeyQuery:t}=m(),{value:n,setTrue:o,setFalse:r}=g(),{mutateAsync:u,isPending:l}=t,y=async()=>{try{await u({name:a.name})}catch(G){s(G)}finally{r()}};return e.jsxs(e.Fragment,{children:[e.jsx(b,{toggleAriaLabel:`${a.name} GPG key actions`,destructiveActions:[{icon:i.ICONS.delete,label:"Remove","aria-label":`Remove ${a.name} GPG key`,onClick:o}]}),n&&e.jsx(i.ConfirmationModal,{close:r,title:`Deleting ${a.name} GPG key`,confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:l,confirmButtonDisabled:l,onConfirm:y,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."})})]})},A="_fingerprint_wf9ay_1",L="_accessType_wf9ay_10",p={fingerprint:A,accessType:L},w=a=>{const s={};switch(a.column.id){case"name":s.role="rowheader";break;case"has_secret":s["aria-label"]="Access type";break;case"fingerprint":s["aria-label"]="Fingerprint";break;case"actions":s["aria-label"]="Actions";break}return s},M=({items:a})=>{const s=c.useMemo(()=>a,[a.length]),t=c.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"has_secret",Header:"Access type",className:p.accessType,Cell:({row:n})=>n.original.has_secret?"Private":"Public"},{accessor:"fingerprint",Header:"Fingerprint",className:p.fingerprint},{...h,Cell:({row:n})=>e.jsx(C,{gpgKey:n.original})}],[s]);return e.jsx(i.ModularTable,{columns:t,data:s,getCellProps:w,emptyMsg:"You have no GPG keys yet."})},S=c.lazy(async()=>j(()=>import("./index-DXjCFIWL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(a=>({default:a.NewGPGKeyForm}))),T=()=>{const{setSidePanelContent:a}=f(),{getGPGKeysQuery:s}=m(),{data:t,isLoading:n}=s(),o=t?.data??[],r=()=>{a("Import GPG key",e.jsx(c.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(S,{})}))};return e.jsxs(_,{children:[e.jsx(k,{title:"GPG keys",actions:[e.jsx(i.Button,{appearance:"positive",onClick:r,type:"button","aria-label":"Import GPG key",children:"Import key"},"new-key-button")]}),e.jsxs(v,{children:[n&&e.jsx(d,{}),!n&&o.length===0&&e.jsx(x,{title:"No GPG keys found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You haven't added any GPG keys yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage GPG keys in Landscape"})]}),cta:[e.jsx(i.Button,{appearance:"positive",onClick:r,type:"button","aria-label":"Import GPG key",children:"Import key"},"table-add-new-mirror")]}),!n&&o.length>0&&e.jsx(M,{items:o})]})]})},B=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{M as G,B as i};
