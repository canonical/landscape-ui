import{j as s,au as x,ao as j,P as S,c as v,av as I,p as k,aq as b}from"./index-ClpWheCJ.js";import{P as y,a as N,b as T}from"./useUsns-CyIXJW_Q.js";import{H as A}from"./HeaderWithSearch-_YLksuYx.js";import{u as F}from"./useSelection-BWzbFIDM.js";import"./ResponsiveButtons-Og1fsUVd.js";const p=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],L="_actions_dhdem_1",_={actions:L},H=({handleClearSelection:a,selectedPackages:t})=>s.jsxs(s.Fragment,{children:[s.jsx(A,{afterSearch:a,actions:s.jsxs("div",{className:_.actions,children:[s.jsx(x,{options:p}),s.jsx(y,{selectedPackages:t})]})}),s.jsx(j,{filtersToDisplay:["search","status"],statusOptions:p})]}),C=(a,t)=>{let e;return a===""?e="No packages found":a==="upgrade"?e="No available upgrades found":a==="security"?e="No available security upgrades found":a==="installed"?e="No installed packages found":e="No held packages found",e=t?`${e} with the search "${t}"`:e,`${e}.`},q=()=>{const{instanceId:a,childInstanceId:t}=S(),{status:e,search:n,currentPage:d,pageSize:l}=v(),{getInstancePackagesQuery:h}=N(),{state:i}=I(),P=Number(t??a),{data:c,isLoading:o}=h({instance_id:P,search:n,limit:l,offset:d*l-l,installed:!e||void 0,upgrade:e==="upgrade"||void 0,held:e==="held"||void 0,security:e==="security"||void 0}),r=(c==null?void 0:c.data.results)??[],{selectedItems:u,setSelectedItems:g}=F(r,o),m=()=>{g([])};return s.jsxs(s.Fragment,{children:[!n&&!e&&d===1&&l===20&&o?s.jsx(k,{}):s.jsxs(s.Fragment,{children:[s.jsx(H,{selectedPackages:u,handleClearSelection:m}),s.jsx(T,{packages:r,packagesLoading:o,selectedPackages:u,onPackagesSelect:f=>{g(f)},emptyMsg:C(e,n),selectAll:!!(i!=null&&i.selectAll)})]}),s.jsx(b,{handleClearSelection:m,totalItems:c==null?void 0:c.data.count,currentItemCount:r.length})]})};export{q as default};
