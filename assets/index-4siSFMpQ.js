const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-JgSgmXKq.js","assets/index-DkIHWTfF.js","assets/index-CzVsEpc2.css","assets/useInstances-B5hmrkA3.js","assets/useFetchOld-KI2N6r1n.js","assets/useRoles-CoL0L3hj.js","assets/NoData-CZYP_gPp.js","assets/moment-D4pxJ0jH.js","assets/index-CoQBeqtS.css"])))=>i.map(i=>d[i]);
import{r as u,_ as h,i as I,j as t,h as i,R as g,g as P,s as _,a as y,E as f}from"./index-DkIHWTfF.js";import{P as b,a as k,b as L}from"./PageMain-BPJSTfWp.js";import{S as m}from"./PendingInstancesNotification-Bb5vODcp.js";import{u as v}from"./useAlerts-CJ5otLH2.js";import{u as A}from"./useInstances-B5hmrkA3.js";import"./useFetchOld-KI2N6r1n.js";const E="_listItem_upezw_1",N="_listItem__link_upezw_9",p={listItem:E,listItem__link:N},S=u.lazy(()=>h(()=>import("./index-JgSgmXKq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),T=({alerts:o,pendingInstances:a})=>{const{setSidePanelContent:r}=I(),e=()=>{r("Review Pending Instances",t.jsx(u.Suspense,{fallback:t.jsx(_,{}),children:t.jsx(S,{instances:a})}),"large")},l=o.map((n,c)=>{const s=m[n.alert_type]||m.Unknown;return t.jsxs("div",{className:p.listItem,children:[t.jsx(i.Icon,{name:`${s.icon.color??s.icon.gray}`}),s.alertType==="PendingComputersAlert"?t.jsxs(i.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:e,children:[`${a.length} pending `,a.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(i.Link,{href:`${g}instances?status=${s.filterValue}`,className:P("u-no-margin u-no-padding",p.listItem__link),children:n.summary})]},s.alertType||c)});return t.jsx(i.List,{items:l})},G=()=>{const o=y(),{getAlertsSummaryQuery:a}=v(),{getPendingInstancesQuery:r}=A(),{data:e,isLoading:l}=a(),{data:n,isInitialLoading:c}=r(void 0,{enabled:!!(e!=null&&e.data.alerts_summary.find(j=>j.alert_type==="PendingComputersAlert"))}),s=(e==null?void 0:e.data.alerts_summary)||[],x=(n==null?void 0:n.data)||[],d=l||c;return t.jsxs(b,{children:[t.jsx(k,{title:"Alerts"}),t.jsxs(L,{children:[d&&t.jsx(_,{}),!d&&s.length===0&&t.jsx(f,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(i.Button,{appearance:"positive",onClick:()=>o(`${g}settings/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!d&&s.length>0&&t.jsx(T,{alerts:s,pendingInstances:x})]})]})};export{G as default};
