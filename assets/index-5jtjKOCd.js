import{p as y,f as h,s as S,h as D,k as u,j as a,g as n}from"./index-BWDSuVdc.js";import{S as _}from"./SidePanelFormButtons-C7maNMEA.js";import{u as x}from"./useRoles-CrVoQhRg.js";import{g as c}from"./formikErrors-BhPg4HXw.js";import{t as m}from"./tests-q88Rdak8.js";import{u as I}from"./constants-BiU2XIF5.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";import"./useFetchOld-BrEW1db4.js";import"./usePageParams-Bts0F2BK.js";import"./NoData-B3Q3EXVi.js";import"./index-Dth2zyxz.js";import"./TablePagination-B-je2IEH.js";import"./TablePaginationBase-BhH1Qvbp.js";import"./StatusFilter-BJ1mp4rK.js";import"./TableFilter-B1PCZQ69.js";import"./TableFilterChips-BuKzUo5Y.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="b11b45c1-9e05-4430-ba43-6ceaa5c27f4e",e._sentryDebugIdIdentifier="sentry-dbid-b11b45c1-9e05-4430-ba43-6ceaa5c27f4e")}catch{}const w={name:"",access_group:""},O=()=>{const e=y(),{closeSidePanel:r}=h(),{createDistributionQuery:d,getDistributionsQuery:l}=I(),{getAccessGroupQuery:p}=x(),{mutateAsync:b}=d,{data:{data:g}={data:[]}}=p(),f=g.map(s=>({label:s.title,value:s.name})),{data:o}=l({include_latest_sync:!0}),t=S({initialValues:w,validationSchema:D().shape({name:u().required("This field is required.").test({test:m.test,message:m.message}).test({params:{getDistributionsResponse:o},test:s=>!((o==null?void 0:o.data)??[]).some(({name:i})=>i==s),message:"It must be unique within the account."}),access_group:u()}),onSubmit:async s=>{try{await b(s),r()}catch(i){e(i)}}});return a.jsxs(n.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[a.jsx(n.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:c(t,"name")}),a.jsx(n.Select,{label:"Access group",options:[{label:"Select access group",value:""},...f],...t.getFieldProps("access_group"),error:c(t,"access_group")}),a.jsx(_,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{O as default};
