import{e as P,l as h,f as b,j as a,g as r,h as t}from"./index-DiCHGiBf.js";import{S as g}from"./SidePanelFormButtons-BHrpF6eW.js";import{u as f}from"./ApiCredentialsTables.module-eWLDdo1B.js";import{u as x}from"./formik.esm-Bu_XSuDa.js";import{c as _,a as d}from"./index.esm-D13Ro0EO.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import"./useMutation-GmxqXKvs.js";import"./useQuery-CpQuVpeO.js";const C="_passwordConstraint_bwsgb_1",j="_passed_bwsgb_7",S="_failed_bwsgb_13",o={passwordConstraint:C,passed:j,default:"_default_bwsgb_10",failed:S},v=()=>{const n=P(),{notify:w}=h(),{closeSidePanel:c}=b(),{changePassword:i}=f(),{mutateAsync:u,isLoading:l}=i,s=x({initialValues:{currentPassword:"",newPassword:""},validationSchema:_().shape({currentPassword:d().required("This field is required"),newPassword:d().required("This field is required").min(8,"Password must be at least 8 characters long").max(50,"Password must be at most 50 characters long").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[0-9]/,"Password must contain at least one number")}),onSubmit:async e=>{try{await u({password:e.currentPassword,new_password:e.newPassword}),c(),w.success({message:"Password changed successfully"})}catch(p){n(p)}}}),m=[{label:"8-50 characters",passed:s.values.newPassword.length>=8&&s.values.newPassword.length<=50},{label:"Lower case letters (a-z)",passed:/[a-z]/.test(s.values.newPassword)},{label:"Upper case letters (A-Z)",passed:/[A-Z]/.test(s.values.newPassword)},{label:"Numbers (0-9)",passed:/[0-9]/.test(s.values.newPassword)}];return a.jsxs(r.Form,{noValidate:!0,onSubmit:s.handleSubmit,children:[a.jsx(r.Input,{label:"Current password",type:"password",required:!0,autoComplete:"current-password",error:s.touched.currentPassword&&s.errors.currentPassword?s.errors.currentPassword:void 0,...s.getFieldProps("currentPassword")}),a.jsx(r.PasswordToggle,{required:!0,id:"new-password",label:"New password",autoComplete:"new-password",error:s.touched.newPassword&&s.errors.newPassword&&s.errors.newPassword==="This field is required"?s.errors.newPassword:void 0,...s.getFieldProps("newPassword")}),a.jsxs(a.Fragment,{children:[a.jsx("span",{className:t("u-text--muted"),children:"Password must contain"}),m.map(e=>a.jsxs("span",{className:t(o.passwordConstraint,{[o.passed]:e.passed,[o.default]:!e.passed&&!s.touched.newPassword,[o.failed]:!e.passed&&s.errors.newPassword&&s.touched.newPassword}),children:[a.jsx(r.Icon,{name:e.passed?"success":s.errors.newPassword&&s.touched.newPassword?"error":"information"}),e.label]},e.label))]}),a.jsx(g,{submitButtonDisabled:l,submitButtonText:"Save changes"})]})},D=v;export{D as default};
