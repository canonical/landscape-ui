const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ch5xRa63.js","assets/index-JmUiQLT0.js","assets/index-CcmRCwcv.css","assets/SidePanelFormButtons-C1lvjmQv.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/useGPGKeys-DCOeAsTh.js","assets/tests-DFnZqbNV.js","assets/useRoles-TLpbBTfo.js","assets/useAPTSources-CttIrEel.js","assets/PageMain-Od9y7FSL.js","assets/PageMain--v5xNZ5p.css","assets/index-Cz9CfuJq.css"])))=>i.map(i=>d[i]);
import{y as P,r as l,j as e,m as n,l as b,o as d,E as A,_ as h}from"./index-JmUiQLT0.js";import{P as x,a as _,b as j}from"./PageMain-Od9y7FSL.js";import{u as m}from"./useAPTSources-CttIrEel.js";const T="_line_1ilcn_1",y="_accessGroup_1ilcn_10",f="_actions_1ilcn_19",u={line:T,accessGroup:y,actions:f},S=o=>{const s={};switch(o.column.id){case"name":s.role="rowheader";break;case"access_group":s["aria-label"]="Access group";break;case"line":s["aria-label"]="Line";break;case"id":s["aria-label"]="Actions";break}return s},v=({items:o})=>{const{removeAPTSourceQuery:s}=m(),t=P(),{mutateAsync:c,isPending:a}=s,i=async r=>{try{await c({name:r})}catch(g){t(g)}},p=l.useMemo(()=>[{accessor:"name",Header:"Name"},{accessor:"access_group",Header:"Access group",className:u.accessGroup},{accessor:"line",Header:"Line",className:u.line},{accessor:"id",className:u.actions,Cell:({row:r})=>e.jsx(n.ConfirmationButton,{className:"u-no-margin--bottom u-no-padding--left is-small has-icon",type:"button",appearance:"base","aria-label":`Remove ${r.original.name} APT source`,confirmationModalProps:{title:`Deleting ${r.original.name} APT source`,children:e.jsx("p",{children:"Are you sure? This action is permanent and cannot be undone."}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonLoading:a,confirmButtonDisabled:a,onConfirm:()=>i(r.original.name)},children:e.jsx(n.Tooltip,{position:"btm-center",message:"Delete",children:e.jsx(n.Icon,{name:n.ICONS.delete})})})}],[]);return e.jsx(n.ModularTable,{columns:p,data:l.useMemo(()=>o,[o.length]),emptyMsg:"No APT sources yet.",getCellProps:S})},N=l.lazy(async()=>h(()=>import("./index-Ch5xRa63.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(o=>({default:o.NewAPTSourceForm}))),C=()=>{const{setSidePanelContent:o}=b(),{getAPTSourcesQuery:s}=m(),{data:t,isLoading:c}=s(),a=(t==null?void 0:t.data)??[],i=()=>{o("Add APT source",e.jsx(l.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(N,{})}))};return e.jsxs(x,{children:[e.jsx(_,{title:"APT sources",actions:[e.jsx(n.Button,{appearance:"positive",onClick:i,type:"button",children:"Add APT source"},"new-key-button")]}),e.jsxs(j,{children:[c&&e.jsx(d,{}),!c&&a.length===0&&e.jsx(A,{title:"No APT sources found",icon:"connected",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any APT sources yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/repositories",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage APT sources in Landscape"})]}),cta:[e.jsx(n.Button,{appearance:"positive",onClick:i,type:"button",children:"Add APT source"},"table-add-new-mirror")]}),!c&&a.length>0&&e.jsx(v,{items:a})]})]})},B=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{v as A,B as i};
