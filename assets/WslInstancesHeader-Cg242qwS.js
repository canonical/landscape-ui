const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BO1PSQMQ.js","assets/index-C2CrV7un.js","assets/index-QfA8j4AK.css","assets/FileInput-Bx4avn47.js","assets/SidePanelFormButtons-UqidgTgg.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/index-D4Rkw-2D.js","assets/usePageParams-CGotMuT_.js","assets/TablePagination-C-LtO-XF.js","assets/TablePaginationBase-BoEBIE0u.js","assets/TablePaginationBase-CJl3HN1X.css","assets/StatusFilter-DOmcLkWP.js","assets/TableFilter-BTCc9CgQ.js","assets/TableFilter-DXBG6q86.css","assets/TableFilterChips-Bszkqs56.js","assets/TableFilterChips-CHqetGbX.css","assets/useFetchOld-BG_IjMzi.js","assets/NoData-BK7rIN6I.js","assets/index-geI-abAU.css","assets/useInstances-CYl5HarH.js","assets/HeaderWithSearch-BcXoYkZs.js","assets/HeaderWithSearch-C2lwo0VI.css"])))=>i.map(i=>d[i]);
import{f as g,j as e,E as j,g as c,r as u,n as w,_ as x,b as v,e as _,c as i,d as f,p as C}from"./index-C2CrV7un.js";import{u as I}from"./useInstances-CYl5HarH.js";import{u as Q}from"./useFetchOld-BG_IjMzi.js";import{H as S}from"./HeaderWithSearch-BcXoYkZs.js";import"./usePageParams-CGotMuT_.js";import{T as L}from"./TableFilterChips-Bszkqs56.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="b69693c4-204b-4eec-b9d5-cfa2b10a7a59",t._sentryDebugIdIdentifier="sentry-dbid-b69693c4-204b-4eec-b9d5-cfa2b10a7a59")}catch{}const W=u.lazy(()=>x(()=>import("./index-BO1PSQMQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),N=()=>{const{setSidePanelContent:t}=g(),s=()=>{t("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(W,{})}))};return e.jsx(j,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(c.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},D=()=>{const t=v(),s=Q(),o=_(),d=(n={},a={})=>f({queryKey:["wsl",n],queryFn:()=>o.get("computers/wsl-hosts",{params:n}),...a}),m=i({mutationFn:({parent_id:n,...a})=>o.post(`computers/${n}/children`,a),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),h=i({mutationFn:n=>s.get("DeleteChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),r=i({mutationFn:n=>s.get("SetDefaultChildComputer",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),p=i({mutationFn:n=>s.get("ShutdownHostComputer",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),l=i({mutationFn:n=>s.get("StartChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),y=i({mutationFn:n=>s.get("StopChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:m,deleteChildInstancesQuery:h,getWslInstanceNamesQuery:(n,a={})=>f({queryKey:["wsl-instance-names"],queryFn:()=>o.get("wsl-instance-names"),...a}),getWslHostsQuery:d,setDefaultChildInstanceQuery:r,shutdownHostInstanceQuery:p,startChildInstancesQuery:l,stopChildInstancesQuery:y}},F="_cta_hpksw_1",q={cta:F},P=u.lazy(()=>x(()=>import("./index-BO1PSQMQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),A=({selectedInstances:t})=>{const s=C(),{setSidePanelContent:o}=g(),{deleteChildInstancesQuery:d}=D(),{removeInstancesQuery:m}=I(),{mutateAsync:h,isPending:r}=d,{mutateAsync:p,isPending:l}=m,y=async()=>{try{await h({computer_ids:t.map(({id:a})=>a)})}catch(a){s(a)}},b=async()=>{try{await p({computer_ids:t.map(({id:a})=>a)})}catch(a){s(a)}},n=()=>{o("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(P,{})}))};return e.jsxs(e.Fragment,{children:[e.jsx(S,{actions:e.jsxs("div",{className:q.cta,children:[e.jsx(c.Button,{type:"button",onClick:n,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(c.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:t.length===0,confirmationModalProps:{title:t.length!==1?"Delete instances":"Delete instance",children:t.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:r,confirmButtonLoading:r,onConfirm:y},children:"Delete instance"}),e.jsx(c.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:t.length===0,confirmationModalProps:{title:t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:b},children:"Remove from Landscape"})]})})]})}),e.jsx(L,{filtersToDisplay:["search"]})]})};export{A as W,N as a,D as u};
