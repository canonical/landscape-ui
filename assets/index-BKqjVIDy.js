const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-1wGKaD8n.js","assets/index-Dfc97QGW.js","assets/index-CBwtg6kZ.css","assets/SidePanelFormButtons-BdOP5SSP.js","assets/SidePanelFormButtons.module-CcPyiogC.js","assets/SidePanelFormButtons-DP4HE5AU.css","assets/InfoItem-DImpX37B.js","assets/NoData-DMN9LLPq.js","assets/Truncated-D8EZCoK1.js","assets/Truncated-uqJp6ujM.css","assets/InfoItem-D8nPzgUA.css","assets/useEditScript-9YgLOTed.js","assets/useFetchOld-BgGVMMmJ.js","assets/ScriptsTabs-BSK7sb4n.js","assets/TablePagination-B0v8QAQr.js","assets/TableFilterChips-DXWGZ6VK.js","assets/TableFilterChips-BnP8uMWM.css","assets/TablePagination-DZURD2KR.css","assets/helpers-BbXQOWxJ.js","assets/constants-BTpoIHxf.js","assets/ResponsiveTable-ViIMTRR6.js","assets/ResponsiveTable-Czda4kFo.css","assets/StaticLink-BNg3qc2M.js","assets/TruncatedCell-Cf7_euhM.js","assets/TruncatedCell-DraJKZqh.css","assets/useExpandableRow-DYtdXwcw.js","assets/useRoles-TXLG25Jr.js","assets/TextConfirmationModal-O9rtHEfo.js","assets/TextConfirmationModal-I9pZGO8V.css","assets/PageParamFilter-C5PJgjVf.js","assets/TableFilter-BmLRyeMD.js","assets/TableFilter-B85Stwni.css","assets/HeaderWithSearch-cCuZhEhs.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/SingleInstanceTabs.module-DvhuGYYD.js","assets/SingleInstanceTabs-S4NROY16.css","assets/index-DiSNWm9B.js","assets/ScriptsTabs-DN44MVZt.css"])))=>i.map(i=>d[i]);
import{f as P,c as v,r as a,D as y,y as j,j as t,d as m,e as d,$ as C}from"./index-Dfc97QGW.js";import{S as E}from"./SidePanelTablePagination-D0fGsgDJ.js";import{g as b}from"./ScriptsTabs-BSK7sb4n.js";import"./TablePagination-B0v8QAQr.js";import"./TableFilterChips-DXWGZ6VK.js";import"./helpers-BbXQOWxJ.js";import"./constants-BTpoIHxf.js";import"./NoData-DMN9LLPq.js";import"./ResponsiveTable-ViIMTRR6.js";import"./StaticLink-BNg3qc2M.js";import"./TruncatedCell-Cf7_euhM.js";import"./Truncated-D8EZCoK1.js";import"./useExpandableRow-DYtdXwcw.js";import"./useRoles-TXLG25Jr.js";import"./useFetchOld-BgGVMMmJ.js";import"./TextConfirmationModal-O9rtHEfo.js";import"./PageParamFilter-C5PJgjVf.js";import"./TableFilter-BmLRyeMD.js";import"./HeaderWithSearch-cCuZhEhs.js";import"./SingleInstanceTabs.module-DvhuGYYD.js";import"./index-DiSNWm9B.js";const f=({scriptId:s,limit:n,offset:o})=>{const i=P(),{data:r,isLoading:c}=v({queryKey:["scripts","versions",s,n,o],queryFn:async()=>i.get(`scripts/${s}/versions`,{params:{limit:n,offset:o}})});return{versions:r?.data.results??[],isVersionsLoading:c,count:r?.data.count}},V="_version_1w5gk_1",A={version:V},F=a.lazy(async()=>C(()=>import("./index-1wGKaD8n.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]))),W=({script:s,viewVersionHistory:n})=>{const[o,i]=a.useState(1),[r,c]=a.useState(y),{setSidePanelContent:u}=j(),{versions:p,isVersionsLoading:l,count:g}=f({scriptId:s.id,limit:r,offset:(o-1)*r}),_=e=>{i(e)},S=e=>{c(e)},h=e=>{u(e.title,t.jsx(a.Suspense,{fallback:t.jsx(d,{}),children:t.jsx(F,{scriptId:s.id,scriptVersion:e,goBack:n,isArchived:s.status==="ARCHIVED"})}))},x=a.useMemo(()=>[{accessor:"version_number",Header:"Version",className:A.version,Cell:({row:{original:e}})=>t.jsx(m.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top",onClick:()=>{h(e)},children:e.version_number})},{accessor:"created_at",Header:"Created",Cell:({row:{original:e}})=>t.jsx(t.Fragment,{children:b({author:e.created_by.name,date:e.created_at})})}],[p]);return l?t.jsx(d,{}):t.jsxs(t.Fragment,{children:[t.jsx(m.ModularTable,{columns:x,data:p}),t.jsx(E,{currentPage:o,pageSize:r,paginate:_,setPageSize:S,totalItems:g})]})};export{W as default};
