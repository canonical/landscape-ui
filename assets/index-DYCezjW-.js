import{r as o,j as d,n as S}from"./index-PskL3iTG.js";import{U}from"./UsnList-BlAdPPiZ.js";import{u as w}from"./usePackages-DvDhPmq9.js";import"./usePageParams-CifSYXVe.js";import"./SelectAllButton-zvVVgnYA.js";import"./ExpandableTableFooter-B_F1syPh.js";import"./NoData-BmtcbUJB.js";import"./TablePagination-CD1UC8hD.js";import"./TablePaginationBase-Bpm64W1F.js";import"./TruncatedCell-BaDtVJT5.js";import"./helpers-svv_5Rmj.js";import"./useFetchOld-CYaeEIdJ.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="75f0eb2b-d07f-4443-b408-d1e9bb0e224b",t._sentryDebugIdIdentifier="sentry-dbid-75f0eb2b-d07f-4443-b408-d1e9bb0e224b")}catch{}const A=({excludedUsns:t,instances:r,onExcludedUsnsChange:u})=>{const[i,p]=o.useState(0),[n,m]=o.useState([]),l=o.useRef(0),f=o.useRef(-1),{getUsnsQuery:b}=w(),{data:a,isLoading:c}=b({computer_ids:r.map(({id:e})=>e),show_packages:!1,limit:5,offset:i});o.useEffect(()=>{!a||i===f.current||(l.current=a.data.count,f.current=i,m(e=>[...e,...a.data.results]))},[a]);const g=e=>{u(n.filter(({usn:s})=>!e.includes(s)).map(({usn:s})=>s))},y=n.filter(({usn:e})=>!t.includes(e)).map(({usn:e})=>e),h=o.useMemo(()=>{const e=new Set(n.map(({usn:s})=>s));return t.length>0&&t.some(s=>!e.has(s))},[t.length,n]);return c&&!n.length?d.jsx(S,{}):d.jsx(U,{tableType:"expandable",onNextPageFetch:()=>p(e=>e+5),instances:r,isUsnsLoading:c,onSelectedUsnsChange:g,onSelectAllClick:()=>u([]),selectedUsns:y,showSelectAllButton:h,totalSelectedUsnCount:l.current-t.length,totalUsnCount:l.current,usns:n})};export{A as default};
