import{b as g,y as p,z as h,a as m,r as x,R as s,j as e,L as j}from"./index-DkIHWTfF.js";import{r as b}from"./helpers-Bo73Thd0.js";const f="_container_1uszo_1",y={container:f},U=()=>{const[a]=g(),{setUser:u}=p(),{getAuthStateWithUbuntuOneQuery:c}=h(),l=m(),{data:t,isLoading:n,error:d}=c({url:window.location.toString()},{enabled:a.size>0});return x.useEffect(()=>{var r,i;if(t)if((r=t.data.return_to)!=null&&r.external)b(t.data.return_to.url??s,{replace:!0});else{u(t.data);const o=new URL(((i=t.data.return_to)==null?void 0:i.url)??s,location.origin);l(o.toString().replace(o.origin,""),{replace:!0})}},[t]),e.jsxs("div",{className:y.container,children:[a.size>0&&n&&e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}),(a.size===0||!n&&d)&&e.jsxs("div",{children:[e.jsx("p",{children:"Oops! Something went wrong. Please try again or contact our support team."}),e.jsx(j,{to:`${s}login`,className:"p-button",children:"Back to login"})]})]})};export{U as default};
