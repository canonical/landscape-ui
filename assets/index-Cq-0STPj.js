import{c as h,j as e,d as r,R as p,f as j,r as P,t as u,a as y}from"./index-CQs3wXys.js";import{P as I,a as N,b}from"./PageMain-BTzMuvvj.js";import{S as m}from"./constants-C1o6u7Ik.js";import A from"./index-CJDRijEY.js";import{u as k}from"./useAlerts-ChUP1xg9.js";import{E as C}from"./EmptyState-DNkTeHW1.js";import{u as L}from"./useInstances-A3J_BhkM.js";import"./useConfirm-9PPCxKmU.js";import"./useRoles-DHn7bJnc.js";import"./useFetchOld-D-5JyUuM.js";import"./useMutation-D9dT1mhA.js";import"./useQuery-DrwXjJzc.js";import"./moment-DDUBUQL9.js";const v="_listItem_5dsnu_1",E="_listItem__link_5dsnu_9",o={listItem:v,listItem__link:E},$=({alerts:l,pendingInstances:n})=>{const{setSidePanelContent:c}=h(),t=()=>{c("Review Pending Instances",e.jsx(P.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(A,{instances:n})}),"large")},a=l.map(s=>e.jsxs("div",{className:o.listItem,children:[e.jsx("i",{className:`p-icon--${m[s.alert_type].icon.color}`}),e.jsx(r.Link,{href:`${p}instances?status=${m[s.alert_type].filterValue}`,className:j("u-no-margin u-no-padding",o.listItem__link),children:s.summary})]},s.alert_type));return n.length>0&&a.push(e.jsxs("div",{className:o.listItem,children:[e.jsx("i",{className:`p-icon--${m.PendingComputers.icon.color}`}),e.jsxs(r.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:t,children:[e.jsx("span",{className:o.instancesNumber,children:n.length})," ","pending"," ",n.length!==1?"computers need ":"computer needs ","authorization"]})]})),e.jsx(r.List,{items:a})},S=()=>{const l=y(),{getAlertsSummaryQuery:n}=k(),{getPendingInstancesQuery:c}=L(),{data:t,isLoading:a}=n(),{data:s,isLoading:g}=c({},{enabled:!!(t!=null&&t.data.alerts_summary.find(i=>i.alert_type==="PendingComputersAlert"))}),d=(t==null?void 0:t.data.alerts_summary.filter(i=>i.alert_type!=="PendingComputersAlert"))||[],x=(s==null?void 0:s.data)||[],_=()=>(t==null?void 0:t.data.alerts_summary.find(f=>f.alert_type==="PendingComputersAlert"))?g:!1;return e.jsxs(I,{children:[e.jsx(N,{title:"Alerts"}),e.jsxs(b,{children:[a&&e.jsx(u,{}),!a&&d.length===0&&e.jsx(C,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[e.jsx(r.Button,{appearance:"positive",onClick:()=>l(`${p}settings/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!a&&!_()&&d.length>0&&e.jsx($,{alerts:d,pendingInstances:x})]})]})},Y=S;export{Y as default};
