import{h as g,k as c,f as S,p as f,s as x,j as s,g as o}from"./index-BRihK9aF.js";import{u as h}from"./useInstances-Dxj3odhP.js";import{S as _}from"./SidePanelFormButtons-BFlViY8c.js";import{u as I}from"./useRoles-BaBAheRf.js";import"./useFetchOld-CpP6IFJx.js";import"./SidePanelFormButtons.module-C5v714vX.js";const j=g().shape({access_group:c(),comment:c(),title:c()}),k=({instance:t})=>{const{closeSidePanel:n}=S(),u=f(),{getAccessGroupQuery:l}=I(),{editInstanceQuery:m}=h(),{mutateAsync:d}=m,p=async a=>{try{await d({instanceId:t.id,...a})}catch(i){u(i)}finally{n()}},e=x({initialValues:{title:t.title,comment:t.comment,access_group:t.access_group},onSubmit:p,validationSchema:j}),{data:r}=l(),b=(r==null?void 0:r.data.map(({name:a,title:i})=>({label:i,value:a})))??[];return s.jsxs(o.Form,{onSubmit:e.handleSubmit,className:"l-form",noValidate:!0,children:[s.jsx(o.Input,{label:"Title","aria-label":"Title",type:"text",required:!0,disabled:t.is_wsl_instance,...e.getFieldProps("title"),error:e.touched.title&&e.errors.title?e.errors.title:void 0}),s.jsx(o.Select,{label:"Access group",options:b,...e.getFieldProps("access_group"),error:e.touched.access_group&&e.errors.access_group?e.errors.access_group:void 0}),s.jsx(o.Textarea,{label:"Comment",rows:5,...e.getFieldProps("comment"),error:e.touched.comment&&e.errors.comment?e.errors.comment:void 0}),s.jsx(_,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Save changes"})]})};export{k as default};
