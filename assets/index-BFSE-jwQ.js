const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-MnTGMHn8.js","assets/index-P7aY8_ih.js","assets/index-D86Q3Mim.css","assets/SidePanelFormButtons-CfC2kumX.js","assets/SidePanelFormButtons.module-BuIu-Bem.js","assets/SidePanelFormButtons-CmV-sWf7.css","assets/useEditScript-DkkHVe8o.js","assets/ScriptsTabs-D-2Fq2HL.js","assets/constants-BwD2f_1_.js","assets/useRoles-CiHskr-F.js","assets/TextConfirmationModal-ALqYLh0P.js","assets/TextConfirmationModal-I9pZGO8V.css","assets/HeaderWithSearch-qGmhTnPt.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/SingleInstanceTabs.module-Cm1BYFZQ.js","assets/SingleInstanceTabs-9EpKZLyq.css","assets/index-CNNDPlod.js","assets/ScriptsTabs-DN44MVZt.css"])))=>i.map(i=>d[i]);
import{b as P,i as v,l as o,D as j,n as y,j as s,d as u,F as l,_ as b}from"./index-P7aY8_ih.js";import{g as C}from"./ScriptsTabs-D-2Fq2HL.js";import{S as E}from"./SidePanelTablePagination-BUMzZg_-.js";import"./constants-BwD2f_1_.js";import"./useRoles-CiHskr-F.js";import"./TextConfirmationModal-ALqYLh0P.js";import"./HeaderWithSearch-qGmhTnPt.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./index-CNNDPlod.js";const V=({scriptId:t,limit:r,offset:n})=>{const i=P(),{data:a,isLoading:c}=v({queryKey:["scripts","versions",t,r,n],queryFn:async()=>i.get(`scripts/${t}/versions`,{params:{limit:r,offset:n}})});return{versions:a?.data.results??[],isVersionsLoading:c,count:a?.data.count}},f="_version_1w5gk_1",F={version:f},A=o.lazy(async()=>b(()=>import("./index-MnTGMHn8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),q=({script:t,viewVersionHistory:r})=>{const[n,i]=o.useState(1),[a,c]=o.useState(j),{setSidePanelContent:p}=y(),{versions:d,isVersionsLoading:m,count:g}=V({scriptId:t.id,limit:a,offset:(n-1)*a}),_=e=>{i(e)},S=e=>{c(e)},h=e=>{p(e.title,s.jsx(o.Suspense,{fallback:s.jsx(l,{}),children:s.jsx(A,{scriptId:t.id,scriptVersion:e,goBack:r,isArchived:t.status==="ARCHIVED"})}))},x=o.useMemo(()=>[{accessor:"version_number",Header:"Version",className:F.version,Cell:({row:{original:e}})=>s.jsx(u.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top",onClick:()=>{h(e)},children:e.version_number})},{accessor:"created_at",Header:"Created",Cell:({row:{original:e}})=>s.jsx(s.Fragment,{children:C({author:e.created_by.name,date:e.created_at})})}],[d]);return m?s.jsx(l,{}):s.jsxs(s.Fragment,{children:[s.jsx(u.ModularTable,{columns:x,data:d}),s.jsx(E,{currentPage:n,pageSize:a,paginate:_,setPageSize:S,totalItems:g})]})};export{q as default};
