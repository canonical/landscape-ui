const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BwORHIYR.js","assets/index-BUcGDZCR.js","assets/index-DEuNBe7s.css","assets/AssociationBlock-CQzcU1ij.js","assets/MultiSelectField-Pxww2XBl.js","assets/MultiSelectField-DOBW8uWL.css","assets/useInstances-Bltxtwe4.js","assets/useFetchOld-wQl16_NT.js","assets/AssociationBlock-Cb2Mr2ww.css","assets/SidePanelFormButtons-UNqnJWHo.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/useRoles-C51ddSpY.js","assets/index-C0a-7P6I.js","assets/PageMain-CCULNlPm.js","assets/PageMain-BIuYvhUI.css","assets/usePageParams-Dua6EmZm.js","assets/NoData-B_fTZp8V.js","assets/HeaderWithSearch-yQ72HHyd.js","assets/HeaderWithSearch-DQybm8h_.css","assets/index-C_CGKsBW.css","assets/WslInstancesHeader-D1Zgm2Mm.js","assets/WslInstancesHeader-C2N1H1qb.css","assets/constants-CGmSpzVx.js","assets/index-YvXtz6mj.css","assets/index-D6Y6pYSi.js","assets/FileInput-BKSGNLMu.js","assets/CodeEditor-D0EwpLXi.js","assets/CodeEditor-CA89WJcJ.css"])))=>i.map(i=>d[i]);
import{r as o,_ as h,k as I,w as N,i as W,j as e,h as t,t as m}from"./index-BUcGDZCR.js";import{I as n}from"./InfoItem-B6O5SMzW.js";import{N as D}from"./NoData-B_fTZp8V.js";import{u as E}from"./index-C0a-7P6I.js";import"./PageMain-CCULNlPm.js";import"./useRoles-C51ddSpY.js";import"./useFetchOld-wQl16_NT.js";import"./usePageParams-Dua6EmZm.js";import"./HeaderWithSearch-yQ72HHyd.js";const S="_block_1i2to_1",R="_link_1i2to_9",u={block:S,link:R},L=o.lazy(()=>h(()=>import("./index-BwORHIYR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]))),T=o.lazy(()=>h(()=>import("./index-D6Y6pYSi.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,23,26,21,18,19,16,22,13,14,15,17,20,27,28,24]))),Q=({profile:s,accessGroupOptions:x})=>{var r,d;const[l,j]=o.useState(""),g=I(),{notify:p}=N(),{closeSidePanel:_,setSidePanelContent:i}=W(),{removeWslProfileQuery:v}=E(),{mutateAsync:b,isPending:c}=v,f=async a=>{try{await b({name:a}),_(),p.success({message:`WSL profile "${a}" removed successfully.`,title:"WSL profile removed"})}catch(k){g(k)}},P=()=>{i(`Edit "${s.title}" profile`,e.jsx(o.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(L,{profile:s})}))},y=()=>{i(`Duplicate "${s.title}" profile`,e.jsx(o.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(T,{action:"duplicate",profile:s})}))},C=a=>{j(a.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-segmented-control",children:[e.jsxs(t.Button,{type:"button",hasIcon:!0,className:"p-segmented-control__button",onClick:P,children:[e.jsx(t.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(t.Button,{type:"button",hasIcon:!0,className:"p-segmented-control__button",onClick:y,children:[e.jsx(t.Icon,{name:"canvas"}),e.jsx("span",{children:"Duplicate"})]}),e.jsxs(t.ConfirmationButton,{type:"button",className:"p-segmented-control__button has-icon",confirmationModalProps:{title:"Remove WSL profile",children:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Removing this profile will affect"," ",e.jsxs("b",{children:[s.computers.constrained.length," instances"]}),". This action is irreversible."]}),e.jsxs("div",{children:["Type ",e.jsxs("b",{children:["remove ",s.name]})," to confirm."]}),e.jsx(t.Input,{type:"text",value:l,onChange:C})]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:c||l!==`remove ${s.name}`,confirmButtonLoading:c,onConfirm:()=>f(s.name)},children:[e.jsx(t.Icon,{name:t.ICONS.delete}),e.jsx("span",{children:"Remove"})]})]}),e.jsxs(t.Row,{className:"u-no-padding--left u-no-padding--right",children:[e.jsx(t.Col,{size:6,children:e.jsx(n,{label:"name",value:s.title})}),e.jsx(t.Col,{size:6,children:e.jsx(n,{label:"access group",value:((r=x.find(({value:a})=>a===s.access_group))==null?void 0:r.label)??s.access_group})}),e.jsx(n,{label:"description",value:s.description}),e.jsxs("div",{className:u.block,children:[e.jsx(n,{label:"rootfs image name",value:s.image_name}),s.image_source&&e.jsx(n,{type:"truncated",label:"rootfs image source",value:s.image_source}),e.jsx(n,{label:"cloud init",value:s.cloud_init_contents||"N/A"})]}),e.jsxs("div",{className:u.block,children:[e.jsx("p",{className:"p-heading--5",children:"Association"}),s.all_computers&&e.jsx("p",{children:"This profile has been associated with all instances."}),!s.all_computers&&!s.tags.length&&e.jsx("p",{children:"This profile has not yet been associated with any instances."}),!s.all_computers&&s.tags.length>0&&e.jsx(n,{label:"tags",value:s.tags.length?s.tags.join(", "):e.jsx(D,{})})]}),e.jsx(t.Col,{size:12,children:e.jsx(n,{label:"associated",value:`${s.computers.constrained.length} instances`})}),e.jsx(t.Col,{size:6,children:e.jsx(n,{label:"not compliant",value:`${s.computers["non-compliant"].length} instances`})}),e.jsx(t.Col,{size:6,children:e.jsx(n,{label:"pending",value:`${((d=s.computers.pending)==null?void 0:d.length)??0} instances`})})]})]})};export{Q as default};
