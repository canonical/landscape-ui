import{r as P,A as C,Y as L,j as i,n as c,x as o,G as w}from"./index-Cw5WBMVF.js";import{P as N,a as R,b as $}from"./PageMain-YNWx54qf.js";const D="_header_116wp_1",M={header:D},E=()=>{const[t,p]=P.useState([]),s=C(),{approveActivitiesQuery:m,cancelActivitiesQuery:v,redoActivitiesQuery:y,undoActivitiesQuery:h}=L(),{mutateAsync:A,isPending:r}=m,{mutateAsync:g,isPending:d}=v,{mutateAsync:f,isPending:l}=y,{mutateAsync:b,isPending:u}=h,a=t.map(e=>e.id),x=async()=>{try{await A({query:`id:${a.join(" OR id:")}`})}catch(e){s(e)}},B=async()=>{try{await g({query:`id:${a.join(" OR id:")}`})}catch(e){s(e)}},j=async()=>{try{await f({activity_ids:a})}catch(e){s(e)}},_=async()=>{try{await b({activity_ids:a})}catch(e){s(e)}};return i.jsxs(N,{children:[i.jsx(R,{title:"Activities",className:M.header,actions:[i.jsx("div",{className:"p-segmented-control",children:i.jsxs("div",{className:"p-segmented-control__list",children:[i.jsx(c.ConfirmationButton,{className:"p-segmented-control__button",type:"button",disabled:!t.length||r||t.some(e=>{var n;return!((n=e.actions)!=null&&n.approvable)}),confirmationModalProps:{title:`Approve ${o(t.length,"activity","activities")}`,children:i.jsxs("p",{children:["Are you sure you want to approve selected"," ",o(t.length,"activity","activities"),"?"]}),confirmButtonLabel:"Approve",confirmButtonAppearance:"positive",confirmButtonDisabled:r,confirmButtonLoading:r,onConfirm:x},children:"Approve"}),i.jsx(c.ConfirmationButton,{className:"p-segmented-control__button",type:"button",disabled:!t.length||d||t.some(e=>{var n;return!((n=e.actions)!=null&&n.cancelable)}),confirmationModalProps:{title:`Cancel ${o(t.length,"activity","activities")}`,children:i.jsxs("p",{children:["Are you sure you want to cancel selected"," ",o(t.length,"activity","activities"),"?"]}),confirmButtonLabel:"Apply",confirmButtonAppearance:"positive",confirmButtonDisabled:d,confirmButtonLoading:d,onConfirm:B},children:"Cancel"}),i.jsx(c.ConfirmationButton,{className:"p-segmented-control__button",type:"button",disabled:!t.length||u||t.some(e=>{var n;return!((n=e.actions)!=null&&n.revertable)}),confirmationModalProps:{title:`Undo ${o(t.length,"activity","activities")}`,children:i.jsxs("p",{children:["Are you sure you want to undo selected"," ",o(t.length,"activity","activities"),"?"]}),confirmButtonLabel:"Undo",confirmButtonAppearance:"positive",confirmButtonDisabled:u,confirmButtonLoading:u,onConfirm:_},children:"Undo"}),i.jsx(c.ConfirmationButton,{className:"p-segmented-control__button",type:"button",disabled:!t.length||l||t.some(e=>{var n;return!((n=e.actions)!=null&&n.reappliable)}),confirmationModalProps:{title:`Redo ${o(t.length,"activity","activities")}`,children:i.jsxs("p",{children:["Are you sure you want to redo selected"," ",o(t.length,"activity","activities"),"?"]}),confirmButtonLabel:"Redo",confirmButtonAppearance:"positive",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:j},children:"Redo"})]})},"buttons")]}),i.jsx($,{children:i.jsx(w,{selected:t,setSelected:p})})]})};export{E as default};
