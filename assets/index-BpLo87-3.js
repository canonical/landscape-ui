const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B4fqKVT9.js","assets/index-DDaZatVV.js","assets/index-DXB7zdRE.css","assets/useRoles-UPWxgdFc.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{n as y,ai as u,j as e,d as o,B as _,L as x,o as j,i as d,v as g,a3 as h,b as P,g as I,X as A,aj as S,E as b}from"./index-DDaZatVV.js";import{P as k,a as v,b as f}from"./PageMain-CHjkkDv9.js";const E="_listItem_upezw_1",L="_listItem__link_upezw_9",m={listItem:E,listItem__link:L},N=d.lazy(()=>h(()=>import("./index-B4fqKVT9.js"),__vite__mapDeps([0,1,2,3,4]))),C=({alerts:a,pendingInstances:s})=>{const{setSidePanelContent:n}=y(),l=()=>{n("Review Pending Instances",e.jsx(d.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(N,{instances:s})}),"large")},r=a.map((i,c)=>{const t=u[i.alert_type]||u.Unknown;return e.jsxs("div",{className:m.listItem,children:[e.jsx(o.Icon,{name:`${t.icon.color??t.icon.gray}`}),t.alertType==="PendingComputersAlert"?e.jsxs(o.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:l,children:[`${s.length} pending `,_(s.length,"computer needs","computers need")," ","authorization"]}):e.jsx(x,{to:`/instances?status=${t.filterValue}`,className:j("u-no-margin u-no-padding",m.listItem__link),children:i.summary})]},t.alertType||c)});return e.jsx(o.List,{items:r})};function Q(){const a=P();return{getAlertsSummaryQuery:()=>I({queryKey:["alert","summary"],queryFn:async()=>a.get("alerts/summary")})}}const R=()=>{const a=A(),{getAlertsSummaryQuery:s}=Q(),{data:n,isLoading:l}=s(),r=n?.data.alerts_summary.some(p=>p.alert_type==="PendingComputersAlert"),{pendingInstances:i,isGettingPendingInstances:c}=S(void 0,{enabled:r}),t=n?.data.alerts_summary||[];return e.jsxs(k,{children:[e.jsx(v,{title:"Alerts"}),e.jsx(f,{children:l||r&&c?e.jsx(g,{}):t.length?e.jsx(C,{alerts:t,pendingInstances:i}):e.jsx(b,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet."}),cta:[e.jsx(o.Button,{appearance:"positive",onClick:async()=>a("/account/alerts",{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]})})]})};export{R as default};
