const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BLvW1H6L.js","assets/index-K2U83YxJ.js","assets/index-C0ZxZ9J6.css","assets/FileInput-DG7KCFtc.js","assets/SidePanelFormButtons-DcBeOesm.js","assets/SidePanelFormButtons.module-C5v714vX.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/index-BO3qciQE.js","assets/usePageParams-btTIl-Mq.js","assets/TablePagination-B87KF8DI.js","assets/TablePaginationBase-CHdj3YtJ.js","assets/TablePaginationBase-CJl3HN1X.css","assets/StatusFilter-BqfQ_NEp.js","assets/TableFilter-Bs4z0Q86.js","assets/TableFilter-DXBG6q86.css","assets/TableFilterChips-F9CkWOGf.js","assets/TableFilterChips-CHqetGbX.css","assets/useFetchOld-skueaXrj.js","assets/NoData-DE16lN-s.js","assets/index-Eujs1Quf.css","assets/useInstances-BNPdLjb2.js","assets/HeaderWithSearch-CCWFiFn0.js","assets/HeaderWithSearch-C2lwo0VI.css"])))=>i.map(i=>d[i]);
import{r as u,_ as x,f as b,j as e,E as w,g as c,n as j,b as v,e as C,c as i,d as f,p as _}from"./index-K2U83YxJ.js";import{u as Q}from"./useInstances-BNPdLjb2.js";import{u as S}from"./useFetchOld-skueaXrj.js";import{H as I}from"./HeaderWithSearch-CCWFiFn0.js";import"./usePageParams-btTIl-Mq.js";import{T as L}from"./TableFilterChips-F9CkWOGf.js";const W=u.lazy(()=>x(()=>import("./index-BLvW1H6L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),N=()=>{const{setSidePanelContent:t}=b(),a=()=>{t("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(W,{})}))};return e.jsx(w,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(c.Button,{appearance:"positive",type:"button",onClick:a,children:"Install new WSL instance"},"install-new-instance-button")]})},F=()=>{const t=v(),a=S(),o=C(),d=(n={},s={})=>f({queryKey:["wsl",n],queryFn:()=>o.get("computers/wsl-hosts",{params:n}),...s}),m=i({mutationFn:({parent_id:n,...s})=>o.post(`computers/${n}/children`,s),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),h=i({mutationFn:n=>a.get("DeleteChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),r=i({mutationFn:n=>a.get("SetDefaultChildComputer",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),p=i({mutationFn:n=>a.get("ShutdownHostComputer",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),l=i({mutationFn:n=>a.get("StartChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),y=i({mutationFn:n=>a.get("StopChildComputers",{params:n}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:m,deleteChildInstancesQuery:h,getWslInstanceNamesQuery:(n,s={})=>f({queryKey:["wsl-instance-names"],queryFn:()=>o.get("wsl-instance-names"),...s}),getWslHostsQuery:d,setDefaultChildInstanceQuery:r,shutdownHostInstanceQuery:p,startChildInstancesQuery:l,stopChildInstancesQuery:y}},q="_cta_hpksw_1",D={cta:q},P=u.lazy(()=>x(()=>import("./index-BLvW1H6L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),A=({selectedInstances:t})=>{const a=_(),{setSidePanelContent:o}=b(),{deleteChildInstancesQuery:d}=F(),{removeInstancesQuery:m}=Q(),{mutateAsync:h,isPending:r}=d,{mutateAsync:p,isPending:l}=m,y=async()=>{try{await h({computer_ids:t.map(({id:s})=>s)})}catch(s){a(s)}},g=async()=>{try{await p({computer_ids:t.map(({id:s})=>s)})}catch(s){a(s)}},n=()=>{o("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(P,{})}))};return e.jsxs(e.Fragment,{children:[e.jsx(I,{actions:e.jsxs("div",{className:D.cta,children:[e.jsx(c.Button,{type:"button",onClick:n,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(c.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:t.length===0,confirmationModalProps:{title:t.length!==1?"Delete instances":"Delete instance",children:t.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:r,confirmButtonLoading:r,onConfirm:y},children:"Delete instance"}),e.jsx(c.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:t.length===0,confirmationModalProps:{title:t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:l,confirmButtonLoading:l,onConfirm:g},children:"Remove from Landscape"})]})})]})}),e.jsx(L,{filtersToDisplay:["search"]})]})};export{A as W,N as a,F as u};
