import{j as e,N,m as a,n as I,r as m,d as S,L as k,E as _,a as v,c as T,l as P,o as g,ah as w}from"./index-DdfwqF2I.js";import{E as A,e as G}from"./EmployeeGroupIdentityIssuerList-CsuojCH0.js";import{u as L,E as M}from"./index-CGkiD5qT.js";import{u as F}from"./useGetEmployeeGroups-B5hEXkkn.js";import"./HeaderWithSearch-OUd2esQf.js";import"./index-CtoAUpoC.js";import"./TruncatedCell-BRSk7BaX.js";const H="_container_86anj_1",O="_position_86anj_7",D="_chip_86anj_11",y={container:H,position:O,chip:D},Y=({fileName:o,isDefault:t,version:n})=>!o||!n?e.jsx(N,{}):e.jsxs("div",{className:y.container,children:[e.jsxs("span",{children:[o,", v",n]}),t&&e.jsx(a.Tooltip,{position:"top-center",positionElementClassName:y.position,message:"This group will inherit default Autoinstall file since none has been assigned.",children:e.jsx("span",{className:I("p-chip is-dense u-no-margin--bottom",y.chip),children:e.jsx("span",{className:"p-chip__value",children:"default"})})})]}),R="_actions_y6bfd_1",$="_link_y6bfd_9",x={actions:R,link:$},B=()=>({column:o})=>{const t={};return o.id==="name"?t.role="rowheader":o.id==="employees"?t["aria-label"]="Checkbox":o.id==="employee_count"?t["aria-label"]="Associated employees":o.id==="autoinstall_file.filename"?t["aria-label"]="Autoinstall file":o.id==="priority"?t["aria-label"]="Priority":o.id==="actions"&&(t["aria-label"]="Actions"),t},U=({onSelectedEmployeeGroupsChange:o,selectedEmployeeGroups:t,employeeGroups:n})=>{const i=m.useMemo(()=>n,[n]),r=s=>{o(t.includes(s)?t.filter(l=>l!==s):[...t,s])};S("employeeGroups",n.map(({id:s})=>s.toString()));const c=m.useMemo(()=>[{accessor:"employees",className:"checkbox-column",Header:()=>e.jsx(a.CheckboxInput,{inline:!0,label:e.jsx("span",{className:"u-off-screen",children:"Toggle all employee groups"}),disabled:i.length===0,indeterminate:t.length>0&&t.length<n.length,checked:t.length>0&&t.length===n.length,onChange:()=>{o(t.length>0?[]:n.map(({id:s})=>s))}}),Cell:({row:{original:s}})=>e.jsx(a.CheckboxInput,{labelClassName:"u-no-margin--bottom u-no-padding--top",label:e.jsx("span",{className:"u-off-screen",children:`Toggle ${s.name}`}),name:"employee-group-checkbox",checked:t.includes(s.id),onChange:()=>{r(s.id)}})},{accessor:"name",Header:"name",Cell:({row:{original:s}})=>e.jsx(e.Fragment,{children:s.name})},{accessor:"employee_count",Header:"employees",Cell:({row:{original:s}})=>s.employee_count?e.jsx(k,{to:`/settings/employees?tab=employees&employeeGroups=${s.id}`,className:x.link,children:s.employee_count}):e.jsx(e.Fragment,{children:"0"})},{accessor:"autoinstall_file.filename",Header:"assigned autoinstall file",Cell:({row:{original:s}})=>{var l,p,u;return e.jsx(Y,{fileName:(l=s.autoinstall_file)==null?void 0:l.filename,isDefault:(p=s.autoinstall_file)==null?void 0:p.is_default,version:(u=s.autoinstall_file)==null?void 0:u.version})}},{accessor:"priority",Header:"priority",Cell:({row:s})=>e.jsx(e.Fragment,{children:s.original.priority||"N/A"})},{accessor:"actions",className:x.actions,Header:"actions",Cell:({row:{original:s}})=>e.jsx(A,{employeeGroup:s})}],[i,t]);return e.jsx(a.ModularTable,{columns:c,data:i,getCellProps:B(),emptyMsg:"No employee groups found"})},f={title:"You don't have any Employee groups imported yet",body:"Import Employee groups to assign Autoinstall files and streamline employees' instance  setup process. Employee information will be fetched from your organization's Identity providers."},j={title:"You need to set up a supported identity provider to import Employees groups",body:"To import Employee Groups, you must set up a supported Identity Provider with a service account that authenticates using short-lived credentials or a signed JWT for access tokens."},z=({handleImportEmployeeGroups:o})=>e.jsx(_,{title:f.title,body:f.body,cta:[e.jsxs(a.Button,{appearance:"positive",className:"p-segmented-control__button",hasIcon:!0,onClick:o,children:[e.jsx(a.Icon,{name:a.ICONS.plus,light:!0}),e.jsx("span",{children:"Import employee groups"})]},"import-employee-groups")]}),J=()=>{const o=v();return e.jsx(_,{title:j.title,body:j.body,cta:[e.jsxs(a.Button,{appearance:"positive",className:"p-segmented-control__button",hasIcon:!0,onClick:async()=>o("/settings/identity-providers"),children:[e.jsx(a.Icon,{name:a.ICONS.plus,light:!0}),e.jsx("span",{children:"Add identity provider"})]},"import-employee-groups")]})},ee=()=>{const{search:o,autoinstallFiles:t}=T(),[n,i]=m.useState([]),{employeeGroups:r,employeeGroupsCount:c,isEmployeeGroupsLoading:s}=F({with_autoinstall_file:!0,with_employee_count:!0}),{oidcDirectoryIssuers:l,isOidcIssuersLoading:p}=L(),{setSidePanelContent:u}=P(),b=()=>{u("Choose an identity issuer",e.jsx(m.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(M,{})}))},d=s||p,C=!d&&l.length===0,E=!d&&c===0&&!o&&!t.length;return d&&!o&&!t.length?e.jsx(g,{}):C?e.jsx(J,{}):E?e.jsx(z,{handleImportEmployeeGroups:b}):e.jsxs(e.Fragment,{children:[e.jsx(G,{selectedEmployeeGroups:n,employeeGroups:r,setSelectedEmployeeGroups:h=>{i(h)}}),s?e.jsx(g,{}):e.jsxs(e.Fragment,{children:[e.jsx(U,{employeeGroups:r,onSelectedEmployeeGroupsChange:h=>{i(h)},selectedEmployeeGroups:n}),e.jsx(w,{totalItems:c,currentItemCount:r.length})]})]})};export{ee as default};
