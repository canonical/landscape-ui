import{b as g,i as j,j as t,J as d,d as n}from"./index-P7aY8_ih.js";const x=({attachmentId:s,scriptId:a},o={enabled:!0})=>{const c=g(),{data:r,isLoading:l,refetch:m}=j({queryKey:["scripts","attachment",s],queryFn:async()=>c.get(`scripts/${a}/attachments/${s}`),...o});return{scriptAttachment:r?.data??null,isScriptAttachmentsLoading:l,refetch:m}},y="_attachment_1791s_1",A="_attachmentActions_1791s_12",_="_actionButton_1791s_17",i={attachment:y,attachmentActions:A,actionButton:_},w=({attachmentId:s,filename:a,onInitialAttachmentDelete:o,scriptId:c,className:r})=>{const{isScriptAttachmentsLoading:l,refetch:m}=x({attachmentId:s,scriptId:c||0},{enabled:!1}),p=async()=>{const{data:h}=await m();if(!h)return;const b=new Blob([h.data],{type:"application/octet-stream"}),u=URL.createObjectURL(b),e=document.createElement("a");e.href=u,e.download=a,document.body.appendChild(e),e.click(),e.remove(),URL.revokeObjectURL(u)};return t.jsxs("span",{className:d(i.attachment,r),children:[t.jsx("span",{children:a}),t.jsxs("div",{className:i.attachmentActions,children:[c?t.jsx(n.Tooltip,{message:"Download",position:"top-center",children:t.jsx(n.Button,{className:d("u-no-margin--bottom u-no-margin--right",i.actionButton),hasIcon:!0,type:"button",onClick:p,disabled:l,appearance:"base","aria-label":`Download ${a}`,children:t.jsx(n.Icon,{name:"begin-downloading"})})}):null,o?t.jsx(n.Tooltip,{message:"Remove",position:"top-center",children:t.jsx(n.Button,{type:"button",hasIcon:!0,appearance:"base",className:d("u-no-margin--bottom u-no-margin--right",i.actionButton),"aria-label":`Remove ${a} attachment`,onClick:o,children:t.jsx(n.Icon,{name:n.ICONS.delete})})}):null]})]})};export{w as A};
