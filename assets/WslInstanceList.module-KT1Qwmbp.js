import{r as u,_ as v,f as C,j as e,g as o,o as b,c as F,d as D,e as B}from"./index-CreLYkd7.js";import{E as k}from"./EmptyState-DAULjSZb.js";import{u as N}from"./useConfirm-Bodc886s.js";import{u as P}from"./useInstances-iMsrO7Mz.js";import{u as E}from"./useFetchOld-DGjYaeEJ.js";import{u as l}from"./useMutation-CvjNgrEE.js";import{u as j}from"./useQuery-TlFJgfqc.js";const T=u.lazy(()=>v(()=>import("./index-BvGDkMek.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]))),te=()=>{const{setSidePanelContent:s}=C(),t=()=>{s("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(T,{})}))};return e.jsx(k,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(o.Button,{appearance:"positive",type:"button",onClick:t,children:e.jsx("span",{children:"Install new WSL instance"})},"install-new-instance-button")]})},R="_toggleButton_pic0w_1",q="_actionButton_pic0w_6",ne={toggleButton:R,actionButton:q},A=()=>{const s=F(),t=E(),c=D(),r=(n={},i={})=>j({queryKey:["wsl",n],queryFn:()=>c.get("computers/wsl-hosts",{params:n}),...i}),d=l({mutationFn:({parent_id:n,...i})=>c.post(`computers/${n}/children`,i),onSuccess:()=>Promise.all([s.invalidateQueries(["wsl-hosts"]),s.invalidateQueries(["instances"])])}),m=l({mutationFn:n=>t.get("DeleteChildComputers",{params:n}),onSuccess:()=>Promise.all([s.invalidateQueries(["wsl-hosts"]),s.invalidateQueries(["instances"])])}),x=l({mutationFn:n=>t.get("SetDefaultChildComputer",{params:n}),onSuccess:()=>Promise.all([s.invalidateQueries(["wsl-hosts"]),s.invalidateQueries(["instances"])])}),h=l({mutationFn:n=>t.get("ShutdownHostComputer",{params:n}),onSuccess:()=>Promise.all([s.invalidateQueries(["wsl-hosts"]),s.invalidateQueries(["instances"])])}),p=l({mutationFn:n=>t.get("StartChildComputers",{params:n}),onSuccess:()=>Promise.all([s.invalidateQueries(["wsl-hosts"]),s.invalidateQueries(["instances"])])}),y=l({mutationFn:n=>t.get("StopChildComputers",{params:n}),onSuccess:()=>Promise.all([s.invalidateQueries(["wsl-hosts"]),s.invalidateQueries(["instances"])])});return{createChildInstanceQuery:d,deleteChildInstancesQuery:m,getWslInstanceNamesQuery:(n,i={})=>j({queryKey:["wsl-instance-names"],queryFn:()=>c.get("wsl-instance-names"),...i}),getWslHostsQuery:r,setDefaultChildInstanceQuery:x,shutdownHostInstanceQuery:h,startChildInstancesQuery:p,stopChildInstancesQuery:y}},H="_container_mfu34_1",O="_searchContainer_mfu34_6",$="_cta_mfu34_11",M="_noWrap_mfu34_15",_={container:H,searchContainer:O,cta:$,noWrap:M},V=u.lazy(()=>v(()=>import("./index-BvGDkMek.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]))),se=({resetQuery:s,selectedInstances:t,setQuery:c})=>{const[r,d]=u.useState(""),m=B(),{setSidePanelContent:x}=C(),{confirmModal:h,closeConfirmModal:p}=N(),{deleteChildInstancesQuery:y}=A(),{removeInstancesQuery:g}=P(),{mutateAsync:n}=y,{mutateAsync:i}=g,f=async()=>{try{await n({computer_ids:t.map(({id:a})=>a)})}catch(a){m(a)}finally{p()}},w=()=>{const a=t.length!==1?"This will permanently delete selected instances from both the Windows host machine and Landscape.":e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]});h({title:t.length!==1?"Delete instances":"Delete instance",body:a,buttons:[e.jsx(o.Button,{appearance:"negative",onClick:f,children:"Delete"},"delete")]})},S=async()=>{try{await i({computer_ids:t.map(({id:a})=>a)})}catch(a){m(a)}finally{p()}},I=()=>{const a=t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),L=t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape";h({title:L,body:a,buttons:[e.jsx(o.Button,{appearance:"negative",onClick:S,children:"Remove"},"remove")]})},Q=()=>{x("Install new WSL instance",e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(V,{})}))},W=a=>{a.preventDefault(),c(r)};return e.jsxs("div",{className:_.container,children:[e.jsx("div",{className:_.searchContainer,children:e.jsx(o.Form,{onSubmit:W,noValidate:!0,children:e.jsx(o.SearchBox,{onChange:a=>d(a),value:r,onSearch:()=>c(r),autocomplete:"off",onClear:()=>{s(),d("")}})})}),e.jsxs("div",{className:_.cta,children:[e.jsx(o.Button,{type:"button",onClick:Q,className:_.noWrap,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(o.Button,{type:"button",className:"p-segmented-control__button",onClick:w,disabled:t.length===0,children:e.jsx("span",{children:"Delete instance"})}),e.jsx(o.Button,{type:"button",className:"p-segmented-control__button",onClick:I,disabled:t.length===0,children:e.jsx("span",{children:"Remove from Landscape"})})]})})]})]})},Y="_title_vwa4n_1",z="_actions_vwa4n_5",ae={title:Y,actions:z};export{se as W,ae as a,te as b,ne as c,A as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-BvGDkMek.js","assets/index-CreLYkd7.js","assets/index-DzLy8aaC.css","assets/formik.esm-C2DYiXJC.js","assets/index.esm-Co3jed-Q.js","assets/FileInput-DPZcr9oj.js","assets/SidePanelFormButtons-CfVlXCl-.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/index-Ld96KjvL.js","assets/moment-CZq-kU5w.js","assets/TablePagination.module-DLVph1Z1.js","assets/TablePagination-JK-zjkSx.css","assets/TablePagination-Zw7WkUG8.js","assets/usePageParams-MY5k-CLu.js","assets/EmptyState-DAULjSZb.js","assets/EmptyState-BNXajmMK.css","assets/SearchHelpPopup-SYLrpuUY.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/useFetchOld-DGjYaeEJ.js","assets/useMutation-CvjNgrEE.js","assets/useQuery-TlFJgfqc.js","assets/useConfirm-Bodc886s.js","assets/index-D7AnmhC7.css","assets/useInstances-iMsrO7Mz.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
