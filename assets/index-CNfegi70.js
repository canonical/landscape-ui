import{j as s,r as h,o as y,J as P,n as k}from"./index-F5ixs2NP.js";import{T as x}from"./TablePagination-BrIH39sP.js";import{P as I,a as j,b as S}from"./usePackages-CMKa1o3f.js";import{u as T}from"./usePageParams-ByN77I-a.js";import{S as _}from"./StatusFilter-DZQLeRRj.js";import{T as N}from"./TableFilterChips-5N5Oo-yw.js";import{H as v}from"./HeaderWithSearch-Dt8LFJia.js";import"./TablePaginationBase-CfRQScDE.js";import"./useFetchOld-IYQtjqtR.js";import"./TableFilter-B53U33U0.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="bf00924c-c5fd-4c72-9b72-4e21f7cd26b3",e._sentryDebugIdIdentifier="sentry-dbid-bf00924c-c5fd-4c72-9b72-4e21f7cd26b3")}catch{}const g=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],w="_actions_dhdem_1",L={actions:w},A=({handleClearSelection:e,selectedPackages:a})=>s.jsxs(s.Fragment,{children:[s.jsx(v,{afterSearch:e,actions:s.jsxs("div",{className:L.actions,children:[s.jsx(_,{options:g}),s.jsx(I,{selectedPackages:a})]})}),s.jsx(N,{filtersToDisplay:["search","status"],statusOptions:g})]}),D=(e,a)=>{let t;return e===""?t="No packages found":e==="upgrade"?t="No available upgrades found":e==="security"?t="No available security upgrades found":e==="installed"?t="No installed packages found":t="No held packages found",a?`${t} with the search "${a}"`:t},J=()=>{const[e,a]=h.useState([]),{instanceId:t,childInstanceId:f}=y(),{status:n,search:o,currentPage:d,pageSize:c}=T(),{getInstancePackagesQuery:p}=j(),{state:r}=P(),m=Number(f??t),i=()=>{a([])},{data:{data:l}={data:{count:0,results:[]}},isLoading:u}=p({instance_id:m,search:o,limit:c,offset:d*c-c,installed:!n||void 0,upgrade:n==="upgrade"||void 0,held:n==="held"||void 0,security:n==="security"||void 0});return s.jsxs(s.Fragment,{children:[!o&&!n&&d===1&&c===20&&u?s.jsx(k,{}):s.jsxs(s.Fragment,{children:[s.jsx(A,{selectedPackages:e,handleClearSelection:i}),s.jsx(S,{packages:l.results,packagesLoading:u,selectedPackages:e,onPackagesSelect:b=>{a(b)},emptyMsg:D(n,o),selectAll:!!(r!=null&&r.selectAll)})]}),s.jsx(x,{handleClearSelection:i,totalItems:l.count,currentItemCount:l.results.length})]})};export{J as default};
