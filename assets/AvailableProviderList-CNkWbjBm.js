import{b as O,g as Q,i as _,V as E,W as P,r as g,j as t,d as i,a1 as f}from"./index-BCIQRWZN.js";import{u as w}from"./useInvitation-B5aCO9Ff.js";const S=(o,m={})=>{const h=O(),{data:s,isPending:c}=Q({queryKey:["oidcUrl",o],queryFn:async()=>h.get("employee-access/auth/start",{params:o}),...m,gcTime:0});return{data:s,isPending:c}},k="_list_1v1l7_1",B="_button_1v1l7_20",C="_icon_1v1l7_28",n={list:k,button:B,icon:C},T=({isStandaloneOidcEnabled:o,isUbuntuOneEnabled:m,oidcProviders:h})=>{const[s,c]=_.useState(0),[x]=E(),{invitationId:r}=w(),{getOidcUrlQuery:j,getUbuntuOneUrlQuery:U}=P(),l=x.get("redirect-to"),y=x.has("external"),a=x.get("code"),e={};s>0&&(e.id=s),l&&(e.return_to=l),r&&(e.invitation_id=r),y&&(e.external=!0),a&&(e.attach_code=a);const I=j(e,{enabled:s!==0&&!a}),v=S(e,{enabled:s!==0&&!!a}),{data:p}=a?v:I;_.useEffect(()=>{p&&g(p.data.location)},[p]);const u={};l&&(u.return_to=`${window.origin}${l}`),r&&(u.invitation_id=r),y&&(u.external=!0);const{data:b,refetch:N}=U(u,{enabled:!1});return _.useEffect(()=>{b&&g(b.data.location)},[b]),t.jsxs("ul",{className:n.list,children:[m&&t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:N,className:n.button,children:[t.jsx(i.Icon,{name:f("ubuntu-one"),className:n.icon}),t.jsx("span",{children:"Sign in with Ubuntu One"})]})}),o&&t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:()=>{c(-1)},className:n.button,children:[t.jsx(i.Icon,{name:f("standalone"),className:n.icon}),t.jsx("span",{children:"Sign in with Enterprise Login"})]})}),h.map(d=>t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:()=>{c(d.id)},className:n.button,children:[t.jsx(i.Icon,{name:f(d.provider),className:n.icon}),t.jsx("span",{children:`Sign in with ${d.name}`})]})},d.id))]})};export{T as A};
