import{r as d,_ as j,f as w,j as e,g as c,o as v,c as I,d as Q,e as W}from"./index-DXs1haZl.js";import{E as L}from"./EmptyState-BYL1pVz2.js";import{u as F}from"./useConfirm-C9Ai5vPv.js";import{u as P}from"./useInstances-B3fQT90b.js";import{u as D}from"./useFetchOld-DWTVWZGf.js";import{u as l}from"./useMutation-CoMMCR6r.js";import{u as _}from"./useQuery-DPA9mHwu.js";import{H as k}from"./HeaderWithSearch-OzYSSkOw.js";import{u as B}from"./usePageParams-BJqFm8Ol.js";const E=d.lazy(()=>j(()=>import("./index-BQZoYL_X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),Z=()=>{const{setSidePanelContent:t}=w(),a=()=>{t("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(E,{})}))};return e.jsx(L,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(c.Button,{appearance:"positive",type:"button",onClick:a,children:e.jsx("span",{children:"Install new WSL instance"})},"install-new-instance-button")]})},R="_toggleButton_pic0w_1",N="_actionButton_pic0w_6",ee={toggleButton:R,actionButton:N},T=()=>{const t=I(),a=D(),i=Q(),m=(s={},o={})=>_({queryKey:["wsl",s],queryFn:()=>i.get("computers/wsl-hosts",{params:s}),...o}),r=l({mutationFn:({parent_id:s,...o})=>i.post(`computers/${s}/children`,o),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),u=l({mutationFn:s=>a.get("DeleteChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),h=l({mutationFn:s=>a.get("SetDefaultChildComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),p=l({mutationFn:s=>a.get("ShutdownHostComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),y=l({mutationFn:s=>a.get("StartChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])}),g=l({mutationFn:s=>a.get("StopChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries(["wsl-hosts"]),t.invalidateQueries(["instances"])])});return{createChildInstanceQuery:r,deleteChildInstancesQuery:u,getWslInstanceNamesQuery:(s,o={})=>_({queryKey:["wsl-instance-names"],queryFn:()=>i.get("wsl-instance-names"),...o}),getWslHostsQuery:m,setDefaultChildInstanceQuery:h,shutdownHostInstanceQuery:p,startChildInstancesQuery:y,stopChildInstancesQuery:g}},H="_cta_hpksw_1",q={cta:H},A=d.lazy(()=>j(()=>import("./index-BQZoYL_X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),te=({selectedInstances:t})=>{const{setPageParams:a}=B(),i=W(),{setSidePanelContent:m}=w(),{confirmModal:r,closeConfirmModal:u}=F(),{deleteChildInstancesQuery:h}=T(),{removeInstancesQuery:p}=P(),{mutateAsync:y}=h,{mutateAsync:g}=p,x=async()=>{try{await y({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},s=()=>{const n=t.length!==1?"This will permanently delete selected instances from both the Windows host machine and Landscape.":e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]});r({title:t.length!==1?"Delete instances":"Delete instance",body:n,buttons:[e.jsx(c.Button,{appearance:"negative",onClick:x,children:"Delete"},"delete")]})},o=async()=>{try{await g({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},b=()=>{const n=t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),S=t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape";r({title:S,body:n,buttons:[e.jsx(c.Button,{appearance:"negative",onClick:o,children:"Remove"},"remove")]})},C=()=>{m("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(A,{})}))},f=n=>{a({search:n})};return e.jsx(k,{onSearch:f,actions:e.jsxs("div",{className:q.cta,children:[e.jsx(c.Button,{type:"button",onClick:C,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(c.Button,{type:"button",className:"p-segmented-control__button",onClick:s,disabled:t.length===0,children:e.jsx("span",{children:"Delete instance"})}),e.jsx(c.Button,{type:"button",className:"p-segmented-control__button",onClick:b,disabled:t.length===0,children:e.jsx("span",{children:"Remove from Landscape"})})]})})]})})},O="_title_vwa4n_1",$="_actions_vwa4n_5",se={title:O,actions:$};export{te as W,se as a,Z as b,ee as c,T as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-BQZoYL_X.js","assets/index-DXs1haZl.js","assets/index-DzLy8aaC.css","assets/formik.esm-CwYJvJSO.js","assets/index.esm-FGh7VWBq.js","assets/FileInput-QpZ5USxw.js","assets/SidePanelFormButtons-Dtg_vQ52.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/index-BU3-Vm4G.js","assets/moment-BF0UQeMK.js","assets/TablePagination.module-DLVph1Z1.js","assets/TablePagination-JK-zjkSx.css","assets/TablePagination-DZ07rvb4.js","assets/usePageParams-BJqFm8Ol.js","assets/EmptyState-BYL1pVz2.js","assets/EmptyState-BNXajmMK.css","assets/SearchHelpPopup-CCs3NejY.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/useFetchOld-DWTVWZGf.js","assets/useMutation-CoMMCR6r.js","assets/useQuery-DPA9mHwu.js","assets/useConfirm-C9Ai5vPv.js","assets/NoData-BmTO_w1O.js","assets/index-D7AnmhC7.css","assets/useInstances-B3fQT90b.js","assets/HeaderWithSearch-OzYSSkOw.js","assets/HeaderWithSearch.module-ByXjIdeN.js","assets/HeaderWithSearch-CCRO5bRP.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
