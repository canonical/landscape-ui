import{r as o,j as c,e as R}from"./index-Dfc97QGW.js";import{U as C}from"./UsnList-CdV8gsGU.js";import{u as L}from"./useUsns-DqfdHX4t.js";import"./SelectAllButton-7i8VoFdt.js";import"./ExpandableTableFooter-DCAqkxh9.js";import"./NoData-DMN9LLPq.js";import"./ResponsiveTable-ViIMTRR6.js";import"./TablePagination-B0v8QAQr.js";import"./TableFilterChips-DXWGZ6VK.js";import"./TruncatedCell-Cf7_euhM.js";import"./Truncated-D8EZCoK1.js";import"./index-S_kjB96R.js";import"./useFetchOld-BgGVMMmJ.js";import"./PageParamFilter-C5PJgjVf.js";import"./TableFilter-BmLRyeMD.js";import"./formikErrors-Bw8iTXYS.js";import"./constants-BTpoIHxf.js";import"./InstancesPageActions-Dns4Yse-.js";import"./ListTitle-DsIgCqjQ.js";import"./StaticLink-BNg3qc2M.js";import"./useExpandableRow-DYtdXwcw.js";import"./index-DiSNWm9B.js";import"./TextConfirmationModal-O9rtHEfo.js";import"./InfoGrid-CrJbMYy5.js";import"./InfoItem-DImpX37B.js";const K=({excludedUsns:r,instances:m,onExcludedUsnsChange:p})=>{const[i,f]=o.useState(0),[s,g]=o.useState([]),a=o.useRef(0),u=o.useRef(-1),{getUsnsQuery:h}=L(),{data:n,isLoading:l}=h({computer_ids:m.map(({id:t})=>t),show_packages:!1,limit:5,offset:i});o.useEffect(()=>{!n||i===u.current||(a.current=n.data.count,u.current=i,g(t=>[...t,...n.data.results]))},[n]);const S=t=>{p(s.filter(({usn:e})=>!t.includes(e)).map(({usn:e})=>e))},U=s.filter(({usn:t})=>!r.includes(t)).map(({usn:t})=>t),d=o.useMemo(()=>{const t=new Set(s.map(({usn:e})=>e));return r.length>0&&r.some(e=>!t.has(e))},[r.length,s]);return l&&!s.length?c.jsx(R,{}):c.jsx(C,{tableType:"expandable",onNextPageFetch:()=>{f(t=>t+5)},instances:m,isUsnsLoading:l,onSelectedUsnsChange:S,onSelectAllClick:()=>{p([])},selectedUsns:U,showSelectAllButton:d,totalSelectedUsnCount:a.current-r.length,totalUsnCount:a.current,usns:s})};export{K as default};
