import{V as d,I as S}from"./ScriptsTabs-DfoExKFg.js";import{c as st,a as ot,d as mt,S as at,u as pt,b as nt}from"./ScriptsTabs-DfoExKFg.js";import{y as f,z as x,x as b,B as g,j as e,d as r}from"./index-CNSDWj8Q.js";import{S as y}from"./SidePanelFormButtons-DIizKTix.js";import{u as _}from"./useRunScript-Djv9SBc3.js";import{g as o}from"./formikErrors-Bw8iTXYS.js";import{D as h}from"./DeliveryBlock-B3k_IVND.js";import"./helpers-kPKhnyjI.js";import"./index-CySvbr4l.js";import{S as j}from"./ScriptDropdown-BDpvNfnn.js";import{default as ct}from"./index-D8g_Dy3D.js";import"./TablePagination-CFXNvqsZ.js";import"./TableFilterChips-06YfpJdc.js";import"./constants-CDnVvJTb.js";import"./NoData-6ZK9sV5u.js";import"./ResponsiveTable-BXalKviy.js";import"./StaticLink-BEYCGcPv.js";import"./TruncatedCell-BMum6DLZ.js";import"./Truncated-Dtg97i8C.js";import"./useExpandableRow-B4jhRgod.js";import"./useRoles-DYJzr0u4.js";import"./useFetchOld-BAAs34Op.js";import"./TextConfirmationModal-q88mH05g.js";import"./PageParamFilter-ChSwlZqZ.js";import"./TableFilter-2AKF5NjJ.js";import"./HeaderWithSearch-D2tNhOlz.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./RadioGroup-BVZkBsDq.js";import"./downshift.esm-DADdD-V8.js";import"./CodeEditor-DBPYuwcp.js";import"./ScriptFormAttachments-1fibiNNB.js";import"./AttachmentFile-CcsxK_w8.js";const it=({parentAccessGroup:m,query:a})=>{const p=f(),{notify:n}=x(),{closeSidePanel:u}=b(),{runScript:c}=_(),t=g({initialValues:S,validationSchema:d,onSubmit:async i=>{try{await c({deliver_after:i.deliver_immediately?void 0:i.deliver_after,query:a,script_id:i.script_id,time_limit:i.time_limit,username:i.username}),u(),n.success({message:`"${i.script?.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(s){p(s)}}}),l=async i=>{if(await t.setFieldValue("script_id",i?.id??0),!t.values.username){const s=i?.username??"";await t.setFieldValue("username",s)}};return e.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[e.jsx(j,{script:t.values.script,setScript:async i=>{await t.setFieldValue("script",i),await l(i)},errorMessage:o(t,"script_id"),parentAccessGroup:m}),e.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[e.jsx(r.Col,{size:6,children:e.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:o(t,"username")})}),e.jsx(r.Col,{size:6,children:e.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:o(t,"time_limit")})})]}),e.jsx(h,{formik:t}),e.jsx(y,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{ct as CreateScriptForm,it as RunInstanceScriptForm,j as ScriptDropdown,st as ScriptList,ot as ScriptsContainer,mt as ScriptsEmptyState,at as ScriptsTabs,pt as useGetScripts,nt as useGetSingleScript};
