import{r as n,j as p,t as R}from"./index-BUcGDZCR.js";import{U as C}from"./UsnList-DBvKD6jT.js";import{u as L}from"./useUsns-Daw1RsIa.js";import"./moment-DJqi0OYL.js";import"./SelectAllButton-CQB8MZi8.js";import"./ExpandableTableFooter-BKvqrPko.js";import"./NoData-B_fTZp8V.js";import"./TablePagination-Bn2d3RK2.js";import"./TablePagination.module-CgQ3jx4B.js";import"./usePageParams-Dua6EmZm.js";import"./TruncatedCell-BnZBJx7E.js";import"./helpers-B4Ea794_.js";import"./useFetchOld-wQl16_NT.js";const M=({excludedUsns:o,instances:u,onExcludedUsnsChange:l})=>{const[a,f]=n.useState(0),[s,g]=n.useState([]),i=n.useRef(0),c=n.useRef(-1),{getUsnsQuery:h}=L(),{data:r,isLoading:m}=h({computer_ids:u.map(({id:t})=>t),show_packages:!1,limit:5,offset:a});n.useEffect(()=>{!r||a===c.current||(i.current=r.data.count,c.current=a,g(t=>[...t,...r.data.results]))},[r]);const S=t=>{l(s.filter(({usn:e})=>!t.includes(e)).map(({usn:e})=>e))},U=s.filter(({usn:t})=>!o.includes(t)).map(({usn:t})=>t),d=n.useMemo(()=>{const t=new Set(s.map(({usn:e})=>e));return o.length>0&&o.some(e=>!t.has(e))},[o.length,s]);return m&&!s.length?p.jsx(R,{}):p.jsx(C,{tableType:"expandable",onNextPageFetch:()=>f(t=>t+5),instances:u,isUsnsLoading:m,onSelectedUsnsChange:S,onSelectAllClick:()=>l([]),selectedUsns:U,showSelectAllButton:d,totalSelectedUsnCount:i.current-o.length,totalUsnCount:i.current,usns:s})};export{M as default};
