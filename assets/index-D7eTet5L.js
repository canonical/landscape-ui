import{h,t as g,k as c,p as v,q as I,f as S,s as x,j as a,g as f}from"./index-5gUg1wBm.js";import{M as j}from"./MultiSelectField-DeAhX_th.js";import{S as q}from"./SidePanelFormButtons-B3h2hemk.js";import{u as A}from"./index-Cls7cMCr.js";import{u as F}from"./useRoles-D_4_uFUG.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";import"./PageMain-B2M7d-if.js";import"./useFetchOld-DoJhfK-Q.js";import"./TablePagination-DVMkfoeg.js";import"./usePageParams-D1oM-inl.js";import"./TablePaginationBase-ByjrjRdM.js";import"./NoData-CkszD9V_.js";import"./TableFilterChips-DTuS4Wl3.js";import"./HeaderWithSearch-FkYK9Nhc.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="68e23dd4-22f2-4e2f-80b8-fc9fe8f7e13e",t._sentryDebugIdIdentifier="sentry-dbid-68e23dd4-22f2-4e2f-80b8-fc9fe8f7e13e")}catch{}const w=t=>h().shape({email:c().required("This field is required.").email("Please provide a valid email address").test({name:"unique-email",params:{invitations:t},test:(s,{createError:n,parent:o})=>{const r=t.find(({email:d})=>d===s);return!r||n({message:`${o.name??r.name} is already invited to this account`})}}),name:c().required("This field is required."),roles:g().of(c())}),D={email:"",name:"",roles:[]},Q=()=>{const t=v(),{notify:s}=I(),{getInvitationsQuery:n,inviteAdministratorQuery:o}=A(),{getRolesQuery:r}=F(),{closeSidePanel:d}=S(),{data:l}=n(),{mutateAsync:b}=o,y=async i=>{try{await b(i),d(),s.success({title:"You sent an administrator invite",message:`${i.name} will receive an invitation email`})}catch(u){t(u)}},e=x({initialValues:D,validationSchema:w((l==null?void 0:l.data.results)??[]),onSubmit:y}),{data:m}=r(),p=(m==null?void 0:m.data.map(({name:i})=>({label:i,value:i})))??[];return a.jsxs(f.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[a.jsx("p",{children:"An invitation, sent by email, contains a link a prospective administrator can use to join this account."}),a.jsx(f.Input,{type:"text",label:"Name",autoComplete:"off",required:!0,...e.getFieldProps("name"),error:e.touched.name&&e.errors.name?e.errors.name:void 0}),a.jsx(f.Input,{type:"email",label:"Email address",autoComplete:"off",required:!0,...e.getFieldProps("email"),error:e.touched.email&&e.errors.email?e.errors.email:void 0}),a.jsx(j,{variant:"condensed",label:"Roles",items:p,selectedItems:p.filter(({value:i})=>e.values.roles.includes(i)),onItemsUpdate:i=>e.setFieldValue("roles",i.map(({value:u})=>u))}),a.jsx(q,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Send invite"})]})};export{Q as default};
