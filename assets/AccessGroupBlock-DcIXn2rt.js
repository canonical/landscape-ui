import{r as m,j as n,h}from"./index-DAhtk5GF.js";const x="_container_1rjk0_1",b="_checkboxColumn_1rjk0_7",_={container:x,checkboxColumn:b},f=({description:i,onPermissionChange:t,options:u,permissions:s,title:v})=>{const a=m.useMemo(()=>u.sort((e,l)=>e.values.view===""&&l.values.view!==""?-1:e.values.view!==""&&l.values.view===""?1:e.label.localeCompare(l.label)),[u]),d=e=>e.values.view===""||s.includes(u.filter(({label:l})=>l===e.label)[0].values.manage),c=(e,l)=>{s.includes(e.values[l])?t(s.filter(g=>g!==e.values[l])):t(l==="view"?[...s,e.values.view]:e.values.view!==""&&!s.includes(e.values.view)?[...s,e.values.manage,e.values.view]:[...s,e.values.manage])},r=m.useMemo(()=>[{accessor:"label",Header:"Property",Cell:({row:e})=>e.original.label.replace(/^\w/,l=>l.toUpperCase())},{accessor:"view",className:_.checkboxColumn,Header:"View",Cell:({row:e})=>n.jsx(h.CheckboxInput,{inline:!0,label:n.jsx("span",{className:"u-off-screen",children:`View ${e.original.label}`}),name:"permissions",value:e.original.values.view,disabled:d(e.original),checked:e.original.values.view===""||s.includes(e.original.values.view),onChange:()=>c(e.original,"view")})},{accessor:"manage",className:_.checkboxColumn,Header:"Manage",Cell:({row:e})=>n.jsx(h.CheckboxInput,{inline:!0,label:n.jsx("span",{className:"u-off-screen",children:`Manage ${e.original.label}`}),name:"permissions",value:e.original.values.manage,disabled:e.original.values.manage==="",checked:s.includes(e.original.values.manage),onChange:()=>c(e.original,"manage")})}],[a,s.length]);return n.jsxs("div",{className:_.container,children:[n.jsx("p",{className:"p-heading--5 u-no-margin--bottom",children:v}),n.jsx("p",{className:"p-text--small u-text--muted",children:i}),n.jsx(h.ModularTable,{columns:r,data:a,getHeaderProps:()=>({className:"u-text--muted"})})]})},j={"depth-1":"_depth-1_1twyj_1","depth-2":"_depth-2_1twyj_5","depth-3":"_depth-3_1twyj_9","depth-4":"_depth-4_1twyj_13","depth-5":"_depth-5_1twyj_17","depth-6":"_depth-6_1twyj_21","depth-7":"_depth-7_1twyj_25","depth-8":"_depth-8_1twyj_29","depth-9":"_depth-9_1twyj_33","depth-10":"_depth-10_1twyj_37"},k=({accessGroupOptions:i,accessGroups:t,onAccessGroupChange:u})=>{const s=(a,d)=>{if(t.includes(a.value)||t.some(c=>a.children.includes(c)))u(t.filter(c=>![a.value,...a.children,...a.parents].includes(c)));else{const c=[...t,a.value,...a.children];for(let r=a.depth-1;r>=0;r--){const e=d.filter(({depth:l})=>l===r).find(({value:l})=>a.parents.includes(l));if(e&&e.children.every(l=>c.includes(l)))c.push(e.value);else break}u(c)}},v=a=>a.some(d=>t.includes(d))&&a.some(d=>!t.includes(d));return n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"p-heading--5 u-no-margin--bottom",children:"Access Groups"}),i.map((a,d,c)=>n.jsx(h.CheckboxInput,{label:a.label,labelClassName:j[`depth-${a.depth}`],name:"access_groups",checked:t.includes(a.value),indeterminate:v(a.children),onChange:()=>s(a,c)},a.value))]})};export{k as A,f as P};
