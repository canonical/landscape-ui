import{e as h,l as S,f as x,j as i,g as c}from"./index-D_lFwcwK.js";import{u as y}from"./formik.esm-DoaukP0W.js";import{M as I}from"./MultiSelectField-CiO_vbqw.js";import{S as g}from"./SidePanelFormButtons-Bv9KliOY.js";import{u as j}from"./index-D8t-ucoH.js";import{u as A}from"./useRoles-tc-7ReWh.js";import{c as F,a as p,b as q}from"./index.esm-CU3WlQFm.js";import"./MultiSelectField.module-D1r8qo_i.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import"./PageMain-D14q--3H.js";import"./EmptyState-q7D_iuls.js";import"./useFetchOld-BZeAR-iF.js";import"./useMutation-CWIc5v1t.js";import"./useQuery-BcltX-SR.js";import"./TablePagination.module-DLVph1Z1.js";import"./TablePagination-La8XDya7.js";import"./usePageParams-BdQTRck1.js";import"./useConfirm-BKoWAsBy.js";import"./InfoItem-BF2oNJQH.js";import"./InfoItem.module-BZ3tYMsb.js";import"./moment-Cl4UOzQZ.js";const P=r=>F().shape({email:p().required("This field is required.").email("Please provide a valid email address").test({name:"unique-email",params:{invitations:r},test:(o,{createError:s,parent:n})=>{const a=r.find(({email:m})=>m===o);return!a||s({message:`${n.name??a.name} is already invited to this account`})}}),name:p().required("This field is required."),roles:q().of(p())}),$={email:"",name:"",roles:[]},V=()=>{const r=h(),{notify:o}=S(),{getInvitationsQuery:s,inviteAdministratorQuery:n}=j(),{getRolesQuery:a}=A(),{closeSidePanel:m}=x(),{data:l}=s(),{mutateAsync:v}=n,b=async t=>{try{await v(t),m(),o.success({title:"You sent an administrator invite",message:`${t.name} will receive an invitation email`})}catch(u){r(u)}},e=y({initialValues:$,validationSchema:P((l==null?void 0:l.data.results)??[]),onSubmit:b}),{data:d}=a(),f=(d==null?void 0:d.data.map(({name:t})=>({label:t,value:t})))??[];return i.jsxs(c.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[i.jsx("p",{children:"An invitation, sent by email, contains a link a prospective administrator can use to join this account."}),i.jsx(c.Input,{type:"text",label:"Name",autoComplete:"off",required:!0,...e.getFieldProps("name"),error:e.touched.name&&e.errors.name?e.errors.name:void 0}),i.jsx(c.Input,{type:"email",label:"Email address",autoComplete:"off",required:!0,...e.getFieldProps("email"),error:e.touched.email&&e.errors.email?e.errors.email:void 0}),i.jsx(I,{variant:"condensed",label:"Roles",items:f,selectedItems:f.filter(({value:t})=>e.values.roles.includes(t)),onItemsUpdate:t=>e.setFieldValue("roles",t.map(({value:u})=>u))}),i.jsx(g,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Send invite"})]})},W=V;export{W as default};
