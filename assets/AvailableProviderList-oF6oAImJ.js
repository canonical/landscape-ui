import{b as N,V as U,g as w,i as f,W as E,r as y,j as t,o as v,d as i,a3 as g}from"./index-BcwS0-pu.js";import{u as L}from"./AuthTemplate-Bss-zW4Z.js";const O="_list_wqdfd_1",P="_list__bordered_wqdfd_15",Q="_button_wqdfd_23",S="_icon_wqdfd_31",e={list:O,list__bordered:P,button:Q,icon:S},q=(r,m={})=>{const h=N(),[o]=U(),a=o.has("code")?"employee-access/auth/start":"auth/start",{data:s,isLoading:x}=w({queryKey:["oidcUrl",r],queryFn:async()=>h.get(a,{params:r}),...m,gcTime:0});return{oidcUrlLocation:s?.data.location,isOidcUrlQueryLoading:x}},B=({isStandaloneOidcEnabled:r,isUbuntuOneEnabled:m,oidcProviders:h})=>{const[o,_]=f.useState(0),[a]=U(),{invitationId:s}=L(),{getUbuntuOneUrlQuery:x}=E(),c=a.get("redirect-to"),j=a.has("external"),l=a.get("code"),n={};o>0&&(n.id=o),c&&(n.return_to=c),s&&(n.invitation_id=s),j&&(n.external=!0),l&&(n.attach_code=l);const{oidcUrlLocation:p}=q(n,{enabled:o!==0});f.useEffect(()=>{p&&y(p)},[p]);const d={};c&&(d.return_to=`${window.origin}${c}`),s&&(d.invitation_id=s),j&&(d.external=!0);const{data:b,refetch:I}=x(d,{enabled:!1});return f.useEffect(()=>{b&&y(b.data.location)},[b]),t.jsxs(t.Fragment,{children:[l&&t.jsx("p",{className:"u-no-margin--bottom u-text--muted",children:"Sign in with your Identity provider to complete the attachment process."}),t.jsxs("ul",{className:v(e.list,{[e.list__bordered]:!l}),children:[m&&t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:I,className:e.button,children:[t.jsx(i.Icon,{name:g("ubuntu-one"),className:e.icon}),t.jsx("span",{children:"Sign in with Ubuntu One"})]})}),r&&t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:()=>{_(-1)},className:e.button,children:[t.jsx(i.Icon,{name:g("standalone"),className:e.icon}),t.jsx("span",{children:"Sign in with Enterprise Login"})]})}),h.map(u=>t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:()=>{_(u.id)},className:e.button,children:[t.jsx(i.Icon,{name:g(u.provider),className:e.icon}),t.jsx("span",{children:`Sign in with ${u.name}`})]})},u.id))]})]})};export{B as A};
