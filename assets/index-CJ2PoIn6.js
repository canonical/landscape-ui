import{f,j as e,g as r,R as p,h as j,r as P,p as g,a as y}from"./index-Cgvo6fQq.js";import{P as I,a as N,b}from"./PageMain-CgsCzV83.js";import{S as m}from"./constants-BwCpyjq9.js";import A from"./index-Ch-19IT9.js";import{u as k}from"./useAlerts-Du44FwDN.js";import{E as C}from"./EmptyState-BsWnPxd1.js";import{u as L}from"./useInstances-BsLFQd9L.js";import"./useConfirm-CH1qaKO5.js";import"./useRoles-sIUGLpYl.js";import"./useFetchOld-CDdL40Ij.js";import"./useMutation-BlYl6rGT.js";import"./useQuery-BkysfzoD.js";import"./moment-Ca7bd7oO.js";const v="_listItem_5dsnu_1",E="_listItem__link_5dsnu_9",o={listItem:v,listItem__link:E},$=({alerts:l,pendingInstances:n})=>{const{setSidePanelContent:c}=f(),t=()=>{c("Review Pending Instances",e.jsx(P.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(A,{instances:n})}),"large")},a=l.map(s=>e.jsxs("div",{className:o.listItem,children:[e.jsx("i",{className:`p-icon--${m[s.alert_type].icon.color}`}),e.jsx(r.Link,{href:`${p}instances?status=${m[s.alert_type].filterValue}`,className:j("u-no-margin u-no-padding",o.listItem__link),children:s.summary})]},s.alert_type));return n.length>0&&a.push(e.jsxs("div",{className:o.listItem,children:[e.jsx("i",{className:`p-icon--${m.PendingComputers.icon.color}`}),e.jsxs(r.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:t,children:[e.jsx("span",{className:o.instancesNumber,children:n.length})," ","pending"," ",n.length!==1?"computers need ":"computer needs ","authorization"]})]})),e.jsx(r.List,{items:a})},S=()=>{const l=y(),{getAlertsSummaryQuery:n}=k(),{getPendingInstancesQuery:c}=L(),{data:t,isLoading:a}=n(),{data:s,isLoading:u}=c({},{enabled:!!(t!=null&&t.data.alerts_summary.find(i=>i.alert_type==="PendingComputersAlert"))}),d=(t==null?void 0:t.data.alerts_summary.filter(i=>i.alert_type!=="PendingComputersAlert"))||[],x=(s==null?void 0:s.data)||[],_=()=>(t==null?void 0:t.data.alerts_summary.find(h=>h.alert_type==="PendingComputersAlert"))?u:!1;return e.jsxs(I,{children:[e.jsx(N,{title:"Alerts"}),e.jsxs(b,{children:[a&&e.jsx(g,{}),!a&&d.length===0&&e.jsx(C,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[e.jsx(r.Button,{appearance:"positive",onClick:()=>l(`${p}settings/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!a&&!_()&&d.length>0&&e.jsx($,{alerts:d,pendingInstances:x})]})]})},Y=S;export{Y as default};
