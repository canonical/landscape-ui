import{f as n,t as c,v as l,o as s,a8 as m,z as d,j as i}from"./index-CNSDWj8Q.js";import{S as p}from"./SidePanel-ChyjtMJv.js";import{S as u}from"./ScriptProfileForm-CdAD-ysD.js";import"./AssociationBlock-B4LnXWNE.js";import"./MultiSelectField-CqoYdMk0.js";import"./useGetTags-B_HL7bdb.js";import"./index-6UOHovCk.js";import"./TableFilterChips-06YfpJdc.js";import"./TablePagination-CFXNvqsZ.js";import"./ScriptsTabs-DfoExKFg.js";import"./helpers-kPKhnyjI.js";import"./constants-CDnVvJTb.js";import"./NoData-6ZK9sV5u.js";import"./ResponsiveTable-BXalKviy.js";import"./StaticLink-BEYCGcPv.js";import"./TruncatedCell-BMum6DLZ.js";import"./Truncated-Dtg97i8C.js";import"./useExpandableRow-B4jhRgod.js";import"./useRoles-DYJzr0u4.js";import"./useFetchOld-BAAs34Op.js";import"./TextConfirmationModal-q88mH05g.js";import"./PageParamFilter-ChSwlZqZ.js";import"./TableFilter-2AKF5NjJ.js";import"./HeaderWithSearch-D2tNhOlz.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./index-CySvbr4l.js";import"./ProfileAssociatedInstancesLink-Neer6jGU.js";import"./SidePanelFormButtons-DIizKTix.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useGetInstances-rIFBd_bT.js";import"./InstancesPageActions-DL7_pmR1.js";import"./index-D-YBZSy_.js";import"./formikErrors-Bw8iTXYS.js";import"./ListTitle-BUruUKn1.js";import"./InfoGrid-3w5mqARw.js";import"./InfoItem-Bt7JBIPo.js";import"./ScriptDropdown-BDpvNfnn.js";import"./downshift.esm-DADdD-V8.js";const f=()=>{const r=n(),o=c(),{isPending:e,mutateAsync:t}=l({mutationFn:async a=>r.post("script-profiles",a),onSuccess:async()=>o.invalidateQueries({queryKey:["scriptProfiles"]})});return{isAddingScriptProfile:e,addScriptProfile:t}},_={all_computers:!1,interval:"",start_after:s().utc().format(m),tags:[],time_limit:300,timestamp:s().utc().format(m),title:"",trigger_type:"",username:"root",script:null},tt=()=>{const{notify:r}=d(),{addScriptProfile:o,isAddingScriptProfile:e}=f();return i.jsxs(i.Fragment,{children:[i.jsx(p.Header,{children:"Add script profile"}),i.jsx(p.Content,{children:i.jsx(u,{initialValues:_,onSubmit:async t=>{await o({all_computers:t.all_computers,script_id:t.script_id,tags:t.tags,time_limit:t.time_limit,title:t.title,trigger:t.trigger,username:t.username})},onSuccess:t=>{r.success({title:`You have successfully created ${t.title}`,message:"The profile has been created and associated to the defined instances."})},submitButtonText:"Add profile",submitting:e})})]})};export{tt as default};
