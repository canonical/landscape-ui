import{f as j,j as t,h as i,R as g,i as f,r as h,l as u,a as I}from"./index-BZncHbld.js";import{P,a as y,b}from"./PageMain-DZPiYS8t.js";import{S as d}from"./constants-C0eAoEXY.js";import k from"./index-Bom_S97p.js";import{u as L}from"./useAlerts-BM1ItUJ4.js";import{E as N}from"./EmptyState-WD5xiPA0.js";import{u as A}from"./useInstances-DlBpYpfg.js";import"./useConfirm-Q_YLVd4l.js";import"./useRoles-DVYPWMjO.js";import"./useMutation-C-a8eqzH.js";import"./useFetchOld-BIuxw0nI.js";import"./NoData-CnQp-2wz.js";import"./moment-DmQFvXgO.js";const S="_listItem_upezw_1",v="_listItem__link_upezw_9",p={listItem:S,listItem__link:v},C=({alerts:o,pendingInstances:a})=>{const{setSidePanelContent:r}=j(),e=()=>{r("Review Pending Instances",t.jsx(h.Suspense,{fallback:t.jsx(u,{}),children:t.jsx(k,{instances:a})}),"large")},l=o.map((n,c)=>{const s=d[n.alert_type]||d.Unknown;return t.jsxs("div",{className:p.listItem,children:[t.jsx(i.Icon,{name:`${s.icon.color??s.icon.gray}`}),s.alertType==="PendingComputersAlert"?t.jsxs(i.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:e,children:[`${a.length} pending `,a.length!==1?"computers need ":"computer needs ","authorization"]}):t.jsx(i.Link,{href:`${g}instances?status=${s.filterValue}`,className:f("u-no-margin u-no-padding",p.listItem__link),children:n.summary})]},s.alertType||c)});return t.jsx(i.List,{items:l})},E=()=>{const o=I(),{getAlertsSummaryQuery:a}=L(),{getPendingInstancesQuery:r}=A(),{data:e,isLoading:l}=a(),{data:n,isInitialLoading:c}=r(void 0,{enabled:!!(e!=null&&e.data.alerts_summary.find(_=>_.alert_type==="PendingComputersAlert"))}),s=(e==null?void 0:e.data.alerts_summary)||[],x=(n==null?void 0:n.data)||[],m=l||c;return t.jsxs(P,{children:[t.jsx(y,{title:"Alerts"}),t.jsxs(b,{children:[m&&t.jsx(u,{}),!m&&s.length===0&&t.jsx(N,{title:"No subscribed alerts found",icon:"connected",body:t.jsx("p",{children:"You are not subscribed to any alerts yet"}),cta:[t.jsx(i.Button,{appearance:"positive",onClick:()=>o(`${g}settings/alerts`,{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]}),!m&&s.length>0&&t.jsx(C,{alerts:s,pendingInstances:x})]})]})},Y=E;export{Y as default};
