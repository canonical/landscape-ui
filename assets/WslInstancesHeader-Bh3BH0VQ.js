const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BR145OOi.js","assets/index-Dg2qeAM1.js","assets/index-CQO7y1Gd.css","assets/FileInput-BJp6ygnI.js","assets/SidePanelFormButtons-eNiDcGbx.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/HeaderWithSearch-9LSyOtlV.js","assets/HeaderWithSearch-C2lwo0VI.css","assets/useInstances-BFfYcqEm.js"])))=>i.map(i=>d[i]);
import{m as j,j as n,E as W,n as y,r as c,p as C,$ as L,f as q,e as F,i as T,g as r,h as w,B as $,A as D,an as K,a6 as b,x as o}from"./index-Dg2qeAM1.js";import{H as B}from"./HeaderWithSearch-9LSyOtlV.js";import{u as P}from"./useInstances-BFfYcqEm.js";const k=c.lazy(()=>L(()=>import("./index-BR145OOi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),M=()=>{const{setSidePanelContent:e}=j(),s=()=>{e("Install new WSL instance",n.jsx(c.Suspense,{fallback:n.jsx(C,{}),children:n.jsx(k,{})}))};return n.jsx(W,{title:"No WSL Instances found",body:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),n.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[n.jsx(y.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},E=()=>{const e=q(),s=F(),l=T(),u=(t={},i={})=>w({queryKey:["wsl",t],queryFn:async()=>l.get("computers/wsl-hosts",{params:t}),...i}),h=r({mutationFn:async({parent_id:t,...i})=>l.post(`computers/${t}/children`,i),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),p=r({mutationFn:async t=>s.get("DeleteChildComputers",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),g=r({mutationFn:async t=>s.get("SetDefaultChildComputer",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),v=r({mutationFn:async t=>s.get("ShutdownHostComputer",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),f=r({mutationFn:async t=>s.get("StartChildComputers",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])}),d=r({mutationFn:async t=>s.get("StopChildComputers",{params:t}),onSuccess:async()=>Promise.all([e.invalidateQueries({queryKey:["wsl-hosts"]}),e.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:h,deleteChildInstancesQuery:p,getWslInstanceNamesQuery:(t,i={})=>w({queryKey:["wsl-instance-names"],queryFn:async()=>l.get("wsl-instance-names"),...i}),getWslHostsQuery:u,setDefaultChildInstanceQuery:g,shutdownHostInstanceQuery:v,startChildInstancesQuery:f,stopChildInstancesQuery:d}},I="_cta_hpksw_1",N={cta:I},O=c.lazy(async()=>L(()=>import("./index-BR145OOi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Y=({selectedInstances:e})=>{const[s,l]=c.useState(""),{notify:u}=$(),h=D(),{setSidePanelContent:p}=j(),{deleteChildInstancesQuery:g}=E(),{removeInstancesQuery:v}=P(),{mutateAsync:f,isPending:d}=g,{mutateAsync:x,isPending:t}=v,i=a=>{l(a)},m=()=>{l("")},S=async()=>{try{await f({computer_ids:e.map(({id:a})=>a)}),u.success({title:`You queued ${e.length} ${o(e.length,"instance")} to be deleted.`,message:`${e.length} ${o(e.length,"instance")} will be deleted.`})}catch(a){h(a)}finally{m()}},Q=async()=>{try{await x({computer_ids:e.map(({id:a})=>a)}),u.success({title:`You have successfully removed ${e.length} ${o(e.length,"instance")}.`,message:o(e.length,`${e.length} instance has been removed from Landscape. To manage it again, you will need to re-register it in Landscape.`,`${e.length} instances have been removed from Landscape. To manage them again, you will need to re-register them in Landscape.`)})}catch(a){h(a)}finally{m()}},_=()=>{p("Install new WSL instance",n.jsx(c.Suspense,{fallback:n.jsx(C,{}),children:n.jsx(O,{})}))};return n.jsxs(n.Fragment,{children:[n.jsx(B,{actions:n.jsxs("div",{className:N.cta,children:[n.jsx(y.Button,{type:"button",onClick:_,children:n.jsx("span",{children:"Create new instance"})}),n.jsx("div",{className:"p-segmented-control",children:n.jsxs("div",{className:"p-segmented-control__list",children:[n.jsx(y.Button,{type:"button",className:"p-segmented-control__button",disabled:e.length===0,onClick:()=>{i("delete")},children:"Delete instance"}),n.jsx(y.Button,{type:"button",className:"p-segmented-control__button",disabled:e.length===0,onClick:()=>{i("remove")},children:"Remove from Landscape"})]})})]})}),n.jsx(K,{filtersToDisplay:["search"]}),n.jsx(b,{isOpen:s==="remove",close:m,onConfirm:Q,title:`Remove ${o(e.length,"instance")} from Landscape`,confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:t,confirmButtonLoading:t,confirmationText:o(e.length,`remove ${e[0].title}`,"remove instances"),children:e.length!==1?n.jsx("p",{children:"This will remove the selected instances from Landscape. They will remain on the parent machine. You can re-register them to Landscape at any time."}):n.jsxs("p",{children:["This will remove the instance ",n.jsx("b",{children:e[0].title})," ","from Landscape. It will remain on the parent machine. You can re-register it to Landscape at any time."]})}),n.jsx(b,{isOpen:s==="delete",close:m,onConfirm:S,title:`Delete ${o(e.length,"instance")}`,confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:d,confirmButtonLoading:d,confirmationText:o(e.length,`delete ${e[0].title}`,"delete instances"),children:e.length!==1?n.jsx("p",{children:"This will permanently delete the selected instances from both the Windows host machine and Landscape."}):n.jsxs("p",{children:["This will permanently delete the instance"," ",n.jsx("b",{children:e[0].title})," from both the Windows host machine and Landscape."]})})]})};export{Y as W,M as a,E as u};
