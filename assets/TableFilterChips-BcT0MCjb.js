import{r as x,j as s,m as I,g as a}from"./index-BPx7bxy4.js";import{u as P}from"./usePageParams-DZkGelLG.js";const O=["accessGroups","availabilityZones","os","fromDate","status","tags","toDate","type"],F=n=>n?n.split(",").filter(o=>o.trim()!=="").map(o=>`'${o}'`):[],q=(n,o)=>{const l=o.replace(/^'|'$/g,""),c=n.split(","),t=c.indexOf(l);return t===-1?n:[...c.slice(0,t),...c.slice(t+1)].join(",")},j=(n,o)=>{var l;return((l=n==null?void 0:n.find(c=>c.value===o))==null?void 0:l.label)??o},z=({filtersToMonitor:n,search:o,query:l,...c})=>{const t={totalChipsToRenderCount:0};n.includes("query")?(t.areSearchQueryChipsRender=!!l,t.totalChipsToRenderCount+=l.trim()?l.split(",").length:0):n.includes("search")&&(t.isSearchChipRender=!!o,t.totalChipsToRenderCount+=Number(t.isSearchChipRender));for(const[R,g]of Object.entries(c)){const m=R;if(n.includes(m))if(Array.isArray(g)){const u=`are${m.replace(/^\w/,h=>h.toUpperCase())}ChipsRender`;t[u]=!!g.length,t.totalChipsToRenderCount+=g.length}else{const u=`is${m.replace(/^\w/,y=>y.toUpperCase())}ChipRender`,h=!!g;t[u]=h,t.totalChipsToRenderCount+=Number(h)}}return t},G="_container_6jjiy_1",K="_chipsContainer_6jjiy_8",M="_collapsed_6jjiy_17",Q="_clearAllButton_6jjiy_22",Z="_showLessButton_6jjiy_23",U="_showMoreButton_6jjiy_24",V="_clearAllIcon_6jjiy_39",C={container:G,chipsContainer:K,collapsed:M,clearAllButton:Q,showLessButton:Z,showMoreButton:U,clearAllIcon:V},W=({accessGroupOptions:n,availabilityZonesOptions:o,filtersToDisplay:l,osOptions:c,statusOptions:t,tagOptions:R,typeOptions:g})=>{const[m,u]=x.useState(!1),[h,y]=x.useState(0),k=l??O,_=x.useRef(null),{setPageParams:i,accessGroups:b,availabilityZones:D,fromDate:N,os:v,status:B,tags:S,toDate:w,type:A,search:T,query:$}=P(),L=()=>{i({accessGroups:[],availabilityZones:[],fromDate:"",os:"",status:"",tags:[],toDate:"",type:"",search:"",query:""}),u(!1)},E=()=>{if(!_.current)return;const e=[..._.current.querySelectorAll(".p-chip")];if(!e.length)return y(0);const f=e[0].offsetTop,p=e.filter(({offsetTop:d})=>d>f).length;p===0&&(u(!1),y(0)),y(p)};x.useEffect(()=>(window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}),[]),x.useEffect(()=>{E()},[b.length,D.length,N,h,v,B,S.length,w,A,T]);const r=z({accessGroups:b,availabilityZones:D,filtersToMonitor:k,fromDate:N,os:v,search:T,status:B,tags:S,toDate:w,type:A,query:$});return r.totalChipsToRenderCount===0?null:s.jsxs("div",{className:C.container,children:[s.jsxs("div",{ref:_,className:I(C.chipsContainer,{[C.collapsed]:!m}),children:[r.totalChipsToRenderCount>1&&s.jsxs(a.Button,{type:"button",appearance:"link",hasIcon:!0,className:C.clearAllButton,onClick:L,children:[s.jsx(a.Icon,{name:"close",className:C.clearAllIcon}),s.jsx("span",{children:"Clear all filters"})]}),r.areSearchQueryChipsRender&&F($).map((e,f)=>s.jsx(a.Chip,{value:`Query: ${e}`,onDismiss:()=>i({query:q($,e)}),className:"u-no-margin--bottom u-no-margin--right"},e+f)),r.isSearchChipRender&&s.jsx(a.Chip,{value:`Search: ${T}`,onDismiss:()=>i({search:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isStatusChipRender&&s.jsx(a.Chip,{value:`Status: ${j(t,B)}`,onDismiss:()=>i({status:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isOsChipRender&&s.jsx(a.Chip,{value:`OS: ${j(c,v)}`,onDismiss:()=>i({os:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.areAvailabilityZonesChipsRender&&D.map((e,f,p)=>s.jsx(a.Chip,{value:`Availability z.: ${j(o,e)}`,onDismiss:()=>i({availabilityZones:p.filter(d=>d!==e)}),className:"u-no-margin--bottom u-no-margin--right"},e)),r.areAccessGroupsChipsRender&&b.map((e,f,p)=>s.jsx(a.Chip,{value:`Access group: ${j(n,e)}`,onDismiss:()=>i({accessGroups:p.filter(d=>d!==e)}),className:"u-no-margin--bottom u-no-margin--right"},e)),r.areTagsChipsRender&&S.map((e,f,p)=>s.jsx(a.Chip,{value:`Tag: ${j(R,e)}`,onDismiss:()=>i({tags:p.filter(d=>d!==e)}),className:"u-no-margin--bottom u-no-margin--right"},e)),r.isFromDateChipRender&&s.jsx(a.Chip,{value:`From: ${N}`,onDismiss:()=>i({fromDate:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isToDateChipRender&&s.jsx(a.Chip,{value:`To: ${w}`,onDismiss:()=>i({toDate:""}),className:"u-no-margin--bottom u-no-margin--right"}),r.isTypeChipRender&&s.jsx(a.Chip,{value:`Type: ${j(g,A)}`,onDismiss:()=>i({type:""}),className:"u-no-margin--bottom u-no-margin--right"}),m&&s.jsx(a.Button,{type:"button",appearance:"link",className:C.showLessButton,onClick:()=>u(!1),children:s.jsx("span",{className:"u-text--muted",children:"Show less"})})]}),h>0&&!m&&s.jsx(a.Button,{type:"button",appearance:"link",className:C.showMoreButton,onClick:()=>u(!0),children:s.jsx("span",{className:"u-text--muted",children:`+${h}`})})]})};export{W as T};
