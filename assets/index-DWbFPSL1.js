import{c as A,r as s,_ as u,e as D,l as F,f as x,j as e,g as r,h,o as d}from"./index-DXs1haZl.js";import{P as R,a as L,b as Q}from"./PageMain-DhSBVwHg.js";import"./MultiSelectField.module-D1r8qo_i.js";import"./AssociationBlock.module-BSYf3X0u.js";import"./SidePanelFormButtons.module-DyBJG5lm.js";import{u as $}from"./useFetchOld-DWTVWZGf.js";import{u as P}from"./useMutation-CoMMCR6r.js";import{u as N}from"./useQuery-DPA9mHwu.js";import"./index.esm-FGh7VWBq.js";import{u as H}from"./useConfirm-C9Ai5vPv.js";import{u as M}from"./useRoles-CGNtMKpq.js";import{u as y}from"./usePageParams-BJqFm8Ol.js";import{E as O}from"./EmptyState-BYL1pVz2.js";import{H as T}from"./HeaderWithSearch-OzYSSkOw.js";function U(){const o=A(),n=$(),i=P({mutationFn:a=>n.get("CreateUpgradeProfile",{params:a}),onSuccess:()=>o.invalidateQueries(["upgradeProfiles"])}),g=P({mutationFn:a=>n.get("EditUpgradeProfile",{params:a}),onSuccess:()=>o.invalidateQueries(["upgradeProfiles"])}),p=P({mutationFn:a=>n.get("RemoveUpgradeProfile",{params:a}),onSuccess:()=>o.invalidateQueries(["upgradeProfiles"])});return{createUpgradeProfileQuery:i,editUpgradeProfileQuery:g,removeUpgradeProfileQuery:p,getUpgradeProfilesQuery:(a={},m={})=>N({queryKey:["upgradeProfiles",a],queryFn:()=>n.get("GetUpgradeProfiles",{params:a}),...m})}}const z="_container_1sotk_1",G="_radioGroup_1sotk_7",V="_timeContainer_1sotk_13",q="_time_1sotk_13",K="_timeInput_1sotk_27",W="_inputDescriptionAfter_1sotk_32",Y="_inputDescriptionBefore_1sotk_37",J="_colon_1sotk_42",X="_tooltip_1sotk_48",Z="_expiration_1sotk_52",ee="_windowInputContainer_1sotk_59",te="_windowInput_1sotk_59",oe="_windowInputDescription_1sotk_68",Be={container:z,radioGroup:G,timeContainer:V,time:q,timeInput:K,inputDescriptionAfter:W,inputDescriptionBefore:Y,colon:J,tooltip:X,expiration:Z,windowInputContainer:ee,windowInput:te,windowInputDescription:oe},ne="_truncated_1dm0b_1",re="_actions_1dm0b_7",ae="_toggleButton_1dm0b_11",se="_actionButton_1dm0b_16",l={truncated:ne,actions:re,toggleButton:ae,actionButton:se},ie=s.lazy(()=>u(()=>import("./index-s6t18NbN.js").then(o=>o.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),ce=s.lazy(()=>u(()=>import("./index-B-2TAwRg.js"),__vite__mapDeps([20,1,2,21,22,23,24,25,26,17,27,28,6,7,12,13,15,16,9,10,11,19,18,29,30,31,32,33,34,35]))),le=({profiles:o})=>{const{search:n}=y(),i=D(),{notify:g}=F(),{setSidePanelContent:p}=x(),{confirmModal:j,closeConfirmModal:a}=H(),{removeUpgradeProfileQuery:m}=U(),{getAccessGroupQuery:C}=M(),{data:f}=C(),_=(f==null?void 0:f.data.map(({name:t,title:c})=>({label:c,value:t})))??[],b=s.useMemo(()=>n?o.filter(t=>t.title.toLowerCase().includes(n.toLowerCase())):o,[o,n]),{mutateAsync:v}=m,w=async t=>{try{await v({name:t}),g.success({message:`Upgrade profile "${t}" removed successfully`,title:"Upgrade profile removed"})}catch(c){i(c)}finally{a()}},k=t=>{j({title:"Remove upgrade profile",body:`This will remove "${t}" profile.`,buttons:[e.jsx(r.Button,{type:"button",appearance:"negative",onClick:()=>w(t),"aria-label":`Remove ${t} profile`,children:"Remove"},"remove")]})},S=t=>{p(t.title,e.jsx(s.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(ce,{accessGroupOptions:_,profile:t})}))},I=t=>{p(`Edit "${t.title}" profile`,e.jsx(s.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(ie,{action:"edit",profile:t})}))},E=s.useMemo(()=>[{accessor:"name",Header:"Name",Cell:({row:{original:t}})=>e.jsx(r.Button,{type:"button",appearance:"link",className:"u-no-margin--bottom u-no-padding--top u-align-text--left",onClick:()=>S(t),children:t.title})},{accessor:"access_group",Header:"Access group",Cell:({row:{original:t}})=>{var c;return e.jsx(e.Fragment,{children:((c=_.find(({value:B})=>B===t.access_group))==null?void 0:c.label)??t.access_group})}},{accessor:"tags",className:l.truncated,Header:"Tags",Cell:({row:{original:t}})=>e.jsx(e.Fragment,{children:t.tags.join(", ")})},{accessor:"associated",Header:"Associated"},{accessor:"actions",className:h("u-align-text--right",l.actions),Header:"Actions",Cell:({row:{original:t}})=>e.jsxs(r.ContextualMenu,{position:"left",toggleClassName:l.toggleButton,toggleAppearance:"base",toggleLabel:e.jsx(r.Icon,{name:"contextual-menu","aria-hidden":!0}),toggleProps:{"aria-label":`${t.name} profile actions`},children:[e.jsxs(r.Button,{type:"button",appearance:"base",hasIcon:!0,className:h("u-no-margin--bottom u-no-margin--right",l.actionButton),onClick:()=>I(t),"aria-label":`Edit ${t.name} profile`,children:[e.jsx(r.Icon,{name:"edit"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(r.Button,{type:"button",appearance:"base",hasIcon:!0,className:h("u-no-margin--bottom u-no-margin--right",l.actionButton),onClick:()=>k(t.name),"aria-label":`Remove ${t.name} profile`,children:[e.jsx(r.Icon,{name:"delete"}),e.jsx("span",{children:"Remove"})]})]})}],[b,_.length]);return e.jsx(r.ModularTable,{columns:E,data:b,emptyMsg:`No profiles found with the search: "${n}"`})},de=s.lazy(()=>u(()=>import("./index-s6t18NbN.js").then(o=>o.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),pe=()=>{const{setSidePanelContent:o}=x(),n=()=>{o("Add upgrade profile",e.jsx(s.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(de,{action:"add"})}))};return e.jsx(O,{body:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any upgrade profiles yet."}),e.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage computers in Landscape"})]}),cta:[e.jsx(r.Button,{appearance:"positive",onClick:n,type:"button",children:"Add upgrade profile"},"table-add-new-mirror")],icon:"change-version",title:"Upgrade profiles not found"})},ue=()=>{const{setPageParams:o}=y(),n=i=>{o({search:i})};return e.jsx(T,{onSearch:n})},ge=()=>{const{getUpgradeProfilesQuery:o}=U(),{data:n,isLoading:i}=o();return e.jsxs(e.Fragment,{children:[i&&e.jsx(d,{}),!i&&(!n||!n.data.length)&&e.jsx(pe,{}),!i&&n&&n.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{}),e.jsx(le,{profiles:n.data})]})]})},me=s.lazy(()=>u(()=>import("./index-s6t18NbN.js").then(o=>o.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(o=>({default:o.SingleUpgradeProfileForm}))),fe=()=>{const{setSidePanelContent:o}=x(),n=()=>{o("Add upgrade profile",e.jsx(s.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(me,{action:"add"})}))};return e.jsxs(R,{children:[e.jsx(L,{title:"Upgrade profiles",actions:[e.jsx(r.Button,{type:"button",appearance:"positive",onClick:n,children:"Add upgrade profile"},"add")]}),e.jsx(Q,{children:e.jsx(ge,{})})]})},_e=fe,Ae=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{le as U,pe as a,ue as b,Be as c,Ae as i,U as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-s6t18NbN.js","assets/index-DXs1haZl.js","assets/index-DzLy8aaC.css","assets/formik.esm-CwYJvJSO.js","assets/AssociationBlock-bGiZRSmg.js","assets/MultiSelectField-26Sjy70t.js","assets/MultiSelectField.module-D1r8qo_i.js","assets/MultiSelectField-B2rqRhX9.css","assets/useInstances-B3fQT90b.js","assets/useFetchOld-DWTVWZGf.js","assets/useMutation-CoMMCR6r.js","assets/useQuery-DPA9mHwu.js","assets/AssociationBlock.module-BSYf3X0u.js","assets/AssociationBlock-Cb2Mr2ww.css","assets/SidePanelFormButtons-Dtg_vQ52.js","assets/SidePanelFormButtons.module-DyBJG5lm.js","assets/SidePanelFormButtons-CR46v8uL.css","assets/constants-dW6629jA.js","assets/useRoles-CGNtMKpq.js","assets/index.esm-FGh7VWBq.js","assets/index-B-2TAwRg.js","assets/InfoItem-BQPTGwVs.js","assets/InfoItem.module-BZ3tYMsb.js","assets/InfoItem-BbayMzTk.css","assets/NoData-BmTO_w1O.js","assets/useConfirm-C9Ai5vPv.js","assets/moment-Cl4UOzQZ.js","assets/PageMain-DhSBVwHg.js","assets/PageMain-DyI__TtH.css","assets/usePageParams-BJqFm8Ol.js","assets/EmptyState-BYL1pVz2.js","assets/EmptyState-BNXajmMK.css","assets/HeaderWithSearch-OzYSSkOw.js","assets/HeaderWithSearch.module-ByXjIdeN.js","assets/HeaderWithSearch-CCRO5bRP.css","assets/index-YvXtz6mj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
