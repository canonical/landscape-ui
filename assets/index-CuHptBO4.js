import{r as o,j as d,n as S}from"./index-Bwatsl1G.js";import{U}from"./UsnList-DBVL4g3Y.js";import{u as w}from"./usePackages-_kN5XwR-.js";import"./usePageParams-gxSf1nMa.js";import"./SelectAllButton-e9m9WCtN.js";import"./ExpandableTableFooter-TVak5fsg.js";import"./NoData-CcX6zdBS.js";import"./TablePagination-CYwNZA2E.js";import"./TablePaginationBase-Ds3XrZnG.js";import"./TruncatedCell-DWitkczO.js";import"./helpers-CEg62Tg7.js";import"./useFetchOld--qBGHGTA.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="75f0eb2b-d07f-4443-b408-d1e9bb0e224b",t._sentryDebugIdIdentifier="sentry-dbid-75f0eb2b-d07f-4443-b408-d1e9bb0e224b")}catch{}const A=({excludedUsns:t,instances:r,onExcludedUsnsChange:u})=>{const[i,p]=o.useState(0),[n,m]=o.useState([]),l=o.useRef(0),f=o.useRef(-1),{getUsnsQuery:b}=w(),{data:a,isLoading:c}=b({computer_ids:r.map(({id:e})=>e),show_packages:!1,limit:5,offset:i});o.useEffect(()=>{!a||i===f.current||(l.current=a.data.count,f.current=i,m(e=>[...e,...a.data.results]))},[a]);const g=e=>{u(n.filter(({usn:s})=>!e.includes(s)).map(({usn:s})=>s))},y=n.filter(({usn:e})=>!t.includes(e)).map(({usn:e})=>e),h=o.useMemo(()=>{const e=new Set(n.map(({usn:s})=>s));return t.length>0&&t.some(s=>!e.has(s))},[t.length,n]);return c&&!n.length?d.jsx(S,{}):d.jsx(U,{tableType:"expandable",onNextPageFetch:()=>p(e=>e+5),instances:r,isUsnsLoading:c,onSelectedUsnsChange:g,onSelectAllClick:()=>u([]),selectedUsns:y,showSelectAllButton:h,totalSelectedUsnCount:l.current-t.length,totalUsnCount:l.current,usns:n})};export{A as default};
