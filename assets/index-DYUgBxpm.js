const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-5VM0GJDX.js","assets/index-CmSMPezD.js","assets/index-mAgDtnB8.css","assets/useRoles-BTw0Yb4r.js","assets/index-CfXqLKNo.css"])))=>i.map(i=>d[i]);
import{s as _,ai as u,j as e,e as o,p as x,L as j,K as h,R as d,o as g,a as p,a1 as P,d as I,m as S,Y as A,aj as b,E as k}from"./index-CmSMPezD.js";import{P as f,a as v,b as E}from"./PageMain-BwmfPOT4.js";const L="_listItem_upezw_1",N="_listItem__link_upezw_9",m={listItem:L,listItem__link:N},R=g.lazy(()=>P(()=>import("./index-5VM0GJDX.js"),__vite__mapDeps([0,1,2,3,4]))),C=({alerts:a,pendingInstances:s})=>{const{setSidePanelContent:n}=_(),l=()=>{n("Review Pending Instances",e.jsx(g.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(R,{instances:s})}),"large")},r=a.map((i,c)=>{const t=u[i.alert_type]||u.Unknown;return e.jsxs("div",{className:m.listItem,children:[e.jsx(o.Icon,{name:`${t.icon.color??t.icon.gray}`}),t.alertType==="PendingComputersAlert"?e.jsxs(o.Button,{type:"button",appearance:"link",className:"u-no-margin u-no-padding",onClick:l,children:[`${s.length} pending `,x(s.length,"computer needs","computers need")," ","authorization"]}):e.jsx(j,{to:d.instances.root({status:t.filterValue}),className:h("u-no-margin u-no-padding",m.listItem__link),children:i.summary})]},t.alertType||c)});return e.jsx(o.List,{items:r})};function Q(){const a=I();return{getAlertsSummaryQuery:()=>S({queryKey:["alert","summary"],queryFn:async()=>a.get("alerts/summary")})}}const z=()=>{const a=A(),{getAlertsSummaryQuery:s}=Q(),{data:n,isLoading:l}=s(),r=n?.data.alerts_summary.some(y=>y.alert_type==="PendingComputersAlert"),{pendingInstances:i,isGettingPendingInstances:c}=b(void 0,{enabled:r}),t=n?.data.alerts_summary||[];return e.jsxs(f,{children:[e.jsx(v,{title:"Alerts"}),e.jsx(E,{children:l||r&&c?e.jsx(p,{}):t.length?e.jsx(C,{alerts:t,pendingInstances:i}):e.jsx(k,{title:"No subscribed alerts found",icon:"connected",body:e.jsx("p",{children:"You are not subscribed to any alerts yet."}),cta:[e.jsx(o.Button,{appearance:"positive",onClick:()=>a(d.account.alerts(),{replace:!0}),type:"button","aria-label":"Go to alerts page",children:"Go to alerts"},"go-to-alerts-page")]})})]})};export{z as default};
