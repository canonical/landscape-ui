import{V as d,I as S}from"./ScriptsTabs-BLMk7oHN.js";import{c as H,a as O,d as U,S as $,u as J,b as K}from"./ScriptsTabs-BLMk7oHN.js";import{p as f,q as x,n as b,s as g,j as i,d as r,t as a}from"./index-Cl3Ng_mk.js";import{S as h}from"./SidePanelFormButtons-DGYG3HWU.js";import{u as y,D as j}from"./DeliveryBlock-Bgk0PxMU.js";import"./index-n-EzgQ0S.js";import{S as F}from"./ScriptDropdown-Cvbb1NT3.js";import{default as W}from"./index-vOty-pXw.js";import"./TruncatedCell-KEreQk4I.js";import"./useRoles-CILegiw-.js";import"./HeaderWithSearch-CESmZ3W6.js";import"./SingleInstanceTabs.module-Cm1BYFZQ.js";import"./useExpandableRow-D0hstL1U.js";import"./SidePanelFormButtons.module-BuIu-Bem.js";import"./downshift.esm-BP4OWyFA.js";import"./CodeEditor-7d39xRIu.js";import"./ScriptFormAttachments-D7U-77ZG.js";import"./AttachmentFile-mfJZ3idO.js";const z=({parentAccessGroup:o,query:n})=>{const m=f(),{notify:u}=x(),{closeSidePanel:p}=b(),{runScript:c}=y(),t=g({initialValues:S,validationSchema:d,onSubmit:async e=>{try{await c({deliver_after:e.deliverImmediately?void 0:e.deliver_after,query:n,script_id:e.script_id,username:e.username}),p(),u.success({message:`"${e.script?.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(s){m(s)}}}),l=async e=>{if(await t.setFieldValue("script_id",e?.id??0),!t.values.username){const s=e?.username??"";await t.setFieldValue("username",s)}};return i.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[i.jsx(F,{script:t.values.script,setScript:async e=>{await t.setFieldValue("script",e),await l(e)},errorMessage:a(t,"script_id"),parentAccessGroup:o}),i.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:a(t,"username")})}),i.jsx(r.Col,{size:6,children:i.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:a(t,"time_limit")})})]}),i.jsx(j,{formik:t}),i.jsx(h,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{W as CreateScriptForm,z as RunInstanceScriptForm,F as ScriptDropdown,H as ScriptList,O as ScriptsContainer,U as ScriptsEmptyState,$ as ScriptsTabs,J as useGetScripts,K as useGetSingleScript};
