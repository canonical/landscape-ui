import{c as b,b as g,r as S,j as s,d as o}from"./index-CQs3wXys.js";import{u as f}from"./formik.esm-C_3GEhhV.js";import{u as x}from"./useInstances-A3J_BhkM.js";import{c as I,a as i}from"./index.esm-85kEx3I1.js";import{S as _}from"./SidePanelFormButtons-CTKwSU1t.js";import{u as h}from"./useRoles-DHn7bJnc.js";import"./useFetchOld-D-5JyUuM.js";import"./useMutation-D9dT1mhA.js";import"./useQuery-DrwXjJzc.js";import"./SidePanelFormButtons.module-CoxOjuX8.js";const E={access_group:"",comment:"",title:""},j=I().shape({access_group:i(),comment:i(),title:i()}),A=({instance:t})=>{const{closeSidePanel:m}=b(),n=g(),{getAccessGroupQuery:u}=h(),{editInstanceQuery:l}=x(),{mutateAsync:d}=l,e=f({initialValues:E,onSubmit:async a=>{try{await d({instanceId:t.id,...a})}catch(c){n(c)}finally{m()}},validationSchema:j});S.useEffect(()=>{t&&e.setValues({access_group:t.access_group,comment:t.comment,title:t.title})},[t]);const{data:r}=u(),p=(r==null?void 0:r.data.map(({name:a,title:c})=>({label:c,value:a})))??[];return s.jsxs(o.Form,{onSubmit:e.handleSubmit,className:"l-form",noValidate:!0,children:[s.jsx(o.Input,{label:"Title","aria-label":"Title",type:"text",required:!0,disabled:t.is_wsl_instance,...e.getFieldProps("title"),error:e.touched.title&&e.errors.title?e.errors.title:void 0}),s.jsx(o.Select,{label:"Access group",options:p,...e.getFieldProps("access_group"),error:e.touched.access_group&&e.errors.access_group?e.errors.access_group:void 0}),s.jsx(o.Textarea,{label:"Comment",rows:5,...e.getFieldProps("comment"),error:e.touched.comment&&e.errors.comment?e.errors.comment:void 0}),s.jsx(_,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Save changes"})]})},$=A;export{$ as default};
