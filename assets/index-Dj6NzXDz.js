import{q as l,i as S,k as h,n as x,t as b,j as s,d as m}from"./index-CF3EJ_Cz.js";import{S as f}from"./SidePanelFormButtons-C_rbNtMe.js";import{t as o}from"./tests-DFnZqbNV.js";import{c as g}from"./constants-CupZ-CJE.js";import"./SidePanelFormButtons.module-yv6Qz3cN.js";import"./useFetchOld-o-GL3QuT.js";import"./moment-C5S46NFB.js";import"./InfoItem-X8pvZsF_.js";import"./NoData-hFM3Gf6g.js";import"./index-euPK0U9Z.js";import"./moment-D6HwxFLP.js";import"./TablePagination-DFAFXbEN.js";import"./TablePagination.module-CgQ3jx4B.js";import"./usePageParams-EBcK59iH.js";import"./TableFilterChips-ror013U2.js";const v={name:""},V=({distribution:t,origin:a})=>{const n=l(),{closeSidePanel:u}=S(),{deriveSeriesQuery:p}=g(),{mutateAsync:c}=p,d=h().shape({name:x().required("This field is required").test({test:o.test,message:o.message}).test({params:{distribution:t},test:r=>!t.series.map(({name:i})=>i).includes(r),message:"It must be unique within the distribution."})}),e=b({validationSchema:d,initialValues:v,onSubmit:async r=>{try{await c({name:r.name,distribution:t.name,origin:a}),u()}catch(i){n(i)}}});return s.jsxs(m.Form,{onSubmit:e.handleSubmit,noValidate:!0,children:[s.jsx(m.Input,{type:"text",label:"Series name",required:!0,...e.getFieldProps("name"),error:e.touched.name&&e.errors.name?e.errors.name:void 0}),s.jsxs("p",{className:"u-text--muted",children:["You are deriving ",t.name,"/",a,"."]}),s.jsx(f,{submitButtonDisabled:e.isSubmitting,submitButtonText:"Derive series"})]})};export{V as default};
