import{j as s,ar as k,as as x,G as S,m as j,aw as I,D as b,a as v,at as y}from"./index-D0eLLMjG.js";import{P as N,a as A,b as T}from"./useUsns-DB1dB2EQ.js";import{H as _}from"./HeaderWithSearch-B_sdfFvF.js";import{u as F}from"./useSelection-RkRDKoJ7.js";import"./constants-D7yXN3Pr.js";const p=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],L="_actions_dhdem_1",E={actions:L},H=({handleClearSelection:a,selectedPackages:t})=>s.jsxs(s.Fragment,{children:[s.jsx(_,{afterSearch:a,actions:s.jsxs("div",{className:E.actions,children:[s.jsx(k,{options:p,label:"Status"}),s.jsx(N,{selectedPackages:t})]})}),s.jsx(x,{filtersToDisplay:["search","status"],statusOptions:p})]}),C=(a,t)=>{let e;return a===""?e="No packages found":a==="upgrade"?e="No available upgrades found":a==="security"?e="No available security upgrades found":a==="installed"?e="No installed packages found":e="No held packages found",e=t?`${e} with the search "${t}"`:e,`${e}.`},w=()=>{const{instanceId:a,childInstanceId:t}=S(),{status:e,search:n,currentPage:i,pageSize:c}=j(),{getInstancePackagesQuery:m}=A(),{state:h}=I(),P=Number(t??a),{data:r,isLoading:l}=m({instance_id:P,search:n,limit:c,offset:i*c-c,installed:!e||void 0,upgrade:e==="upgrade"||void 0,held:e==="held"||void 0,security:e==="security"||void 0}),o=r?.data.results??[],{selectedItems:d,setSelectedItems:u}=F(o,l),g=()=>{u([])};return s.jsxs(s.Fragment,{children:[!n&&!e&&i===1&&c===b&&l?s.jsx(v,{}):s.jsxs(s.Fragment,{children:[s.jsx(H,{selectedPackages:d,handleClearSelection:g}),s.jsx(T,{packages:o,packagesLoading:l,selectedPackages:d,onPackagesSelect:f=>{u(f)},emptyMsg:C(e,n),selectAll:!!h?.selectAll})]}),s.jsx(y,{handleClearSelection:g,totalItems:r?.data.count,currentItemCount:o.length})]})};export{w as default};
