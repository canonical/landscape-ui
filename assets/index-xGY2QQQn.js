import{f as n,v as c,w as l,o as s,ag as m,B as d,j as i}from"./index-Dfc97QGW.js";import{S as p}from"./SidePanel-BVCSOSpO.js";import{S as u}from"./ScriptProfileForm-jsud-xeu.js";import"./AssociationBlock-BvR_yeWx.js";import"./MultiSelectField-fcXogomg.js";import"./useGetTags-oA_gPXb8.js";import"./index-DyYA0Kdx.js";import"./TableFilterChips-DXWGZ6VK.js";import"./TablePagination-B0v8QAQr.js";import"./ScriptsTabs-BSK7sb4n.js";import"./helpers-BbXQOWxJ.js";import"./constants-BTpoIHxf.js";import"./NoData-DMN9LLPq.js";import"./ResponsiveTable-ViIMTRR6.js";import"./StaticLink-BNg3qc2M.js";import"./TruncatedCell-Cf7_euhM.js";import"./Truncated-D8EZCoK1.js";import"./useExpandableRow-DYtdXwcw.js";import"./useRoles-TXLG25Jr.js";import"./useFetchOld-BgGVMMmJ.js";import"./TextConfirmationModal-O9rtHEfo.js";import"./PageParamFilter-C5PJgjVf.js";import"./TableFilter-BmLRyeMD.js";import"./HeaderWithSearch-cCuZhEhs.js";import"./SingleInstanceTabs.module-DvhuGYYD.js";import"./index-DiSNWm9B.js";import"./ProfileAssociatedInstancesLink-CSFk2VcW.js";import"./SidePanelFormButtons-BdOP5SSP.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useGetInstances-Ccq0NH3v.js";import"./InstancesPageActions-Dns4Yse-.js";import"./index-S_kjB96R.js";import"./formikErrors-Bw8iTXYS.js";import"./ListTitle-DsIgCqjQ.js";import"./InfoGrid-CrJbMYy5.js";import"./InfoItem-DImpX37B.js";import"./ScriptDropdown-DJ8TKgp3.js";import"./useInfiniteQuery-Dl6Bz4vo.js";import"./downshift.esm-DGSOz4JI.js";const f=()=>{const r=n(),o=c(),{isPending:e,mutateAsync:t}=l({mutationFn:async a=>r.post("script-profiles",a),onSuccess:async()=>o.invalidateQueries({queryKey:["scriptProfiles"]})});return{isAddingScriptProfile:e,addScriptProfile:t}},_={all_computers:!1,interval:"",start_after:s().utc().format(m),tags:[],time_limit:300,timestamp:s().utc().format(m),title:"",trigger_type:"",username:"root",script:null},it=()=>{const{notify:r}=d(),{addScriptProfile:o,isAddingScriptProfile:e}=f();return i.jsxs(i.Fragment,{children:[i.jsx(p.Header,{children:"Add script profile"}),i.jsx(p.Content,{children:i.jsx(u,{initialValues:_,onSubmit:async t=>{await o({all_computers:t.all_computers,script_id:t.script_id,tags:t.tags,time_limit:t.time_limit,title:t.title,trigger:t.trigger,username:t.username})},onSuccess:t=>{r.success({title:`You have successfully created ${t.title}`,message:"The profile has been created and associated to the defined instances."})},submitButtonText:"Add profile",submitting:e})})]})};export{it as default};
