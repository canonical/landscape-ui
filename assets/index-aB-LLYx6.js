import{Y as g,f as h,Z as p,_ as x,t as _,R as n,$ as m,j as e,a0 as f,L as j}from"./index-_GBNEgML.js";const U="_container_1uszo_1",A={container:U},S=()=>{const[o]=g(),{redirectToExternalUrl:r,setAuthLoading:s,setUser:i}=h(),{getAuthStateWithUbuntuOneQuery:c}=p(),a=x(),{data:t,isLoading:l}=c({url:window.location.toString()},{enabled:o.size>0});return _.useEffect(()=>{if(!(!t||!("current_account"in t.data)))if(t.data.return_to?.external&&t.data.return_to.url)r(t.data.return_to.url,{replace:!0});else{if(s(!0),i(t.data),t.data.invitation_id){a(n.auth.invitation({secureId:t.data.invitation_id}),{replace:!0});return}if(t.data.accounts.length===0){a(n.auth.createAccount(),{replace:!0});return}const d=t.data.return_to?.url,u=new URL(d??m,location.origin);a(u.toString().replace(u.origin,""),{replace:!0})}},[t,r,a,s,i]),e.jsx("div",{className:A.container,children:l?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:f}),e.jsx(j,{to:n.auth.login(),className:"p-button",children:"Back to login"})]})})};export{S as default};
