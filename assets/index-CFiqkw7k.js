const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-VNhoMWQq.js","assets/index-DkIHWTfF.js","assets/index-CzVsEpc2.css","assets/useInstances-B5hmrkA3.js","assets/useFetchOld-KI2N6r1n.js","assets/InfoItem-mn2w1808.js","assets/InfoItem-C-lWh_lY.css","assets/WslInstancesHeader-C4f49h7y.js","assets/HeaderWithSearch-2uko5vG6.js","assets/HeaderWithSearch-DQybm8h_.css","assets/usePageParams-CETawvTJ.js","assets/WslInstancesHeader-C2N1H1qb.css","assets/useRoles-CoL0L3hj.js","assets/moment-D4pxJ0jH.js","assets/NoData-CZYP_gPp.js","assets/moment-C5S46NFB.js","assets/index-kzLSap3J.js","assets/TablePagination-Cq3TDXOG.js","assets/TablePagination.module-CgQ3jx4B.js","assets/TablePagination-DTa7xTwu.css","assets/SearchHelpPopup-rMvWL26G.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/index-BmoMXq9B.css","assets/index-dkdshLqf.css","assets/index-P7148uno.js","assets/index-CuwdzumK.css","assets/index-CNvrvwNx.js","assets/index-DSOofqg6.css","assets/index-DG5Ioowp.js","assets/useUsns-DPtOfCNy.js","assets/useUsns-CzsIYyKO.css","assets/index-Bsb7_DyO.css","assets/index-Edf7zBQ7.js","assets/index-Ba3g2K0q.js","assets/index-CqdKUoC3.css","assets/index-CYISwBpA.js","assets/index-DxzApC0N.css","assets/index-CO1zx6es.js","assets/SidePanelFormButtons-bYrAklMr.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/helpers-D5LoH3GI.js","assets/index-BAFRWw-h.css","assets/index-DtCr_t84.js","assets/UsnList-Duo3p2s4.js","assets/SelectAllButton-CTf4R2Wd.js","assets/ExpandableTableFooter-CCukCbpc.js","assets/ExpandableTableFooter-PHbaG9hU.css","assets/TruncatedCell-BqDsQSy2.js","assets/TruncatedCell-Wu3cG5-r.css","assets/helpers-B4Ea794_.js","assets/helpers-BWt8NEL_.css","assets/UsnList-BtkgdprT.css","assets/index-Bwv5eodB.css","assets/index-CnILDJNC.js","assets/index-D5vdZ5qS.css","assets/index-nP7ro0X1.js","assets/downshift.esm-Bz61A2kV.js","assets/index-CJQz2UGz.css"])))=>i.map(i=>d[i]);
import{a as h,j as t,E as f,h as p,R as _,r,_ as o,i as y,s as I,v as L,y as T}from"./index-DkIHWTfF.js";import{P as A,a as S,b as w}from"./PageMain-BPJSTfWp.js";import{u as O,a as R}from"./useUsns-DPtOfCNy.js";import{u as z}from"./useInstances-B5hmrkA3.js";import"./moment-D4pxJ0jH.js";import{u as D}from"./usePageParams-CETawvTJ.js";import"./useFetchOld-KI2N6r1n.js";const V=({childInstanceId:e,instanceId:i})=>{const s=h();return t.jsx(f,{title:"Instance not found",icon:"connected",body:t.jsxs("p",{className:"u-no-margin--bottom",children:[t.jsx("span",{children:"Seems like the instance with id = "}),t.jsx("code",{children:i}),t.jsx("span",{children:" doesn't "}),e?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"have a child instance with id = "}),t.jsx("code",{children:e})]}):t.jsx("span",{children:"exist"})]}),cta:[t.jsx(p.Button,{appearance:"positive",onClick:()=>s(`${_}instances`,{replace:!0}),type:"button","aria-label":"Go back",children:"Back to Instances page"},"go-back-to-instances-page"),t.jsx(p.Button,{onClick:()=>s(`${_}`,{replace:!0}),type:"button","aria-label":"Go back",children:"Home page"},"go-back-to-home-page")]})},$=[{label:"Info",id:"tab-link-info"},{label:"WSL",id:"tab-link-wsl"},{label:"Activities",id:"tab-link-activities"},{label:"Kernel",id:"tab-link-kernel"},{label:"Security issues",id:"tab-link-security-issues"},{label:"Packages",id:"tab-link-packages"},{label:"Snaps",id:"tab-link-snaps"},{label:"Processes",id:"tab-link-processes"},{label:"Ubuntu Pro",id:"tab-link-ubuntu-pro"},{label:"Users",id:"tab-link-users"},{label:"Hardware",id:"tab-link-hardware"}],B=({id:e,label:i,packageCount:s,packagesLoading:u,usnCount:c,usnLoading:d})=>e==="tab-link-packages"&&u||e==="tab-link-security-issues"&&d?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:i}),t.jsx(p.Spinner,{className:"u-no-margin--bottom u-no-padding--top"})]}):e==="tab-link-packages"&&s?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:i}),t.jsx(p.Badge,{value:s})]}):e==="tab-link-security-issues"&&c?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:i}),t.jsx(p.Badge,{value:c,isNegative:!0})]}):i,C=({activeTabId:e,instance:i,onActiveTabChange:s,packageCount:u,packagesLoading:c,usnCount:d,usnLoading:b})=>$.filter(({id:l})=>!i.distribution||/\d{1,2}\.\d{2}/.test(i.distribution)?l!=="tab-link-wsl":["tab-link-info","tab-link-wsl","tab-link-activities","tab-link-hardware"].includes(l)).map(({label:l,id:n})=>({label:B({label:l,id:n,packageCount:u,packagesLoading:c,usnCount:d,usnLoading:b}),id:n,role:"tab",active:n===e,onClick:()=>s(n)})),N="_tabPanel_1n8p7_1",U={tabPanel:N},F=r.lazy(()=>o(()=>import("./index-VNhoMWQq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),H=r.lazy(()=>o(()=>import("./index-P7148uno.js"),__vite__mapDeps([24,1,2,17,18,19,10,8,9,25]))),K=r.lazy(()=>o(()=>import("./index-CNvrvwNx.js"),__vite__mapDeps([26,1,2,5,6,27]))),Q=r.lazy(()=>o(()=>import("./index-DG5Ioowp.js"),__vite__mapDeps([28,1,2,17,18,19,10,29,4,30,8,9,31]))),G=r.lazy(()=>o(()=>import("./index-Edf7zBQ7.js"),__vite__mapDeps([32,1,2,16,13,17,18,19,10,20,21,4,14,22]))),W=r.lazy(()=>o(()=>import("./index-Ba3g2K0q.js").then(e=>e.i),__vite__mapDeps([33,1,2,17,18,19,10,5,6,15,14,34]))),M=r.lazy(()=>o(()=>import("./index-CYISwBpA.js"),__vite__mapDeps([35,1,2,7,3,4,8,9,10,11,36]))),q=r.lazy(()=>o(()=>import("./index-CO1zx6es.js").then(e=>e.i),__vite__mapDeps([37,1,2,17,18,19,10,38,39,40,41,8,9,14,42]))),J=r.lazy(()=>o(()=>import("./index-DtCr_t84.js"),__vite__mapDeps([43,1,2,13,10,29,4,30,44,45,46,47,14,17,18,19,48,49,50,51,52,53]))),X=r.lazy(()=>o(()=>import("./index-CnILDJNC.js"),__vite__mapDeps([54,1,2,5,6,14,15,55]))),Y=r.lazy(()=>o(()=>import("./index-nP7ro0X1.js"),__vite__mapDeps([56,1,2,17,18,19,10,5,6,15,38,39,40,41,57,14,8,9,58]))),Z=({instance:e,packageCount:i,packagesLoading:s,usnCount:u,usnLoading:c})=>{const{closeSidePanel:d}=y(),{tab:b,setPageParams:l}=D(),n=b?`tab-link-${b}`:"tab-link-info",k=C({activeTabId:n,instance:e,onActiveTabChange:a=>{l({tab:a.replace("tab-link-","")}),d()},packageCount:i,packagesLoading:s,usnCount:u,usnLoading:c});return t.jsxs(t.Fragment,{children:[t.jsx(p.Tabs,{listClassName:"u-no-margin--bottom",links:k}),t.jsx("div",{tabIndex:0,role:"tabpanel","aria-labelledby":n,className:U.tabPanel,children:t.jsxs(r.Suspense,{fallback:t.jsx(I,{}),children:[n==="tab-link-info"&&t.jsx(F,{instance:e}),n==="tab-link-wsl"&&t.jsx(M,{instance:e}),n==="tab-link-activities"&&t.jsx(G,{instanceId:e.id}),n==="tab-link-kernel"&&t.jsx(W,{instanceTitle:e.title}),n==="tab-link-security-issues"&&t.jsx(J,{instance:e}),n==="tab-link-packages"&&t.jsx(Q,{}),n==="tab-link-snaps"&&t.jsx(Y,{}),n==="tab-link-processes"&&t.jsx(H,{}),n==="tab-link-ubuntu-pro"&&t.jsx(X,{instance:e}),n==="tab-link-users"&&t.jsx(q,{}),n==="tab-link-hardware"&&t.jsx(K,{instance:e})]})})]})},tt=e=>{if(e)return e.parent?[{label:"Instances",path:`${_}instances`},{label:e.parent.title,path:`${_}instances/${e.parent.id}`},{label:e.title,current:!0}]:[{label:"Instances",path:`${_}instances`},{label:e.title,current:!0}]},ot=()=>{var x,P,j;const{instanceId:e,childInstanceId:i}=L(),{user:s}=T(),u=h(),{getSingleInstanceQuery:c}=z(),{getUsnsQuery:d}=O(),{getInstancePackagesQuery:b}=R(),l=r.useRef("");r.useEffect(()=>{s!=null&&s.current_account&&(l.current||(l.current=s.current_account),l.current!==s.current_account&&u(`${_}instances`,{replace:!0}))},[s==null?void 0:s.current_account]);const{data:n,isLoading:k}=c({instanceId:parseInt(i||(e??"")),with_annotations:!0,with_grouped_hardware:!0},{enabled:!!e&&(!l.current||l.current===(s==null?void 0:s.current_account))}),a=(n==null?void 0:n.data)??null,{data:g,isLoading:v}=d({computer_ids:a?[a.id]:[],limit:1},{enabled:!!(a!=null&&a.distribution)&&/\d{1,2}\.\d{2}/.test(a.distribution)&&(!i||((x=a.parent)==null?void 0:x.id)===parseInt(e??""))}),{data:m,isLoading:E}=b({available:!1,upgrade:!0,instance_id:a?a.id:0,limit:1},{enabled:!!(a!=null&&a.distribution)&&/\d{1,2}\.\d{2}/.test(a.distribution)&&(!i||((P=a.parent)==null?void 0:P.id)===parseInt(e??""))});return t.jsxs(A,{children:[t.jsx(S,{title:(a==null?void 0:a.title)??"",hideTitle:!0,breadcrumbs:tt(a)}),t.jsxs(w,{children:[k&&t.jsx(I,{}),!k&&(!a||i&&((j=a==null?void 0:a.parent)==null?void 0:j.id)!==parseInt(e??""))&&t.jsx(V,{childInstanceId:i,instanceId:e}),!k&&a&&(!i||a.parent&&a.parent.id===parseInt(e??""))&&t.jsx(Z,{instance:a,packageCount:a.distribution?m==null?void 0:m.data.count:0,packagesLoading:E,usnCount:a.distribution?g==null?void 0:g.data.count:0,usnLoading:v})]})]})};export{ot as default};
