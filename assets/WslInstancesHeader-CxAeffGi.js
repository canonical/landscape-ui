const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CR8r4802.js","assets/index-Co97hBNM.js","assets/index-D9DLLBWL.css","assets/FileInput-_QkBbZYk.js","assets/SidePanelFormButtons-PWYcDhRv.js","assets/SidePanelFormButtons.module-D2P5PizG.js","assets/SidePanelFormButtons-JM1G8Sq6.css","assets/useInstances-D3zH0jqk.js","assets/HeaderWithSearch-CAYSZhuV.js","assets/HeaderWithSearch-C2lwo0VI.css"])))=>i.map(i=>d[i]);
import{l as v,j as e,E as C,m as r,r as m,o as j,_ as b,f as S,e as _,i as Q,g as o,h as f,y as I,J as L,ag as W}from"./index-Co97hBNM.js";import{u as F}from"./useInstances-D3zH0jqk.js";import{H as T}from"./HeaderWithSearch-CAYSZhuV.js";const q=m.lazy(()=>b(()=>import("./index-CR8r4802.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),A=()=>{const{setSidePanelContent:n}=v(),s=()=>{n("Install new WSL instance",e.jsx(m.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(q,{})}))};return e.jsx(C,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(r.Button,{appearance:"positive",type:"button",onClick:s,children:"Install new WSL instance"},"install-new-instance-button")]})},P=()=>{const n=S(),s=_(),l=Q(),d=(t={},a={})=>f({queryKey:["wsl",t],queryFn:async()=>l.get("computers/wsl-hosts",{params:t}),...a}),h=o({mutationFn:async({parent_id:t,...a})=>l.post(`computers/${t}/children`,a),onSuccess:async()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),y=o({mutationFn:async t=>s.get("DeleteChildComputers",{params:t}),onSuccess:async()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),c=o({mutationFn:async t=>s.get("SetDefaultChildComputer",{params:t}),onSuccess:async()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),p=o({mutationFn:async t=>s.get("ShutdownHostComputer",{params:t}),onSuccess:async()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),u=o({mutationFn:async t=>s.get("StartChildComputers",{params:t}),onSuccess:async()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])}),g=o({mutationFn:async t=>s.get("StopChildComputers",{params:t}),onSuccess:async()=>Promise.all([n.invalidateQueries({queryKey:["wsl-hosts"]}),n.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:h,deleteChildInstancesQuery:y,getWslInstanceNamesQuery:(t,a={})=>f({queryKey:["wsl-instance-names"],queryFn:async()=>l.get("wsl-instance-names"),...a}),getWslHostsQuery:d,setDefaultChildInstanceQuery:c,shutdownHostInstanceQuery:p,startChildInstancesQuery:u,stopChildInstancesQuery:g}},D="_cta_hpksw_1",K={cta:D},B=m.lazy(async()=>b(()=>import("./index-CR8r4802.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),H=({selectedInstances:n})=>{const s=I(),{setSidePanelContent:l}=v(),{deleteChildInstancesQuery:d}=P(),{removeInstancesQuery:h}=F(),{mutateAsync:y,isPending:c}=d,{mutateAsync:p,isPending:u}=h,g=async()=>{try{await y({computer_ids:n.map(({id:i})=>i)})}catch(i){s(i)}},x=async()=>{try{await p({computer_ids:n.map(({id:i})=>i)})}catch(i){s(i)}},t=()=>{l("Install new WSL instance",e.jsx(m.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(B,{})}))},a=L({initialValues:{confirmationText:""},onSubmit:async()=>x()}),w=n.length===1?a.values.confirmationText!==`remove ${n[0].title}`:a.values.confirmationText!=="remove instances";return e.jsxs(e.Fragment,{children:[e.jsx(T,{actions:e.jsxs("div",{className:K.cta,children:[e.jsx(r.Button,{type:"button",onClick:t,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(r.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Delete instances":"Delete instance",children:n.length!==1?e.jsx("p",{children:"This will permanently delete selected instances from both the Windows host machine and Landscape."}):e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:n[0].title})," from both the Windows host machine and Landscape."]}),confirmButtonLabel:"Delete",confirmButtonAppearance:"negative",confirmButtonDisabled:c,confirmButtonLoading:c,onConfirm:g},children:"Delete instance"}),e.jsx(r.ConfirmationButton,{type:"button",className:"p-segmented-control__button",disabled:n.length===0,confirmationModalProps:{title:n.length!==1?"Remove instances from Landscape":"Remove instance from Landscape",children:e.jsxs(r.Form,{noValidate:!0,onSubmit:a.handleSubmit,children:[n.length!==1?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This will remove the selected instances from Landscape. They will remain on the parent machine. You can re-register them to Landscape at any time."}),e.jsxs("p",{children:["Type ",e.jsx("b",{children:"remove instances"})," to confirm."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["This will remove the instance"," ",e.jsx("b",{children:n[0].title})," from Landscape. It will remain on the parent machine. You can re-register it to Landscape at any time."]}),e.jsxs("p",{children:["Type ",e.jsxs("b",{children:["remove ",n[0].title]})," to confirm."]})]}),e.jsx(r.Input,{type:"text",...a.getFieldProps("confirmationText")})]}),confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:u||w,confirmButtonLoading:u,onConfirm:x},children:"Remove from Landscape"})]})})]})}),e.jsx(W,{filtersToDisplay:["search"]})]})};export{H as W,A as a,P as u};
