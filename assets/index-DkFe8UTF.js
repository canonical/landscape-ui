import{U as l,c as d,V as g,W as h,n as p,X as x,j as e,Y as m,L as _,R as j}from"./index-DjXnPsWV.js";const U="_container_1uszo_1",E={container:U},A=()=>{const[s]=l(),{redirectToExternalUrl:a,setAuthLoading:r,setUser:i}=d(),{getAuthStateWithUbuntuOneQuery:o}=g(),u=h(),{data:t,isLoading:c}=o({url:window.location.toString()},{enabled:s.size>0});return p.useEffect(()=>{if(!(!t||!("current_account"in t.data)))if(t.data.return_to?.external&&t.data.return_to.url)a(t.data.return_to.url,{replace:!0});else{r(!0),i(t.data);const n=new URL(t.data.return_to?.url??x,location.origin);u(n.toString().replace(n.origin,""),{replace:!0})}},[t,a]),e.jsx("div",{className:E.container,children:c?e.jsxs("div",{className:"u-align-text--center",children:[e.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[e.jsx("span",{className:"u-off-screen",children:"Loading..."}),e.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),e.jsx("span",{children:"Please wait while your request is being processed..."})]}):e.jsxs("div",{children:[e.jsx("p",{children:m}),e.jsx(_,{to:j.auth.login(),className:"p-button",children:"Back to login"})]})})};export{A as default};
