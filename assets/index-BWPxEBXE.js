import{h as f,k as h,p as y,q as S,f as A,s as _,j as i,g as u}from"./index-DBcAWqbv.js";import{u as I}from"./useRoles-C55bBKzX.js";import{S as x}from"./SidePanelFormButtons-C9nokfTn.js";import"./useFetchOld-gBQ8Xnh7.js";import"./SidePanelFormButtons.module-tJTvEwdD.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="30809c80-7a24-4693-b1ec-3778578104e0",e._sentryDebugIdIdentifier="sentry-dbid-30809c80-7a24-4693-b1ec-3778578104e0")}catch{}const D={access_group:""},$=f({access_group:h().required("This field is required")}),d=e=>{const s=(e==null?void 0:e.map(a=>({label:a.title,value:a.name})))??[];return s.unshift({label:"Select access group",value:""}),s},v=({selected:e})=>{const s=y(),{notify:a}=S(),{closeSidePanel:l}=A(),{getAccessGroupQuery:g,changeComputersAccessGroupQuery:m}=I(),{data:t}=g(),{mutateAsync:p}=m,b=d(t==null?void 0:t.data),o=_({initialValues:D,onSubmit:async({access_group:r})=>{var c;try{await p({access_group:r,query:e.map(({id:n})=>`id:${n}`).join(" OR ")}),l(),a.success({title:"Access group changed",message:`Access group for ${e.length>1?`${e.length} instances`:`"${e[0].title}" instance`} successfully changed to ${((c=b.find(({value:n})=>n===r))==null?void 0:c.label)??""}`})}catch(n){s(n)}},validationSchema:$});return i.jsxs(u.Form,{onSubmit:o.handleSubmit,noValidate:!0,children:[i.jsx(u.Select,{label:"Access group",required:!0,options:d(t==null?void 0:t.data),...o.getFieldProps("access_group"),error:o.touched.access_group&&o.errors.access_group?o.errors.access_group:void 0}),i.jsx(x,{submitButtonDisabled:o.isSubmitting,submitButtonText:"Assign"})]})};export{v as default};
