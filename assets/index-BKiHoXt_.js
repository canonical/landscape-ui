import{U as g,c as p,V as x,W as m,n as _,R as o,X as j,j as t,Y as A,L as E}from"./index-DjXnPsWV.js";const f="_container_1uszo_1",S={container:f},L=()=>{const[a]=g(),{redirectToExternalUrl:s,setAuthLoading:u,setUser:l}=p(),{getAuthStateWithOidcQuery:d}=x(),r=m(),n=a.get("code")??"",c=a.get("state")??"",{data:e,isLoading:h}=d({code:n,state:c},{enabled:!!n&&!!c});return _.useEffect(()=>{if(!(!e||!("current_account"in e.data))){if(e.data.attach_code){r(o.auth.attach(),{replace:!0,state:{success:!0}});return}if(e.data.return_to?.external&&e.data.return_to.url)s(e.data.return_to.url,{replace:!0});else{u(!0),l(e.data);const i=new URL(e.data.return_to?.url??j,location.origin);r(i.toString().replace(i.origin,""),{replace:!0})}}},[e,s]),t.jsx("div",{className:S.container,children:h?t.jsxs("div",{className:"u-align-text--center",children:[t.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[t.jsx("span",{className:"u-off-screen",children:"Loading..."}),t.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),t.jsx("span",{children:"Please wait while your request is being processed..."})]}):t.jsxs("div",{children:[t.jsx("p",{children:A}),t.jsx(E,{to:o.auth.login(),className:"p-button",children:"Back to login"})]})})};export{L as default};
