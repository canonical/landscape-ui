import{j as s,au as x,ao as j,R as S,f as v,av as I,q as b,aw as k}from"./index-DdDZs9iJ.js";import{P as y,a as N,b as T}from"./useUsns-GGyfxQaD.js";import{H as A}from"./HeaderWithSearch-CXY4tLKs.js";import{u as F}from"./useSelection-BM6rJq61.js";import"./ResponsiveButtons-D85C5YGV.js";const h=[{label:"All",value:""},{label:"Upgrades",value:"upgrade"},{label:"Security upgrades",value:"security"},{label:"Held",value:"held"}],L="_actions_dhdem_1",_={actions:L},H=({handleClearSelection:a,selectedPackages:t})=>s.jsxs(s.Fragment,{children:[s.jsx(A,{afterSearch:a,actions:s.jsxs("div",{className:_.actions,children:[s.jsx(x,{options:h,label:"Status"}),s.jsx(y,{selectedPackages:t})]})}),s.jsx(j,{filtersToDisplay:["search","status"],statusOptions:h})]}),C=(a,t)=>{let e;return a===""?e="No packages found":a==="upgrade"?e="No available upgrades found":a==="security"?e="No available security upgrades found":a==="installed"?e="No installed packages found":e="No held packages found",e=t?`${e} with the search "${t}"`:e,`${e}.`},U=()=>{const{instanceId:a,childInstanceId:t}=S(),{status:e,search:n,currentPage:d,pageSize:c}=v(),{getInstancePackagesQuery:p}=N(),{state:i}=I(),P=Number(t??a),{data:l,isLoading:o}=p({instance_id:P,search:n,limit:c,offset:d*c-c,installed:!e||void 0,upgrade:e==="upgrade"||void 0,held:e==="held"||void 0,security:e==="security"||void 0}),r=(l==null?void 0:l.data.results)??[],{selectedItems:u,setSelectedItems:g}=F(r,o),m=()=>{g([])};return s.jsxs(s.Fragment,{children:[!n&&!e&&d===1&&c===20&&o?s.jsx(b,{}):s.jsxs(s.Fragment,{children:[s.jsx(H,{selectedPackages:u,handleClearSelection:m}),s.jsx(T,{packages:r,packagesLoading:o,selectedPackages:u,onPackagesSelect:f=>{g(f)},emptyMsg:C(e,n),selectAll:!!(i!=null&&i.selectAll)})]}),s.jsx(k,{handleClearSelection:m,totalItems:l==null?void 0:l.data.count,currentItemCount:r.length})]})};export{U as default};
