const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BT1A_TdJ.js","assets/index-BhA4J3ko.js","assets/index-DWaf_ZwL.css","assets/index.esm-B8rBEOcC.js","assets/FileInput-CCUeGwmY.js","assets/SidePanelFormButtons-7JkHrlOz.js","assets/SidePanelFormButtons.module-yv6Qz3cN.js","assets/SidePanelFormButtons-CxAXtF89.css","assets/index-CiyUTYym.js","assets/moment-ik4I3HqO.js","assets/TablePagination-3ewSJTtu.js","assets/TablePagination.module-CgQ3jx4B.js","assets/TablePagination-DTa7xTwu.css","assets/usePageParams-Cx4Fh8yG.js","assets/EmptyState-C71tSpTG.js","assets/EmptyState-DUn4ZRie.css","assets/SearchHelpPopup-D3CRBmmX.js","assets/SearchHelpPopup-DNpzZE4f.css","assets/PageMain-BGNK0xG-.js","assets/PageMain-BIuYvhUI.css","assets/useMutation-D6hW2Vr2.js","assets/useFetchOld-5foHVBsZ.js","assets/useConfirm-CiNGk-W0.js","assets/NoData-JiBvrZwJ.js","assets/index-BmoMXq9B.css","assets/useInstances-C6H1-Kjx.js","assets/HeaderWithSearch-DjV1i2rB.js","assets/HeaderWithSearch-DQybm8h_.css"])))=>i.map(i=>d[i]);
import{r as d,_ as b,f as v,j as e,h as l,l as w,c as I,d as Q,e as W}from"./index-BhA4J3ko.js";import{E as L}from"./EmptyState-C71tSpTG.js";import{u as q}from"./useConfirm-CiNGk-W0.js";import{u as F}from"./useInstances-C6H1-Kjx.js";import{u as g}from"./PageMain-BGNK0xG-.js";import{u as r}from"./useMutation-D6hW2Vr2.js";import{u as P}from"./useFetchOld-5foHVBsZ.js";import{H as D}from"./HeaderWithSearch-DjV1i2rB.js";import{u as K}from"./usePageParams-Cx4Fh8yG.js";const k=d.lazy(()=>b(()=>import("./index-BT1A_TdJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),U=()=>{const{setSidePanelContent:t}=v(),a=()=>{t("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(k,{})}))};return e.jsx(L,{title:"No WSL Instances found",body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"This computer does not have any WSL instances installed. You can install a new instance by clicking the button below."}),e.jsx("a",{href:"https://ubuntu.com/desktop/wsl",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more about Ubuntu WSL"})]}),cta:[e.jsx(l.Button,{appearance:"positive",type:"button",onClick:a,children:e.jsx("span",{children:"Install new WSL instance"})},"install-new-instance-button")]})},E=()=>{const t=I(),a=P(),i=Q(),m=(s={},o={})=>g({queryKey:["wsl",s],queryFn:()=>i.get("computers/wsl-hosts",{params:s}),...o}),c=r({mutationFn:({parent_id:s,...o})=>i.post(`computers/${s}/children`,o),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),u=r({mutationFn:s=>a.get("DeleteChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),h=r({mutationFn:s=>a.get("SetDefaultChildComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),p=r({mutationFn:s=>a.get("ShutdownHostComputer",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),y=r({mutationFn:s=>a.get("StartChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])}),x=r({mutationFn:s=>a.get("StopChildComputers",{params:s}),onSuccess:()=>Promise.all([t.invalidateQueries({queryKey:["wsl-hosts"]}),t.invalidateQueries({queryKey:["instances"]})])});return{createChildInstanceQuery:c,deleteChildInstancesQuery:u,getWslInstanceNamesQuery:(s,o={})=>g({queryKey:["wsl-instance-names"],queryFn:()=>i.get("wsl-instance-names"),...o}),getWslHostsQuery:m,setDefaultChildInstanceQuery:h,shutdownHostInstanceQuery:p,startChildInstancesQuery:y,stopChildInstancesQuery:x}},R="_cta_hpksw_1",N={cta:R},T=d.lazy(()=>b(()=>import("./index-BT1A_TdJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),G=({selectedInstances:t})=>{const{setPageParams:a}=K(),i=W(),{setSidePanelContent:m}=v(),{confirmModal:c,closeConfirmModal:u}=q(),{deleteChildInstancesQuery:h}=E(),{removeInstancesQuery:p}=F(),{mutateAsync:y}=h,{mutateAsync:x}=p,j=async()=>{try{await y({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},s=()=>{const n=t.length!==1?"This will permanently delete selected instances from both the Windows host machine and Landscape.":e.jsxs("p",{children:["This will permanently delete the instance"," ",e.jsx("b",{children:t[0].title})," from both the Windows host machine and Landscape."]});c({title:t.length!==1?"Delete instances":"Delete instance",body:n,buttons:[e.jsx(l.Button,{appearance:"negative",onClick:j,children:"Delete"},"delete")]})},o=async()=>{try{await x({computer_ids:t.map(({id:n})=>n)})}catch(n){i(n)}finally{u()}},C=()=>{const n=t.length!==1?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["This will remove the selected instances from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"They will remain on the parent machine. You can re-register them to Landscape at any time."]})}):e.jsxs("p",{children:["This will remove the instance ",e.jsx("b",{children:t[0].title})," from Landscape.",e.jsx("br",{}),e.jsx("br",{}),"It will remain on the parent machine. You can re-register it to Landscape at any time."]}),_=t.length!==1?"Remove instances from Landscape":"Remove instance from Landscape";c({title:_,body:n,buttons:[e.jsx(l.Button,{appearance:"negative",onClick:o,children:"Remove"},"remove")]})},f=()=>{m("Install new WSL instance",e.jsx(d.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(T,{})}))},S=n=>{a({search:n})};return e.jsx(D,{onSearch:S,actions:e.jsxs("div",{className:N.cta,children:[e.jsx(l.Button,{type:"button",onClick:f,children:e.jsx("span",{children:"Create new instance"})}),e.jsx("div",{className:"p-segmented-control",children:e.jsxs("div",{className:"p-segmented-control__list",children:[e.jsx(l.Button,{type:"button",className:"p-segmented-control__button",onClick:s,disabled:t.length===0,children:e.jsx("span",{children:"Delete instance"})}),e.jsx(l.Button,{type:"button",className:"p-segmented-control__button",onClick:C,disabled:t.length===0,children:e.jsx("span",{children:"Remove from Landscape"})})]})})]})})};export{G as W,U as a,E as u};
