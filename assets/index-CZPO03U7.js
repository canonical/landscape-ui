const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-zXxcb2Hq.js","assets/index-DNI6uvRV.js","assets/index-BwHlIK4o.css","assets/index-CeFUEAKz.js","assets/SidePanelFormButtons-D5fqMSQT.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/useRoles-DKPPBOnk.js","assets/useFetchOld-HjUAte7_.js","assets/formikErrors-B-74_JGI.js","assets/tests-Qv91US6U.js","assets/constants-B8g-XdfO.js","assets/usePageParams-CWR0Fwx8.js","assets/NoData-n05VdZwW.js","assets/index-CX-ZX-r_.js","assets/TablePagination-DXfnTgHQ.js","assets/TablePaginationBase-CT2gxC4B.js","assets/TablePaginationBase-CJl3HN1X.css","assets/StatusFilter-z9qaOlXP.js","assets/TableFilter-Cvx0X4Gf.js","assets/TableFilter-DXBG6q86.css","assets/TableFilterChips-CZ0FoPkD.js","assets/TableFilterChips-CHqetGbX.css","assets/index-CRv_aeRB.css","assets/constants-DhXkDRlN.css","assets/index-D24xm6cs.js","assets/UdebCheckboxInput-Cc5ZTJ3K.js","assets/UdebCheckboxInput-mCgCMP_S.css","assets/useGPGKeys-Cjfhqldu.js","assets/PageMain-D3GJ5hOf.js","assets/PageMain--v5xNZ5p.css"])))=>i.map(i=>d[i]);
import{r as a,j as t,n as p,B as _,f as x,g as m,_ as h}from"./index-DNI6uvRV.js";import{P as D,a as j,b as k}from"./PageMain-D3GJ5hOf.js";import{u as C,b as P,c as S}from"./constants-B8g-XdfO.js";import"./usePageParams-CWR0Fwx8.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new n.Error().stack;o&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[o]="55f85585-6dc4-44b4-a0d4-8000293bdfc5",n._sentryDebugIdIdentifier="sentry-dbid-55f85585-6dc4-44b4-a0d4-8000293bdfc5")}catch{}const L=1e3,A=({onDistributionsLengthChange:n})=>{const[o,l]=a.useState([]),{getDistributionsQuery:c}=C(),{data:u,isLoading:g}=c({include_latest_sync:!0},{refetchInterval:o.length?L:void 0}),s=(u==null?void 0:u.data)??[];if(a.useEffect(()=>{n(s.length)},[s.length]),a.useEffect(()=>{var i,e;for(const d of o){const b=(e=(i=s.find(({name:r})=>r===d.distributionName))==null?void 0:i.series.find(({name:r})=>r===d.seriesName))==null?void 0:e.pockets.find(({name:r})=>r===d.pocketName);!b||b.mode!=="mirror"&&b.mode!=="pull"||b.last_sync_status==="in progress"||l(r=>r.filter(({distributionName:y})=>y!==d.distributionName))}},[s]),g)return t.jsx(p,{});if(!s.length)return t.jsx(P,{});const f=i=>{l(e=>[...e,i])};return t.jsx(t.Fragment,{children:s.map(i=>t.jsx(S,{distribution:i,syncPocketRefAdd:f,syncPocketRefs:o},i.name))})},E=a.lazy(()=>h(()=>import("./index-zXxcb2Hq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.NewDistributionForm}))),w=a.lazy(()=>h(()=>import("./index-zXxcb2Hq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.NewSeriesForm}))),N=()=>{const[n,o]=a.useState(0),l=_("(min-width: 620px)"),{setSidePanelContent:c}=x(),s=[{label:"Add distribution",ariaLabel:"Add distribution",onClick:()=>{c("Add distribution",t.jsx(a.Suspense,{fallback:t.jsx(p,{}),children:t.jsx(E,{})}))},disabled:!1,appearance:void 0},{label:"Add mirror",ariaLabel:"Add mirror",onClick:()=>{c("Add new mirror",t.jsx(a.Suspense,{fallback:t.jsx(p,{}),children:t.jsx(w,{})}))},disabled:n===0,appearance:"positive"}],f=s.map(e=>t.jsx(m.Button,{type:"button",className:"u-no-margin--right","aria-label":e.ariaLabel,onMouseDown:d=>d.preventDefault(),appearance:e.appearance,disabled:e.disabled,onClick:e.onClick,children:e.label},`${e.label}-button`)),i=s.map(e=>({children:e.label,"aria-label":e.ariaLabel,onClick:e.onClick,disabled:e.disabled}));return t.jsxs(D,{children:[t.jsx(j,{title:"Repository Mirrors",actions:l?f:[t.jsx(m.ContextualMenu,{hasToggleIcon:!0,toggleLabel:"Actions",toggleClassName:"u-no-margin--bottom",links:i},"menu")]}),t.jsx(k,{children:t.jsx(A,{onDistributionsLengthChange:e=>o(e)})})]})},T=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}));export{A as D,T as i};
