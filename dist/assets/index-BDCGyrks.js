import{p as g,J as S,i as u,z as x,B as h,y as I,C as j,j as i,d}from"./index-Dfc97QGW.js";import{M as F}from"./MultiSelectField-fcXogomg.js";import{S as A}from"./SidePanelFormButtons-BdOP5SSP.js";import{u as q}from"./index-Bt9m-Cqm.js";import{u as R}from"./useRoles-TXLG25Jr.js";import{g as p}from"./formikErrors-Bw8iTXYS.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./PageMain-LS0GxKmV.js";import"./useFetchOld-BgGVMMmJ.js";import"./TablePagination-B0v8QAQr.js";import"./TableFilterChips-DXWGZ6VK.js";import"./constants-BTpoIHxf.js";import"./InfoGrid-CrJbMYy5.js";import"./InfoItem-DImpX37B.js";import"./NoData-DMN9LLPq.js";import"./Truncated-D8EZCoK1.js";import"./ResponsiveTable-ViIMTRR6.js";import"./HeaderWithSearch-cCuZhEhs.js";const P=s=>g().shape({email:u().required("This field is required.").email("Please provide a valid email address").test({name:"unique-email",params:{invitations:s},test:(r,{createError:o,parent:n})=>{const a=s.find(({email:m})=>m===r);return!a||o({message:`${n.name??a.name} is already invited to this account`})}}),name:u().required("This field is required."),roles:S().of(u())}),E={email:"",name:"",roles:[]},G=()=>{const s=x(),{notify:r}=h(),{getInvitationsQuery:o,inviteAdministratorQuery:n}=q(),{getRolesQuery:a}=R(),{closeSidePanel:m}=I(),{data:f}=o(),{mutateAsync:v}=n,b=async e=>{try{await v(e),m(),r.success({title:"You sent an administrator invite",message:`${e.name} will receive an invitation email`})}catch(l){s(l)}},t=j({initialValues:E,validationSchema:P(f?.data.results??[]),onSubmit:b}),{data:y}=a(),c=y?.data.map(({name:e})=>({label:e,value:e}))??[];return i.jsxs(d.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[i.jsx("p",{children:"An invitation, sent by email, contains a link a prospective administrator can use to join this account."}),i.jsx(d.Input,{type:"text",label:"Name",autoComplete:"off",required:!0,...t.getFieldProps("name"),error:p(t,"name")}),i.jsx(d.Input,{type:"email",label:"Email address",autoComplete:"off",required:!0,...t.getFieldProps("email"),error:p(t,"email")}),i.jsx(F,{variant:"condensed",label:"Roles",items:c,selectedItems:c.filter(({value:e})=>t.values.roles.includes(e)),onItemsUpdate:e=>t.setFieldValue("roles",e.map(({value:l})=>l))}),i.jsx(A,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Send invite"})]})};export{G as default};
