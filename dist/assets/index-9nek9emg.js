import{O as d,P as h,u as p,a as m,V as x,r as f,R as a,S as g,j as s,T as E,L as P,U as _}from"./index-DYykpNVa.js";import{u as S}from"./useGetStandaloneAccount-CiU34UlJ.js";import"./constants-Dv8X6nUd.js";import"./constants-bgRhIL50.js";const j="_container_1uszo_1",v={container:j},w=()=>{const[u]=d(),t=h(),{safeRedirect:n,setUser:i}=p(),{isSelfHosted:r,isSaas:c}=m(),{accountExists:o}=S(),{authData:e,isLoading:l}=x(window.location.toString(),u.size>0);return f.useEffect(()=>{if(!(!e||!("current_account"in e))){if(i(e),e.invitation_id){t(a.auth.invitation({secureId:e.invitation_id}),{replace:!0});return}if(e.accounts.length===0){c&&window.location.hostname===_||r&&!o?t(a.auth.createAccount(),{replace:!0}):t(a.auth.noAccess(),{replace:!0});return}n(e.return_to?.url??g,{external:e.return_to?.external??!1,replace:!0})}},[e,t,n,i,r,o,c]),s.jsx("div",{className:v.container,children:l?s.jsxs("div",{className:"u-align-text--center",children:[s.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[s.jsx("span",{className:"u-off-screen",children:"Loading..."}),s.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),s.jsx("span",{children:"Please wait while your request is being processed..."})]}):s.jsxs("div",{children:[s.jsx("p",{children:E}),s.jsx(P,{to:a.auth.login(),className:"p-button",children:"Back to login"})]})})};export{w as default};
