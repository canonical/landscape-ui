import{O as p,u as m,a as x,P as f,Q as g,r as _,R as a,S as E,j as s,T as P,L as A,U as j}from"./index-Dfc97QGW.js";import{u as v}from"./useGetStandaloneAccount-B0Fk5bPi.js";import"./constants-B5lchh6A.js";import"./constants-D5S_Jdc8.js";const S="_container_1uszo_1",N={container:S},w=()=>{const[n]=p(),{safeRedirect:i,setUser:c}=m(),{isSelfHosted:r,isSaas:o}=x(),{accountExists:u}=v(),t=f(),l=n.get("code")??"",d=n.get("state")??"",{authData:e,isLoading:h}=g({code:l,state:d},!!l&&!!d);return _.useEffect(()=>{if(!(!e||!("current_account"in e))){if(e.attach_code){t(a.auth.attach(),{replace:!0,state:{success:!0}});return}if(c(e),e.invitation_id){t(a.auth.invitation({secureId:e.invitation_id}),{replace:!0});return}if(e.accounts.length===0){o&&window.location.hostname===j||r&&!u?t(a.auth.createAccount(),{replace:!0}):t(a.auth.noAccess(),{replace:!0});return}i(e.return_to?.url??E,{external:e.return_to?.external??!1,replace:!0})}},[e,t,i,c,r,u,o]),s.jsx("div",{className:N.container,children:h?s.jsxs("div",{className:"u-align-text--center",children:[s.jsxs("span",{role:"status",style:{marginRight:"1rem"},children:[s.jsx("span",{className:"u-off-screen",children:"Loading..."}),s.jsx("i",{className:"p-icon--spinner u-animation--spin","aria-hidden":!0})]}),s.jsx("span",{children:"Please wait while your request is being processed..."})]}):s.jsxs("div",{children:[s.jsx("p",{children:P}),s.jsx(A,{to:a.auth.login(),className:"p-button",children:"Back to login"})]})})};export{w as default};
