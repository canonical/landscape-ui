import{f as v,O as U,c as w,r as m,a8 as L,h as I,a9 as O,j as t,d as i,_ as j,I as E}from"./index-DYykpNVa.js";const q=(r,_={})=>{const h=v(),[a]=U(),x=a.has("code")?"employee-access/auth/start":"auth/start",{data:b,isLoading:o}=w({queryKey:["oidcUrl",r],queryFn:async()=>h.get(x,{params:r}),..._,gcTime:0});return{oidcUrlLocation:b?.data.location,isOidcUrlQueryLoading:o}},S="_list_wqdfd_1",P="_list__bordered_wqdfd_15",$="_button_wqdfd_23",F="_icon_wqdfd_31",e={list:S,list__bordered:P,button:$,icon:F},B=({isStandaloneOidcEnabled:r,isUbuntuOneEnabled:_,oidcProviders:h})=>{const[a,p]=m.useState(0),[x,b]=m.useState(!1),[o]=U(),{invitationId:n}=L(),u=o.get("redirect-to"),y=o.has("external"),l=o.get("code"),s={};a>0&&(s.id=a),u&&(s.return_to=u),n&&(s.invitation_id=n,s.return_to=`/accept-invitation/${n}`),y&&(s.external=!0),l&&(s.attach_code=l);const{oidcUrlLocation:f}=q(s,{enabled:a!==0});m.useEffect(()=>{f&&I(f)},[f]);const c={};u&&(c.return_to=`${window.origin}${u}`),n&&(c.invitation_id=n,c.return_to=`/accept-invitation/${n}`),y&&(c.external=!0);const{location:g,isLoading:N}=O(c,x);return m.useEffect(()=>{g&&I(g)},[g]),t.jsxs(t.Fragment,{children:[l&&t.jsx("p",{className:"u-no-margin--bottom u-text--muted",children:"Sign in with your Identity provider to complete the attachment process."}),t.jsxs("ul",{className:E(e.list,{[e.list__bordered]:!l}),children:[_&&t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,disabled:N,onClick:()=>{b(!0)},className:e.button,children:[t.jsx(i.Icon,{name:j("ubuntu-one"),className:e.icon}),t.jsx("span",{children:"Sign in with Ubuntu One"})]})}),r&&t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:()=>{p(-1)},className:e.button,children:[t.jsx(i.Icon,{name:j("standalone"),className:e.icon}),t.jsx("span",{children:"Sign in with Enterprise Login"})]})}),h.map(d=>t.jsx("li",{className:"p-list__item",children:t.jsxs(i.Button,{type:"button",hasIcon:!0,onClick:()=>{p(d.id)},className:e.button,children:[t.jsx(i.Icon,{name:j(d.provider),className:e.icon}),t.jsx("span",{children:`Sign in with ${d.name}`})]})},d.id))]})]})};export{B as A};
