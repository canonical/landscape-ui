import{ac as x,z as A,y as D,C as _,p as f,i as a,j as s,d as i}from"./index-Dfc97QGW.js";import{S as h}from"./SidePanelFormButtons-BdOP5SSP.js";import{u as y}from"./useRoles-TXLG25Jr.js";import{g as u}from"./formikErrors-Bw8iTXYS.js";import{t as n}from"./tests-DFnZqbNV.js";import{u as F}from"./constants-BOGKJCKf.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./useFetchOld-BgGVMMmJ.js";import"./constants-BTpoIHxf.js";import"./NoData-DMN9LLPq.js";import"./index-S_kjB96R.js";import"./ResponsiveTable-ViIMTRR6.js";import"./TablePagination-B0v8QAQr.js";import"./TableFilterChips-DXWGZ6VK.js";import"./PageParamFilter-C5PJgjVf.js";import"./TableFilter-BmLRyeMD.js";const E={name:"",access_group:x},v=()=>{const m=A(),{closeSidePanel:c}=D(),{createDistributionQuery:p,getDistributionsQuery:l}=F(),{getAccessGroupQuery:d}=y(),{mutateAsync:b}=p,{data:{data:g}={data:[]}}=d(),S=g.map(e=>({label:e.title,value:e.name})),{data:o}=l({include_latest_sync:!0}),t=_({initialValues:E,validationSchema:f().shape({name:a().required("This field is required.").test({test:n.test,message:n.message}).test({params:{getDistributionsResponse:o},test:e=>!(o?.data??[]).some(({name:r})=>r==e),message:"It must be unique within the account."}),access_group:a()}),onSubmit:async e=>{try{await b(e),c()}catch(r){m(r)}}});return s.jsxs(i.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[s.jsx(i.Input,{type:"text",label:"Distribution name",required:!0,...t.getFieldProps("name"),error:u(t,"name")}),s.jsx(i.Select,{label:"Access group",options:S,...t.getFieldProps("access_group"),error:u(t,"access_group")}),s.jsx(h,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Add distribution"})]})};export{v as default};
