const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DXcYdkzn.js","assets/index-DYykpNVa.js","assets/index-hef1aQzf.css","assets/SidePanelFormButtons-Aj5ThB2m.js","assets/SidePanelFormButtons.module-CcPyiogC.js","assets/SidePanelFormButtons-DP4HE5AU.css","assets/formikErrors-Bw8iTXYS.js","assets/AssociationBlock-Bs5is6Zl.js","assets/MultiSelectField-85mhFA5_.js","assets/MultiSelectField-GyNA33om.css","assets/useGetTags-BbkSXw8M.js","assets/AssociationBlock-vsPH8fvb.css","assets/useRoles-CK1OAvut.js","assets/useFetchOld-BGD2hIpr.js","assets/constants-DA4Q1L0X.js","assets/constants-CXofZZ4i.js","assets/NoData-CT6SeJUX.js","assets/index-C2TKYmcI.js","assets/ResponsiveTable-C-8YbfBJ.js","assets/ResponsiveTable-Czda4kFo.css","assets/TablePagination-CIA4CRba.js","assets/TableFilterChips-DLH4XQ-H.js","assets/TableFilterChips-BnP8uMWM.css","assets/TablePagination-DZURD2KR.css","assets/PageParamFilter-LH49uHXA.js","assets/TableFilter-C7yTBfOe.js","assets/TableFilter-B85Stwni.css","assets/index-DzMlcK9Q.css","assets/constants-BnrFFkRy.css","assets/useAPTSources-B02isbP0.js","assets/TextConfirmationModal-DuGXYB1S.js","assets/TextConfirmationModal-I9pZGO8V.css","assets/index-BimGfo9_.css"])))=>i.map(i=>d[i]);
import{y as d,j as o,d as b,r,e as f,$ as m,v as g,f as j,w as y,c as Q,z as A,B as F,g as S,ab as _}from"./index-DYykpNVa.js";import{T as E}from"./TextConfirmationModal-DuGXYB1S.js";import{u as T}from"./useFetchOld-BGD2hIpr.js";const C=r.lazy(()=>m(()=>import("./index-DXcYdkzn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),O=()=>{const{setSidePanelContent:e}=d(),s=()=>{e("Add repository profile",o.jsx(r.Suspense,{fallback:o.jsx(f,{}),children:o.jsx(C,{action:"add"})}))};return o.jsx(b.Button,{appearance:"positive",onClick:s,type:"button",children:"Add repository profile"},"add")};function $(){const e=g(),s=j(),n=T(),a=(t={},i={})=>Q({queryKey:["repositoryProfiles",t],queryFn:async()=>s.get("repositoryprofiles",{params:t}),...i}),l=y({mutationFn:async t=>s.post("repositoryprofiles",t),onSuccess:async()=>{e.invalidateQueries({queryKey:["aptSources"],refetchType:"all"}),e.invalidateQueries({queryKey:["repositoryProfiles"]})}}),c=y({mutationFn:async({name:t,...i})=>s.put(`repositoryprofiles/${t}`,i),onSuccess:async()=>{e.invalidateQueries({queryKey:["aptSources"],refetchType:"all"}),e.invalidateQueries({queryKey:["repositoryProfiles"]})}}),u=y({mutationKey:["repositoryProfiles"],mutationFn:async t=>n.get("RemoveRepositoryProfile",{params:t}),onSuccess:async()=>{e.invalidateQueries({queryKey:["aptSources"],refetchType:"all"}),e.invalidateQueries({queryKey:["repositoryProfiles"]})}});return{getRepositoryProfilesQuery:a,createRepositoryProfileQuery:l,editRepositoryProfileQuery:c,removeRepositoryProfileQuery:u}}const q=r.lazy(async()=>m(()=>import("./index-DXcYdkzn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),k=({profile:e})=>{const s=A(),{notify:n}=F(),{setSidePanelContent:a}=d(),{removeRepositoryProfileQuery:l}=$(),{value:c,setTrue:u,setFalse:t}=S(),{mutateAsync:i,isPending:p}=l,v=()=>{a(`Edit ${e.title}`,o.jsx(r.Suspense,{fallback:o.jsx(f,{}),children:o.jsx(q,{action:"edit",profile:e})}))},P=async()=>{try{await i({name:e.name}),n.success({message:`Repository profile "${e.title}" removed successfully`,title:"Repository profile removed"})}catch(x){s(x)}finally{t()}},R=[{icon:"edit",label:"Edit","aria-label":`Edit "${e.title}" profile`,onClick:v}],h=[{icon:"delete",label:"Remove","aria-label":`Remove "${e.title}" repository profile`,onClick:u}];return o.jsxs(o.Fragment,{children:[o.jsx(_,{toggleAriaLabel:`${e.title} profile actions`,actions:R,destructiveActions:h}),o.jsx(E,{isOpen:c,confirmationText:`remove ${e.title}`,title:"Remove repository profile",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:p,confirmButtonLoading:p,onConfirm:P,close:t,children:o.jsxs("p",{children:['This will remove "',e.title,'" profile. This action is'," ",o.jsx("b",{children:"irreversible"}),"."]})})]})};export{k as R,O as a,$ as u};
