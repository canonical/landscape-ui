import{V as d,I as S}from"./ScriptsTabs-BSK7sb4n.js";import{b as ot,a as mt,c as at,S as pt,u as nt,d as ut}from"./ScriptsTabs-BSK7sb4n.js";import{S as f}from"./ScriptDropdown-DJ8TKgp3.js";import{u as lt}from"./ScriptDropdown-DJ8TKgp3.js";import{z as x,B as b,y as g,C as y,j as e,d as r}from"./index-Dfc97QGW.js";import{S as _}from"./SidePanelFormButtons-BdOP5SSP.js";import{u as h}from"./useRunScript-Yt_xBd8E.js";import{g as o}from"./formikErrors-Bw8iTXYS.js";import{D as j}from"./DeliveryBlock-FX2F7SvQ.js";import"./helpers-BbXQOWxJ.js";import"./index-DiSNWm9B.js";import{default as St}from"./index-hYwEtP4E.js";import"./TablePagination-B0v8QAQr.js";import"./TableFilterChips-DXWGZ6VK.js";import"./constants-BTpoIHxf.js";import"./NoData-DMN9LLPq.js";import"./ResponsiveTable-ViIMTRR6.js";import"./StaticLink-BNg3qc2M.js";import"./TruncatedCell-Cf7_euhM.js";import"./Truncated-D8EZCoK1.js";import"./useExpandableRow-DYtdXwcw.js";import"./useRoles-TXLG25Jr.js";import"./useFetchOld-BgGVMMmJ.js";import"./TextConfirmationModal-O9rtHEfo.js";import"./PageParamFilter-C5PJgjVf.js";import"./TableFilter-BmLRyeMD.js";import"./HeaderWithSearch-cCuZhEhs.js";import"./SingleInstanceTabs.module-DvhuGYYD.js";import"./useInfiniteQuery-Dl6Bz4vo.js";import"./downshift.esm-DGSOz4JI.js";import"./SidePanelFormButtons.module-CcPyiogC.js";import"./RadioGroup-DkbRD5zc.js";import"./CodeEditor-HNBBpJH4.js";import"./ScriptFormAttachments-8WXYDIyH.js";import"./AttachmentFile-DaL_KzgH.js";const et=({parentAccessGroup:m,query:a})=>{const p=x(),{notify:n}=b(),{closeSidePanel:u}=g(),{runScript:c}=h(),t=y({initialValues:S,validationSchema:d,onSubmit:async i=>{try{await c({deliver_after:i.deliver_immediately?void 0:i.deliver_after,query:a,script_id:i.script_id,time_limit:i.time_limit,username:i.username}),u(),n.success({message:`"${i.script?.title}" script queued to execute successfully`,title:"Script execution queued"})}catch(s){p(s)}}}),l=async i=>{if(await t.setFieldValue("script_id",i?.id??0),!t.values.username){const s=i?.username??"";await t.setFieldValue("username",s)}};return e.jsxs(r.Form,{onSubmit:t.handleSubmit,noValidate:!0,children:[e.jsx(f,{script:t.values.script,setScript:async i=>{await t.setFieldValue("script",i),await l(i)},errorMessage:o(t,"script_id"),parentAccessGroup:m}),e.jsxs(r.Row,{className:"u-no-padding--left u-no-padding--right",children:[e.jsx(r.Col,{size:6,children:e.jsx(r.Input,{type:"text",label:"Run as user",autoComplete:"off",required:!0,...t.getFieldProps("username"),error:o(t,"username")})}),e.jsx(r.Col,{size:6,children:e.jsx(r.Input,{type:"text",label:"Time limit (seconds)",autoComplete:"off",required:!0,...t.getFieldProps("time_limit"),error:o(t,"time_limit")})})]}),e.jsx(j,{formik:t}),e.jsx(_,{submitButtonDisabled:t.isSubmitting,submitButtonText:"Run script"})]})};export{St as CreateScriptForm,et as RunInstanceScriptForm,f as ScriptDropdown,ot as ScriptList,mt as ScriptsContainer,at as ScriptsEmptyState,pt as ScriptsTabs,nt as useGetScripts,lt as useGetScriptsInfinite,ut as useGetSingleScript};
